david@GaViD:~/David/git/OSCIED$ juju debug-log
2013-07-01 11:15:47,016 WARNING ssl-hostname-verification is disabled for this environment
2013-07-01 11:15:47,016 WARNING EC2 API calls encrypted but not authenticated
2013-07-01 11:15:47,016 WARNING S3 API calls encrypted but not authenticated
2013-07-01 11:15:47,016 WARNING Ubuntu Cloud Image lookups encrypted but not authenticated
2013-07-01 11:15:47,017 INFO Connecting to environment...
The authenticity of host 'ec2-54-234-202-169.compute-1.amazonaws.com (54.234.202.169)' can't be established.
ECDSA key fingerprint is 0a:d8:ed:23:e8:3e:7f:90:61:6e:9c:e2:07:4b:55:7a.
Are you sure you want to continue connecting (yes/no)? yes
2013-07-01 11:18:56,246 INFO Connected to environment.
2013-07-01 11:18:56,246 INFO Enabling distributed debug log.
2013-07-01 11:18:56,451 INFO Tailing logs - Ctrl-C to stop.
2013-07-01 11:22:45,502 Machine:2: juju.agents.machine INFO: Machine agent started id:2
2013-07-01 11:22:45,508 Machine:2: juju.agents.machine DEBUG: Units changed old:set([]) new:set(['oscied-webui/0'])
2013-07-01 11:22:45,508 Machine:2: juju.agents.machine DEBUG: Starting service unit: oscied-webui/0 ...
2013-07-01 11:22:45,541 Machine:2: unit.deploy DEBUG: Downloading charm local:raring/oscied-webui-3 to /var/lib/juju/charms
2013-07-01 11:22:46,597 Machine:1: juju.agents.machine INFO: Machine agent started id:1
2013-07-01 11:22:46,603 Machine:1: juju.agents.machine DEBUG: Units changed old:set([]) new:set(['oscied-orchestra/0'])
2013-07-01 11:22:46,603 Machine:1: juju.agents.machine DEBUG: Starting service unit: oscied-orchestra/0 ...
2013-07-01 11:22:46,631 Machine:1: unit.deploy DEBUG: Downloading charm local:raring/oscied-orchestra-7 to /var/lib/juju/charms
2013-07-01 11:22:46,757 Machine:1: unit.deploy DEBUG: Using <juju.machine.unit.UnitMachineDeployment object at 0x1bb90d0> for oscied-orchestra/0 in /var/lib/juju
2013-07-01 11:22:46,758 Machine:1: unit.deploy DEBUG: Starting service unit oscied-orchestra/0...
2013-07-01 11:22:47,495 Machine:1: unit.deploy INFO: Started service unit oscied-orchestra/0
2013-07-01 11:22:47,535 Machine:2: unit.deploy DEBUG: Using <juju.machine.unit.UnitMachineDeployment object at 0x2886190> for oscied-webui/0 in /var/lib/juju
2013-07-01 11:22:47,536 Machine:2: unit.deploy DEBUG: Starting service unit oscied-webui/0...
2013-07-01 11:22:48,482 unit:oscied-webui/0: hook.executor DEBUG: started
2013-07-01 11:22:48,495 unit:oscied-webui/0: statemachine DEBUG: unitworkflowstate: transition install (None -> installed) {}
2013-07-01 11:22:48,496 unit:oscied-webui/0: statemachine DEBUG: unitworkflowstate:  execute action do_install
2013-07-01 11:22:48,553 unit:oscied-webui/0: juju.state.hook DEBUG: Ignoring partially constructed relation: api:7
2013-07-01 11:22:48,552 Machine:2: unit.deploy INFO: Started service unit oscied-webui/0
2013-07-01 11:22:48,570 unit:oscied-webui/0: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:4
2013-07-01 11:22:48,570 unit:oscied-webui/0: hook.output DEBUG: Cached relation hook contexts: []
2013-07-01 11:22:48,581 unit:oscied-webui/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-webui-0/charm/hooks/install
2013-07-01 11:22:48,607 unit:oscied-webui/0: hook.output INFO: Install OSCIED Library

2013-07-01 11:22:50,484 unit:oscied-orchestra/0: hook.executor DEBUG: started
2013-07-01 11:22:50,491 unit:oscied-orchestra/0: statemachine DEBUG: unitworkflowstate: transition install (None -> installed) {}
2013-07-01 11:22:50,492 unit:oscied-orchestra/0: statemachine DEBUG: unitworkflowstate:  execute action do_install
2013-07-01 11:22:50,535 unit:oscied-orchestra/0: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:3
2013-07-01 11:22:50,555 unit:oscied-orchestra/0: juju.state.hook DEBUG: Ignoring partially constructed relation: publisher:6
2013-07-01 11:22:50,559 unit:oscied-orchestra/0: juju.state.hook DEBUG: Ignoring partially constructed relation: api:7
2013-07-01 11:22:50,584 unit:oscied-orchestra/0: juju.state.hook DEBUG: Ignoring partially constructed relation: transform:5
2013-07-01 11:22:50,584 unit:oscied-orchestra/0: hook.output DEBUG: Cached relation hook contexts: []
2013-07-01 11:22:50,600 unit:oscied-orchestra/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-orchestra-0/charm/hooks/install
2013-07-01 11:22:50,626 unit:oscied-orchestra/0: hook.output INFO: Install OSCIED Library

Extracting templates from packages: 73%ui/0: hook.output INFO: 
Extracting templates from packages: 100%i/0: hook.output INFO: 

Extracting templates from packages: 73%hestra/0: hook.output INFO: 
Extracting templates from packages: 100%estra/0: hook.output INFO: 

2013-07-01 11:23:17,467 Machine:3: juju.agents.machine INFO: Machine agent started id:3
2013-07-01 11:23:17,472 Machine:3: juju.agents.machine DEBUG: Units changed old:set([]) new:set(['oscied-storage/0'])
2013-07-01 11:23:17,473 Machine:3: juju.agents.machine DEBUG: Starting service unit: oscied-storage/0 ...
2013-07-01 11:23:17,521 Machine:3: unit.deploy DEBUG: Downloading charm local:raring/oscied-storage-14 to /var/lib/juju/charms
2013-07-01 11:23:17,655 Machine:3: unit.deploy DEBUG: Using <juju.machine.unit.UnitMachineDeployment object at 0x259e0d0> for oscied-storage/0 in /var/lib/juju
2013-07-01 11:23:17,656 Machine:3: unit.deploy DEBUG: Starting service unit oscied-storage/0...
2013-07-01 11:23:18,405 Machine:3: unit.deploy INFO: Started service unit oscied-storage/0
2013-07-01 11:23:18,575 Machine:4: juju.agents.machine INFO: Machine agent started id:4
2013-07-01 11:23:18,581 Machine:4: juju.agents.machine DEBUG: Units changed old:set([]) new:set(['oscied-transform/0'])
2013-07-01 11:23:18,581 Machine:4: juju.agents.machine DEBUG: Starting service unit: oscied-transform/0 ...
2013-07-01 11:23:18,605 Machine:4: unit.deploy DEBUG: Downloading charm local:raring/oscied-transform-7 to /var/lib/juju/charms
2013-07-01 11:23:19,340 unit:oscied-storage/0: hook.executor DEBUG: started
2013-07-01 11:23:19,346 unit:oscied-storage/0: statemachine DEBUG: unitworkflowstate: transition install (None -> installed) {}
2013-07-01 11:23:19,347 unit:oscied-storage/0: statemachine DEBUG: unitworkflowstate:  execute action do_install
2013-07-01 11:23:19,396 unit:oscied-storage/0: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:2
2013-07-01 11:23:19,431 unit:oscied-storage/0: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:3
2013-07-01 11:23:19,434 unit:oscied-storage/0: juju.state.hook DEBUG: Ignoring partially constructed relation: peer:0
2013-07-01 11:23:19,438 unit:oscied-storage/0: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:1
2013-07-01 11:23:19,441 unit:oscied-storage/0: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:4
2013-07-01 11:23:19,442 unit:oscied-storage/0: hook.output DEBUG: Cached relation hook contexts: []
2013-07-01 11:23:19,462 unit:oscied-storage/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-0/charm/hooks/install
2013-07-01 11:23:19,487 unit:oscied-storage/0: hook.output INFO: Install OSCIED Library

2013-07-01 11:23:20,437 Machine:4: unit.deploy DEBUG: Using <juju.machine.unit.UnitMachineDeployment object at 0x1bce110> for oscied-transform/0 in /var/lib/juju
2013-07-01 11:23:20,437 Machine:4: unit.deploy DEBUG: Starting service unit oscied-transform/0...
2013-07-01 11:23:21,138 unit:oscied-transform/0: hook.executor DEBUG: started
2013-07-01 11:23:21,150 unit:oscied-transform/0: statemachine DEBUG: unitworkflowstate: transition install (None -> installed) {}
2013-07-01 11:23:21,150 unit:oscied-transform/0: statemachine DEBUG: unitworkflowstate:  execute action do_install
2013-07-01 11:23:21,187 unit:oscied-transform/0: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:1
2013-07-01 11:23:21,190 unit:oscied-transform/0: juju.state.hook DEBUG: Ignoring partially constructed relation: transform:5
2013-07-01 11:23:21,190 unit:oscied-transform/0: hook.output DEBUG: Cached relation hook contexts: []
2013-07-01 11:23:21,202 unit:oscied-transform/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-transform-0/charm/hooks/install
2013-07-01 11:23:21,199 Machine:4: unit.deploy INFO: Started service unit oscied-transform/0
2013-07-01 11:23:21,227 unit:oscied-transform/0: hook.output INFO: Install OSCIED Library

2013-07-01 11:23:26,396 Machine:5: juju.agents.machine INFO: Machine agent started id:5
2013-07-01 11:23:26,401 Machine:5: juju.agents.machine DEBUG: Units changed old:set([]) new:set(['oscied-publisher/0'])
2013-07-01 11:23:26,401 Machine:5: juju.agents.machine DEBUG: Starting service unit: oscied-publisher/0 ...
2013-07-01 11:23:26,449 Machine:5: unit.deploy DEBUG: Downloading charm local:raring/oscied-publisher-6 to /var/lib/juju/charms
2013-07-01 11:23:26,613 Machine:5: unit.deploy DEBUG: Using <juju.machine.unit.UnitMachineDeployment object at 0x2d36110> for oscied-publisher/0 in /var/lib/juju
2013-07-01 11:23:26,613 Machine:5: unit.deploy DEBUG: Starting service unit oscied-publisher/0...
Extracting templates from packages: 73%nsform/0: hook.output INFO: 
Extracting templates from packages: 100%sform/0: hook.output INFO: 

2013-07-01 11:23:27,326 unit:oscied-publisher/0: hook.executor DEBUG: started
2013-07-01 11:23:27,337 unit:oscied-publisher/0: statemachine DEBUG: unitworkflowstate: transition install (None -> installed) {}
2013-07-01 11:23:27,340 unit:oscied-publisher/0: statemachine DEBUG: unitworkflowstate:  execute action do_install
2013-07-01 11:23:27,373 Machine:5: unit.deploy INFO: Started service unit oscied-publisher/0
2013-07-01 11:23:27,386 unit:oscied-publisher/0: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:2
2013-07-01 11:23:27,392 unit:oscied-publisher/0: juju.state.hook DEBUG: Ignoring partially constructed relation: publisher:6
2013-07-01 11:23:27,392 unit:oscied-publisher/0: hook.output DEBUG: Cached relation hook contexts: []
2013-07-01 11:23:27,410 unit:oscied-publisher/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-publisher-0/charm/hooks/install
2013-07-01 11:23:27,444 unit:oscied-publisher/0: hook.output INFO: Install OSCIED Library

Extracting templates from packages: 73%rage/0: hook.output INFO: 
Extracting templates from packages: 100%age/0: hook.output INFO: 

Extracting templates from packages: 73%lisher/0: hook.output INFO: 
Extracting templates from packages: 100%isher/0: hook.output INFO: 

2013-07-01 11:23:50,837 unit:oscied-webui/0: hook.output INFO: Requirement already up-to-date: argparse in /usr/lib/python2.7
Requirement already up-to-date: configobj in /usr/lib/python2.7/dist-packages
Downloading/unpacking celery
  Running setup.py egg_info for package celery
    Upgrade: no old version found.
    
    no previously-included directories found matching '*.pyc'
    no previously-included directories found matching '*.sw*'
Downloading/unpacking flask
  Running setup.py egg_info for package flask
    
    warning: no files found matching '*' under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
    warning: no previously-included files matching '*.pyc' found under directory 'tests'
    warning: no previously-included files matching '*.pyo' found under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'examples'
    warning: no previously-included files matching '*.pyo' found under directory 'examples'
    no previously-included directories found matching 'docs/_build'
    no previously-included directories found matching 'docs/_themes/.git'
Downloading/unpacking hashlib
  Running setup.py egg_info for package hashlib
    
    no previously-included directories found matching 'build'
    no previously-included directories found matching 'dist'
    no previously-included directories found matching 'RCS'
    no previously-included directories found matching 'CVS'
    no previously-included directories found matching '.svn'
Downloading/unpacking ipaddr
  Downloading ipaddr-2.1.10.tar.gz
  Running setup.py egg_info for package ipaddr
    
Downloading/unpacking mock
  Running setup.py egg_info for package mock
    
    warning: no files found matching '*.png' under directory 'docs'
    warning: no files found matching '*.css' under directory 'docs'
    warning: no files found matching '*.html' under directory 'docs'
    warning: no files found matching '*.js' under directory 'docs'
Downloading/unpacking passlib
  Running setup.py egg_info for package passlib
    
    warning: no files found matching 'passlib/*.cfg'
    no previously-included directories found matching '*.komodoproject'
Downloading/unpacking pymongo
  Running setup.py egg_info for package pymongo
    
Downloading/unpacking requests from https://pypi.python.org/packages/source/r/requests/requests-1.2.3.tar.gz#md5=adbd3f18445f7fe5e77f65c502e264fb
  Running setup.py egg_info for package requests
    
Downloading/unpacking six from https://pypi.python.org/packages/source/s/six/six-1.3.0.tar.gz#md5=ec47fe6070a8a64c802363d2c2b1e2ee
  Downloading six-1.3.0.tar.gz
  Running setup.py egg_info for package six
    
Downloading/unpacking billiard>=2.7.3.30,<3.0 (from celery)
  Running setup.py egg_info for package billiard
    
    warning: no files found matching '*.py' under directory 'Lib'
Downloading/unpacking python-dateutil>=1.5 from https://pypi.python.org/packages/source/p/python-dateutil/python-dateutil-2.1.tar.gz#md5=1534bb15cf311f07afaa3aacba1c028b (from celery)
  Running setup.py egg_info for package python-dateutil
    
Downloading/unpacking kombu>=2.5.12,<3.0 (from celery)
  Running setup.py egg_info for package kombu
    
Downloading/unpacking Werkzeug>=0.7 (from flask)
  Running setup.py egg_info for package Werkzeug
    
    warning: no files found matching '*' under directory 'werkzeug/debug/templates'
    warning: no files found matching '*' under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
    warning: no previously-included files matching '*.pyc' found under directory 'tests'
    warning: no previously-included files matching '*.pyo' found under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'examples'
    warning: no previously-included files matching '*.pyo' found under directory 'examples'
    no previousl
2013-07-01 11:23:56,766 unit:oscied-webui/0: hook.output INFO: y-included directories found matching 'docs/_build'
Downloading/unpacking Jinja2>=2.4 (from flask)
  Running setup.py egg_info for package Jinja2
    
    warning: no files found matching '*' under directory 'custom_fixers'
    warning: no previously-included files matching '*' found under directory 'docs/_build'
    warning: no previously-included files matching '*.pyc' found under directory 'jinja2'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'jinja2'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
Downloading/unpacking itsdangerous>=0.21 (from flask)
  Downloading itsdangerous-0.21.tar.gz
  Running setup.py egg_info for package itsdangerous
    
Downloading/unpacking anyjson>=0.3.3 (from kombu>=2.5.12,<3.0->celery)
  Downloading anyjson-0.3.3.tar.gz
  Running setup.py egg_info for package anyjson
    
Downloading/unpacking amqp>=1.0.12,<1.1.0 (from kombu>=2.5.12,<3.0->celery)
  Running setup.py egg_info for package amqp
    
Downloading/unpacking markupsafe (from Jinja2>=2.4->flask)
  Downloading MarkupSafe-0.18.tar.gz
  Running setup.py egg_info for package markupsafe
    
Installing collected packages: celery, flask, hashlib, ipaddr, mock, passlib, pymongo, requests, six, billiard, python-dateutil, kombu, Werkzeug, Jinja2, itsdangerous, anyjson, amqp, markupsafe
  Running setup.py install for celery
    Upgrade: no old version found.
    
    no previously-included directories found matching '*.pyc'
    no previously-included directories found matching '*.sw*'
    Installing celeryctl script to /usr/local/bin
    Installing celeryd script to /usr/local/bin
    Installing camqadm script to /usr/local/bin
    Installing celeryev script to /usr/local/bin
    Installing celery script to /usr/local/bin
    Installing celeryd-multi script to /usr/local/bin
    Installing celerybeat script to /usr/local/bin
  Running setup.py install for flask
    
    warning: no files found matching '*' under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
    warning: no previously-included files matching '*.pyc' found under directory 'tests'
    warning: no previously-included files matching '*.pyo' found under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'examples'
    warning: no previously-included files matching '*.pyo' found under directory 'examples'
    no previously-included directories found matching 'docs/_build'
    no previously-included directories found matching 'docs/_themes/.git'
  Running setup.py install for hashlib
    building '_sha' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/shamodule.c -o build/temp.linux-x86_64-2.7/Modules/shamodule.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/shamodule.o -o build/lib.linux-x86_64-2.7/_sha.so
    building '_md5' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/md5module.c -o build/temp.linux-x86_64-2.7/Modules/md5module.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/md5.c -o build/temp.linux-x86_64-2.7/Modules/md5.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-prote
2013-07-01 11:24:00,032 unit:oscied-orchestra/0: hook.output INFO: Requirement already up-to-date: argparse in /usr/lib/python2.7
Requirement already up-to-date: configobj in /usr/lib/python2.7/dist-packages
Downloading/unpacking celery
  Running setup.py egg_info for package celery
    Upgrade: no old version found.
    
    no previously-included directories found matching '*.pyc'
    no previously-included directories found matching '*.sw*'
Downloading/unpacking flask
  Running setup.py egg_info for package flask
    
    warning: no files found matching '*' under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
    warning: no previously-included files matching '*.pyc' found under directory 'tests'
    warning: no previously-included files matching '*.pyo' found under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'examples'
    warning: no previously-included files matching '*.pyo' found under directory 'examples'
    no previously-included directories found matching 'docs/_build'
    no previously-included directories found matching 'docs/_themes/.git'
Downloading/unpacking hashlib
  Running setup.py egg_info for package hashlib
    
    no previously-included directories found matching 'build'
    no previously-included directories found matching 'dist'
    no previously-included directories found matching 'RCS'
    no previously-included directories found matching 'CVS'
    no previously-included directories found matching '.svn'
Downloading/unpacking ipaddr
  Downloading ipaddr-2.1.10.tar.gz
  Running setup.py egg_info for package ipaddr
    
Downloading/unpacking mock
  Running setup.py egg_info for package mock
    
    warning: no files found matching '*.png' under directory 'docs'
    warning: no files found matching '*.css' under directory 'docs'
    warning: no files found matching '*.html' under directory 'docs'
    warning: no files found matching '*.js' under directory 'docs'
Downloading/unpacking passlib
  Running setup.py egg_info for package passlib
    
    warning: no files found matching 'passlib/*.cfg'
    no previously-included directories found matching '*.komodoproject'
Downloading/unpacking pymongo
  Running setup.py egg_info for package pymongo
    
Downloading/unpacking requests from https://pypi.python.org/packages/source/r/requests/requests-1.2.3.tar.gz#md5=adbd3f18445f7fe5e77f65c502e264fb
  Running setup.py egg_info for package requests
    
Downloading/unpacking six from https://pypi.python.org/packages/source/s/six/six-1.3.0.tar.gz#md5=ec47fe6070a8a64c802363d2c2b1e2ee
  Downloading six-1.3.0.tar.gz
  Running setup.py egg_info for package six
    
Downloading/unpacking billiard>=2.7.3.30,<3.0 (from celery)
  Running setup.py egg_info for package billiard
    
    warning: no files found matching '*.py' under directory 'Lib'
Downloading/unpacking python-dateutil>=1.5 from https://pypi.python.org/packages/source/p/python-dateutil/python-dateutil-2.1.tar.gz#md5=1534bb15cf311f07afaa3aacba1c028b (from celery)
  Running setup.py egg_info for package python-dateutil
    
Downloading/unpacking kombu>=2.5.12,<3.0 (from celery)
  Running setup.py egg_info for package kombu
    
Downloading/unpacking Werkzeug>=0.7 (from flask)
  Running setup.py egg_info for package Werkzeug
    
    warning: no files found matching '*' under directory 'werkzeug/debug/templates'
    warning: no files found matching '*' under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
    warning: no previously-included files matching '*.pyc' found under directory 'tests'
    warning: no previously-included files matching '*.pyo' found under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'examples'
    warning: no previously-included files matching '*.pyo' found under directory 'examples'
    no previousl
2013-07-01 11:24:01,438 unit:oscied-webui/0: hook.output INFO: ctor --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/md5module.o build/temp.linux-x86_64-2.7/Modules/md5.o -o build/lib.linux-x86_64-2.7/_md5.so
    building '_sha256' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/sha256module.c -o build/temp.linux-x86_64-2.7/Modules/sha256module.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/sha256module.o -o build/lib.linux-x86_64-2.7/_sha256.so
    building '_sha512' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/sha512module.c -o build/temp.linux-x86_64-2.7/Modules/sha512module.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/sha512module.o -o build/lib.linux-x86_64-2.7/_sha512.so
    
    no previously-included directories found matching 'build'
    no previously-included directories found matching 'dist'
    no previously-included directories found matching 'RCS'
    no previously-included directories found matching 'CVS'
    no previously-included directories found matching '.svn'
  Running setup.py install for ipaddr
    
  Running setup.py install for mock
    
    warning: no files found matching '*.png' under directory 'docs'
    warning: no files found matching '*.css' under directory 'docs'
    warning: no files found matching '*.html' under directory 'docs'
    warning: no files found matching '*.js' under directory 'docs'
  Running setup.py install for passlib
    
    warning: no files found matching 'passlib/*.cfg'
    no previously-included directories found matching '*.komodoproject'
  Running setup.py install for pymongo
    building 'bson._cbson' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c bson/_cbsonmodule.c -o build/temp.linux-x86_64-2.7/bson/_cbsonmodule.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c bson/time64.c -o build/temp.linux-x86_64-2.7/bson/time64.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c bson/buffer.c -o build/temp.linux-x86_64-2.7/bson/buffer.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c bson/encoding_helpers.c -o build/temp.linux-x86_64-2.7/bson/encoding_helpers.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/bson/_cbsonmodule.o build/temp.linux-x86_64-2.7/bson/time64.o build/temp.linux-x86_64-2.7/bson/buffer.o build/temp.linux-x86_64-2.7/bson/encoding_helpers.o -o build/lib.linux-x86_64-2.7/bson/_cbson.so
    building 'pymongo._cmessage' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c pymongo/_cmessagemodule.c -o build/temp.linux-x86_64-2.7/pymongo/_cmessagemodule.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -f
2013-07-01 11:24:05,273 unit:oscied-orchestra/0: hook.output INFO: y-included directories found matching 'docs/_build'
Downloading/unpacking Jinja2>=2.4 (from flask)
  Running setup.py egg_info for package Jinja2
    
    warning: no files found matching '*' under directory 'custom_fixers'
    warning: no previously-included files matching '*' found under directory 'docs/_build'
    warning: no previously-included files matching '*.pyc' found under directory 'jinja2'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'jinja2'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
Downloading/unpacking itsdangerous>=0.21 (from flask)
  Downloading itsdangerous-0.21.tar.gz
  Running setup.py egg_info for package itsdangerous
    
Downloading/unpacking anyjson>=0.3.3 (from kombu>=2.5.12,<3.0->celery)
  Downloading anyjson-0.3.3.tar.gz
  Running setup.py egg_info for package anyjson
    
Downloading/unpacking amqp>=1.0.12,<1.1.0 (from kombu>=2.5.12,<3.0->celery)
  Running setup.py egg_info for package amqp
    
Downloading/unpacking markupsafe (from Jinja2>=2.4->flask)
  Downloading MarkupSafe-0.18.tar.gz
  Running setup.py egg_info for package markupsafe
    
Installing collected packages: celery, flask, hashlib, ipaddr, mock, passlib, pymongo, requests, six, billiard, python-dateutil, kombu, Werkzeug, Jinja2, itsdangerous, anyjson, amqp, markupsafe
  Running setup.py install for celery
    Upgrade: no old version found.
    
    no previously-included directories found matching '*.pyc'
    no previously-included directories found matching '*.sw*'
    Installing celeryctl script to /usr/local/bin
    Installing celeryd script to /usr/local/bin
    Installing camqadm script to /usr/local/bin
    Installing celeryev script to /usr/local/bin
    Installing celery script to /usr/local/bin
    Installing celeryd-multi script to /usr/local/bin
    Installing celerybeat script to /usr/local/bin
  Running setup.py install for flask
    
    warning: no files found matching '*' under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
    warning: no previously-included files matching '*.pyc' found under directory 'tests'
    warning: no previously-included files matching '*.pyo' found under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'examples'
    warning: no previously-included files matching '*.pyo' found under directory 'examples'
    no previously-included directories found matching 'docs/_build'
    no previously-included directories found matching 'docs/_themes/.git'
  Running setup.py install for hashlib
    building '_sha' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/shamodule.c -o build/temp.linux-x86_64-2.7/Modules/shamodule.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/shamodule.o -o build/lib.linux-x86_64-2.7/_sha.so
    building '_md5' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/md5module.c -o build/temp.linux-x86_64-2.7/Modules/md5module.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/md5.c -o build/temp.linux-x86_64-2.7/Modules/md5.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-prote
2013-07-01 11:24:05,773 unit:oscied-webui/0: hook.output INFO: PIC -Ibson -I/usr/include/python2.7 -c bson/buffer.c -o build/temp.linux-x86_64-2.7/bson/buffer.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/pymongo/_cmessagemodule.o build/temp.linux-x86_64-2.7/bson/buffer.o -o build/lib.linux-x86_64-2.7/pymongo/_cmessage.so
    
  Found existing installation: requests 1.1.0
    Uninstalling requests:
      Successfully uninstalled requests
  Running setup.py install for requests
    
  Found existing installation: six 1.2.0
    Uninstalling six:
      Successfully uninstalled six
  Running setup.py install for six
    
  Running setup.py install for billiard
    building '_billiard' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DHAVE_SEM_OPEN=1 -DHAVE_FD_TRANSFER=1 -DHAVE_SEM_TIMEDWAIT=1 -IModules/_billiard -I/usr/include/python2.7 -c Modules/_billiard/multiprocessing.c -o build/temp.linux-x86_64-2.7/Modules/_billiard/multiprocessing.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DHAVE_SEM_OPEN=1 -DHAVE_FD_TRANSFER=1 -DHAVE_SEM_TIMEDWAIT=1 -IModules/_billiard -I/usr/include/python2.7 -c Modules/_billiard/socket_connection.c -o build/temp.linux-x86_64-2.7/Modules/_billiard/socket_connection.o
    In file included from Modules/_billiard/socket_connection.c:229:0:
    Modules/_billiard/connection.h: In function 'Billiard_connection_recv_payload':
    Modules/_billiard/connection.h:387:15: warning: unused variable 'result' [-Wunused-variable]
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DHAVE_SEM_OPEN=1 -DHAVE_FD_TRANSFER=1 -DHAVE_SEM_TIMEDWAIT=1 -IModules/_billiard -I/usr/include/python2.7 -c Modules/_billiard/semaphore.c -o build/temp.linux-x86_64-2.7/Modules/_billiard/semaphore.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/_billiard/multiprocessing.o build/temp.linux-x86_64-2.7/Modules/_billiard/socket_connection.o build/temp.linux-x86_64-2.7/Modules/_billiard/semaphore.o -lrt -o build/lib.linux-x86_64-2.7/_billiard.so
    
    warning: no files found matching '*.py' under directory 'Lib'
  Found existing installation: python-dateutil 1.5
    Uninstalling python-dateutil:
      Successfully uninstalled python-dateutil
  Running setup.py install for python-dateutil
    
  Running setup.py install for kombu
    
  Running setup.py install for Werkzeug
    
    warning: no files found matching '*' under directory 'werkzeug/debug/templates'
    warning: no files found matching '*' under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
    warning: no previously-included files matching '*.pyc' found under directory 'tests'
    warning: no previously-included files matching '*.pyo' found under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'examples'
    warning: no previously-included files matching '*.pyo' found under directory 'examples'
    no previously-included directories found matching 'docs/_build'
  Running setup.py install for Jinja2
    
    warning: no files found matching '*' under directory 'custom_fixers'
    warning: no previously-included files matching '*' found under directory 'docs/_build'
    warning: no previously-included files matching '*.pyc' found under directory 'jinja2'
    warning: no previously-included files matching '*.pyc' fo
2013-07-01 11:24:07,044 unit:oscied-webui/0: hook.output INFO: und under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'jinja2'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
  Running setup.py install for itsdangerous
    
  Running setup.py install for anyjson
    
  Running setup.py install for amqp
    
  Running setup.py install for markupsafe
    
    building 'markupsafe._speedups' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c markupsafe/_speedups.c -o build/temp.linux-x86_64-2.7/markupsafe/_speedups.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/markupsafe/_speedups.o -o build/lib.linux-x86_64-2.7/markupsafe/_speedups.so
Successfully installed celery flask hashlib ipaddr mock passlib pymongo requests six billiard python-dateutil kombu Werkzeug Jinja2 itsdangerous anyjson amqp markupsafe
Cleaning up...

2013-07-01 11:24:08,142 unit:oscied-webui/0: hook.output INFO: gpg: 
2013-07-01 11:24:08,142 unit:oscied-webui/0: hook.output INFO: keyring `/tmp/tmp84468j/secring.gpg' created

2013-07-01 11:24:08,143 unit:oscied-webui/0: hook.output INFO: gpg: 
2013-07-01 11:24:08,144 unit:oscied-webui/0: hook.output INFO: keyring `/tmp/tmp84468j/pubring.gpg' created

2013-07-01 11:24:08,145 unit:oscied-webui/0: hook.output INFO: gpg: 
2013-07-01 11:24:08,145 unit:oscied-webui/0: hook.output INFO: requesting key C8068B11 from hkp server keyserver.ubuntu.com

2013-07-01 11:24:08,419 unit:oscied-webui/0: hook.output INFO: gpg: 
2013-07-01 11:24:08,420 unit:oscied-webui/0: hook.output INFO: /tmp/tmp84468j/trustdb.gpg: trustdb created
gpg: key C8068B11: public key "Launchpad Ensemble PPA" imported
gpg: Total number processed: 1
gpg:               imported: 1  (RSA: 1)

2013-07-01 11:24:08,512 unit:oscied-webui/0: hook.output INFO: OK

2013-07-01 11:24:08,561 unit:oscied-webui/0: hook.output INFO: Reading package lists...
2013-07-01 11:24:09,724 unit:oscied-orchestra/0: hook.output INFO: ctor --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/md5module.o build/temp.linux-x86_64-2.7/Modules/md5.o -o build/lib.linux-x86_64-2.7/_md5.so
    building '_sha256' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/sha256module.c -o build/temp.linux-x86_64-2.7/Modules/sha256module.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/sha256module.o -o build/lib.linux-x86_64-2.7/_sha256.so
    building '_sha512' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/sha512module.c -o build/temp.linux-x86_64-2.7/Modules/sha512module.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/sha512module.o -o build/lib.linux-x86_64-2.7/_sha512.so
    
    no previously-included directories found matching 'build'
    no previously-included directories found matching 'dist'
    no previously-included directories found matching 'RCS'
    no previously-included directories found matching 'CVS'
    no previously-included directories found matching '.svn'
  Running setup.py install for ipaddr
    
  Running setup.py install for mock
    
    warning: no files found matching '*.png' under directory 'docs'
    warning: no files found matching '*.css' under directory 'docs'
    warning: no files found matching '*.html' under directory 'docs'
    warning: no files found matching '*.js' under directory 'docs'
  Running setup.py install for passlib
    
    warning: no files found matching 'passlib/*.cfg'
    no previously-included directories found matching '*.komodoproject'
  Running setup.py install for pymongo
    building 'bson._cbson' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c bson/_cbsonmodule.c -o build/temp.linux-x86_64-2.7/bson/_cbsonmodule.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c bson/time64.c -o build/temp.linux-x86_64-2.7/bson/time64.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c bson/buffer.c -o build/temp.linux-x86_64-2.7/bson/buffer.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c bson/encoding_helpers.c -o build/temp.linux-x86_64-2.7/bson/encoding_helpers.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/bson/_cbsonmodule.o build/temp.linux-x86_64-2.7/bson/time64.o build/temp.linux-x86_64-2.7/bson/buffer.o build/temp.linux-x86_64-2.7/bson/encoding_helpers.o -o build/lib.linux-x86_64-2.7/bson/_cbson.so
    building 'pymongo._cmessage' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c pymongo/_cmessagemodule.c -o build/temp.linux-x86_64-2.7/pymongo/_cmessagemodule.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -f
2013-07-01 11:24:11,577 unit:oscied-webui/0: hook.output INFO: 

2013-07-01 11:24:11,588 unit:oscied-webui/0: hook.output INFO: Building dependency tree...
2013-07-01 11:24:11,778 unit:oscied-webui/0: hook.output INFO: 

2013-07-01 11:24:11,779 unit:oscied-webui/0: hook.output INFO: Reading state information...
2013-07-01 11:24:11,780 unit:oscied-webui/0: hook.output INFO: 

2013-07-01 11:24:11,908 unit:oscied-webui/0: hook.output INFO: The following extra packages will be installed:

2013-07-01 11:24:11,908 unit:oscied-webui/0: hook.output INFO:   python-shelltoolbox

2013-07-01 11:24:11,911 unit:oscied-webui/0: hook.output INFO: The following NEW packages will be installed:

2013-07-01 11:24:11,911 unit:oscied-webui/0: hook.output INFO:   python-charmhelpers python-shelltoolbox

2013-07-01 11:24:12,008 unit:oscied-webui/0: hook.output INFO: 0 upgraded, 2 newly installed, 0 to remove and 0 not upgraded.
Need to get 19.9 kB of archives.
After this operation, 167 kB of additional disk space will be used.
Get:1 http://us-east-1.ec2.archive.ubuntu.com/ubuntu/ raring/universe python-shelltoolbox all 0.2.1+bzr17-1 [13.5 kB]

2013-07-01 11:24:12,127 unit:oscied-webui/0: hook.output INFO: Get:2 http://ppa.launchpad.net/juju/pkgs/ubuntu/ raring/main python-charmhelpers all 0.3+bzr178-3~raring1 [6410 B]

2013-07-01 11:24:12,482 unit:oscied-webui/0: hook.output INFO: Fetched 19.9 kB in 0s (75.7 kB/s)

2013-07-01 11:24:12,569 unit:oscied-webui/0: hook.output INFO: Selecting previously unselected package python-shelltoolbox.

2013-07-01 11:24:12,569 unit:oscied-webui/0: hook.output INFO: (Reading database ... 
2013-07-01 11:24:12,620 unit:oscied-webui/0: hook.output INFO: 61600 files and directories currently installed.)

2013-07-01 11:24:12,626 unit:oscied-webui/0: hook.output INFO: Unpacking python-shelltoolbox (from .../python-shelltoolbox_0.2.1+bzr17-1_all.deb) ...

2013-07-01 11:24:12,785 unit:oscied-webui/0: hook.output INFO: Selecting previously unselected package python-charmhelpers.

2013-07-01 11:24:12,799 unit:oscied-webui/0: hook.output INFO: Unpacking python-charmhelpers (from .../python-charmhelpers_0.3+bzr178-3~raring1_all.deb) ...

2013-07-01 11:24:12,971 unit:oscied-webui/0: hook.output INFO: Setting up python-shelltoolbox (0.2.1+bzr17-1) ...

2013-07-01 11:24:13,190 unit:oscied-webui/0: hook.output INFO: Setting up python-charmhelpers (0.3+bzr178-3~raring1) ...

2013-07-01 11:24:13,980 unit:oscied-orchestra/0: hook.output INFO: PIC -Ibson -I/usr/include/python2.7 -c bson/buffer.c -o build/temp.linux-x86_64-2.7/bson/buffer.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/pymongo/_cmessagemodule.o build/temp.linux-x86_64-2.7/bson/buffer.o -o build/lib.linux-x86_64-2.7/pymongo/_cmessage.so
    
  Found existing installation: requests 1.1.0
    Uninstalling requests:
      Successfully uninstalled requests
  Running setup.py install for requests
    
  Found existing installation: six 1.2.0
    Uninstalling six:
      Successfully uninstalled six
  Running setup.py install for six
    
  Running setup.py install for billiard
    building '_billiard' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DHAVE_SEM_OPEN=1 -DHAVE_FD_TRANSFER=1 -DHAVE_SEM_TIMEDWAIT=1 -IModules/_billiard -I/usr/include/python2.7 -c Modules/_billiard/multiprocessing.c -o build/temp.linux-x86_64-2.7/Modules/_billiard/multiprocessing.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DHAVE_SEM_OPEN=1 -DHAVE_FD_TRANSFER=1 -DHAVE_SEM_TIMEDWAIT=1 -IModules/_billiard -I/usr/include/python2.7 -c Modules/_billiard/socket_connection.c -o build/temp.linux-x86_64-2.7/Modules/_billiard/socket_connection.o
    In file included from Modules/_billiard/socket_connection.c:229:0:
    Modules/_billiard/connection.h: In function 'Billiard_connection_recv_payload':
    Modules/_billiard/connection.h:387:15: warning: unused variable 'result' [-Wunused-variable]
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DHAVE_SEM_OPEN=1 -DHAVE_FD_TRANSFER=1 -DHAVE_SEM_TIMEDWAIT=1 -IModules/_billiard -I/usr/include/python2.7 -c Modules/_billiard/semaphore.c -o build/temp.linux-x86_64-2.7/Modules/_billiard/semaphore.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/_billiard/multiprocessing.o build/temp.linux-x86_64-2.7/Modules/_billiard/socket_connection.o build/temp.linux-x86_64-2.7/Modules/_billiard/semaphore.o -lrt -o build/lib.linux-x86_64-2.7/_billiard.so
    
    warning: no files found matching '*.py' under directory 'Lib'
  Found existing installation: python-dateutil 1.5
    Uninstalling python-dateutil:
      Successfully uninstalled python-dateutil
  Running setup.py install for python-dateutil
    
  Running setup.py install for kombu
    
  Running setup.py install for Werkzeug
    
    warning: no files found matching '*' under directory 'werkzeug/debug/templates'
    warning: no files found matching '*' under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
    warning: no previously-included files matching '*.pyc' found under directory 'tests'
    warning: no previously-included files matching '*.pyo' found under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'examples'
    warning: no previously-included files matching '*.pyo' found under directory 'examples'
    no previously-included directories found matching 'docs/_build'
  Running setup.py install for Jinja2
    
    warning: no files found matching '*' under directory 'custom_fixers'
    warning: no previously-included files matching '*' found under directory 'docs/_build'
    warning: no previously-included files matching '*.pyc' found under directory 'jinja2'
    warning: no previously-included files matching '*.pyc' fo
2013-07-01 11:24:14,981 unit:oscied-webui/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 11:24:15,227 unit:oscied-orchestra/0: hook.output INFO: und under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'jinja2'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
  Running setup.py install for itsdangerous
    
  Running setup.py install for anyjson
    
  Running setup.py install for amqp
    
  Running setup.py install for markupsafe
    
    building 'markupsafe._speedups' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c markupsafe/_speedups.c -o build/temp.linux-x86_64-2.7/markupsafe/_speedups.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/markupsafe/_speedups.o -o build/lib.linux-x86_64-2.7/markupsafe/_speedups.so
Successfully installed celery flask hashlib ipaddr mock passlib pymongo requests six billiard python-dateutil kombu Werkzeug Jinja2 itsdangerous anyjson amqp markupsafe
Cleaning up...

2013-07-01 11:24:15,344 unit:oscied-webui/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 11:24:15,703 unit:oscied-webui/0: unit.hook.api INFO: --> Entering WebuiHooks.py
2013-07-01 11:24:16,050 unit:oscied-webui/0: unit.hook.api INFO: [HOOK] Execute WebuiHooks hook install
2013-07-01 11:24:16,396 unit:oscied-webui/0: unit.hook.api INFO: [INFO] Uninstall prerequisities, unregister service and load default configuration
2013-07-01 11:24:16,480 unit:oscied-orchestra/0: hook.output INFO: gpg: 
2013-07-01 11:24:16,480 unit:oscied-orchestra/0: hook.output INFO: keyring `/tmp/tmp8pl_dp/secring.gpg' created

2013-07-01 11:24:16,481 unit:oscied-orchestra/0: hook.output INFO: gpg: 
2013-07-01 11:24:16,481 unit:oscied-orchestra/0: hook.output INFO: keyring `/tmp/tmp8pl_dp/pubring.gpg' created

2013-07-01 11:24:16,484 unit:oscied-orchestra/0: hook.output INFO: gpg: requesting key C8068B11 from hkp server keyserver.ubuntu.com

2013-07-01 11:24:16,772 unit:oscied-webui/0: unit.hook.api INFO: [INFO] Unregister shared storage
2013-07-01 11:24:17,007 unit:oscied-orchestra/0: hook.output INFO: gpg: /tmp/tmp8pl_dp/trustdb.gpg: trustdb created

2013-07-01 11:24:17,008 unit:oscied-orchestra/0: hook.output INFO: gpg: 
2013-07-01 11:24:17,012 unit:oscied-orchestra/0: hook.output INFO: key C8068B11: public key "Launchpad Ensemble PPA" imported
gpg: Total number processed: 1
gpg:               imported: 1  (RSA: 1)

2013-07-01 11:24:17,116 unit:oscied-orchestra/0: hook.output INFO: OK

2013-07-01 11:24:17,164 unit:oscied-orchestra/0: hook.output INFO: Reading package lists...
2013-07-01 11:24:17,138 unit:oscied-webui/0: unit.hook.api INFO: [REMARK] Shared storage already unmounted !
2013-07-01 11:24:18,574 unit:oscied-webui/0: unit.hook.api INFO: [INFO] Upgrade system, pre-configure and install prerequisites
2013-07-01 11:24:20,344 unit:oscied-orchestra/0: hook.output INFO: 

2013-07-01 11:24:20,355 unit:oscied-orchestra/0: hook.output INFO: Building dependency tree...
2013-07-01 11:24:20,506 unit:oscied-orchestra/0: hook.output INFO: 

2013-07-01 11:24:20,507 unit:oscied-orchestra/0: hook.output INFO: Reading state information...
2013-07-01 11:24:20,508 unit:oscied-orchestra/0: hook.output INFO: 

2013-07-01 11:24:20,616 unit:oscied-orchestra/0: hook.output INFO: The following extra packages will be installed:

2013-07-01 11:24:20,616 unit:oscied-orchestra/0: hook.output INFO:   python-shelltoolbox

2013-07-01 11:24:20,619 unit:oscied-orchestra/0: hook.output INFO: The following NEW packages will be installed:

2013-07-01 11:24:20,619 unit:oscied-orchestra/0: hook.output INFO:   python-charmhelpers python-shelltoolbox

2013-07-01 11:24:20,702 unit:oscied-orchestra/0: hook.output INFO: 0 upgraded, 2 newly installed, 0 to remove and 0 not upgraded.
Need to get 19.9 kB of archives.
After this operation, 167 kB of additional disk space will be used.
Get:1 http://us-east-1.ec2.archive.ubuntu.com/ubuntu/ raring/universe python-shelltoolbox all 0.2.1+bzr17-1 [13.5 kB]

2013-07-01 11:24:20,825 unit:oscied-orchestra/0: hook.output INFO: Get:2 http://ppa.launchpad.net/juju/pkgs/ubuntu/ raring/main python-charmhelpers all 0.3+bzr178-3~raring1 [6410 B]

2013-07-01 11:24:20,848 unit:oscied-transform/0: hook.output INFO: Requirement already up-to-date: argparse in /usr/lib/python2.7
Requirement already up-to-date: configobj in /usr/lib/python2.7/dist-packages
Downloading/unpacking celery
  Running setup.py egg_info for package celery
    Upgrade: no old version found.
    
    no previously-included directories found matching '*.pyc'
    no previously-included directories found matching '*.sw*'
Downloading/unpacking flask
  Running setup.py egg_info for package flask
    
    warning: no files found matching '*' under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
    warning: no previously-included files matching '*.pyc' found under directory 'tests'
    warning: no previously-included files matching '*.pyo' found under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'examples'
    warning: no previously-included files matching '*.pyo' found under directory 'examples'
    no previously-included directories found matching 'docs/_build'
    no previously-included directories found matching 'docs/_themes/.git'
Downloading/unpacking hashlib
  Running setup.py egg_info for package hashlib
    
    no previously-included directories found matching 'build'
    no previously-included directories found matching 'dist'
    no previously-included directories found matching 'RCS'
    no previously-included directories found matching 'CVS'
    no previously-included directories found matching '.svn'
Downloading/unpacking ipaddr
  Downloading ipaddr-2.1.10.tar.gz
  Running setup.py egg_info for package ipaddr
    
Downloading/unpacking mock
  Running setup.py egg_info for package mock
    
    warning: no files found matching '*.png' under directory 'docs'
    warning: no files found matching '*.css' under directory 'docs'
    warning: no files found matching '*.html' under directory 'docs'
    warning: no files found matching '*.js' under directory 'docs'
Downloading/unpacking passlib
  Running setup.py egg_info for package passlib
    
    warning: no files found matching 'passlib/*.cfg'
    no previously-included directories found matching '*.komodoproject'
Downloading/unpacking pymongo
  Running setup.py egg_info for package pymongo
    
Downloading/unpacking requests from https://pypi.python.org/packages/source/r/requests/requests-1.2.3.tar.gz#md5=adbd3f18445f7fe5e77f65c502e264fb
  Running setup.py egg_info for package requests
    
Downloading/unpacking six from https://pypi.python.org/packages/source/s/six/six-1.3.0.tar.gz#md5=ec47fe6070a8a64c802363d2c2b1e2ee
  Downloading six-1.3.0.tar.gz
  Running setup.py egg_info for package six
    
Downloading/unpacking billiard>=2.7.3.30,<3.0 (from celery)
  Running setup.py egg_info for package billiard
    
    warning: no files found matching '*.py' under directory 'Lib'
Downloading/unpacking python-dateutil>=1.5 from https://pypi.python.org/packages/source/p/python-dateutil/python-dateutil-2.1.tar.gz#md5=1534bb15cf311f07afaa3aacba1c028b (from celery)
  Running setup.py egg_info for package python-dateutil
    
Downloading/unpacking kombu>=2.5.12,<3.0 (from celery)
  Running setup.py egg_info for package kombu
    
Downloading/unpacking Werkzeug>=0.7 (from flask)
  Running setup.py egg_info for package Werkzeug
    
    warning: no files found matching '*' under directory 'werkzeug/debug/templates'
    warning: no files found matching '*' under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
    warning: no previously-included files matching '*.pyc' found under directory 'tests'
    warning: no previously-included files matching '*.pyo' found under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'examples'
    warning: no previously-included files matching '*.pyo' found under directory 'examples'
    no previousl
2013-07-01 11:24:21,191 unit:oscied-orchestra/0: hook.output INFO: Fetched 19.9 kB in 0s (77.4 kB/s)

2013-07-01 11:24:21,287 unit:oscied-orchestra/0: hook.output INFO: Selecting previously unselected package python-shelltoolbox.

2013-07-01 11:24:21,288 unit:oscied-orchestra/0: hook.output INFO: (Reading database ... 
2013-07-01 11:24:21,338 unit:oscied-orchestra/0: hook.output INFO: 61600 files and directories currently installed.)

2013-07-01 11:24:21,342 unit:oscied-orchestra/0: hook.output INFO: Unpacking python-shelltoolbox (from .../python-shelltoolbox_0.2.1+bzr17-1_all.deb) ...

2013-07-01 11:24:21,301 unit:oscied-publisher/0: hook.output INFO: Requirement already up-to-date: argparse in /usr/lib/python2.7
Requirement already up-to-date: configobj in /usr/lib/python2.7/dist-packages
Downloading/unpacking celery
  Running setup.py egg_info for package celery
    Upgrade: no old version found.
    
    no previously-included directories found matching '*.pyc'
    no previously-included directories found matching '*.sw*'
Downloading/unpacking flask
  Running setup.py egg_info for package flask
    
    warning: no files found matching '*' under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
    warning: no previously-included files matching '*.pyc' found under directory 'tests'
    warning: no previously-included files matching '*.pyo' found under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'examples'
    warning: no previously-included files matching '*.pyo' found under directory 'examples'
    no previously-included directories found matching 'docs/_build'
    no previously-included directories found matching 'docs/_themes/.git'
Downloading/unpacking hashlib
  Running setup.py egg_info for package hashlib
    
    no previously-included directories found matching 'build'
    no previously-included directories found matching 'dist'
    no previously-included directories found matching 'RCS'
    no previously-included directories found matching 'CVS'
    no previously-included directories found matching '.svn'
Downloading/unpacking ipaddr
  Downloading ipaddr-2.1.10.tar.gz
  Running setup.py egg_info for package ipaddr
    
Downloading/unpacking mock
  Running setup.py egg_info for package mock
    
    warning: no files found matching '*.png' under directory 'docs'
    warning: no files found matching '*.css' under directory 'docs'
    warning: no files found matching '*.html' under directory 'docs'
    warning: no files found matching '*.js' under directory 'docs'
Downloading/unpacking passlib
  Running setup.py egg_info for package passlib
    
    warning: no files found matching 'passlib/*.cfg'
    no previously-included directories found matching '*.komodoproject'
Downloading/unpacking pymongo
  Running setup.py egg_info for package pymongo
    
Downloading/unpacking requests from https://pypi.python.org/packages/source/r/requests/requests-1.2.3.tar.gz#md5=adbd3f18445f7fe5e77f65c502e264fb
  Running setup.py egg_info for package requests
    
Downloading/unpacking six from https://pypi.python.org/packages/source/s/six/six-1.3.0.tar.gz#md5=ec47fe6070a8a64c802363d2c2b1e2ee
  Downloading six-1.3.0.tar.gz
  Running setup.py egg_info for package six
    
Downloading/unpacking billiard>=2.7.3.30,<3.0 (from celery)
  Running setup.py egg_info for package billiard
    
    warning: no files found matching '*.py' under directory 'Lib'
Downloading/unpacking python-dateutil>=1.5 from https://pypi.python.org/packages/source/p/python-dateutil/python-dateutil-2.1.tar.gz#md5=1534bb15cf311f07afaa3aacba1c028b (from celery)
  Running setup.py egg_info for package python-dateutil
    
Downloading/unpacking kombu>=2.5.12,<3.0 (from celery)
  Running setup.py egg_info for package kombu
    
Downloading/unpacking Werkzeug>=0.7 (from flask)
  Running setup.py egg_info for package Werkzeug
    
    warning: no files found matching '*' under directory 'werkzeug/debug/templates'
    warning: no files found matching '*' under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
    warning: no previously-included files matching '*.pyc' found under directory 'tests'
    warning: no previously-included files matching '*.pyo' found under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'examples'
    warning: no previously-included files matching '*.pyo' found under directory 'examples'
    no previousl
2013-07-01 11:24:21,516 unit:oscied-orchestra/0: hook.output INFO: Selecting previously unselected package python-charmhelpers.

2013-07-01 11:24:21,531 unit:oscied-orchestra/0: hook.output INFO: Unpacking python-charmhelpers (from .../python-charmhelpers_0.3+bzr178-3~raring1_all.deb) ...

2013-07-01 11:24:21,741 unit:oscied-orchestra/0: hook.output INFO: Setting up python-shelltoolbox (0.2.1+bzr17-1) ...

2013-07-01 11:24:21,952 unit:oscied-orchestra/0: hook.output INFO: Setting up python-charmhelpers (0.3+bzr178-3~raring1) ...

2013-07-01 11:24:24,782 unit:oscied-orchestra/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 11:24:25,134 unit:oscied-orchestra/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 11:24:25,475 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 11:24:25,816 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'root_secret': '', 'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'rabbit_connection': '', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': '', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}, 'name': 'oscied-orchestra/0', 'public_address': 'ec2-54-234-192-63.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-71-53.ec2.internal', 'juju_log': <function callable_command at 0x24397d0>, 'config': {u'repositories_pass': u'41nVGq07GmSgK9Ud', u'storage_options': u'', 'verbose': True, u'storage_nat_address': u'', u'rabbit_password': u'OZy23iO0D4UpYS2k', u'storage_fstype': u'', u'nodes_secret': u'bdZccPuG9fibjwCS', u'transform_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/transform/source', u'repositories_user': u'oscied', u'root_secret': u'5FrvHcm7oyF4WQFW', u'storage_mountpoint': u'', u'mongo_nodes_password': u'M2qlif8rdtKtBYil', u'publisher_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/publisher/source', u'mongo_admin_password': u'Iz85QVjdCJugEosz', u'storage_address': u'', u'webui_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/webui/source'}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED orchestrator.\n", 'provides': {'publisher': {'interface': 'subordinate'}, 'api': {'interface': 'orchestra'}, 'transform': {'interface': 'subordinate'}}, 'name': 'oscied-orchestra', 'requires': {'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Orchestra"}}
2013-07-01 11:24:26,150 unit:oscied-orchestra/0: unit.hook.api INFO: --> Entering OrchestraHooks.py
2013-07-01 11:24:26,482 unit:oscied-orchestra/0: unit.hook.api INFO: [HOOK] Execute OrchestraHooks hook install
2013-07-01 11:24:26,617 unit:oscied-publisher/0: hook.output INFO: y-included directories found matching 'docs/_build'
Downloading/unpacking Jinja2>=2.4 (from flask)
  Running setup.py egg_info for package Jinja2
    
    warning: no files found matching '*' under directory 'custom_fixers'
    warning: no previously-included files matching '*' found under directory 'docs/_build'
    warning: no previously-included files matching '*.pyc' found under directory 'jinja2'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'jinja2'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
Downloading/unpacking itsdangerous>=0.21 (from flask)
  Downloading itsdangerous-0.21.tar.gz
  Running setup.py egg_info for package itsdangerous
    
Downloading/unpacking anyjson>=0.3.3 (from kombu>=2.5.12,<3.0->celery)
  Downloading anyjson-0.3.3.tar.gz
  Running setup.py egg_info for package anyjson
    
Downloading/unpacking amqp>=1.0.12,<1.1.0 (from kombu>=2.5.12,<3.0->celery)
  Running setup.py egg_info for package amqp
    
Downloading/unpacking markupsafe (from Jinja2>=2.4->flask)
  Downloading MarkupSafe-0.18.tar.gz
  Running setup.py egg_info for package markupsafe
    
Installing collected packages: celery, flask, hashlib, ipaddr, mock, passlib, pymongo, requests, six, billiard, python-dateutil, kombu, Werkzeug, Jinja2, itsdangerous, anyjson, amqp, markupsafe
  Running setup.py install for celery
    Upgrade: no old version found.
    
    no previously-included directories found matching '*.pyc'
    no previously-included directories found matching '*.sw*'
    Installing celeryctl script to /usr/local/bin
    Installing celeryd script to /usr/local/bin
    Installing camqadm script to /usr/local/bin
    Installing celeryev script to /usr/local/bin
    Installing celery script to /usr/local/bin
    Installing celeryd-multi script to /usr/local/bin
    Installing celerybeat script to /usr/local/bin
  Running setup.py install for flask
    
    warning: no files found matching '*' under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
    warning: no previously-included files matching '*.pyc' found under directory 'tests'
    warning: no previously-included files matching '*.pyo' found under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'examples'
    warning: no previously-included files matching '*.pyo' found under directory 'examples'
    no previously-included directories found matching 'docs/_build'
    no previously-included directories found matching 'docs/_themes/.git'
  Running setup.py install for hashlib
    building '_sha' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/shamodule.c -o build/temp.linux-x86_64-2.7/Modules/shamodule.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/shamodule.o -o build/lib.linux-x86_64-2.7/_sha.so
    building '_md5' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/md5module.c -o build/temp.linux-x86_64-2.7/Modules/md5module.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/md5.c -o build/temp.linux-x86_64-2.7/Modules/md5.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-prote
2013-07-01 11:24:26,758 unit:oscied-transform/0: hook.output INFO: y-included directories found matching 'docs/_build'
Downloading/unpacking Jinja2>=2.4 (from flask)
  Running setup.py egg_info for package Jinja2
    
    warning: no files found matching '*' under directory 'custom_fixers'
    warning: no previously-included files matching '*' found under directory 'docs/_build'
    warning: no previously-included files matching '*.pyc' found under directory 'jinja2'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'jinja2'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
Downloading/unpacking itsdangerous>=0.21 (from flask)
  Downloading itsdangerous-0.21.tar.gz
  Running setup.py egg_info for package itsdangerous
    
Downloading/unpacking anyjson>=0.3.3 (from kombu>=2.5.12,<3.0->celery)
  Downloading anyjson-0.3.3.tar.gz
  Running setup.py egg_info for package anyjson
    
Downloading/unpacking amqp>=1.0.12,<1.1.0 (from kombu>=2.5.12,<3.0->celery)
  Running setup.py egg_info for package amqp
    
Downloading/unpacking markupsafe (from Jinja2>=2.4->flask)
  Downloading MarkupSafe-0.18.tar.gz
  Running setup.py egg_info for package markupsafe
    
Installing collected packages: celery, flask, hashlib, ipaddr, mock, passlib, pymongo, requests, six, billiard, python-dateutil, kombu, Werkzeug, Jinja2, itsdangerous, anyjson, amqp, markupsafe
  Running setup.py install for celery
    Upgrade: no old version found.
    
    no previously-included directories found matching '*.pyc'
    no previously-included directories found matching '*.sw*'
    Installing celeryctl script to /usr/local/bin
    Installing celeryd script to /usr/local/bin
    Installing camqadm script to /usr/local/bin
    Installing celeryev script to /usr/local/bin
    Installing celery script to /usr/local/bin
    Installing celeryd-multi script to /usr/local/bin
    Installing celerybeat script to /usr/local/bin
  Running setup.py install for flask
    
    warning: no files found matching '*' under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
    warning: no previously-included files matching '*.pyc' found under directory 'tests'
    warning: no previously-included files matching '*.pyo' found under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'examples'
    warning: no previously-included files matching '*.pyo' found under directory 'examples'
    no previously-included directories found matching 'docs/_build'
    no previously-included directories found matching 'docs/_themes/.git'
  Running setup.py install for hashlib
    building '_sha' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/shamodule.c -o build/temp.linux-x86_64-2.7/Modules/shamodule.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/shamodule.o -o build/lib.linux-x86_64-2.7/_sha.so
    building '_md5' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/md5module.c -o build/temp.linux-x86_64-2.7/Modules/md5module.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/md5.c -o build/temp.linux-x86_64-2.7/Modules/md5.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-prote
2013-07-01 11:24:26,816 unit:oscied-orchestra/0: unit.hook.api INFO: [INFO] Uninstall prerequisities, unregister service and load default configuration
2013-07-01 11:24:26,849 unit:oscied-storage/0: hook.output INFO: Requirement already up-to-date: argparse in /usr/lib/python2.7
Requirement already up-to-date: configobj in /usr/lib/python2.7/dist-packages
Downloading/unpacking celery
  Running setup.py egg_info for package celery
    Upgrade: no old version found.
    
    no previously-included directories found matching '*.pyc'
    no previously-included directories found matching '*.sw*'
Downloading/unpacking flask
  Running setup.py egg_info for package flask
    
    warning: no files found matching '*' under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
    warning: no previously-included files matching '*.pyc' found under directory 'tests'
    warning: no previously-included files matching '*.pyo' found under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'examples'
    warning: no previously-included files matching '*.pyo' found under directory 'examples'
    no previously-included directories found matching 'docs/_build'
    no previously-included directories found matching 'docs/_themes/.git'
Downloading/unpacking hashlib
  Running setup.py egg_info for package hashlib
    
    no previously-included directories found matching 'build'
    no previously-included directories found matching 'dist'
    no previously-included directories found matching 'RCS'
    no previously-included directories found matching 'CVS'
    no previously-included directories found matching '.svn'
Downloading/unpacking ipaddr
  Downloading ipaddr-2.1.10.tar.gz
  Running setup.py egg_info for package ipaddr
    
Downloading/unpacking mock
  Running setup.py egg_info for package mock
    
    warning: no files found matching '*.png' under directory 'docs'
    warning: no files found matching '*.css' under directory 'docs'
    warning: no files found matching '*.html' under directory 'docs'
    warning: no files found matching '*.js' under directory 'docs'
Downloading/unpacking passlib
  Running setup.py egg_info for package passlib
    
    warning: no files found matching 'passlib/*.cfg'
    no previously-included directories found matching '*.komodoproject'
Downloading/unpacking pymongo
  Running setup.py egg_info for package pymongo
    
Downloading/unpacking requests from https://pypi.python.org/packages/source/r/requests/requests-1.2.3.tar.gz#md5=adbd3f18445f7fe5e77f65c502e264fb
  Running setup.py egg_info for package requests
    
Downloading/unpacking six from https://pypi.python.org/packages/source/s/six/six-1.3.0.tar.gz#md5=ec47fe6070a8a64c802363d2c2b1e2ee
  Downloading six-1.3.0.tar.gz
  Running setup.py egg_info for package six
    
Downloading/unpacking billiard>=2.7.3.30,<3.0 (from celery)
  Running setup.py egg_info for package billiard
    
    warning: no files found matching '*.py' under directory 'Lib'
Downloading/unpacking python-dateutil>=1.5 from https://pypi.python.org/packages/source/p/python-dateutil/python-dateutil-2.1.tar.gz#md5=1534bb15cf311f07afaa3aacba1c028b (from celery)
  Running setup.py egg_info for package python-dateutil
    
Downloading/unpacking kombu>=2.5.12,<3.0 (from celery)
  Running setup.py egg_info for package kombu
    
Downloading/unpacking Werkzeug>=0.7 (from flask)
  Running setup.py egg_info for package Werkzeug
    
    warning: no files found matching '*' under directory 'werkzeug/debug/templates'
    warning: no files found matching '*' under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
    warning: no previously-included files matching '*.pyc' found under directory 'tests'
    warning: no previously-included files matching '*.pyo' found under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'examples'
    warning: no previously-included files matching '*.pyo' found under directory 'examples'
    no previousl
2013-07-01 11:24:27,146 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute ['screen', '-ls', 'Orchestra']
2013-07-01 11:24:27,546 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute service rabbitmq-server stop
2013-07-01 11:24:27,891 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute service mongodb stop
2013-07-01 11:24:28,234 unit:oscied-orchestra/0: unit.hook.api INFO: [INFO] Unregister shared storage
2013-07-01 11:24:28,586 unit:oscied-orchestra/0: unit.hook.api INFO: [REMARK] Shared storage already unmounted !
2013-07-01 11:24:28,918 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute apt-get -y remove --purge glusterfs-client ffmpeg nfs-common ntp rabbitmq-server mongodb x264
2013-07-01 11:24:29,557 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute apt-get -y autoremove
2013-07-01 11:24:30,192 unit:oscied-orchestra/0: unit.hook.api INFO: [INFO] Upgrade system and install prerequisites
2013-07-01 11:24:30,536 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute apt-add-repository -y ppa:jon-severinsson/ffmpeg
2013-07-01 11:24:31,024 unit:oscied-publisher/0: hook.output INFO: ctor --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/md5module.o build/temp.linux-x86_64-2.7/Modules/md5.o -o build/lib.linux-x86_64-2.7/_md5.so
    building '_sha256' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/sha256module.c -o build/temp.linux-x86_64-2.7/Modules/sha256module.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/sha256module.o -o build/lib.linux-x86_64-2.7/_sha256.so
    building '_sha512' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/sha512module.c -o build/temp.linux-x86_64-2.7/Modules/sha512module.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/sha512module.o -o build/lib.linux-x86_64-2.7/_sha512.so
    
    no previously-included directories found matching 'build'
    no previously-included directories found matching 'dist'
    no previously-included directories found matching 'RCS'
    no previously-included directories found matching 'CVS'
    no previously-included directories found matching '.svn'
  Running setup.py install for ipaddr
    
  Running setup.py install for mock
    
    warning: no files found matching '*.png' under directory 'docs'
    warning: no files found matching '*.css' under directory 'docs'
    warning: no files found matching '*.html' under directory 'docs'
    warning: no files found matching '*.js' under directory 'docs'
  Running setup.py install for passlib
    
    warning: no files found matching 'passlib/*.cfg'
    no previously-included directories found matching '*.komodoproject'
  Running setup.py install for pymongo
    building 'bson._cbson' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c bson/_cbsonmodule.c -o build/temp.linux-x86_64-2.7/bson/_cbsonmodule.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c bson/time64.c -o build/temp.linux-x86_64-2.7/bson/time64.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c bson/buffer.c -o build/temp.linux-x86_64-2.7/bson/buffer.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c bson/encoding_helpers.c -o build/temp.linux-x86_64-2.7/bson/encoding_helpers.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/bson/_cbsonmodule.o build/temp.linux-x86_64-2.7/bson/time64.o build/temp.linux-x86_64-2.7/bson/buffer.o build/temp.linux-x86_64-2.7/bson/encoding_helpers.o -o build/lib.linux-x86_64-2.7/bson/_cbson.so
    building 'pymongo._cmessage' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c pymongo/_cmessagemodule.c -o build/temp.linux-x86_64-2.7/pymongo/_cmessagemodule.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -f
2013-07-01 11:24:31,162 unit:oscied-transform/0: hook.output INFO: ctor --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/md5module.o build/temp.linux-x86_64-2.7/Modules/md5.o -o build/lib.linux-x86_64-2.7/_md5.so
    building '_sha256' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/sha256module.c -o build/temp.linux-x86_64-2.7/Modules/sha256module.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/sha256module.o -o build/lib.linux-x86_64-2.7/_sha256.so
    building '_sha512' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/sha512module.c -o build/temp.linux-x86_64-2.7/Modules/sha512module.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/sha512module.o -o build/lib.linux-x86_64-2.7/_sha512.so
    
    no previously-included directories found matching 'build'
    no previously-included directories found matching 'dist'
    no previously-included directories found matching 'RCS'
    no previously-included directories found matching 'CVS'
    no previously-included directories found matching '.svn'
  Running setup.py install for ipaddr
    
  Running setup.py install for mock
    
    warning: no files found matching '*.png' under directory 'docs'
    warning: no files found matching '*.css' under directory 'docs'
    warning: no files found matching '*.html' under directory 'docs'
    warning: no files found matching '*.js' under directory 'docs'
  Running setup.py install for passlib
    
    warning: no files found matching 'passlib/*.cfg'
    no previously-included directories found matching '*.komodoproject'
  Running setup.py install for pymongo
    building 'bson._cbson' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c bson/_cbsonmodule.c -o build/temp.linux-x86_64-2.7/bson/_cbsonmodule.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c bson/time64.c -o build/temp.linux-x86_64-2.7/bson/time64.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c bson/buffer.c -o build/temp.linux-x86_64-2.7/bson/buffer.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c bson/encoding_helpers.c -o build/temp.linux-x86_64-2.7/bson/encoding_helpers.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/bson/_cbsonmodule.o build/temp.linux-x86_64-2.7/bson/time64.o build/temp.linux-x86_64-2.7/bson/buffer.o build/temp.linux-x86_64-2.7/bson/encoding_helpers.o -o build/lib.linux-x86_64-2.7/bson/_cbson.so
    building 'pymongo._cmessage' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c pymongo/_cmessagemodule.c -o build/temp.linux-x86_64-2.7/pymongo/_cmessagemodule.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -f
2013-07-01 11:24:31,946 unit:oscied-storage/0: hook.output INFO: y-included directories found matching 'docs/_build'
Downloading/unpacking Jinja2>=2.4 (from flask)
  Running setup.py egg_info for package Jinja2
    
    warning: no files found matching '*' under directory 'custom_fixers'
    warning: no previously-included files matching '*' found under directory 'docs/_build'
    warning: no previously-included files matching '*.pyc' found under directory 'jinja2'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'jinja2'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
Downloading/unpacking itsdangerous>=0.21 (from flask)
  Downloading itsdangerous-0.21.tar.gz
  Running setup.py egg_info for package itsdangerous
    
Downloading/unpacking anyjson>=0.3.3 (from kombu>=2.5.12,<3.0->celery)
  Downloading anyjson-0.3.3.tar.gz
  Running setup.py egg_info for package anyjson
    
Downloading/unpacking amqp>=1.0.12,<1.1.0 (from kombu>=2.5.12,<3.0->celery)
  Running setup.py egg_info for package amqp
    
Downloading/unpacking markupsafe (from Jinja2>=2.4->flask)
  Downloading MarkupSafe-0.18.tar.gz
  Running setup.py egg_info for package markupsafe
    
Installing collected packages: celery, flask, hashlib, ipaddr, mock, passlib, pymongo, requests, six, billiard, python-dateutil, kombu, Werkzeug, Jinja2, itsdangerous, anyjson, amqp, markupsafe
  Running setup.py install for celery
    Upgrade: no old version found.
    
    no previously-included directories found matching '*.pyc'
    no previously-included directories found matching '*.sw*'
    Installing celeryctl script to /usr/local/bin
    Installing celeryd script to /usr/local/bin
    Installing camqadm script to /usr/local/bin
    Installing celeryev script to /usr/local/bin
    Installing celery script to /usr/local/bin
    Installing celeryd-multi script to /usr/local/bin
    Installing celerybeat script to /usr/local/bin
  Running setup.py install for flask
    
    warning: no files found matching '*' under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
    warning: no previously-included files matching '*.pyc' found under directory 'tests'
    warning: no previously-included files matching '*.pyo' found under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'examples'
    warning: no previously-included files matching '*.pyo' found under directory 'examples'
    no previously-included directories found matching 'docs/_build'
    no previously-included directories found matching 'docs/_themes/.git'
  Running setup.py install for hashlib
    building '_sha' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/shamodule.c -o build/temp.linux-x86_64-2.7/Modules/shamodule.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/shamodule.o -o build/lib.linux-x86_64-2.7/_sha.so
    building '_md5' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/md5module.c -o build/temp.linux-x86_64-2.7/Modules/md5module.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/md5.c -o build/temp.linux-x86_64-2.7/Modules/md5.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-prote
2013-07-01 11:24:32,077 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute apt-get -y update
2013-07-01 11:24:34,290 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute apt-get -y upgrade
2013-07-01 11:24:35,393 unit:oscied-transform/0: hook.output INFO: PIC -Ibson -I/usr/include/python2.7 -c bson/buffer.c -o build/temp.linux-x86_64-2.7/bson/buffer.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/pymongo/_cmessagemodule.o build/temp.linux-x86_64-2.7/bson/buffer.o -o build/lib.linux-x86_64-2.7/pymongo/_cmessage.so
    
  Found existing installation: requests 1.1.0
    Uninstalling requests:
      Successfully uninstalled requests
  Running setup.py install for requests
    
  Found existing installation: six 1.2.0
    Uninstalling six:
      Successfully uninstalled six
  Running setup.py install for six
    
  Running setup.py install for billiard
    building '_billiard' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DHAVE_SEM_OPEN=1 -DHAVE_FD_TRANSFER=1 -DHAVE_SEM_TIMEDWAIT=1 -IModules/_billiard -I/usr/include/python2.7 -c Modules/_billiard/multiprocessing.c -o build/temp.linux-x86_64-2.7/Modules/_billiard/multiprocessing.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DHAVE_SEM_OPEN=1 -DHAVE_FD_TRANSFER=1 -DHAVE_SEM_TIMEDWAIT=1 -IModules/_billiard -I/usr/include/python2.7 -c Modules/_billiard/socket_connection.c -o build/temp.linux-x86_64-2.7/Modules/_billiard/socket_connection.o
    In file included from Modules/_billiard/socket_connection.c:229:0:
    Modules/_billiard/connection.h: In function 'Billiard_connection_recv_payload':
    Modules/_billiard/connection.h:387:15: warning: unused variable 'result' [-Wunused-variable]
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DHAVE_SEM_OPEN=1 -DHAVE_FD_TRANSFER=1 -DHAVE_SEM_TIMEDWAIT=1 -IModules/_billiard -I/usr/include/python2.7 -c Modules/_billiard/semaphore.c -o build/temp.linux-x86_64-2.7/Modules/_billiard/semaphore.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/_billiard/multiprocessing.o build/temp.linux-x86_64-2.7/Modules/_billiard/socket_connection.o build/temp.linux-x86_64-2.7/Modules/_billiard/semaphore.o -lrt -o build/lib.linux-x86_64-2.7/_billiard.so
    
    warning: no files found matching '*.py' under directory 'Lib'
  Found existing installation: python-dateutil 1.5
    Uninstalling python-dateutil:
      Successfully uninstalled python-dateutil
  Running setup.py install for python-dateutil
    
  Running setup.py install for kombu
    
  Running setup.py install for Werkzeug
    
    warning: no files found matching '*' under directory 'werkzeug/debug/templates'
    warning: no files found matching '*' under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
    warning: no previously-included files matching '*.pyc' found under directory 'tests'
    warning: no previously-included files matching '*.pyo' found under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'examples'
    warning: no previously-included files matching '*.pyo' found under directory 'examples'
    no previously-included directories found matching 'docs/_build'
  Running setup.py install for Jinja2
    
    warning: no files found matching '*' under directory 'custom_fixers'
    warning: no previously-included files matching '*' found under directory 'docs/_build'
    warning: no previously-included files matching '*.pyc' found under directory 'jinja2'
    warning: no previously-included files matching '*.pyc' fo
2013-07-01 11:24:35,466 unit:oscied-publisher/0: hook.output INFO: PIC -Ibson -I/usr/include/python2.7 -c bson/buffer.c -o build/temp.linux-x86_64-2.7/bson/buffer.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/pymongo/_cmessagemodule.o build/temp.linux-x86_64-2.7/bson/buffer.o -o build/lib.linux-x86_64-2.7/pymongo/_cmessage.so
    
  Found existing installation: requests 1.1.0
    Uninstalling requests:
      Successfully uninstalled requests
  Running setup.py install for requests
    
  Found existing installation: six 1.2.0
    Uninstalling six:
      Successfully uninstalled six
  Running setup.py install for six
    
  Running setup.py install for billiard
    building '_billiard' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DHAVE_SEM_OPEN=1 -DHAVE_FD_TRANSFER=1 -DHAVE_SEM_TIMEDWAIT=1 -IModules/_billiard -I/usr/include/python2.7 -c Modules/_billiard/multiprocessing.c -o build/temp.linux-x86_64-2.7/Modules/_billiard/multiprocessing.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DHAVE_SEM_OPEN=1 -DHAVE_FD_TRANSFER=1 -DHAVE_SEM_TIMEDWAIT=1 -IModules/_billiard -I/usr/include/python2.7 -c Modules/_billiard/socket_connection.c -o build/temp.linux-x86_64-2.7/Modules/_billiard/socket_connection.o
    In file included from Modules/_billiard/socket_connection.c:229:0:
    Modules/_billiard/connection.h: In function 'Billiard_connection_recv_payload':
    Modules/_billiard/connection.h:387:15: warning: unused variable 'result' [-Wunused-variable]
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DHAVE_SEM_OPEN=1 -DHAVE_FD_TRANSFER=1 -DHAVE_SEM_TIMEDWAIT=1 -IModules/_billiard -I/usr/include/python2.7 -c Modules/_billiard/semaphore.c -o build/temp.linux-x86_64-2.7/Modules/_billiard/semaphore.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/_billiard/multiprocessing.o build/temp.linux-x86_64-2.7/Modules/_billiard/socket_connection.o build/temp.linux-x86_64-2.7/Modules/_billiard/semaphore.o -lrt -o build/lib.linux-x86_64-2.7/_billiard.so
    
    warning: no files found matching '*.py' under directory 'Lib'
  Found existing installation: python-dateutil 1.5
    Uninstalling python-dateutil:
      Successfully uninstalled python-dateutil
  Running setup.py install for python-dateutil
    
  Running setup.py install for kombu
    
  Running setup.py install for Werkzeug
    
    warning: no files found matching '*' under directory 'werkzeug/debug/templates'
    warning: no files found matching '*' under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
    warning: no previously-included files matching '*.pyc' found under directory 'tests'
    warning: no previously-included files matching '*.pyo' found under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'examples'
    warning: no previously-included files matching '*.pyo' found under directory 'examples'
    no previously-included directories found matching 'docs/_build'
  Running setup.py install for Jinja2
    
    warning: no files found matching '*' under directory 'custom_fixers'
    warning: no previously-included files matching '*' found under directory 'docs/_build'
    warning: no previously-included files matching '*.pyc' found under directory 'jinja2'
    warning: no previously-included files matching '*.pyc' fo
2013-07-01 11:24:36,310 unit:oscied-storage/0: hook.output INFO: ctor --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/md5module.o build/temp.linux-x86_64-2.7/Modules/md5.o -o build/lib.linux-x86_64-2.7/_md5.so
    building '_sha256' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/sha256module.c -o build/temp.linux-x86_64-2.7/Modules/sha256module.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/sha256module.o -o build/lib.linux-x86_64-2.7/_sha256.so
    building '_sha512' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/sha512module.c -o build/temp.linux-x86_64-2.7/Modules/sha512module.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/sha512module.o -o build/lib.linux-x86_64-2.7/_sha512.so
    
    no previously-included directories found matching 'build'
    no previously-included directories found matching 'dist'
    no previously-included directories found matching 'RCS'
    no previously-included directories found matching 'CVS'
    no previously-included directories found matching '.svn'
  Running setup.py install for ipaddr
    
  Running setup.py install for mock
    
    warning: no files found matching '*.png' under directory 'docs'
    warning: no files found matching '*.css' under directory 'docs'
    warning: no files found matching '*.html' under directory 'docs'
    warning: no files found matching '*.js' under directory 'docs'
  Running setup.py install for passlib
    
    warning: no files found matching 'passlib/*.cfg'
    no previously-included directories found matching '*.komodoproject'
  Running setup.py install for pymongo
    building 'bson._cbson' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c bson/_cbsonmodule.c -o build/temp.linux-x86_64-2.7/bson/_cbsonmodule.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c bson/time64.c -o build/temp.linux-x86_64-2.7/bson/time64.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c bson/buffer.c -o build/temp.linux-x86_64-2.7/bson/buffer.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c bson/encoding_helpers.c -o build/temp.linux-x86_64-2.7/bson/encoding_helpers.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/bson/_cbsonmodule.o build/temp.linux-x86_64-2.7/bson/time64.o build/temp.linux-x86_64-2.7/bson/buffer.o build/temp.linux-x86_64-2.7/bson/encoding_helpers.o -o build/lib.linux-x86_64-2.7/bson/_cbson.so
    building 'pymongo._cmessage' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c pymongo/_cmessagemodule.c -o build/temp.linux-x86_64-2.7/pymongo/_cmessagemodule.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -f
2013-07-01 11:24:36,597 unit:oscied-transform/0: hook.output INFO: und under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'jinja2'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
  Running setup.py install for itsdangerous
    
  Running setup.py install for anyjson
    
  Running setup.py install for amqp
    
  Running setup.py install for markupsafe
    
    building 'markupsafe._speedups' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c markupsafe/_speedups.c -o build/temp.linux-x86_64-2.7/markupsafe/_speedups.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/markupsafe/_speedups.o -o build/lib.linux-x86_64-2.7/markupsafe/_speedups.so
Successfully installed celery flask hashlib ipaddr mock passlib pymongo requests six billiard python-dateutil kombu Werkzeug Jinja2 itsdangerous anyjson amqp markupsafe
Cleaning up...

2013-07-01 11:24:36,767 unit:oscied-publisher/0: hook.output INFO: und under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'jinja2'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
  Running setup.py install for itsdangerous
    
  Running setup.py install for anyjson
    
  Running setup.py install for amqp
    
  Running setup.py install for markupsafe
    
    building 'markupsafe._speedups' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c markupsafe/_speedups.c -o build/temp.linux-x86_64-2.7/markupsafe/_speedups.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/markupsafe/_speedups.o -o build/lib.linux-x86_64-2.7/markupsafe/_speedups.so
Successfully installed celery flask hashlib ipaddr mock passlib pymongo requests six billiard python-dateutil kombu Werkzeug Jinja2 itsdangerous anyjson amqp markupsafe
Cleaning up...

2013-07-01 11:24:37,689 unit:oscied-transform/0: hook.output INFO: gpg: 
2013-07-01 11:24:37,690 unit:oscied-transform/0: hook.output INFO: keyring `/tmp/tmpbesajr/secring.gpg' created

2013-07-01 11:24:37,690 unit:oscied-transform/0: hook.output INFO: gpg: 
2013-07-01 11:24:37,691 unit:oscied-transform/0: hook.output INFO: keyring `/tmp/tmpbesajr/pubring.gpg' created

2013-07-01 11:24:37,692 unit:oscied-transform/0: hook.output INFO: gpg: 
2013-07-01 11:24:37,692 unit:oscied-transform/0: hook.output INFO: requesting key C8068B11 from hkp server keyserver.ubuntu.com

2013-07-01 11:24:37,930 unit:oscied-transform/0: hook.output INFO: gpg: /tmp/tmpbesajr/trustdb.gpg: trustdb created
gpg: key C8068B11: public key "Launchpad Ensemble PPA" imported
gpg: Total number processed: 1
gpg:               imported: 1  (RSA: 1)

2013-07-01 11:24:37,967 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute apt-get -y install glusterfs-client ffmpeg nfs-common ntp rabbitmq-server mongodb x264
2013-07-01 11:24:38,016 unit:oscied-transform/0: hook.output INFO: OK

2013-07-01 11:24:38,061 unit:oscied-transform/0: hook.output INFO: Reading package lists...
2013-07-01 11:24:38,100 unit:oscied-publisher/0: hook.output INFO: gpg: 
2013-07-01 11:24:38,101 unit:oscied-publisher/0: hook.output INFO: keyring `/tmp/tmpolhxjv/secring.gpg' created

2013-07-01 11:24:38,101 unit:oscied-publisher/0: hook.output INFO: gpg: 
2013-07-01 11:24:38,102 unit:oscied-publisher/0: hook.output INFO: keyring `/tmp/tmpolhxjv/pubring.gpg' created

2013-07-01 11:24:38,104 unit:oscied-publisher/0: hook.output INFO: gpg: requesting key C8068B11 from hkp server keyserver.ubuntu.com

2013-07-01 11:24:38,359 unit:oscied-publisher/0: hook.output INFO: gpg: 
2013-07-01 11:24:38,360 unit:oscied-publisher/0: hook.output INFO: /tmp/tmpolhxjv/trustdb.gpg: trustdb created

2013-07-01 11:24:38,361 unit:oscied-publisher/0: hook.output INFO: gpg: 
2013-07-01 11:24:38,364 unit:oscied-publisher/0: hook.output INFO: key C8068B11: public key "Launchpad Ensemble PPA" imported
gpg: Total number processed: 1
gpg:               imported: 1  (RSA: 1)

2013-07-01 11:24:38,460 unit:oscied-publisher/0: hook.output INFO: OK

2013-07-01 11:24:38,508 unit:oscied-publisher/0: hook.output INFO: Reading package lists...
2013-07-01 11:24:40,540 unit:oscied-storage/0: hook.output INFO: PIC -Ibson -I/usr/include/python2.7 -c bson/buffer.c -o build/temp.linux-x86_64-2.7/bson/buffer.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/pymongo/_cmessagemodule.o build/temp.linux-x86_64-2.7/bson/buffer.o -o build/lib.linux-x86_64-2.7/pymongo/_cmessage.so
    
  Found existing installation: requests 1.1.0
    Uninstalling requests:
      Successfully uninstalled requests
  Running setup.py install for requests
    
  Found existing installation: six 1.2.0
    Uninstalling six:
      Successfully uninstalled six
  Running setup.py install for six
    
  Running setup.py install for billiard
    building '_billiard' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DHAVE_SEM_OPEN=1 -DHAVE_FD_TRANSFER=1 -DHAVE_SEM_TIMEDWAIT=1 -IModules/_billiard -I/usr/include/python2.7 -c Modules/_billiard/multiprocessing.c -o build/temp.linux-x86_64-2.7/Modules/_billiard/multiprocessing.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DHAVE_SEM_OPEN=1 -DHAVE_FD_TRANSFER=1 -DHAVE_SEM_TIMEDWAIT=1 -IModules/_billiard -I/usr/include/python2.7 -c Modules/_billiard/socket_connection.c -o build/temp.linux-x86_64-2.7/Modules/_billiard/socket_connection.o
    In file included from Modules/_billiard/socket_connection.c:229:0:
    Modules/_billiard/connection.h: In function 'Billiard_connection_recv_payload':
    Modules/_billiard/connection.h:387:15: warning: unused variable 'result' [-Wunused-variable]
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DHAVE_SEM_OPEN=1 -DHAVE_FD_TRANSFER=1 -DHAVE_SEM_TIMEDWAIT=1 -IModules/_billiard -I/usr/include/python2.7 -c Modules/_billiard/semaphore.c -o build/temp.linux-x86_64-2.7/Modules/_billiard/semaphore.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/_billiard/multiprocessing.o build/temp.linux-x86_64-2.7/Modules/_billiard/socket_connection.o build/temp.linux-x86_64-2.7/Modules/_billiard/semaphore.o -lrt -o build/lib.linux-x86_64-2.7/_billiard.so
    
    warning: no files found matching '*.py' under directory 'Lib'
  Found existing installation: python-dateutil 1.5
    Uninstalling python-dateutil:
      Successfully uninstalled python-dateutil
  Running setup.py install for python-dateutil
    
  Running setup.py install for kombu
    
  Running setup.py install for Werkzeug
    
    warning: no files found matching '*' under directory 'werkzeug/debug/templates'
    warning: no files found matching '*' under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
    warning: no previously-included files matching '*.pyc' found under directory 'tests'
    warning: no previously-included files matching '*.pyo' found under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'examples'
    warning: no previously-included files matching '*.pyo' found under directory 'examples'
    no previously-included directories found matching 'docs/_build'
  Running setup.py install for Jinja2
    
    warning: no files found matching '*' under directory 'custom_fixers'
    warning: no previously-included files matching '*' found under directory 'docs/_build'
    warning: no previously-included files matching '*.pyc' found under directory 'jinja2'
    warning: no previously-included files matching '*.pyc' fo
2013-07-01 11:24:40,899 unit:oscied-transform/0: hook.output INFO: 

2013-07-01 11:24:40,910 unit:oscied-transform/0: hook.output INFO: Building dependency tree...
2013-07-01 11:24:41,067 unit:oscied-transform/0: hook.output INFO: 

2013-07-01 11:24:41,068 unit:oscied-transform/0: hook.output INFO: Reading state information...
2013-07-01 11:24:41,069 unit:oscied-transform/0: hook.output INFO: 

2013-07-01 11:24:41,180 unit:oscied-transform/0: hook.output INFO: The following extra packages will be installed:

2013-07-01 11:24:41,181 unit:oscied-transform/0: hook.output INFO:   python-shelltoolbox

2013-07-01 11:24:41,183 unit:oscied-transform/0: hook.output INFO: The following NEW packages will be installed:

2013-07-01 11:24:41,183 unit:oscied-transform/0: hook.output INFO:   python-charmhelpers python-shelltoolbox

2013-07-01 11:24:41,233 unit:oscied-transform/0: hook.output INFO: 0 upgraded, 2 newly installed, 0 to remove and 0 not upgraded.
Need to get 19.9 kB of archives.
After this operation, 167 kB of additional disk space will be used.
Get:1 http://us-east-1.ec2.archive.ubuntu.com/ubuntu/ raring/universe python-shelltoolbox all 0.2.1+bzr17-1 [13.5 kB]

2013-07-01 11:24:41,409 unit:oscied-transform/0: hook.output INFO: Get:2 http://ppa.launchpad.net/juju/pkgs/ubuntu/ raring/main python-charmhelpers all 0.3+bzr178-3~raring1 [6410 B]

2013-07-01 11:24:41,563 unit:oscied-publisher/0: hook.output INFO: 

2013-07-01 11:24:41,573 unit:oscied-publisher/0: hook.output INFO: Building dependency tree...
2013-07-01 11:24:41,767 unit:oscied-transform/0: hook.output INFO: Fetched 19.9 kB in 0s (70.2 kB/s)

2013-07-01 11:24:41,757 unit:oscied-publisher/0: hook.output INFO: 

2013-07-01 11:24:41,757 unit:oscied-publisher/0: hook.output INFO: Reading state information...
2013-07-01 11:24:41,759 unit:oscied-publisher/0: hook.output INFO: 

2013-07-01 11:24:41,837 unit:oscied-storage/0: hook.output INFO: und under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'jinja2'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
  Running setup.py install for itsdangerous
    
  Running setup.py install for anyjson
    
  Running setup.py install for amqp
    
  Running setup.py install for markupsafe
    
    building 'markupsafe._speedups' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c markupsafe/_speedups.c -o build/temp.linux-x86_64-2.7/markupsafe/_speedups.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/markupsafe/_speedups.o -o build/lib.linux-x86_64-2.7/markupsafe/_speedups.so
Successfully installed celery flask hashlib ipaddr mock passlib pymongo requests six billiard python-dateutil kombu Werkzeug Jinja2 itsdangerous anyjson amqp markupsafe
Cleaning up...

2013-07-01 11:24:41,876 unit:oscied-transform/0: hook.output INFO: Selecting previously unselected package python-shelltoolbox.

2013-07-01 11:24:41,876 unit:oscied-transform/0: hook.output INFO: (Reading database ... 
2013-07-01 11:24:41,924 unit:oscied-transform/0: hook.output INFO: 61600 files and directories currently installed.)

2013-07-01 11:24:41,894 unit:oscied-publisher/0: hook.output INFO: The following extra packages will be installed:

2013-07-01 11:24:41,894 unit:oscied-publisher/0: hook.output INFO:   python-shelltoolbox

2013-07-01 11:24:41,928 unit:oscied-transform/0: hook.output INFO: Unpacking python-shelltoolbox (from .../python-shelltoolbox_0.2.1+bzr17-1_all.deb) ...

2013-07-01 11:24:41,898 unit:oscied-publisher/0: hook.output INFO: The following NEW packages will be installed:

2013-07-01 11:24:41,898 unit:oscied-publisher/0: hook.output INFO:   python-charmhelpers python-shelltoolbox

2013-07-01 11:24:42,032 unit:oscied-publisher/0: hook.output INFO: 0 upgraded, 2 newly installed, 0 to remove and 0 not upgraded.
Need to get 19.9 kB of archives.
After this operation, 167 kB of additional disk space will be used.
Get:1 http://us-east-1.ec2.archive.ubuntu.com/ubuntu/ raring/universe python-shelltoolbox all 0.2.1+bzr17-1 [13.5 kB]

2013-07-01 11:24:42,093 unit:oscied-transform/0: hook.output INFO: Selecting previously unselected package python-charmhelpers.

2013-07-01 11:24:42,106 unit:oscied-transform/0: hook.output INFO: Unpacking python-charmhelpers (from .../python-charmhelpers_0.3+bzr178-3~raring1_all.deb) ...

2013-07-01 11:24:42,101 unit:oscied-publisher/0: hook.output INFO: Get:2 http://ppa.launchpad.net/juju/pkgs/ubuntu/ raring/main python-charmhelpers all 0.3+bzr178-3~raring1 [6410 B]

2013-07-01 11:24:42,294 unit:oscied-transform/0: hook.output INFO: Setting up python-shelltoolbox (0.2.1+bzr17-1) ...

2013-07-01 11:24:42,486 unit:oscied-transform/0: hook.output INFO: Setting up python-charmhelpers (0.3+bzr178-3~raring1) ...

2013-07-01 11:24:42,472 unit:oscied-publisher/0: hook.output INFO: Fetched 19.9 kB in 0s (78.1 kB/s)

2013-07-01 11:24:42,581 unit:oscied-publisher/0: hook.output INFO: Selecting previously unselected package python-shelltoolbox.

2013-07-01 11:24:42,582 unit:oscied-publisher/0: hook.output INFO: (Reading database ... 
2013-07-01 11:24:42,640 unit:oscied-publisher/0: hook.output INFO: 61600 files and directories currently installed.)

2013-07-01 11:24:42,645 unit:oscied-publisher/0: hook.output INFO: Unpacking python-shelltoolbox (from .../python-shelltoolbox_0.2.1+bzr17-1_all.deb) ...

2013-07-01 11:24:42,785 unit:oscied-publisher/0: hook.output INFO: Selecting previously unselected package python-charmhelpers.

2013-07-01 11:24:42,803 unit:oscied-publisher/0: hook.output INFO: Unpacking python-charmhelpers (from .../python-charmhelpers_0.3+bzr178-3~raring1_all.deb) ...

2013-07-01 11:24:42,958 unit:oscied-publisher/0: hook.output INFO: Setting up python-shelltoolbox (0.2.1+bzr17-1) ...

2013-07-01 11:24:43,130 unit:oscied-publisher/0: hook.output INFO: Setting up python-charmhelpers (0.3+bzr178-3~raring1) ...

2013-07-01 11:24:43,324 unit:oscied-storage/0: hook.output INFO: gpg: 
2013-07-01 11:24:43,324 unit:oscied-storage/0: hook.output INFO: keyring `/tmp/tmpm_bo53/secring.gpg' created

2013-07-01 11:24:43,325 unit:oscied-storage/0: hook.output INFO: gpg: 
2013-07-01 11:24:43,325 unit:oscied-storage/0: hook.output INFO: keyring `/tmp/tmpm_bo53/pubring.gpg' created

2013-07-01 11:24:43,333 unit:oscied-storage/0: hook.output INFO: gpg: requesting key C8068B11 from hkp server keyserver.ubuntu.com

2013-07-01 11:24:43,595 unit:oscied-storage/0: hook.output INFO: gpg: /tmp/tmpm_bo53/trustdb.gpg: trustdb created

2013-07-01 11:24:43,604 unit:oscied-storage/0: hook.output INFO: gpg: 
2013-07-01 11:24:43,607 unit:oscied-storage/0: hook.output INFO: key C8068B11: public key "Launchpad Ensemble PPA" imported
gpg: Total number processed: 1
gpg:               imported: 1  (RSA: 1)

2013-07-01 11:24:43,725 unit:oscied-storage/0: hook.output INFO: OK

2013-07-01 11:24:43,774 unit:oscied-storage/0: hook.output INFO: Reading package lists...
2013-07-01 11:24:44,390 unit:oscied-transform/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 11:24:44,741 unit:oscied-transform/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 11:24:44,855 unit:oscied-publisher/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 11:24:45,073 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 11:24:45,220 unit:oscied-publisher/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 11:24:45,407 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-transform/0', 'public_address': 'ec2-72-44-43-150.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-25-113.ec2.internal', 'juju_log': <function callable_command at 0x1a9a2a8>, 'config': {u'storage_mountpoint': u'', 'verbose': True, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'transform_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 1, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u''}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media transform. Contains ffmpeg & x264.\nCan be scaled to multiple instances.\n", 'name': 'oscied-transform', 'requires': {'storage': {'interface': 'mount'}, 'transform': {'interface': 'subordinate'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Encoder"}}
2013-07-01 11:24:45,570 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 11:24:45,736 unit:oscied-transform/0: unit.hook.api INFO: --> Entering TransformHooks.py
2013-07-01 11:24:45,938 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'proxy_ips': [], 'storage_fstype': '', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-234-214-201.compute-1.amazonaws.com', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-publisher/0', 'public_address': 'ec2-54-234-214-201.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-2-99.ec2.internal', 'juju_log': <function callable_command at 0x19225f0>, 'config': {u'max_upload_size': 4294967296, u'storage_mountpoint': u'', 'verbose': True, u'max_input_time': 600, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'publisher_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 2, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u'', u'max_execution_time': 180}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media publisher. Contains apache & mod streaming.\nCan be scaled to multiple instances.\n", 'provides': {'streaming': {'interface': 'http'}}, 'name': 'oscied-publisher', 'requires': {'publisher': {'interface': 'subordinate'}, 'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Publisher"}}
2013-07-01 11:24:46,064 unit:oscied-transform/0: unit.hook.api INFO: [HOOK] Execute TransformHooks hook install
2013-07-01 11:24:46,278 unit:oscied-publisher/0: unit.hook.api INFO: --> Entering PublisherHooks.py
2013-07-01 11:24:46,397 unit:oscied-transform/0: unit.hook.api INFO: [INFO] Uninstall prerequisities, unregister service and load default configuration
2013-07-01 11:24:46,613 unit:oscied-publisher/0: unit.hook.api INFO: [HOOK] Execute PublisherHooks hook install
2013-07-01 11:24:46,726 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] Execute ['screen', '-ls', 'Transform']
2013-07-01 11:24:46,948 unit:oscied-publisher/0: unit.hook.api INFO: [INFO] Uninstall prerequisities, unregister service and load default configuration
2013-07-01 11:24:47,077 unit:oscied-transform/0: unit.hook.api INFO: [INFO] Unregister shared storage
2013-07-01 11:24:47,206 unit:oscied-storage/0: hook.output INFO: 

2013-07-01 11:24:47,216 unit:oscied-storage/0: hook.output INFO: Building dependency tree...
2013-07-01 11:24:47,287 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] Execute ['screen', '-ls', 'Publisher']
2013-07-01 11:24:47,370 unit:oscied-storage/0: hook.output INFO: 

2013-07-01 11:24:47,370 unit:oscied-storage/0: hook.output INFO: Reading state information...
2013-07-01 11:24:47,371 unit:oscied-storage/0: hook.output INFO: 

2013-07-01 11:24:47,414 unit:oscied-transform/0: unit.hook.api INFO: [REMARK] Shared storage already unmounted !
2013-07-01 11:24:47,479 unit:oscied-storage/0: hook.output INFO: The following extra packages will be installed:

2013-07-01 11:24:47,479 unit:oscied-storage/0: hook.output INFO:   python-shelltoolbox

2013-07-01 11:24:47,481 unit:oscied-storage/0: hook.output INFO: The following NEW packages will be installed:

2013-07-01 11:24:47,482 unit:oscied-storage/0: hook.output INFO:   python-charmhelpers python-shelltoolbox

2013-07-01 11:24:47,584 unit:oscied-storage/0: hook.output INFO: 0 upgraded, 2 newly installed, 0 to remove and 0 not upgraded.
Need to get 19.9 kB of archives.
After this operation, 167 kB of additional disk space will be used.
Get:1 http://us-east-1.ec2.archive.ubuntu.com/ubuntu/ raring/universe python-shelltoolbox all 0.2.1+bzr17-1 [13.5 kB]

2013-07-01 11:24:47,646 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] Execute service apache2 stop
2013-07-01 11:24:47,720 unit:oscied-storage/0: hook.output INFO: Get:2 http://ppa.launchpad.net/juju/pkgs/ubuntu/ raring/main python-charmhelpers all 0.3+bzr178-3~raring1 [6410 B]

2013-07-01 11:24:47,743 unit:oscied-transform/0: unit.hook.api INFO: [INFO] Unregister the Orchestrator
2013-07-01 11:24:48,002 unit:oscied-publisher/0: unit.hook.api INFO: [INFO] Unregister shared storage
2013-07-01 11:24:48,072 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] Execute apt-get -y remove --purge glusterfs-client ffmpeg libavcodec-dev nfs-common ntp libavutil-dev libavcodec-extra-53 libavformat-dev libswscale-dev x264 zlib1g-dev libavdevice-dev
2013-07-01 11:24:48,098 unit:oscied-storage/0: hook.output INFO: Fetched 19.9 kB in 0s (69.4 kB/s)

2013-07-01 11:24:48,206 unit:oscied-storage/0: hook.output INFO: Selecting previously unselected package python-shelltoolbox.

2013-07-01 11:24:48,206 unit:oscied-storage/0: hook.output INFO: (Reading database ... 
2013-07-01 11:24:48,257 unit:oscied-storage/0: hook.output INFO: 61600 files and directories currently installed.)

2013-07-01 11:24:48,260 unit:oscied-storage/0: hook.output INFO: Unpacking python-shelltoolbox (from .../python-shelltoolbox_0.2.1+bzr17-1_all.deb) ...

2013-07-01 11:24:48,344 unit:oscied-publisher/0: unit.hook.api INFO: [REMARK] Shared storage already unmounted !
2013-07-01 11:24:48,454 unit:oscied-storage/0: hook.output INFO: Selecting previously unselected package python-charmhelpers.

2013-07-01 11:24:48,466 unit:oscied-storage/0: hook.output INFO: Unpacking python-charmhelpers (from .../python-charmhelpers_0.3+bzr178-3~raring1_all.deb) ...

2013-07-01 11:24:48,682 unit:oscied-storage/0: hook.output INFO: Setting up python-shelltoolbox (0.2.1+bzr17-1) ...

2013-07-01 11:24:48,682 unit:oscied-publisher/0: unit.hook.api INFO: [INFO] Unregister the Orchestrator
2013-07-01 11:24:48,709 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] Execute apt-get -y autoremove
2013-07-01 11:24:48,889 unit:oscied-storage/0: hook.output INFO: Setting up python-charmhelpers (0.3+bzr178-3~raring1) ...

2013-07-01 11:24:49,018 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] Execute apt-get -y remove --purge glusterfs-client nfs-common ntp make apache2 apache2-threaded-dev
2013-07-01 11:24:49,355 unit:oscied-transform/0: unit.hook.api INFO: [INFO] Upgrade system and install prerequisites
2013-07-01 11:24:49,682 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] Execute apt-add-repository -y ppa:jon-severinsson/ffmpeg
2013-07-01 11:24:51,052 unit:oscied-storage/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 11:24:51,273 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] Execute apt-get -y update
2013-07-01 11:24:51,408 unit:oscied-storage/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 11:24:51,747 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 11:24:52,098 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0xaa9210>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/0', 'public_address': 'ec2-54-227-38-161.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-154-181-123.ec2.internal', 'juju_log': <function callable_command at 0x106b0c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 11:24:52,427 unit:oscied-storage/0: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 11:24:52,413 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] Execute apt-get -y remove --purge apache2.2-common
2013-07-01 11:24:52,758 unit:oscied-storage/0: unit.hook.api INFO: [HOOK] Execute StorageHooks hook install
2013-07-01 11:24:53,090 unit:oscied-storage/0: unit.hook.api INFO: [INFO] Uninstall prerequisites, remove files & bricks and load default configuration
2013-07-01 11:24:53,093 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] Execute apt-get -y autoremove
2013-07-01 11:24:53,419 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Execute pgrep glusterd
2013-07-01 11:24:53,669 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] Execute apt-get -y upgrade
2013-07-01 11:24:53,784 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Execute apt-get -y remove --purge glusterfs-server nfs-common
2013-07-01 11:24:54,420 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Execute apt-get -y autoremove
2013-07-01 11:24:55,074 unit:oscied-storage/0: unit.hook.api INFO: [INFO] Upgrade system and install prerequisites
2013-07-01 11:24:55,420 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Execute apt-get -y update
2013-07-01 11:24:57,216 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] Execute apt-get -y install glusterfs-client ffmpeg libavcodec-dev nfs-common ntp libavutil-dev libavcodec-extra-53 libavformat-dev libswscale-dev x264 zlib1g-dev libavdevice-dev
2013-07-01 11:24:58,639 unit:oscied-publisher/0: unit.hook.api INFO: [INFO] Upgrade system and install prerequisites
2013-07-01 11:24:58,995 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] Execute apt-add-repository -y ppa:jon-severinsson/ffmpeg
2013-07-01 11:24:59,627 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Execute apt-get -y upgrade
2013-07-01 11:25:00,265 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Execute apt-get -y install ntp glusterfs-server nfs-common
2013-07-01 11:25:00,595 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] Execute apt-get -y update
2013-07-01 11:25:03,060 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] Execute apt-get -y upgrade
2013-07-01 11:25:06,453 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] Execute apt-get -y install glusterfs-client nfs-common ntp make apache2 apache2-threaded-dev
2013-07-01 11:25:15,856 unit:oscied-storage/0: unit.hook.api INFO: [INFO] Restart network time protocol service
2013-07-01 11:25:16,187 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Execute service ntp restart
2013-07-01 11:25:18,610 unit:oscied-storage/0: unit.hook.api INFO: [INFO] Create and start a replica=1 volume medias_volume_0 with 1 brick
2013-07-01 11:25:18,949 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Execute gluster volume create medias_volume_0  ip-10-154-181-123.ec2.internal:/exp0
2013-07-01 11:25:19,416 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Execute gluster volume start medias_volume_0 
2013-07-01 11:25:20,766 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Execute gluster volume info medias_volume_0 
2013-07-01 11:25:21,247 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Volume infos stdout: '\nVolume Name: medias_volume_0\nType: Distribute\nStatus: Started\nNumber of Bricks: 1\nTransport-type: tcp\nBricks:\nBrick1: ip-10-154-181-123.ec2.internal:/exp0\n'
2013-07-01 11:25:21,590 unit:oscied-storage/0: unit.hook.api INFO: [INFO] {'status': 'Started', 'name': 'medias_volume_0', 'bricks': ['ip-10-154-181-123.ec2.internal:/exp0'], 'auth_allow': '', 'type': 'Distribute', 'transport': 'tcp'}
2013-07-01 11:25:21,921 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Execute gluster volume rebalance medias_volume_0 status
2013-07-01 11:25:22,348 unit:oscied-storage/0: unit.hook.api INFO: [INFO] nothing to rebalance on volume medias_volume_0

2013-07-01 11:25:22,678 unit:oscied-storage/0: unit.hook.api INFO: [INFO] Expose GlusterFS Server service
2013-07-01 11:25:23,038 unit:oscied-storage/0: unit.hook.api DEBUG: opened 111/tcp
2013-07-01 11:25:23,397 unit:oscied-storage/0: unit.hook.api DEBUG: opened 24007/tcp
2013-07-01 11:25:23,769 unit:oscied-storage/0: unit.hook.api DEBUG: opened 24009/tcp
2013-07-01 11:25:24,110 unit:oscied-storage/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0xaa9210>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 11:25:24,471 unit:oscied-storage/0: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 11:25:24,521 unit:oscied-storage/0: hook.output DEBUG: hook install exited, exit code 0.
2013-07-01 11:25:24,522 unit:oscied-storage/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-0/charm/hooks/install
2013-07-01 11:25:24,533 unit:oscied-storage/0: statemachine DEBUG: unitworkflowstate: transition complete install (state installed) {}
2013-07-01 11:25:24,544 unit:oscied-storage/0: statemachine DEBUG: unitworkflowstate: transition start (installed -> started) {}
2013-07-01 11:25:24,545 unit:oscied-storage/0: statemachine DEBUG: unitworkflowstate:  execute action do_start
2013-07-01 11:25:24,545 unit:oscied-storage/0: unit.lifecycle DEBUG: pre-start acquire, running:False
2013-07-01 11:25:24,545 unit:oscied-storage/0: unit.lifecycle DEBUG: start running, unit lifecycle
2013-07-01 11:25:24,590 unit:oscied-storage/0: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:2
2013-07-01 11:25:24,593 unit:oscied-storage/0: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:3
2013-07-01 11:25:24,597 unit:oscied-storage/0: juju.state.hook DEBUG: Ignoring partially constructed relation: peer:0
2013-07-01 11:25:24,603 unit:oscied-storage/0: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:1
2013-07-01 11:25:24,606 unit:oscied-storage/0: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:4
2013-07-01 11:25:24,606 unit:oscied-storage/0: hook.output DEBUG: Cached relation hook contexts: []
2013-07-01 11:25:24,626 unit:oscied-storage/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-0/charm/hooks/config-changed
2013-07-01 11:25:24,919 unit:oscied-webui/0: unit.hook.api INFO: [INFO] Restart network time protocol service
2013-07-01 11:25:25,552 unit:oscied-storage/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 11:25:25,920 unit:oscied-storage/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 11:25:26,267 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 11:25:26,605 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x2966b90>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/0', 'public_address': 'ec2-54-227-38-161.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-154-181-123.ec2.internal', 'juju_log': <function callable_command at 0x2f350c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 11:25:26,948 unit:oscied-storage/0: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 11:25:27,304 unit:oscied-storage/0: unit.hook.api INFO: [HOOK] Execute StorageHooks hook config-changed
2013-07-01 11:25:27,350 unit:oscied-webui/0: unit.hook.api INFO: [INFO] Import Web UI database and create user
2013-07-01 11:25:27,652 unit:oscied-storage/0: unit.hook.api INFO: [INFO] Set volume medias_volume_0 allowed clients IP list to *
2013-07-01 11:25:27,826 unit:oscied-webui/0: unit.hook.api INFO: [INFO] Configure Apache 2
2013-07-01 11:25:27,988 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Execute gluster volume set medias_volume_0 auth.allow "*"
2013-07-01 11:25:28,239 unit:oscied-webui/0: unit.hook.api INFO: [INFO] Copy and pre-configure Web UI
2013-07-01 11:25:28,948 unit:oscied-webui/0: unit.hook.api INFO: [INFO] Expose Apache 2 service
2013-07-01 11:25:29,276 unit:oscied-transform/0: unit.hook.api INFO: [INFO] Restart network time protocol service
2013-07-01 11:25:29,315 unit:oscied-webui/0: unit.hook.api DEBUG: opened 80/tcp
2013-07-01 11:25:29,588 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Execute gluster volume info medias_volume_0 
2013-07-01 11:25:29,605 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] Execute service ntp restart
2013-07-01 11:25:29,660 unit:oscied-webui/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_options': '', 'verbose': None, 'database_template_file': 'templates/database.php.template', 'hosts_file': '/etc/hosts', 'sites_enabled_path': '/etc/apache2/sites-enabled', 'storage_path': '/mnt/storage', 'storage_mountpoint': '', 'api_url': '', 'site_database_file': 'webui-db.sql', 'general_config_file': '/var/www/application/config/config.php', 'database_config_file': '/var/www/application/config/database.php', 'proxy_ips': [], 'htaccess_template_file': 'templates/htaccess.template', 'storage_address': '', 'www_medias_path': '/var/www/medias', 'www_uploads_path': '/var/www/uploads', '_pickle_filename': 'local_config.pkl', 'site_template_file': 'templates/000-default', 'storage_mount_sleep_delay': 5, 'encryption_key': '5UCuWXhlrxOscNFuShIfJtLlI2oB3crZ', 'storage_fstype': '', 'www_root_path': '/var/www', 'general_template_file': 'templates/config.php.template', 'htaccess_config_file': '/var/www/.htaccess'}
2013-07-01 11:25:30,040 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Volume infos stdout: '\nVolume Name: medias_volume_0\nType: Distribute\nStatus: Started\nNumber of Bricks: 1\nTransport-type: tcp\nBricks:\nBrick1: ip-10-154-181-123.ec2.internal:/exp0\nOptions Reconfigured:\nauth.allow: *\n'
2013-07-01 11:25:30,014 unit:oscied-webui/0: unit.hook.api INFO: <-- Exiting WebuiHooks.py
2013-07-01 11:25:30,064 unit:oscied-webui/0: hook.output DEBUG: hook install exited, exit code 0.
2013-07-01 11:25:30,064 unit:oscied-webui/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-webui-0/charm/hooks/install
2013-07-01 11:25:30,082 unit:oscied-webui/0: statemachine DEBUG: unitworkflowstate: transition complete install (state installed) {}
2013-07-01 11:25:30,105 unit:oscied-webui/0: statemachine DEBUG: unitworkflowstate: transition start (installed -> started) {}
2013-07-01 11:25:30,106 unit:oscied-webui/0: statemachine DEBUG: unitworkflowstate:  execute action do_start
2013-07-01 11:25:30,106 unit:oscied-webui/0: unit.lifecycle DEBUG: pre-start acquire, running:False
2013-07-01 11:25:30,107 unit:oscied-webui/0: unit.lifecycle DEBUG: start running, unit lifecycle
2013-07-01 11:25:30,152 unit:oscied-webui/0: juju.state.hook DEBUG: Ignoring partially constructed relation: api:7
2013-07-01 11:25:30,158 unit:oscied-webui/0: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:4
2013-07-01 11:25:30,159 unit:oscied-webui/0: hook.output DEBUG: Cached relation hook contexts: []
2013-07-01 11:25:30,185 unit:oscied-webui/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-webui-0/charm/hooks/config-changed
2013-07-01 11:25:30,376 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Execute gluster volume info medias_volume_0 
2013-07-01 11:25:30,812 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Volume infos stdout: '\nVolume Name: medias_volume_0\nType: Distribute\nStatus: Started\nNumber of Bricks: 1\nTransport-type: tcp\nBricks:\nBrick1: ip-10-154-181-123.ec2.internal:/exp0\nOptions Reconfigured:\nauth.allow: *\n'
2013-07-01 11:25:31,103 unit:oscied-webui/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 11:25:31,169 unit:oscied-storage/0: unit.hook.api INFO: [INFO] {'status': 'Started', 'name': 'medias_volume_0', 'bricks': ['ip-10-154-181-123.ec2.internal:/exp0'], 'auth_allow': '*', 'type': 'Distribute', 'transport': 'tcp'}
2013-07-01 11:25:31,482 unit:oscied-webui/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 11:25:31,529 unit:oscied-storage/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x2966b90>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 11:25:31,881 unit:oscied-storage/0: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 11:25:31,856 unit:oscied-webui/0: unit.hook.api INFO: --> Entering WebuiHooks.py
2013-07-01 11:25:31,928 unit:oscied-storage/0: hook.output DEBUG: hook config-changed exited, exit code 0.
2013-07-01 11:25:31,928 unit:oscied-storage/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-0/charm/hooks/config-changed
2013-07-01 11:25:32,034 unit:oscied-storage/0: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:2
2013-07-01 11:25:32,020 unit:oscied-transform/0: unit.hook.api INFO: [INFO] Compile and install GPAC/DashCast
2013-07-01 11:25:32,039 unit:oscied-storage/0: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:3
2013-07-01 11:25:32,050 unit:oscied-storage/0: juju.state.hook DEBUG: Ignoring partially constructed relation: peer:0
2013-07-01 11:25:32,053 unit:oscied-storage/0: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:1
2013-07-01 11:25:32,056 unit:oscied-storage/0: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:4
2013-07-01 11:25:32,056 unit:oscied-storage/0: hook.output DEBUG: Cached relation hook contexts: []
2013-07-01 11:25:32,070 unit:oscied-storage/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-0/charm/hooks/start
2013-07-01 11:25:32,211 unit:oscied-webui/0: unit.hook.api INFO: [HOOK] Execute WebuiHooks hook config-changed
2013-07-01 11:25:32,570 unit:oscied-webui/0: unit.hook.api INFO: [REMARK] File /var/www/application/config/config.php successfully generated !
2013-07-01 11:25:32,980 unit:oscied-storage/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 11:25:32,967 unit:oscied-webui/0: unit.hook.api INFO: [REMARK] File /var/www/application/config/database.php successfully generated !
2013-07-01 11:25:33,318 unit:oscied-webui/0: unit.hook.api INFO: [REMARK] File /var/www/.htaccess successfully generated !
2013-07-01 11:25:33,349 unit:oscied-storage/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 11:25:33,697 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 11:25:33,674 unit:oscied-webui/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_options': '', 'verbose': None, 'database_template_file': 'templates/database.php.template', 'hosts_file': '/etc/hosts', 'sites_enabled_path': '/etc/apache2/sites-enabled', 'storage_path': '/mnt/storage', 'storage_mountpoint': '', 'api_url': '', 'site_database_file': 'webui-db.sql', 'general_config_file': '/var/www/application/config/config.php', 'database_config_file': '/var/www/application/config/database.php', 'proxy_ips': [], 'htaccess_template_file': 'templates/htaccess.template', 'storage_address': '', 'www_medias_path': '/var/www/medias', 'www_uploads_path': '/var/www/uploads', '_pickle_filename': 'local_config.pkl', 'site_template_file': 'templates/000-default', 'storage_mount_sleep_delay': 5, 'encryption_key': '5UCuWXhlrxOscNFuShIfJtLlI2oB3crZ', 'storage_fstype': '', 'www_root_path': '/var/www', 'general_template_file': 'templates/config.php.template', 'htaccess_config_file': '/var/www/.htaccess'}
2013-07-01 11:25:34,031 unit:oscied-webui/0: unit.hook.api INFO: <-- Exiting WebuiHooks.py
2013-07-01 11:25:34,080 unit:oscied-webui/0: hook.output DEBUG: hook config-changed exited, exit code 0.
2013-07-01 11:25:34,081 unit:oscied-webui/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-webui-0/charm/hooks/config-changed
2013-07-01 11:25:34,044 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x2534320>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/0', 'public_address': 'ec2-54-227-38-161.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-154-181-123.ec2.internal', 'juju_log': <function callable_command at 0x28b40c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 11:25:34,118 unit:oscied-webui/0: juju.state.hook DEBUG: Ignoring partially constructed relation: api:7
2013-07-01 11:25:34,122 unit:oscied-webui/0: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:4
2013-07-01 11:25:34,122 unit:oscied-webui/0: hook.output DEBUG: Cached relation hook contexts: []
2013-07-01 11:25:34,131 unit:oscied-webui/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-webui-0/charm/hooks/start
2013-07-01 11:25:34,470 unit:oscied-storage/0: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 11:25:34,807 unit:oscied-storage/0: unit.hook.api INFO: [HOOK] Execute StorageHooks hook start
2013-07-01 11:25:35,042 unit:oscied-webui/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 11:25:35,147 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Execute pgrep glusterd
2013-07-01 11:25:35,173 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] Execute ./configure
2013-07-01 11:25:35,413 unit:oscied-webui/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 11:25:35,501 unit:oscied-storage/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x2534320>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 11:25:35,781 unit:oscied-webui/0: unit.hook.api INFO: --> Entering WebuiHooks.py
2013-07-01 11:25:35,849 unit:oscied-storage/0: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 11:25:35,893 unit:oscied-storage/0: hook.output DEBUG: hook start exited, exit code 0.
2013-07-01 11:25:35,894 unit:oscied-storage/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-0/charm/hooks/start
2013-07-01 11:25:35,894 unit:oscied-storage/0: unit.lifecycle DEBUG: starting service relation watch
2013-07-01 11:25:35,895 unit:oscied-storage/0: unit.lifecycle DEBUG: starting unit relation resolved watch
2013-07-01 11:25:35,903 unit:oscied-storage/0: unit.lifecycle DEBUG: relation resolved changed
2013-07-01 11:25:35,904 unit:oscied-storage/0: unit.lifecycle INFO: processing relation resolved changed
2013-07-01 11:25:35,909 unit:oscied-storage/0: unit.lifecycle DEBUG: services changed old:None new:[<ServiceRelationState name:storage role:server id:relation-0000000002 scope:global>, <ServiceRelationState name:storage role:server id:relation-0000000003 scope:global>, <ServiceRelationState name:peer role:peer id:relation-0000000000 scope:global>, <ServiceRelationState name:storage role:server id:relation-0000000001 scope:global>, <ServiceRelationState name:storage role:server id:relation-0000000004 scope:global>]
2013-07-01 11:25:35,912 unit:oscied-storage/0: unit.lifecycle DEBUG: processing relations changed
2013-07-01 11:25:35,959 unit:oscied-storage/0: unit.relation.lifecycle DEBUG: stopped relation:peer lifecycle
2013-07-01 11:25:35,966 unit:oscied-storage/0: statemachine DEBUG: relationworkflowstate: transition start (None -> up) {}
2013-07-01 11:25:35,966 unit:oscied-storage/0: statemachine DEBUG: relationworkflowstate:  execute action do_start
2013-07-01 11:25:35,967 unit:oscied-storage/0: hook.scheduler DEBUG: start
2013-07-01 11:25:35,983 unit:oscied-storage/0: unit.relation.watch DEBUG: relation watcher start
2013-07-01 11:25:35,984 unit:oscied-storage/0: unit.relation.lifecycle DEBUG: started relation:peer lifecycle
2013-07-01 11:25:35,993 unit:oscied-storage/0: statemachine DEBUG: relationworkflowstate: transition complete start (state up) {}
2013-07-01 11:25:36,029 unit:oscied-storage/0: unit.relation.lifecycle DEBUG: stopped relation:storage lifecycle
2013-07-01 11:25:36,035 unit:oscied-storage/0: statemachine DEBUG: relationworkflowstate: transition start (None -> up) {}
2013-07-01 11:25:36,035 unit:oscied-storage/0: statemachine DEBUG: relationworkflowstate:  execute action do_start
2013-07-01 11:25:36,036 unit:oscied-storage/0: hook.scheduler DEBUG: start
2013-07-01 11:25:36,050 unit:oscied-storage/0: unit.relation.watch DEBUG: relation watcher start
2013-07-01 11:25:36,050 unit:oscied-storage/0: unit.relation.lifecycle DEBUG: started relation:storage lifecycle
2013-07-01 11:25:36,061 unit:oscied-storage/0: statemachine DEBUG: relationworkflowstate: transition complete start (state up) {}
2013-07-01 11:25:36,089 unit:oscied-storage/0: unit.relation.lifecycle DEBUG: stopped relation:storage lifecycle
2013-07-01 11:25:36,101 unit:oscied-storage/0: statemachine DEBUG: relationworkflowstate: transition start (None -> up) {}
2013-07-01 11:25:36,101 unit:oscied-storage/0: statemachine DEBUG: relationworkflowstate:  execute action do_start
2013-07-01 11:25:36,102 unit:oscied-storage/0: hook.scheduler DEBUG: start
2013-07-01 11:25:36,113 unit:oscied-storage/0: unit.relation.watch DEBUG: relation watcher start
2013-07-01 11:25:36,114 unit:oscied-storage/0: unit.relation.lifecycle DEBUG: started relation:storage lifecycle
2013-07-01 11:25:36,129 unit:oscied-storage/0: statemachine DEBUG: relationworkflowstate: transition complete start (state up) {}
2013-07-01 11:25:36,129 unit:oscied-webui/0: unit.hook.api INFO: [HOOK] Execute WebuiHooks hook start
2013-07-01 11:25:36,166 unit:oscied-storage/0: unit.relation.lifecycle DEBUG: stopped relation:storage lifecycle
2013-07-01 11:25:36,177 unit:oscied-storage/0: statemachine DEBUG: relationworkflowstate: transition start (None -> up) {}
2013-07-01 11:25:36,184 unit:oscied-storage/0: statemachine DEBUG: relationworkflowstate:  execute action do_start
2013-07-01 11:25:36,185 unit:oscied-storage/0: hook.scheduler DEBUG: start
2013-07-01 11:25:36,198 unit:oscied-storage/0: unit.relation.watch DEBUG: relation watcher start
2013-07-01 11:25:36,198 unit:oscied-storage/0: unit.relation.lifecycle DEBUG: started relation:storage lifecycle
2013-07-01 11:25:36,213 unit:oscied-storage/0: statemachine DEBUG: relationworkflowstate: transition complete start (state up) {}
2013-07-01 11:25:36,239 unit:oscied-storage/0: unit.relation.lifecycle DEBUG: stopped relation:storage lifecycle
2013-07-01 11:25:36,245 unit:oscied-storage/0: statemachine DEBUG: relationworkflowstate: transition start (None -> up) {}
2013-07-01 11:25:36,246 unit:oscied-storage/0: statemachine DEBUG: relationworkflowstate:  execute action do_start
2013-07-01 11:25:36,246 unit:oscied-storage/0: hook.scheduler DEBUG: start
2013-07-01 11:25:36,262 unit:oscied-storage/0: unit.relation.watch DEBUG: relation watcher start
2013-07-01 11:25:36,262 unit:oscied-storage/0: unit.relation.lifecycle DEBUG: started relation:storage lifecycle
2013-07-01 11:25:36,269 unit:oscied-storage/0: statemachine DEBUG: relationworkflowstate: transition complete start (state up) {}
2013-07-01 11:25:36,271 unit:oscied-storage/0: unit.lifecycle DEBUG: started unit lifecycle
2013-07-01 11:25:36,291 unit:oscied-storage/0: statemachine DEBUG: unitworkflowstate: transition complete start (state started) {}
2013-07-01 11:25:36,296 unit:oscied-storage/0: juju.agents.unit DEBUG: Configuration Changed
2013-07-01 11:25:36,309 unit:oscied-storage/0: statemachine DEBUG: unitworkflowstate: transition configure (started -> started) {}
2013-07-01 11:25:36,310 unit:oscied-storage/0: statemachine DEBUG: unitworkflowstate:  execute action do_configure
2013-07-01 11:25:36,484 unit:oscied-webui/0: unit.hook.api INFO: [REMARK] Do not start web user interface : No shared storage !
2013-07-01 11:25:36,549 unit:oscied-storage/0: hook.output DEBUG: Cached relation hook contexts: ['peer:0', 'storage:1', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 11:25:36,558 unit:oscied-storage/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-0/charm/hooks/config-changed
2013-07-01 11:25:36,840 unit:oscied-webui/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_options': '', 'verbose': None, 'database_template_file': 'templates/database.php.template', 'hosts_file': '/etc/hosts', 'sites_enabled_path': '/etc/apache2/sites-enabled', 'storage_path': '/mnt/storage', 'storage_mountpoint': '', 'api_url': '', 'site_database_file': 'webui-db.sql', 'general_config_file': '/var/www/application/config/config.php', 'database_config_file': '/var/www/application/config/database.php', 'proxy_ips': [], 'htaccess_template_file': 'templates/htaccess.template', 'storage_address': '', 'www_medias_path': '/var/www/medias', 'www_uploads_path': '/var/www/uploads', '_pickle_filename': 'local_config.pkl', 'site_template_file': 'templates/000-default', 'storage_mount_sleep_delay': 5, 'encryption_key': '5UCuWXhlrxOscNFuShIfJtLlI2oB3crZ', 'storage_fstype': '', 'www_root_path': '/var/www', 'general_template_file': 'templates/config.php.template', 'htaccess_config_file': '/var/www/.htaccess'}
2013-07-01 11:25:37,194 unit:oscied-webui/0: unit.hook.api INFO: <-- Exiting WebuiHooks.py
2013-07-01 11:25:37,241 unit:oscied-webui/0: hook.output DEBUG: hook start exited, exit code 0.
2013-07-01 11:25:37,242 unit:oscied-webui/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-webui-0/charm/hooks/start
2013-07-01 11:25:37,243 unit:oscied-webui/0: unit.lifecycle DEBUG: starting service relation watch
2013-07-01 11:25:37,243 unit:oscied-webui/0: unit.lifecycle DEBUG: starting unit relation resolved watch
2013-07-01 11:25:37,253 unit:oscied-webui/0: unit.lifecycle DEBUG: relation resolved changed
2013-07-01 11:25:37,253 unit:oscied-webui/0: unit.lifecycle INFO: processing relation resolved changed
2013-07-01 11:25:37,259 unit:oscied-webui/0: unit.lifecycle DEBUG: services changed old:None new:[<ServiceRelationState name:api role:client id:relation-0000000007 scope:global>, <ServiceRelationState name:storage role:client id:relation-0000000004 scope:global>]
2013-07-01 11:25:37,260 unit:oscied-webui/0: unit.lifecycle DEBUG: processing relations changed
2013-07-01 11:25:37,320 unit:oscied-storage/0: unit.relation.watch DEBUG: relation membership change
2013-07-01 11:25:37,294 unit:oscied-webui/0: unit.relation.lifecycle DEBUG: stopped relation:storage lifecycle
2013-07-01 11:25:37,331 unit:oscied-storage/0: hook.scheduler DEBUG: members changed: old=[], new=['oscied-webui/0']
2013-07-01 11:25:37,332 unit:oscied-storage/0: hook.scheduler DEBUG: executing hook for oscied-webui/0:joined
2013-07-01 11:25:37,335 unit:oscied-storage/0: hook.scheduler DEBUG: settings changed: (('oscied-webui/0', 0),)
2013-07-01 11:25:37,314 unit:oscied-webui/0: statemachine DEBUG: relationworkflowstate: transition start (None -> up) {}
2013-07-01 11:25:37,315 unit:oscied-webui/0: statemachine DEBUG: relationworkflowstate:  execute action do_start
2013-07-01 11:25:37,315 unit:oscied-webui/0: hook.scheduler DEBUG: start
2013-07-01 11:25:37,331 unit:oscied-webui/0: unit.relation.watch DEBUG: relation watcher start
2013-07-01 11:25:37,332 unit:oscied-webui/0: unit.relation.lifecycle DEBUG: started relation:storage lifecycle
2013-07-01 11:25:37,340 unit:oscied-webui/0: hook.scheduler DEBUG: members changed: old=[], new=['oscied-storage/0']
2013-07-01 11:25:37,341 unit:oscied-webui/0: hook.scheduler DEBUG: executing hook for oscied-storage/0:joined
2013-07-01 11:25:37,342 unit:oscied-webui/0: hook.scheduler DEBUG: settings changed: (('oscied-storage/0', 0),)
2013-07-01 11:25:37,344 unit:oscied-webui/0: statemachine DEBUG: relationworkflowstate: transition complete start (state up) {}
2013-07-01 11:25:37,457 unit:oscied-webui/0: juju.state.hook DEBUG: Ignoring partially constructed relation: api:7
2013-07-01 11:25:37,461 unit:oscied-webui/0: hook.output DEBUG: Cached relation hook contexts on 'storage:4': []
2013-07-01 11:25:37,497 unit:oscied-storage/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 11:25:37,472 unit:oscied-webui/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 11:25:37,473 unit:oscied-webui/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-webui-0/charm/hooks/storage-relation-joined
2013-07-01 11:25:37,498 unit:oscied-webui/0: unit.relation.lifecycle DEBUG: stopped relation:api lifecycle
2013-07-01 11:25:37,505 unit:oscied-webui/0: statemachine DEBUG: relationworkflowstate: transition start (None -> up) {}
2013-07-01 11:25:37,506 unit:oscied-webui/0: statemachine DEBUG: relationworkflowstate:  execute action do_start
2013-07-01 11:25:37,506 unit:oscied-webui/0: hook.scheduler DEBUG: start
2013-07-01 11:25:37,527 unit:oscied-webui/0: unit.relation.watch DEBUG: relation watcher start
2013-07-01 11:25:37,527 unit:oscied-webui/0: unit.relation.lifecycle DEBUG: started relation:api lifecycle
2013-07-01 11:25:37,538 unit:oscied-webui/0: statemachine DEBUG: relationworkflowstate: transition complete start (state up) {}
2013-07-01 11:25:37,540 unit:oscied-webui/0: unit.lifecycle DEBUG: started unit lifecycle
2013-07-01 11:25:37,558 unit:oscied-webui/0: statemachine DEBUG: unitworkflowstate: transition complete start (state started) {}
2013-07-01 11:25:37,565 unit:oscied-webui/0: juju.agents.unit DEBUG: Configuration Changed
2013-07-01 11:25:37,572 unit:oscied-webui/0: statemachine DEBUG: unitworkflowstate: transition configure (started -> started) {}
2013-07-01 11:25:37,572 unit:oscied-webui/0: statemachine DEBUG: unitworkflowstate:  execute action do_configure
2013-07-01 11:25:37,708 unit:oscied-webui/0: hook.output DEBUG: Cached relation hook contexts: ['api:7', 'storage:4']
2013-07-01 11:25:37,786 unit:oscied-storage/0: hook.output DEBUG: Cached relation hook contexts on 'storage:4': ['peer:0', 'storage:1', 'storage:2', 'storage:3']
2013-07-01 11:25:37,794 unit:oscied-storage/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 11:25:37,997 unit:oscied-storage/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 11:25:38,362 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 11:25:38,471 unit:oscied-webui/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 11:25:38,728 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x2433b90>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/0', 'public_address': 'ec2-54-227-38-161.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-154-181-123.ec2.internal', 'juju_log': <function callable_command at 0x2a020c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 11:25:38,871 unit:oscied-webui/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 11:25:39,075 unit:oscied-storage/0: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 11:25:39,233 unit:oscied-webui/0: unit.hook.api INFO: --> Entering WebuiHooks.py
2013-07-01 11:25:39,423 unit:oscied-storage/0: unit.hook.api INFO: [HOOK] Execute StorageHooks hook config-changed
2013-07-01 11:25:39,579 unit:oscied-webui/0: unit.hook.api INFO: [HOOK] Execute WebuiHooks hook storage-relation-joined
2013-07-01 11:25:39,762 unit:oscied-storage/0: unit.hook.api INFO: [INFO] Set volume medias_volume_0 allowed clients IP list to *
2013-07-01 11:25:39,918 unit:oscied-publisher/0: unit.hook.api INFO: [INFO] Restart network time protocol service
2013-07-01 11:25:39,925 unit:oscied-webui/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_options': '', 'verbose': None, 'database_template_file': 'templates/database.php.template', 'hosts_file': '/etc/hosts', 'sites_enabled_path': '/etc/apache2/sites-enabled', 'storage_path': '/mnt/storage', 'storage_mountpoint': '', 'api_url': '', 'site_database_file': 'webui-db.sql', 'general_config_file': '/var/www/application/config/config.php', 'database_config_file': '/var/www/application/config/database.php', 'proxy_ips': [], 'htaccess_template_file': 'templates/htaccess.template', 'storage_address': '', 'www_medias_path': '/var/www/medias', 'www_uploads_path': '/var/www/uploads', '_pickle_filename': 'local_config.pkl', 'site_template_file': 'templates/000-default', 'storage_mount_sleep_delay': 5, 'encryption_key': '5UCuWXhlrxOscNFuShIfJtLlI2oB3crZ', 'storage_fstype': '', 'www_root_path': '/var/www', 'general_template_file': 'templates/config.php.template', 'htaccess_config_file': '/var/www/.htaccess'}
2013-07-01 11:25:40,105 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Execute gluster volume set medias_volume_0 auth.allow "*"
2013-07-01 11:25:40,271 unit:oscied-webui/0: unit.hook.api INFO: <-- Exiting WebuiHooks.py
2013-07-01 11:25:40,283 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] Execute service ntp restart
2013-07-01 11:25:40,318 unit:oscied-webui/0: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 11:25:40,324 unit:oscied-webui/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-webui-0/charm/hooks/storage-relation-joined
2013-07-01 11:25:40,327 unit:oscied-webui/0: hook.scheduler DEBUG: executing hook for oscied-storage/0:modified
2013-07-01 11:25:40,328 unit:oscied-webui/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-webui-0/charm/hooks/config-changed
2013-07-01 11:25:40,436 unit:oscied-webui/0: hook.output DEBUG: Cached relation hook contexts on 'storage:4': ['api:7']
2013-07-01 11:25:40,445 unit:oscied-webui/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 11:25:40,653 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] Execute make -j1
2013-07-01 11:25:41,290 unit:oscied-webui/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 11:25:41,678 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Execute gluster volume info medias_volume_0 
2013-07-01 11:25:41,665 unit:oscied-webui/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 11:25:42,026 unit:oscied-webui/0: unit.hook.api INFO: --> Entering WebuiHooks.py
2013-07-01 11:25:42,129 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Volume infos stdout: '\nVolume Name: medias_volume_0\nType: Distribute\nStatus: Started\nNumber of Bricks: 1\nTransport-type: tcp\nBricks:\nBrick1: ip-10-154-181-123.ec2.internal:/exp0\nOptions Reconfigured:\nauth.allow: *\n'
2013-07-01 11:25:42,372 unit:oscied-webui/0: unit.hook.api INFO: [HOOK] Execute WebuiHooks hook config-changed
2013-07-01 11:25:42,472 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Execute gluster volume info medias_volume_0 
2013-07-01 11:25:42,722 unit:oscied-webui/0: unit.hook.api INFO: [REMARK] File /var/www/application/config/config.php successfully generated !
2013-07-01 11:25:42,765 unit:oscied-publisher/0: unit.hook.api INFO: [INFO] Compile and install Apache H.264 streaming module
2013-07-01 11:25:42,915 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Volume infos stdout: '\nVolume Name: medias_volume_0\nType: Distribute\nStatus: Started\nNumber of Bricks: 1\nTransport-type: tcp\nBricks:\nBrick1: ip-10-154-181-123.ec2.internal:/exp0\nOptions Reconfigured:\nauth.allow: *\n'
2013-07-01 11:25:43,077 unit:oscied-webui/0: unit.hook.api INFO: [REMARK] File /var/www/application/config/database.php successfully generated !
2013-07-01 11:25:43,153 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] Execute which apxs2
2013-07-01 11:25:43,264 unit:oscied-storage/0: unit.hook.api INFO: [INFO] {'status': 'Started', 'name': 'medias_volume_0', 'bricks': ['ip-10-154-181-123.ec2.internal:/exp0'], 'auth_allow': '*', 'type': 'Distribute', 'transport': 'tcp'}
2013-07-01 11:25:43,424 unit:oscied-webui/0: unit.hook.api INFO: [REMARK] File /var/www/.htaccess successfully generated !
2013-07-01 11:25:43,508 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] Execute ./configure --with-apxs=/usr/bin/apxs2

2013-07-01 11:25:43,621 unit:oscied-storage/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x2433b90>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 11:25:43,775 unit:oscied-webui/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_options': '', 'verbose': None, 'database_template_file': 'templates/database.php.template', 'hosts_file': '/etc/hosts', 'sites_enabled_path': '/etc/apache2/sites-enabled', 'storage_path': '/mnt/storage', 'storage_mountpoint': '', 'api_url': '', 'site_database_file': 'webui-db.sql', 'general_config_file': '/var/www/application/config/config.php', 'database_config_file': '/var/www/application/config/database.php', 'proxy_ips': [], 'htaccess_template_file': 'templates/htaccess.template', 'storage_address': '', 'www_medias_path': '/var/www/medias', 'www_uploads_path': '/var/www/uploads', '_pickle_filename': 'local_config.pkl', 'site_template_file': 'templates/000-default', 'storage_mount_sleep_delay': 5, 'encryption_key': '5UCuWXhlrxOscNFuShIfJtLlI2oB3crZ', 'storage_fstype': '', 'www_root_path': '/var/www', 'general_template_file': 'templates/config.php.template', 'htaccess_config_file': '/var/www/.htaccess'}
2013-07-01 11:25:43,974 unit:oscied-storage/0: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 11:25:44,018 unit:oscied-storage/0: hook.output DEBUG: hook config-changed exited, exit code 0.
2013-07-01 11:25:44,100 unit:oscied-storage/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-0/charm/hooks/config-changed
2013-07-01 11:25:44,100 unit:oscied-storage/0: unit.lifecycle DEBUG: configured unit
2013-07-01 11:25:44,102 unit:oscied-storage/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-0/charm/hooks/storage-relation-joined
2013-07-01 11:25:44,124 unit:oscied-storage/0: statemachine DEBUG: unitworkflowstate: transition complete configure (state started) {}
2013-07-01 11:25:44,134 unit:oscied-storage/0: juju.agents.unit INFO: No upgrade flag set.
2013-07-01 11:25:44,119 unit:oscied-webui/0: unit.hook.api INFO: <-- Exiting WebuiHooks.py
2013-07-01 11:25:44,165 unit:oscied-webui/0: hook.output DEBUG: hook config-changed exited, exit code 0.
2013-07-01 11:25:44,198 unit:oscied-webui/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-webui-0/charm/hooks/config-changed
2013-07-01 11:25:44,199 unit:oscied-webui/0: unit.lifecycle DEBUG: configured unit
2013-07-01 11:25:44,200 unit:oscied-webui/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-webui-0/charm/hooks/storage-relation-changed
2013-07-01 11:25:44,225 unit:oscied-webui/0: statemachine DEBUG: unitworkflowstate: transition complete configure (state started) {}
2013-07-01 11:25:44,230 unit:oscied-webui/0: juju.agents.unit INFO: No upgrade flag set.
2013-07-01 11:25:44,988 unit:oscied-storage/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 11:25:45,077 unit:oscied-webui/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 11:25:45,344 unit:oscied-storage/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 11:25:45,444 unit:oscied-webui/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 11:25:45,685 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 11:25:45,806 unit:oscied-webui/0: unit.hook.api INFO: --> Entering WebuiHooks.py
2013-07-01 11:25:46,025 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0xdbad60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/0', 'public_address': 'ec2-54-227-38-161.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-154-181-123.ec2.internal', 'juju_log': <function callable_command at 0x13740c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 11:25:46,159 unit:oscied-webui/0: unit.hook.api INFO: [HOOK] Execute WebuiHooks hook storage-relation-changed
2013-07-01 11:25:46,362 unit:oscied-storage/0: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 11:25:46,713 unit:oscied-storage/0: unit.hook.api INFO: [HOOK] Execute StorageHooks hook storage-relation-joined
2013-07-01 11:25:47,047 unit:oscied-storage/0: unit.hook.api INFO: [INFO] Send filesystem (volume medias_volume_0) configuration to remote client
2013-07-01 11:25:47,883 unit:oscied-webui/0: unit.hook.api INFO: [REMARK] Waiting for complete setup !
2013-07-01 11:25:48,067 unit:oscied-storage/0: unit.hook.api INFO: [INFO] Add ip-10-154-177-94.ec2.internal to allowed clients IPs
2013-07-01 11:25:48,233 unit:oscied-webui/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_options': '', 'verbose': None, 'database_template_file': 'templates/database.php.template', 'hosts_file': '/etc/hosts', 'sites_enabled_path': '/etc/apache2/sites-enabled', 'storage_path': '/mnt/storage', 'storage_mountpoint': '', 'api_url': '', 'site_database_file': 'webui-db.sql', 'general_config_file': '/var/www/application/config/config.php', 'database_config_file': '/var/www/application/config/database.php', 'proxy_ips': [], 'htaccess_template_file': 'templates/htaccess.template', 'storage_address': '', 'www_medias_path': '/var/www/medias', 'www_uploads_path': '/var/www/uploads', '_pickle_filename': 'local_config.pkl', 'site_template_file': 'templates/000-default', 'storage_mount_sleep_delay': 5, 'encryption_key': '5UCuWXhlrxOscNFuShIfJtLlI2oB3crZ', 'storage_fstype': '', 'www_root_path': '/var/www', 'general_template_file': 'templates/config.php.template', 'htaccess_config_file': '/var/www/.htaccess'}
2013-07-01 11:25:48,401 unit:oscied-storage/0: unit.hook.api INFO: [INFO] Set volume medias_volume_0 allowed clients IP list to ip-10-154-177-94.ec2.internal,*
2013-07-01 11:25:48,578 unit:oscied-webui/0: unit.hook.api INFO: <-- Exiting WebuiHooks.py
2013-07-01 11:25:48,625 unit:oscied-webui/0: hook.output DEBUG: hook storage-relation-changed exited, exit code 0.
2013-07-01 11:25:48,647 unit:oscied-webui/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-webui-0/charm/hooks/storage-relation-changed
2013-07-01 11:25:48,732 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Execute gluster volume set medias_volume_0 auth.allow "ip-10-154-177-94.ec2.internal,*"
2013-07-01 11:25:50,317 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Execute gluster volume info medias_volume_0 
2013-07-01 11:25:50,756 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Volume infos stdout: '\nVolume Name: medias_volume_0\nType: Distribute\nStatus: Started\nNumber of Bricks: 1\nTransport-type: tcp\nBricks:\nBrick1: ip-10-154-181-123.ec2.internal:/exp0\nOptions Reconfigured:\nauth.allow: ip-10-154-177-94.ec2.internal,*\n'
2013-07-01 11:25:51,107 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Execute gluster volume info medias_volume_0 
2013-07-01 11:25:51,539 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Volume infos stdout: '\nVolume Name: medias_volume_0\nType: Distribute\nStatus: Started\nNumber of Bricks: 1\nTransport-type: tcp\nBricks:\nBrick1: ip-10-154-181-123.ec2.internal:/exp0\nOptions Reconfigured:\nauth.allow: ip-10-154-177-94.ec2.internal,*\n'
2013-07-01 11:25:51,883 unit:oscied-storage/0: unit.hook.api INFO: [INFO] {'status': 'Started', 'name': 'medias_volume_0', 'bricks': ['ip-10-154-181-123.ec2.internal:/exp0'], 'auth_allow': 'ip-10-154-177-94.ec2.internal,*', 'type': 'Distribute', 'transport': 'tcp'}
2013-07-01 11:25:52,215 unit:oscied-storage/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0xdbad60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': ['ip-10-154-177-94.ec2.internal'], 'verbose': True}
2013-07-01 11:25:52,546 unit:oscied-storage/0: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 11:25:52,589 unit:oscied-storage/0: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 11:25:52,616 unit:oscied-webui/0: unit.relation.watch DEBUG: relation watcher settings change <ClientEvent changed at '/relations/relation-0000000004/settings/unit-0000000002' state: connected handle:0>
2013-07-01 11:25:52,621 unit:oscied-webui/0: hook.scheduler DEBUG: settings changed: (('oscied-storage/0', 1),)
2013-07-01 11:25:52,622 unit:oscied-webui/0: hook.scheduler DEBUG: executing hook for oscied-storage/0:modified
2013-07-01 11:25:52,724 unit:oscied-storage/0: hook.output DEBUG: Flushed values for hook 'storage-relation-joined' on 'storage:4'
    Setting changed: u'fstype'=u'glusterfs' (was unset)
    Setting changed: u'mountpoint'=u'medias_volume_0' (was unset)
2013-07-01 11:25:52,724 unit:oscied-storage/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-0/charm/hooks/storage-relation-joined
2013-07-01 11:25:52,729 unit:oscied-storage/0: hook.scheduler DEBUG: executing hook for oscied-webui/0:modified
2013-07-01 11:25:52,745 unit:oscied-webui/0: hook.output DEBUG: Cached relation hook contexts on 'storage:4': ['api:7']
2013-07-01 11:25:52,755 unit:oscied-webui/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 11:25:52,756 unit:oscied-webui/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-webui-0/charm/hooks/storage-relation-changed
2013-07-01 11:25:52,929 unit:oscied-storage/0: hook.output DEBUG: Cached relation hook contexts on 'storage:4': ['peer:0', 'storage:1', 'storage:2', 'storage:3']
2013-07-01 11:25:52,937 unit:oscied-storage/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 11:25:52,938 unit:oscied-storage/0: hook.executor INFO: Hook does not exist, skipping /var/lib/juju/units/oscied-storage-0/charm/hooks/storage-relation-changed
2013-07-01 11:25:53,634 unit:oscied-webui/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 11:25:53,997 unit:oscied-webui/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 11:25:54,358 unit:oscied-webui/0: unit.hook.api INFO: --> Entering WebuiHooks.py
2013-07-01 11:25:54,701 unit:oscied-webui/0: unit.hook.api INFO: [HOOK] Execute WebuiHooks hook storage-relation-changed
2013-07-01 11:25:54,833 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] Execute make -j1
2013-07-01 11:25:58,454 unit:oscied-webui/0: unit.hook.api INFO: [INFO] Use storage parameters from charm storage relation
2013-07-01 11:25:58,819 unit:oscied-webui/0: unit.hook.api INFO: [INFO] Unregister shared storage
2013-07-01 11:25:59,190 unit:oscied-webui/0: unit.hook.api INFO: [REMARK] Shared storage already unmounted !
2013-07-01 11:26:02,742 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] Execute make install
2013-07-01 11:26:03,340 unit:oscied-publisher/0: unit.hook.api INFO: [INFO] Register Apache H.264 streaming module
2013-07-01 11:26:03,694 unit:oscied-publisher/0: unit.hook.api INFO: [INFO] Expose Apache 2 service
2013-07-01 11:26:04,092 unit:oscied-publisher/0: unit.hook.api DEBUG: opened 80/tcp
2013-07-01 11:26:04,455 unit:oscied-publisher/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'proxy_ips': [], 'storage_fstype': '', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-234-214-201.compute-1.amazonaws.com', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 11:26:04,813 unit:oscied-publisher/0: unit.hook.api INFO: <-- Exiting PublisherHooks.py
2013-07-01 11:26:04,866 unit:oscied-publisher/0: hook.output DEBUG: hook install exited, exit code 0.
2013-07-01 11:26:04,867 unit:oscied-publisher/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-publisher-0/charm/hooks/install
2013-07-01 11:26:04,881 unit:oscied-publisher/0: statemachine DEBUG: unitworkflowstate: transition complete install (state installed) {}
2013-07-01 11:26:04,889 unit:oscied-publisher/0: statemachine DEBUG: unitworkflowstate: transition start (installed -> started) {}
2013-07-01 11:26:04,890 unit:oscied-publisher/0: statemachine DEBUG: unitworkflowstate:  execute action do_start
2013-07-01 11:26:04,890 unit:oscied-publisher/0: unit.lifecycle DEBUG: pre-start acquire, running:False
2013-07-01 11:26:04,890 unit:oscied-publisher/0: unit.lifecycle DEBUG: start running, unit lifecycle
2013-07-01 11:26:04,933 unit:oscied-publisher/0: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:2
2013-07-01 11:26:04,937 unit:oscied-publisher/0: juju.state.hook DEBUG: Ignoring partially constructed relation: publisher:6
2013-07-01 11:26:04,938 unit:oscied-publisher/0: hook.output DEBUG: Cached relation hook contexts: []
2013-07-01 11:26:04,952 unit:oscied-publisher/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-publisher-0/charm/hooks/config-changed
2013-07-01 11:26:06,048 unit:oscied-publisher/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 11:26:06,424 unit:oscied-publisher/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 11:26:06,788 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 11:26:07,152 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'proxy_ips': [], 'storage_fstype': '', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-234-214-201.compute-1.amazonaws.com', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-publisher/0', 'public_address': 'ec2-54-234-214-201.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-2-99.ec2.internal', 'juju_log': <function callable_command at 0x1cfd5f0>, 'config': {u'max_upload_size': 4294967296, u'storage_mountpoint': u'', 'verbose': True, u'max_input_time': 600, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'publisher_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 2, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u'', u'max_execution_time': 180}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media publisher. Contains apache & mod streaming.\nCan be scaled to multiple instances.\n", 'provides': {'streaming': {'interface': 'http'}}, 'name': 'oscied-publisher', 'requires': {'publisher': {'interface': 'subordinate'}, 'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Publisher"}}
2013-07-01 11:26:07,514 unit:oscied-publisher/0: unit.hook.api INFO: --> Entering PublisherHooks.py
2013-07-01 11:26:07,862 unit:oscied-publisher/0: unit.hook.api INFO: [HOOK] Execute PublisherHooks hook config-changed
2013-07-01 11:26:08,212 unit:oscied-publisher/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'proxy_ips': [], 'storage_fstype': '', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-234-214-201.compute-1.amazonaws.com', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 11:26:08,568 unit:oscied-publisher/0: unit.hook.api INFO: <-- Exiting PublisherHooks.py
2013-07-01 11:26:08,619 unit:oscied-publisher/0: hook.output DEBUG: hook config-changed exited, exit code 0.
2013-07-01 11:26:08,620 unit:oscied-publisher/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-publisher-0/charm/hooks/config-changed
2013-07-01 11:26:08,656 unit:oscied-publisher/0: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:2
2013-07-01 11:26:08,663 unit:oscied-publisher/0: juju.state.hook DEBUG: Ignoring partially constructed relation: publisher:6
2013-07-01 11:26:08,664 unit:oscied-publisher/0: hook.output DEBUG: Cached relation hook contexts: []
2013-07-01 11:26:08,678 unit:oscied-publisher/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-publisher-0/charm/hooks/start
2013-07-01 11:26:09,643 unit:oscied-publisher/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 11:26:09,999 unit:oscied-publisher/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 11:26:10,353 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 11:26:10,701 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'proxy_ips': [], 'storage_fstype': '', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-234-214-201.compute-1.amazonaws.com', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-publisher/0', 'public_address': 'ec2-54-234-214-201.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-2-99.ec2.internal', 'juju_log': <function callable_command at 0x1cf35f0>, 'config': {u'max_upload_size': 4294967296, u'storage_mountpoint': u'', 'verbose': True, u'max_input_time': 600, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'publisher_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 2, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u'', u'max_execution_time': 180}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media publisher. Contains apache & mod streaming.\nCan be scaled to multiple instances.\n", 'provides': {'streaming': {'interface': 'http'}}, 'name': 'oscied-publisher', 'requires': {'publisher': {'interface': 'subordinate'}, 'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Publisher"}}
2013-07-01 11:26:10,768 unit:oscied-webui/0: unit.hook.api INFO: [REMARK] Shared storage successfully registered !
2013-07-01 11:26:11,054 unit:oscied-publisher/0: unit.hook.api INFO: --> Entering PublisherHooks.py
2013-07-01 11:26:11,126 unit:oscied-webui/0: unit.hook.api INFO: [REMARK] Do not start web user interface : No orchestrator api !
2013-07-01 11:26:11,391 unit:oscied-publisher/0: unit.hook.api INFO: [HOOK] Execute PublisherHooks hook start
2013-07-01 11:26:11,478 unit:oscied-webui/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_options': '', 'verbose': None, 'database_template_file': 'templates/database.php.template', 'hosts_file': '/etc/hosts', 'sites_enabled_path': '/etc/apache2/sites-enabled', 'storage_path': '/mnt/storage', 'storage_mountpoint': 'medias_volume_0', 'api_url': '', 'site_database_file': 'webui-db.sql', 'general_config_file': '/var/www/application/config/config.php', 'database_config_file': '/var/www/application/config/database.php', 'proxy_ips': [], 'htaccess_template_file': 'templates/htaccess.template', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'www_medias_path': '/var/www/medias', 'www_uploads_path': '/var/www/uploads', '_pickle_filename': 'local_config.pkl', 'site_template_file': 'templates/000-default', 'storage_mount_sleep_delay': 5, 'encryption_key': '5UCuWXhlrxOscNFuShIfJtLlI2oB3crZ', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', 'www_root_path': '/var/www', 'general_template_file': 'templates/config.php.template', 'htaccess_config_file': '/var/www/.htaccess'}
2013-07-01 11:26:11,727 unit:oscied-publisher/0: unit.hook.api INFO: [REMARK] Do not start publisher daemon : No shared storage !
2013-07-01 11:26:11,825 unit:oscied-webui/0: unit.hook.api INFO: <-- Exiting WebuiHooks.py
2013-07-01 11:26:11,873 unit:oscied-webui/0: hook.output DEBUG: hook storage-relation-changed exited, exit code 0.
2013-07-01 11:26:11,892 unit:oscied-webui/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-webui-0/charm/hooks/storage-relation-changed
2013-07-01 11:26:12,064 unit:oscied-publisher/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'proxy_ips': [], 'storage_fstype': '', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-234-214-201.compute-1.amazonaws.com', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 11:26:12,405 unit:oscied-publisher/0: unit.hook.api INFO: <-- Exiting PublisherHooks.py
2013-07-01 11:26:12,455 unit:oscied-publisher/0: hook.output DEBUG: hook start exited, exit code 0.
2013-07-01 11:26:12,456 unit:oscied-publisher/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-publisher-0/charm/hooks/start
2013-07-01 11:26:12,457 unit:oscied-publisher/0: unit.lifecycle DEBUG: starting service relation watch
2013-07-01 11:26:12,457 unit:oscied-publisher/0: unit.lifecycle DEBUG: starting unit relation resolved watch
2013-07-01 11:26:12,463 unit:oscied-publisher/0: unit.lifecycle DEBUG: relation resolved changed
2013-07-01 11:26:12,464 unit:oscied-publisher/0: unit.lifecycle INFO: processing relation resolved changed
2013-07-01 11:26:12,469 unit:oscied-publisher/0: unit.lifecycle DEBUG: services changed old:None new:[<ServiceRelationState name:storage role:client id:relation-0000000002 scope:global>, <ServiceRelationState name:publisher role:client id:relation-0000000006 scope:global>]
2013-07-01 11:26:12,472 unit:oscied-publisher/0: unit.lifecycle DEBUG: processing relations changed
2013-07-01 11:26:12,541 unit:oscied-storage/0: unit.relation.watch DEBUG: relation membership change
2013-07-01 11:26:12,516 unit:oscied-publisher/0: unit.relation.lifecycle DEBUG: stopped relation:storage lifecycle
2013-07-01 11:26:12,549 unit:oscied-storage/0: hook.scheduler DEBUG: members changed: old=[], new=['oscied-publisher/0']
2013-07-01 11:26:12,551 unit:oscied-storage/0: hook.scheduler DEBUG: executing hook for oscied-publisher/0:joined
2013-07-01 11:26:12,526 unit:oscied-publisher/0: statemachine DEBUG: relationworkflowstate: transition start (None -> up) {}
2013-07-01 11:26:12,526 unit:oscied-publisher/0: statemachine DEBUG: relationworkflowstate:  execute action do_start
2013-07-01 11:26:12,527 unit:oscied-publisher/0: hook.scheduler DEBUG: start
2013-07-01 11:26:12,553 unit:oscied-storage/0: hook.scheduler DEBUG: settings changed: (('oscied-publisher/0', 0),)
2013-07-01 11:26:12,548 unit:oscied-publisher/0: unit.relation.watch DEBUG: relation watcher start
2013-07-01 11:26:12,549 unit:oscied-publisher/0: unit.relation.lifecycle DEBUG: started relation:storage lifecycle
2013-07-01 11:26:12,554 unit:oscied-publisher/0: hook.scheduler DEBUG: members changed: old=[], new=['oscied-storage/0']
2013-07-01 11:26:12,555 unit:oscied-publisher/0: hook.scheduler DEBUG: executing hook for oscied-storage/0:joined
2013-07-01 11:26:12,558 unit:oscied-publisher/0: hook.scheduler DEBUG: settings changed: (('oscied-storage/0', 0),)
2013-07-01 11:26:12,559 unit:oscied-publisher/0: statemachine DEBUG: relationworkflowstate: transition complete start (state up) {}
2013-07-01 11:26:12,682 unit:oscied-publisher/0: juju.state.hook DEBUG: Ignoring partially constructed relation: publisher:6
2013-07-01 11:26:12,682 unit:oscied-publisher/0: hook.output DEBUG: Cached relation hook contexts on 'storage:2': []
2013-07-01 11:26:12,694 unit:oscied-publisher/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 11:26:12,695 unit:oscied-publisher/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-publisher-0/charm/hooks/storage-relation-joined
2013-07-01 11:26:12,715 unit:oscied-publisher/0: unit.relation.lifecycle DEBUG: stopped relation:publisher lifecycle
2013-07-01 11:26:12,745 unit:oscied-publisher/0: statemachine DEBUG: relationworkflowstate: transition start (None -> up) {}
2013-07-01 11:26:12,745 unit:oscied-publisher/0: statemachine DEBUG: relationworkflowstate:  execute action do_start
2013-07-01 11:26:12,746 unit:oscied-publisher/0: hook.scheduler DEBUG: start
2013-07-01 11:26:12,777 unit:oscied-publisher/0: unit.relation.watch DEBUG: relation watcher start
2013-07-01 11:26:12,777 unit:oscied-publisher/0: unit.relation.lifecycle DEBUG: started relation:publisher lifecycle
2013-07-01 11:26:12,785 unit:oscied-publisher/0: statemachine DEBUG: relationworkflowstate: transition complete start (state up) {}
2013-07-01 11:26:12,790 unit:oscied-publisher/0: unit.lifecycle DEBUG: started unit lifecycle
2013-07-01 11:26:12,808 unit:oscied-publisher/0: statemachine DEBUG: unitworkflowstate: transition complete start (state started) {}
2013-07-01 11:26:12,815 unit:oscied-publisher/0: juju.agents.unit DEBUG: Configuration Changed
2013-07-01 11:26:12,829 unit:oscied-publisher/0: statemachine DEBUG: unitworkflowstate: transition configure (started -> started) {}
2013-07-01 11:26:12,855 unit:oscied-storage/0: hook.output DEBUG: Cached relation hook contexts on 'storage:2': ['peer:0', 'storage:1', 'storage:3', 'storage:4']
2013-07-01 11:26:12,829 unit:oscied-publisher/0: statemachine DEBUG: unitworkflowstate:  execute action do_configure
2013-07-01 11:26:12,873 unit:oscied-storage/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 11:26:12,874 unit:oscied-storage/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-0/charm/hooks/storage-relation-joined
2013-07-01 11:26:13,101 unit:oscied-publisher/0: hook.output DEBUG: Cached relation hook contexts: ['publisher:6', 'storage:2']
2013-07-01 11:26:13,728 unit:oscied-storage/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 11:26:14,080 unit:oscied-storage/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 11:26:14,141 unit:oscied-publisher/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 11:26:14,414 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 11:26:14,515 unit:oscied-publisher/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 11:26:14,751 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x2228d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': ['ip-10-154-177-94.ec2.internal'], 'verbose': True}, 'name': 'oscied-storage/0', 'public_address': 'ec2-54-227-38-161.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-154-181-123.ec2.internal', 'juju_log': <function callable_command at 0x27e20c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 11:26:14,880 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 11:26:15,080 unit:oscied-storage/0: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 11:26:15,239 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'proxy_ips': [], 'storage_fstype': '', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-234-214-201.compute-1.amazonaws.com', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-publisher/0', 'public_address': 'ec2-54-234-214-201.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-2-99.ec2.internal', 'juju_log': <function callable_command at 0x23e75f0>, 'config': {u'max_upload_size': 4294967296, u'storage_mountpoint': u'', 'verbose': True, u'max_input_time': 600, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'publisher_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 2, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u'', u'max_execution_time': 180}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media publisher. Contains apache & mod streaming.\nCan be scaled to multiple instances.\n", 'provides': {'streaming': {'interface': 'http'}}, 'name': 'oscied-publisher', 'requires': {'publisher': {'interface': 'subordinate'}, 'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Publisher"}}
2013-07-01 11:26:15,414 unit:oscied-storage/0: unit.hook.api INFO: [HOOK] Execute StorageHooks hook storage-relation-joined
2013-07-01 11:26:15,588 unit:oscied-publisher/0: unit.hook.api INFO: --> Entering PublisherHooks.py
2013-07-01 11:26:15,745 unit:oscied-storage/0: unit.hook.api INFO: [INFO] Send filesystem (volume medias_volume_0) configuration to remote client
2013-07-01 11:26:15,957 unit:oscied-publisher/0: unit.hook.api INFO: [HOOK] Execute PublisherHooks hook storage-relation-joined
2013-07-01 11:26:16,314 unit:oscied-publisher/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'proxy_ips': [], 'storage_fstype': '', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-234-214-201.compute-1.amazonaws.com', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 11:26:16,665 unit:oscied-publisher/0: unit.hook.api INFO: <-- Exiting PublisherHooks.py
2013-07-01 11:26:16,721 unit:oscied-publisher/0: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 11:26:16,741 unit:oscied-storage/0: unit.hook.api INFO: [INFO] Add ip-10-164-2-99.ec2.internal to allowed clients IPs
2013-07-01 11:26:16,763 unit:oscied-publisher/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-publisher-0/charm/hooks/storage-relation-joined
2013-07-01 11:26:16,771 unit:oscied-publisher/0: hook.scheduler DEBUG: executing hook for oscied-storage/0:modified
2013-07-01 11:26:16,772 unit:oscied-publisher/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-publisher-0/charm/hooks/config-changed
2013-07-01 11:26:16,874 unit:oscied-publisher/0: hook.output DEBUG: Cached relation hook contexts on 'storage:2': ['publisher:6']
2013-07-01 11:26:16,907 unit:oscied-publisher/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 11:26:17,071 unit:oscied-storage/0: unit.hook.api INFO: [INFO] Set volume medias_volume_0 allowed clients IP list to ip-10-154-177-94.ec2.internal,ip-10-164-2-99.ec2.internal,*
2013-07-01 11:26:17,402 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Execute gluster volume set medias_volume_0 auth.allow "ip-10-154-177-94.ec2.internal,ip-10-164-2-99.ec2.internal,*"
2013-07-01 11:26:17,812 unit:oscied-publisher/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 11:26:18,195 unit:oscied-publisher/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 11:26:18,552 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 11:26:18,906 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'proxy_ips': [], 'storage_fstype': '', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-234-214-201.compute-1.amazonaws.com', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-publisher/0', 'public_address': 'ec2-54-234-214-201.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-2-99.ec2.internal', 'juju_log': <function callable_command at 0x1bd45f0>, 'config': {u'max_upload_size': 4294967296, u'storage_mountpoint': u'', 'verbose': True, u'max_input_time': 600, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'publisher_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 2, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u'', u'max_execution_time': 180}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media publisher. Contains apache & mod streaming.\nCan be scaled to multiple instances.\n", 'provides': {'streaming': {'interface': 'http'}}, 'name': 'oscied-publisher', 'requires': {'publisher': {'interface': 'subordinate'}, 'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Publisher"}}
2013-07-01 11:26:18,965 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Execute gluster volume info medias_volume_0 
2013-07-01 11:26:19,261 unit:oscied-publisher/0: unit.hook.api INFO: --> Entering PublisherHooks.py
2013-07-01 11:26:19,393 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Volume infos stdout: '\nVolume Name: medias_volume_0\nType: Distribute\nStatus: Started\nNumber of Bricks: 1\nTransport-type: tcp\nBricks:\nBrick1: ip-10-154-181-123.ec2.internal:/exp0\nOptions Reconfigured:\nauth.allow: ip-10-154-177-94.ec2.internal,ip-10-164-2-99.ec2.internal,*\n'
2013-07-01 11:26:19,606 unit:oscied-publisher/0: unit.hook.api INFO: [HOOK] Execute PublisherHooks hook config-changed
2013-07-01 11:26:19,726 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Execute gluster volume info medias_volume_0 
2013-07-01 11:26:19,961 unit:oscied-publisher/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'proxy_ips': [], 'storage_fstype': '', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-234-214-201.compute-1.amazonaws.com', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 11:26:20,156 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Volume infos stdout: '\nVolume Name: medias_volume_0\nType: Distribute\nStatus: Started\nNumber of Bricks: 1\nTransport-type: tcp\nBricks:\nBrick1: ip-10-154-181-123.ec2.internal:/exp0\nOptions Reconfigured:\nauth.allow: ip-10-154-177-94.ec2.internal,ip-10-164-2-99.ec2.internal,*\n'
2013-07-01 11:26:20,327 unit:oscied-publisher/0: unit.hook.api INFO: <-- Exiting PublisherHooks.py
2013-07-01 11:26:20,380 unit:oscied-publisher/0: hook.output DEBUG: hook config-changed exited, exit code 0.
2013-07-01 11:26:20,427 unit:oscied-publisher/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-publisher-0/charm/hooks/config-changed
2013-07-01 11:26:20,427 unit:oscied-publisher/0: unit.lifecycle DEBUG: configured unit
2013-07-01 11:26:20,429 unit:oscied-publisher/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-publisher-0/charm/hooks/storage-relation-changed
2013-07-01 11:26:20,455 unit:oscied-publisher/0: statemachine DEBUG: unitworkflowstate: transition complete configure (state started) {}
2013-07-01 11:26:20,487 unit:oscied-storage/0: unit.hook.api INFO: [INFO] {'status': 'Started', 'name': 'medias_volume_0', 'bricks': ['ip-10-154-181-123.ec2.internal:/exp0'], 'auth_allow': 'ip-10-154-177-94.ec2.internal,ip-10-164-2-99.ec2.internal,*', 'type': 'Distribute', 'transport': 'tcp'}
2013-07-01 11:26:20,463 unit:oscied-publisher/0: juju.agents.unit INFO: No upgrade flag set.
2013-07-01 11:26:20,828 unit:oscied-storage/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x2228d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': ['ip-10-154-177-94.ec2.internal', 'ip-10-164-2-99.ec2.internal'], 'verbose': True}
2013-07-01 11:26:21,169 unit:oscied-storage/0: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 11:26:21,216 unit:oscied-storage/0: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 11:26:21,222 unit:oscied-publisher/0: unit.relation.watch DEBUG: relation watcher settings change <ClientEvent changed at '/relations/relation-0000000002/settings/unit-0000000002' state: connected handle:0>
2013-07-01 11:26:21,225 unit:oscied-publisher/0: hook.scheduler DEBUG: settings changed: (('oscied-storage/0', 1),)
2013-07-01 11:26:21,296 unit:oscied-storage/0: hook.output DEBUG: Flushed values for hook 'storage-relation-joined' on 'storage:2'
    Setting changed: u'fstype'=u'glusterfs' (was unset)
    Setting changed: u'mountpoint'=u'medias_volume_0' (was unset)
2013-07-01 11:26:21,297 unit:oscied-storage/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-0/charm/hooks/storage-relation-joined
2013-07-01 11:26:21,301 unit:oscied-storage/0: hook.scheduler DEBUG: executing hook for oscied-publisher/0:modified
2013-07-01 11:26:21,412 unit:oscied-publisher/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 11:26:21,485 unit:oscied-storage/0: hook.output DEBUG: Cached relation hook contexts on 'storage:2': ['peer:0', 'storage:1', 'storage:3', 'storage:4']
2013-07-01 11:26:21,494 unit:oscied-storage/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 11:26:21,494 unit:oscied-storage/0: hook.executor INFO: Hook does not exist, skipping /var/lib/juju/units/oscied-storage-0/charm/hooks/storage-relation-changed
2013-07-01 11:26:21,779 unit:oscied-publisher/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 11:26:22,138 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 11:26:22,499 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'proxy_ips': [], 'storage_fstype': '', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-234-214-201.compute-1.amazonaws.com', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-publisher/0', 'public_address': 'ec2-54-234-214-201.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-2-99.ec2.internal', 'juju_log': <function callable_command at 0x16f55f0>, 'config': {u'max_upload_size': 4294967296, u'storage_mountpoint': u'', 'verbose': True, u'max_input_time': 600, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'publisher_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 2, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u'', u'max_execution_time': 180}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media publisher. Contains apache & mod streaming.\nCan be scaled to multiple instances.\n", 'provides': {'streaming': {'interface': 'http'}}, 'name': 'oscied-publisher', 'requires': {'publisher': {'interface': 'subordinate'}, 'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Publisher"}}
2013-07-01 11:26:22,849 unit:oscied-publisher/0: unit.hook.api INFO: --> Entering PublisherHooks.py
2013-07-01 11:26:23,202 unit:oscied-publisher/0: unit.hook.api INFO: [HOOK] Execute PublisherHooks hook storage-relation-changed
2013-07-01 11:26:24,906 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] Storage address is ip-10-154-181-123.ec2.internal, fstype: glusterfs, mountpoint: medias_volume_0, options: 
2013-07-01 11:26:25,248 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] Execute ['screen', '-ls', 'Publisher']
2013-07-01 11:26:25,613 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] Execute service apache2 stop
2013-07-01 11:26:28,088 unit:oscied-publisher/0: unit.hook.api INFO: [INFO] Use storage parameters from charm storage relation
2013-07-01 11:26:28,446 unit:oscied-publisher/0: unit.hook.api INFO: [INFO] Unregister shared storage
2013-07-01 11:26:28,804 unit:oscied-publisher/0: unit.hook.api INFO: [REMARK] Shared storage already unmounted !
2013-07-01 11:26:29,162 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] Mount shared storage [] ip-10-154-181-123.ec2.internal:medias_volume_0 type glusterfs options '' -> /mnt/storage
2013-07-01 11:26:29,529 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] Execute ['mount', '-t', 'glusterfs', 'ip-10-154-181-123.ec2.internal:/medias_volume_0', '/mnt/storage']
2013-07-01 11:26:52,103 unit:oscied-publisher/0: unit.hook.api INFO: [REMARK] Shared storage successfully registered !
2013-07-01 11:26:52,444 unit:oscied-publisher/0: unit.hook.api INFO: [REMARK] Do not start publisher daemon : No celery configuration file !
2013-07-01 11:26:52,798 unit:oscied-publisher/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'proxy_ips': [], 'storage_fstype': 'glusterfs', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-234-214-201.compute-1.amazonaws.com', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 11:26:53,155 unit:oscied-publisher/0: unit.hook.api INFO: <-- Exiting PublisherHooks.py
2013-07-01 11:26:53,210 unit:oscied-publisher/0: hook.output DEBUG: hook storage-relation-changed exited, exit code 0.
2013-07-01 11:26:53,234 unit:oscied-publisher/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-publisher-0/charm/hooks/storage-relation-changed
2013-07-01 11:26:53,235 unit:oscied-publisher/0: hook.scheduler DEBUG: executing hook for oscied-storage/0:modified
2013-07-01 11:26:53,351 unit:oscied-publisher/0: hook.output DEBUG: Cached relation hook contexts on 'storage:2': ['publisher:6']
2013-07-01 11:26:53,359 unit:oscied-publisher/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 11:26:53,360 unit:oscied-publisher/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-publisher-0/charm/hooks/storage-relation-changed
2013-07-01 11:26:54,347 unit:oscied-publisher/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 11:26:54,719 unit:oscied-publisher/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 11:26:55,076 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 11:26:55,415 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'proxy_ips': [], 'storage_fstype': 'glusterfs', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-234-214-201.compute-1.amazonaws.com', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-publisher/0', 'public_address': 'ec2-54-234-214-201.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-2-99.ec2.internal', 'juju_log': <function callable_command at 0x27165f0>, 'config': {u'max_upload_size': 4294967296, u'storage_mountpoint': u'', 'verbose': True, u'max_input_time': 600, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'publisher_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 2, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u'', u'max_execution_time': 180}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media publisher. Contains apache & mod streaming.\nCan be scaled to multiple instances.\n", 'provides': {'streaming': {'interface': 'http'}}, 'name': 'oscied-publisher', 'requires': {'publisher': {'interface': 'subordinate'}, 'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Publisher"}}
2013-07-01 11:26:55,753 unit:oscied-publisher/0: unit.hook.api INFO: --> Entering PublisherHooks.py
2013-07-01 11:26:56,101 unit:oscied-publisher/0: unit.hook.api INFO: [HOOK] Execute PublisherHooks hook storage-relation-changed
2013-07-01 11:26:57,869 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] Storage address is ip-10-154-181-123.ec2.internal, fstype: glusterfs, mountpoint: medias_volume_0, options: 
2013-07-01 11:26:58,227 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] Execute ['screen', '-ls', 'Publisher']
2013-07-01 11:26:58,597 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] Execute service apache2 stop
2013-07-01 11:26:59,054 unit:oscied-publisher/0: unit.hook.api INFO: [INFO] Use storage parameters from charm storage relation
2013-07-01 11:26:59,408 unit:oscied-publisher/0: unit.hook.api INFO: [REMARK] Skip remount already mounted shared storage !
2013-07-01 11:26:59,769 unit:oscied-publisher/0: unit.hook.api INFO: [REMARK] Do not start publisher daemon : No celery configuration file !
2013-07-01 11:27:00,121 unit:oscied-publisher/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'proxy_ips': [], 'storage_fstype': 'glusterfs', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-234-214-201.compute-1.amazonaws.com', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 11:27:00,476 unit:oscied-publisher/0: unit.hook.api INFO: <-- Exiting PublisherHooks.py
2013-07-01 11:27:00,532 unit:oscied-publisher/0: hook.output DEBUG: hook storage-relation-changed exited, exit code 0.
2013-07-01 11:27:00,585 unit:oscied-publisher/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-publisher-0/charm/hooks/storage-relation-changed
2013-07-01 11:27:25,002 unit:oscied-orchestra/0: unit.hook.api INFO: [INFO] Restart network time protocol service
2013-07-01 11:27:25,344 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute service ntp restart
2013-07-01 11:27:27,835 unit:oscied-orchestra/0: unit.hook.api INFO: [INFO] Expose RESTful API, MongoDB & RabbitMQ service
2013-07-01 11:27:28,204 unit:oscied-orchestra/0: unit.hook.api DEBUG: opened 5000/tcp
2013-07-01 11:27:28,577 unit:oscied-orchestra/0: unit.hook.api DEBUG: opened 27017/tcp
2013-07-01 11:27:28,939 unit:oscied-orchestra/0: unit.hook.api DEBUG: opened 5672/tcp
2013-07-01 11:27:29,284 unit:oscied-orchestra/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'root_secret': '', 'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'rabbit_connection': '', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': '', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}
2013-07-01 11:27:29,648 unit:oscied-orchestra/0: unit.hook.api INFO: <-- Exiting OrchestraHooks.py
2013-07-01 11:27:29,723 unit:oscied-orchestra/0: hook.output DEBUG: hook install exited, exit code 0.
2013-07-01 11:27:29,724 unit:oscied-orchestra/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-orchestra-0/charm/hooks/install
2013-07-01 11:27:29,746 unit:oscied-orchestra/0: statemachine DEBUG: unitworkflowstate: transition complete install (state installed) {}
2013-07-01 11:27:29,761 unit:oscied-orchestra/0: statemachine DEBUG: unitworkflowstate: transition start (installed -> started) {}
2013-07-01 11:27:29,761 unit:oscied-orchestra/0: statemachine DEBUG: unitworkflowstate:  execute action do_start
2013-07-01 11:27:29,762 unit:oscied-orchestra/0: unit.lifecycle DEBUG: pre-start acquire, running:False
2013-07-01 11:27:29,762 unit:oscied-orchestra/0: unit.lifecycle DEBUG: start running, unit lifecycle
2013-07-01 11:27:29,818 unit:oscied-orchestra/0: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:3
2013-07-01 11:27:29,822 unit:oscied-orchestra/0: juju.state.hook DEBUG: Ignoring partially constructed relation: publisher:6
2013-07-01 11:27:29,825 unit:oscied-orchestra/0: juju.state.hook DEBUG: Ignoring partially constructed relation: api:7
2013-07-01 11:27:29,835 unit:oscied-orchestra/0: juju.state.hook DEBUG: Ignoring partially constructed relation: transform:5
2013-07-01 11:27:29,835 unit:oscied-orchestra/0: hook.output DEBUG: Cached relation hook contexts: []
2013-07-01 11:27:29,876 unit:oscied-orchestra/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-orchestra-0/charm/hooks/config-changed
2013-07-01 11:27:30,989 unit:oscied-orchestra/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 11:27:31,349 unit:oscied-orchestra/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 11:27:31,690 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 11:27:32,061 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'root_secret': '', 'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'rabbit_connection': '', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': '', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}, 'name': 'oscied-orchestra/0', 'public_address': 'ec2-54-234-192-63.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-71-53.ec2.internal', 'juju_log': <function callable_command at 0x2adb7d0>, 'config': {u'repositories_pass': u'41nVGq07GmSgK9Ud', u'storage_options': u'', 'verbose': True, u'storage_nat_address': u'', u'rabbit_password': u'OZy23iO0D4UpYS2k', u'storage_fstype': u'', u'nodes_secret': u'bdZccPuG9fibjwCS', u'transform_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/transform/source', u'repositories_user': u'oscied', u'root_secret': u'5FrvHcm7oyF4WQFW', u'storage_mountpoint': u'', u'mongo_nodes_password': u'M2qlif8rdtKtBYil', u'publisher_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/publisher/source', u'mongo_admin_password': u'Iz85QVjdCJugEosz', u'storage_address': u'', u'webui_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/webui/source'}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED orchestrator.\n", 'provides': {'publisher': {'interface': 'subordinate'}, 'api': {'interface': 'orchestra'}, 'transform': {'interface': 'subordinate'}}, 'name': 'oscied-orchestra', 'requires': {'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Orchestra"}}
2013-07-01 11:27:32,406 unit:oscied-orchestra/0: unit.hook.api INFO: --> Entering OrchestraHooks.py
2013-07-01 11:27:32,755 unit:oscied-orchestra/0: unit.hook.api INFO: [HOOK] Execute OrchestraHooks hook config-changed
2013-07-01 11:27:33,099 unit:oscied-orchestra/0: unit.hook.api INFO: [INFO] Configure MongoDB Scalable NoSQL DB
2013-07-01 11:27:33,443 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute mongo f.js
2013-07-01 11:27:34,059 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute mongo orchestra f.js
2013-07-01 11:27:34,523 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute mongo celery g.js
2013-07-01 11:27:34,989 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] MongoDB configuration is: {'list_values': True, 'encoding': None, 'initial_comment': ['# mongodb.conf', '', '# Where to store the data.'], 'default_encoding': None, 'BOM': False, 'configspec': None, 'newlines': '\n', 'stringify': True, 'inline_comments': {'dbpath': None, 'journal': None, 'logappend': None, 'logpath': None, 'auth': '', 'bind_ip': None, 'noauth': ''}, 'comments': {'dbpath': [], 'journal': ['#port = 27017', '', '# Enable journaling, http://www.mongodb.org/display/DOCS/Journaling'], 'logappend': [''], 'logpath': ['', '#where to log'], 'auth': [], 'bind_ip': [''], 'noauth': []}, 'filename': '/etc/mongodb.conf', 'indent_type': '', 'main': ConfigObj({'dbpath': '/var/lib/mongodb', 'logpath': '/var/log/mongodb/mongodb.log', 'logappend': 'true', 'bind_ip': '0.0.0.0', 'journal': 'true', 'noauth': 'false', 'auth': 'true'}), 'sections': [], 'interpolation': True, 'defaults': [], 'parent': ConfigObj({'dbpath': '/var/lib/mongodb', 'logpath': '/var/log/mongodb/mongodb.log', 'logappend': 'true', 'bind_ip': '0.0.0.0', 'journal': 'true', 'noauth': 'false', 'auth': 'true'}), 'scalars': ['dbpath', 'logpath', 'logappend', 'bind_ip', 'journal', 'noauth', 'auth'], '_inspec': False, 'create_empty': False, 'unrepr': False, 'default_values': {}, 'write_empty_values': False, 'name': None, '_original_configspec': None, 'final_comment': ['', '# Enables periodic logging of CPU utilization and I/O wait', '#cpu = true', '', '# Turn on/off security.  Off is currently the default', '#noauth = true', '#auth = true', '', '# Verbose logging output.', '#verbose = true', '', '# Inspect all client data for validity on receipt (useful for', '# developing drivers)', '#objcheck = true', '', '# Enable db quota management', '#quota = true', '', '# Set oplogging level where n is', '#   0=off (default)', '#   1=W', '#   2=R', '#   3=both', '#   7=W+some reads', '#oplog = 0', '', '# Diagnostic/debugging option', '#nocursors = true', '', '# Ignore query hints', '#nohints = true', '', '# Disable the HTTP interface (Defaults to localhost:27018).', '#nohttpinterface = true', '', '# Turns off server-side scripting.  This will result in greatly limited', '# functionality', '#noscripting = true', '', '# Turns off table scans.  Any query that would do a table scan fails.', '#notablescan = true', '', '# Disable data file preallocation.', '#noprealloc = true', '', '# Specify .ns file size for new databases.', '# nssize = <size>', '', '# Accout token for Mongo monitoring server.', '#mms-token = <token>', '', '# Server name for Mongo monitoring server.', '#mms-name = <server-name>', '', '# Ping interval for Mongo monitoring server.', '#mms-interval = <seconds>', '', '# Replication Options', '', '# in replicated mongo databases, specify here whether this is a slave or master', '#slave = true', '#source = master.example.com', '# Slave only: specify a single database to replicate', '#only = master.example.com', '# or', '#master = true', '#source = slave.example.com', '', '# Address of a server to pair with.', '#pairwith = <server:port>', '# Address of arbiter server.', '#arbiter = <server:port>', '# Automatically resync if slave data is stale', '#autoresync', '# Custom size for replication operation log.', '#oplogSize = <MB>', '# Size limit for in-memory storage of op ids.', '#opIdMem = <bytes>', '', '# SSL options', '# Enable SSL on normal ports', '#sslOnNormalPorts = true', '# SSL Key file and password', '#sslPEMKeyFile = /etc/ssl/mongodb.pem', '#sslPEMKeyPassword = pass'], 'file_error': False, '_interpolation_engine': <configobj.ConfigParserInterpolation object at 0x2adde50>, 'depth': 0, 'raise_errors': False, 'extra_values': [], '_created': False}
2013-07-01 11:27:35,336 unit:oscied-orchestra/0: unit.hook.api INFO: [INFO] Configure RabbitMQ Message Broker
2013-07-01 11:27:35,691 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute rabbitmqctl delete_user guest
2013-07-01 11:27:37,328 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute rabbitmqctl delete_vhost /
2013-07-01 11:27:38,038 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute rabbitmqctl add_user nodes "OZy23iO0D4UpYS2k"
2013-07-01 11:27:38,645 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute rabbitmqctl add_vhost celery
2013-07-01 11:27:39,312 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute rabbitmqctl set_permissions -p celery nodes ".*" ".*" ".*"
2013-07-01 11:27:39,938 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute rabbitmqctl list_users
2013-07-01 11:27:40,559 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute rabbitmqctl list_vhosts
2013-07-01 11:27:41,164 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] RabbitMQ users: ['nodes'] vhosts: ['celery']
2013-07-01 11:27:41,507 unit:oscied-orchestra/0: unit.hook.api INFO: [INFO] Configure Orchestra the Orchestrator
2013-07-01 11:27:41,861 unit:oscied-orchestra/0: unit.hook.api INFO: [REMARK] File celeryconfig.py successfully generated !
2013-07-01 11:27:42,197 unit:oscied-orchestra/0: unit.hook.api INFO: [REMARK] Orchestrator successfully configured !
2013-07-01 11:27:42,540 unit:oscied-orchestra/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'root_secret': u'5FrvHcm7oyF4WQFW', 'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': True, 'hosts_file': '/etc/hosts', 'rabbit_connection': u'amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': u'mongodb://admin:Iz85QVjdCJugEosz@localhost:27017/orchestra', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}
2013-07-01 11:27:42,902 unit:oscied-orchestra/0: unit.hook.api INFO: <-- Exiting OrchestraHooks.py
2013-07-01 11:27:42,946 unit:oscied-orchestra/0: hook.output DEBUG: hook config-changed exited, exit code 0.
2013-07-01 11:27:42,947 unit:oscied-orchestra/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-orchestra-0/charm/hooks/config-changed
2013-07-01 11:27:42,993 unit:oscied-orchestra/0: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:3
2013-07-01 11:27:42,996 unit:oscied-orchestra/0: juju.state.hook DEBUG: Ignoring partially constructed relation: publisher:6
2013-07-01 11:27:42,999 unit:oscied-orchestra/0: juju.state.hook DEBUG: Ignoring partially constructed relation: api:7
2013-07-01 11:27:43,007 unit:oscied-orchestra/0: juju.state.hook DEBUG: Ignoring partially constructed relation: transform:5
2013-07-01 11:27:43,007 unit:oscied-orchestra/0: hook.output DEBUG: Cached relation hook contexts: []
2013-07-01 11:27:43,017 unit:oscied-orchestra/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-orchestra-0/charm/hooks/start
2013-07-01 11:27:43,919 unit:oscied-orchestra/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 11:27:44,291 unit:oscied-orchestra/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 11:27:44,643 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 11:27:44,985 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'root_secret': u'5FrvHcm7oyF4WQFW', 'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': True, 'hosts_file': '/etc/hosts', 'rabbit_connection': u'amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': u'mongodb://admin:Iz85QVjdCJugEosz@localhost:27017/orchestra', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}, 'name': 'oscied-orchestra/0', 'public_address': 'ec2-54-234-192-63.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-71-53.ec2.internal', 'juju_log': <function callable_command at 0x18cd7d0>, 'config': {u'repositories_pass': u'41nVGq07GmSgK9Ud', u'storage_options': u'', 'verbose': True, u'storage_nat_address': u'', u'rabbit_password': u'OZy23iO0D4UpYS2k', u'storage_fstype': u'', u'nodes_secret': u'bdZccPuG9fibjwCS', u'transform_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/transform/source', u'repositories_user': u'oscied', u'root_secret': u'5FrvHcm7oyF4WQFW', u'storage_mountpoint': u'', u'mongo_nodes_password': u'M2qlif8rdtKtBYil', u'publisher_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/publisher/source', u'mongo_admin_password': u'Iz85QVjdCJugEosz', u'storage_address': u'', u'webui_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/webui/source'}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED orchestrator.\n", 'provides': {'publisher': {'interface': 'subordinate'}, 'api': {'interface': 'orchestra'}, 'transform': {'interface': 'subordinate'}}, 'name': 'oscied-orchestra', 'requires': {'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Orchestra"}}
2013-07-01 11:27:45,327 unit:oscied-orchestra/0: unit.hook.api INFO: --> Entering OrchestraHooks.py
2013-07-01 11:27:45,673 unit:oscied-orchestra/0: unit.hook.api INFO: [HOOK] Execute OrchestraHooks hook start
2013-07-01 11:27:46,019 unit:oscied-orchestra/0: unit.hook.api INFO: [REMARK] Do not start orchestra daemon : No shared storage !
2013-07-01 11:27:46,354 unit:oscied-orchestra/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'root_secret': u'5FrvHcm7oyF4WQFW', 'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': True, 'hosts_file': '/etc/hosts', 'rabbit_connection': u'amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': u'mongodb://admin:Iz85QVjdCJugEosz@localhost:27017/orchestra', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}
2013-07-01 11:27:46,697 unit:oscied-orchestra/0: unit.hook.api INFO: <-- Exiting OrchestraHooks.py
2013-07-01 11:27:46,754 unit:oscied-orchestra/0: hook.output DEBUG: hook start exited, exit code 0.
2013-07-01 11:27:46,755 unit:oscied-orchestra/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-orchestra-0/charm/hooks/start
2013-07-01 11:27:46,755 unit:oscied-orchestra/0: unit.lifecycle DEBUG: starting service relation watch
2013-07-01 11:27:46,756 unit:oscied-orchestra/0: unit.lifecycle DEBUG: starting unit relation resolved watch
2013-07-01 11:27:46,767 unit:oscied-orchestra/0: unit.lifecycle DEBUG: relation resolved changed
2013-07-01 11:27:46,767 unit:oscied-orchestra/0: unit.lifecycle INFO: processing relation resolved changed
2013-07-01 11:27:46,773 unit:oscied-orchestra/0: unit.lifecycle DEBUG: services changed old:None new:[<ServiceRelationState name:storage role:client id:relation-0000000003 scope:global>, <ServiceRelationState name:publisher role:server id:relation-0000000006 scope:global>, <ServiceRelationState name:api role:server id:relation-0000000007 scope:global>, <ServiceRelationState name:transform role:server id:relation-0000000005 scope:global>]
2013-07-01 11:27:46,774 unit:oscied-orchestra/0: unit.lifecycle DEBUG: processing relations changed
2013-07-01 11:27:46,894 unit:oscied-storage/0: unit.relation.watch DEBUG: relation membership change
2013-07-01 11:27:46,833 unit:oscied-orchestra/0: unit.relation.lifecycle DEBUG: stopped relation:storage lifecycle
2013-07-01 11:27:46,899 unit:oscied-storage/0: hook.scheduler DEBUG: members changed: old=[], new=['oscied-orchestra/0']
2013-07-01 11:27:46,900 unit:oscied-storage/0: hook.scheduler DEBUG: executing hook for oscied-orchestra/0:joined
2013-07-01 11:27:46,903 unit:oscied-storage/0: hook.scheduler DEBUG: settings changed: (('oscied-orchestra/0', 0),)
2013-07-01 11:27:46,856 unit:oscied-orchestra/0: statemachine DEBUG: relationworkflowstate: transition start (None -> up) {}
2013-07-01 11:27:46,857 unit:oscied-orchestra/0: statemachine DEBUG: relationworkflowstate:  execute action do_start
2013-07-01 11:27:46,857 unit:oscied-orchestra/0: hook.scheduler DEBUG: start
2013-07-01 11:27:46,875 unit:oscied-orchestra/0: unit.relation.watch DEBUG: relation watcher start
2013-07-01 11:27:46,875 unit:oscied-orchestra/0: unit.relation.lifecycle DEBUG: started relation:storage lifecycle
2013-07-01 11:27:46,882 unit:oscied-orchestra/0: hook.scheduler DEBUG: members changed: old=[], new=['oscied-storage/0']
2013-07-01 11:27:46,883 unit:oscied-orchestra/0: hook.scheduler DEBUG: executing hook for oscied-storage/0:joined
2013-07-01 11:27:46,885 unit:oscied-orchestra/0: hook.scheduler DEBUG: settings changed: (('oscied-storage/0', 0),)
2013-07-01 11:27:46,886 unit:oscied-orchestra/0: statemachine DEBUG: relationworkflowstate: transition complete start (state up) {}
2013-07-01 11:27:46,982 unit:oscied-orchestra/0: juju.state.hook DEBUG: Ignoring partially constructed relation: publisher:6
2013-07-01 11:27:46,986 unit:oscied-orchestra/0: juju.state.hook DEBUG: Ignoring partially constructed relation: api:7
2013-07-01 11:27:46,989 unit:oscied-orchestra/0: juju.state.hook DEBUG: Ignoring partially constructed relation: transform:5
2013-07-01 11:27:46,990 unit:oscied-orchestra/0: hook.output DEBUG: Cached relation hook contexts on 'storage:3': []
2013-07-01 11:27:46,999 unit:oscied-orchestra/0: unit.relation.lifecycle DEBUG: stopped relation:transform lifecycle
2013-07-01 11:27:47,005 unit:oscied-orchestra/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 11:27:47,006 unit:oscied-orchestra/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-orchestra-0/charm/hooks/storage-relation-joined
2013-07-01 11:27:47,029 unit:oscied-orchestra/0: statemachine DEBUG: relationworkflowstate: transition start (None -> up) {}
2013-07-01 11:27:47,032 unit:oscied-orchestra/0: statemachine DEBUG: relationworkflowstate:  execute action do_start
2013-07-01 11:27:47,032 unit:oscied-orchestra/0: hook.scheduler DEBUG: start
2013-07-01 11:27:47,059 unit:oscied-orchestra/0: unit.relation.watch DEBUG: relation watcher start
2013-07-01 11:27:47,059 unit:oscied-orchestra/0: unit.relation.lifecycle DEBUG: started relation:transform lifecycle
2013-07-01 11:27:47,078 unit:oscied-orchestra/0: statemachine DEBUG: relationworkflowstate: transition complete start (state up) {}
2013-07-01 11:27:47,149 unit:oscied-publisher/0: unit.relation.watch DEBUG: relation membership change
2013-07-01 11:27:47,155 unit:oscied-publisher/0: hook.scheduler DEBUG: members changed: old=[], new=['oscied-orchestra/0']
2013-07-01 11:27:47,156 unit:oscied-publisher/0: hook.scheduler DEBUG: executing hook for oscied-orchestra/0:joined
2013-07-01 11:27:47,125 unit:oscied-orchestra/0: unit.relation.lifecycle DEBUG: stopped relation:publisher lifecycle
2013-07-01 11:27:47,158 unit:oscied-publisher/0: hook.scheduler DEBUG: settings changed: (('oscied-orchestra/0', 0),)
2013-07-01 11:27:47,204 unit:oscied-orchestra/0: statemachine DEBUG: relationworkflowstate: transition start (None -> up) {}
2013-07-01 11:27:47,204 unit:oscied-orchestra/0: statemachine DEBUG: relationworkflowstate:  execute action do_start
2013-07-01 11:27:47,205 unit:oscied-orchestra/0: hook.scheduler DEBUG: start
2013-07-01 11:27:47,286 unit:oscied-storage/0: hook.output DEBUG: Cached relation hook contexts on 'storage:3': ['peer:0', 'storage:1', 'storage:2', 'storage:4']
2013-07-01 11:27:47,297 unit:oscied-storage/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 11:27:47,298 unit:oscied-storage/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-0/charm/hooks/storage-relation-joined
2013-07-01 11:27:47,275 unit:oscied-orchestra/0: unit.relation.watch DEBUG: relation watcher start
2013-07-01 11:27:47,275 unit:oscied-orchestra/0: unit.relation.lifecycle DEBUG: started relation:publisher lifecycle
2013-07-01 11:27:47,282 unit:oscied-orchestra/0: hook.scheduler DEBUG: members changed: old=[], new=['oscied-publisher/0']
2013-07-01 11:27:47,283 unit:oscied-orchestra/0: hook.scheduler DEBUG: executing hook for oscied-publisher/0:joined
2013-07-01 11:27:47,285 unit:oscied-orchestra/0: hook.scheduler DEBUG: settings changed: (('oscied-publisher/0', 0),)
2013-07-01 11:27:47,288 unit:oscied-orchestra/0: statemachine DEBUG: relationworkflowstate: transition complete start (state up) {}
2013-07-01 11:27:47,347 unit:oscied-publisher/0: hook.output DEBUG: Cached relation hook contexts on 'publisher:6': ['storage:2']
2013-07-01 11:27:47,362 unit:oscied-publisher/0: unit.relation.lifecycle DEBUG: Executing hook publisher-relation-joined
2013-07-01 11:27:47,363 unit:oscied-publisher/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-publisher-0/charm/hooks/publisher-relation-joined
2013-07-01 11:27:47,355 unit:oscied-orchestra/0: juju.state.hook DEBUG: Ignoring partially constructed relation: api:7
2013-07-01 11:27:47,402 unit:oscied-webui/0: unit.relation.watch DEBUG: relation membership change
2013-07-01 11:27:47,373 unit:oscied-orchestra/0: unit.relation.lifecycle DEBUG: stopped relation:api lifecycle
2013-07-01 11:27:47,408 unit:oscied-webui/0: hook.scheduler DEBUG: members changed: old=[], new=['oscied-orchestra/0']
2013-07-01 11:27:47,409 unit:oscied-webui/0: hook.scheduler DEBUG: executing hook for oscied-orchestra/0:joined
2013-07-01 11:27:47,411 unit:oscied-webui/0: hook.scheduler DEBUG: settings changed: (('oscied-orchestra/0', 0),)
2013-07-01 11:27:47,398 unit:oscied-orchestra/0: statemachine DEBUG: relationworkflowstate: transition start (None -> up) {}
2013-07-01 11:27:47,398 unit:oscied-orchestra/0: statemachine DEBUG: relationworkflowstate:  execute action do_start
2013-07-01 11:27:47,399 unit:oscied-orchestra/0: hook.scheduler DEBUG: start
2013-07-01 11:27:47,434 unit:oscied-orchestra/0: unit.relation.watch DEBUG: relation watcher start
2013-07-01 11:27:47,435 unit:oscied-orchestra/0: unit.relation.lifecycle DEBUG: started relation:api lifecycle
2013-07-01 11:27:47,441 unit:oscied-orchestra/0: hook.scheduler DEBUG: members changed: old=[], new=['oscied-webui/0']
2013-07-01 11:27:47,444 unit:oscied-orchestra/0: hook.scheduler DEBUG: executing hook for oscied-webui/0:joined
2013-07-01 11:27:47,446 unit:oscied-orchestra/0: hook.scheduler DEBUG: settings changed: (('oscied-webui/0', 0),)
2013-07-01 11:27:47,449 unit:oscied-orchestra/0: statemachine DEBUG: relationworkflowstate: transition complete start (state up) {}
2013-07-01 11:27:47,453 unit:oscied-orchestra/0: unit.lifecycle DEBUG: started unit lifecycle
2013-07-01 11:27:47,488 unit:oscied-webui/0: hook.output DEBUG: Cached relation hook contexts on 'api:7': ['storage:4']
2013-07-01 11:27:47,510 unit:oscied-webui/0: unit.relation.lifecycle DEBUG: Executing hook api-relation-joined
2013-07-01 11:27:47,511 unit:oscied-webui/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-webui-0/charm/hooks/api-relation-joined
2013-07-01 11:27:47,495 unit:oscied-orchestra/0: statemachine DEBUG: unitworkflowstate: transition complete start (state started) {}
2013-07-01 11:27:47,553 unit:oscied-orchestra/0: juju.agents.unit DEBUG: Configuration Changed
2013-07-01 11:27:47,580 unit:oscied-orchestra/0: statemachine DEBUG: unitworkflowstate: transition configure (started -> started) {}
2013-07-01 11:27:47,580 unit:oscied-orchestra/0: statemachine DEBUG: unitworkflowstate:  execute action do_configure
2013-07-01 11:27:47,609 unit:oscied-orchestra/0: hook.output DEBUG: Cached relation hook contexts on 'publisher:6': ['storage:3', 'transform:5']
2013-07-01 11:27:47,656 unit:oscied-orchestra/0: unit.relation.lifecycle DEBUG: Executing hook publisher-relation-joined
2013-07-01 11:27:47,860 unit:oscied-orchestra/0: hook.output DEBUG: Cached relation hook contexts on 'api:7': ['publisher:6', 'storage:3', 'transform:5']
2013-07-01 11:27:47,886 unit:oscied-orchestra/0: unit.relation.lifecycle DEBUG: Executing hook api-relation-joined
2013-07-01 11:27:47,952 unit:oscied-orchestra/0: hook.output DEBUG: Cached relation hook contexts: ['api:7', 'publisher:6', 'storage:3', 'transform:5']
2013-07-01 11:27:48,144 unit:oscied-storage/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 11:27:48,289 unit:oscied-orchestra/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 11:27:48,363 unit:oscied-publisher/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 11:27:48,445 unit:oscied-webui/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 11:27:48,492 unit:oscied-storage/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 11:27:48,665 unit:oscied-orchestra/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 11:27:48,779 unit:oscied-publisher/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 11:27:48,827 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 11:27:48,814 unit:oscied-webui/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 11:27:49,011 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 11:27:49,124 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 11:27:49,164 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1255d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': ['ip-10-154-177-94.ec2.internal', 'ip-10-164-2-99.ec2.internal'], 'verbose': True}, 'name': 'oscied-storage/0', 'public_address': 'ec2-54-227-38-161.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-154-181-123.ec2.internal', 'juju_log': <function callable_command at 0x180f0c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 11:27:49,172 unit:oscied-webui/0: unit.hook.api INFO: --> Entering WebuiHooks.py
2013-07-01 11:27:49,356 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'root_secret': u'5FrvHcm7oyF4WQFW', 'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': True, 'hosts_file': '/etc/hosts', 'rabbit_connection': u'amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': u'mongodb://admin:Iz85QVjdCJugEosz@localhost:27017/orchestra', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}, 'name': 'oscied-orchestra/0', 'public_address': 'ec2-54-234-192-63.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-71-53.ec2.internal', 'juju_log': <function callable_command at 0x1b017d0>, 'config': {u'repositories_pass': u'41nVGq07GmSgK9Ud', u'storage_options': u'', 'verbose': True, u'storage_nat_address': u'', u'rabbit_password': u'OZy23iO0D4UpYS2k', u'storage_fstype': u'', u'nodes_secret': u'bdZccPuG9fibjwCS', u'transform_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/transform/source', u'repositories_user': u'oscied', u'root_secret': u'5FrvHcm7oyF4WQFW', u'storage_mountpoint': u'', u'mongo_nodes_password': u'M2qlif8rdtKtBYil', u'publisher_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/publisher/source', u'mongo_admin_password': u'Iz85QVjdCJugEosz', u'storage_address': u'', u'webui_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/webui/source'}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED orchestrator.\n", 'provides': {'publisher': {'interface': 'subordinate'}, 'api': {'interface': 'orchestra'}, 'transform': {'interface': 'subordinate'}}, 'name': 'oscied-orchestra', 'requires': {'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Orchestra"}}
2013-07-01 11:27:49,495 unit:oscied-storage/0: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 11:27:49,478 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'proxy_ips': [], 'storage_fstype': 'glusterfs', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-234-214-201.compute-1.amazonaws.com', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-publisher/0', 'public_address': 'ec2-54-234-214-201.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-2-99.ec2.internal', 'juju_log': <function callable_command at 0x2a025f0>, 'config': {u'max_upload_size': 4294967296, u'storage_mountpoint': u'', 'verbose': True, u'max_input_time': 600, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'publisher_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 2, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u'', u'max_execution_time': 180}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media publisher. Contains apache & mod streaming.\nCan be scaled to multiple instances.\n", 'provides': {'streaming': {'interface': 'http'}}, 'name': 'oscied-publisher', 'requires': {'publisher': {'interface': 'subordinate'}, 'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Publisher"}}
2013-07-01 11:27:49,522 unit:oscied-webui/0: unit.hook.api INFO: [HOOK] Execute WebuiHooks hook api-relation-joined
2013-07-01 11:27:49,693 unit:oscied-orchestra/0: unit.hook.api INFO: --> Entering OrchestraHooks.py
2013-07-01 11:27:49,823 unit:oscied-storage/0: unit.hook.api INFO: [HOOK] Execute StorageHooks hook storage-relation-joined
2013-07-01 11:27:49,823 unit:oscied-publisher/0: unit.hook.api INFO: --> Entering PublisherHooks.py
2013-07-01 11:27:49,872 unit:oscied-webui/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_options': '', 'verbose': None, 'database_template_file': 'templates/database.php.template', 'hosts_file': '/etc/hosts', 'sites_enabled_path': '/etc/apache2/sites-enabled', 'storage_path': '/mnt/storage', 'storage_mountpoint': 'medias_volume_0', 'api_url': '', 'site_database_file': 'webui-db.sql', 'general_config_file': '/var/www/application/config/config.php', 'database_config_file': '/var/www/application/config/database.php', 'proxy_ips': [], 'htaccess_template_file': 'templates/htaccess.template', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'www_medias_path': '/var/www/medias', 'www_uploads_path': '/var/www/uploads', '_pickle_filename': 'local_config.pkl', 'site_template_file': 'templates/000-default', 'storage_mount_sleep_delay': 5, 'storage_nat_address': '', 'encryption_key': '5UCuWXhlrxOscNFuShIfJtLlI2oB3crZ', 'storage_fstype': 'glusterfs', 'www_root_path': '/var/www', 'general_template_file': 'templates/config.php.template', 'htaccess_config_file': '/var/www/.htaccess'}
2013-07-01 11:27:50,031 unit:oscied-orchestra/0: unit.hook.api INFO: [HOOK] Execute OrchestraHooks hook storage-relation-joined
2013-07-01 11:27:50,153 unit:oscied-storage/0: unit.hook.api INFO: [INFO] Send filesystem (volume medias_volume_0) configuration to remote client
2013-07-01 11:27:50,170 unit:oscied-publisher/0: unit.hook.api INFO: [HOOK] Execute PublisherHooks hook subordinate-relation-joined
2013-07-01 11:27:50,222 unit:oscied-webui/0: unit.hook.api INFO: <-- Exiting WebuiHooks.py
2013-07-01 11:27:50,270 unit:oscied-webui/0: hook.output DEBUG: hook api-relation-joined exited, exit code 0.
2013-07-01 11:27:50,290 unit:oscied-webui/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-webui-0/charm/hooks/api-relation-joined
2013-07-01 11:27:50,294 unit:oscied-webui/0: hook.scheduler DEBUG: executing hook for oscied-orchestra/0:modified
2013-07-01 11:27:50,348 unit:oscied-webui/0: hook.output DEBUG: Cached relation hook contexts on 'api:7': ['storage:4']
2013-07-01 11:27:50,356 unit:oscied-webui/0: unit.relation.lifecycle DEBUG: Executing hook api-relation-changed
2013-07-01 11:27:50,357 unit:oscied-webui/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-webui-0/charm/hooks/api-relation-changed
2013-07-01 11:27:50,368 unit:oscied-orchestra/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'root_secret': u'5FrvHcm7oyF4WQFW', 'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': True, 'hosts_file': '/etc/hosts', 'rabbit_connection': u'amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': u'mongodb://admin:Iz85QVjdCJugEosz@localhost:27017/orchestra', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}
2013-07-01 11:27:50,519 unit:oscied-publisher/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'proxy_ips': [], 'storage_fstype': 'glusterfs', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-234-214-201.compute-1.amazonaws.com', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 11:27:50,713 unit:oscied-orchestra/0: unit.hook.api INFO: <-- Exiting OrchestraHooks.py
2013-07-01 11:27:50,759 unit:oscied-orchestra/0: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 11:27:50,766 unit:oscied-orchestra/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-orchestra-0/charm/hooks/storage-relation-joined
2013-07-01 11:27:50,772 unit:oscied-orchestra/0: hook.scheduler DEBUG: executing hook for oscied-storage/0:modified
2013-07-01 11:27:50,773 unit:oscied-orchestra/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-orchestra-0/charm/hooks/publisher-relation-joined
2013-07-01 11:27:50,857 unit:oscied-publisher/0: unit.hook.api INFO: <-- Exiting PublisherHooks.py
2013-07-01 11:27:50,907 unit:oscied-publisher/0: hook.output DEBUG: hook publisher-relation-joined exited, exit code 0.
2013-07-01 11:27:50,937 unit:oscied-publisher/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-publisher-0/charm/hooks/publisher-relation-joined
2013-07-01 11:27:50,944 unit:oscied-publisher/0: hook.scheduler DEBUG: executing hook for oscied-orchestra/0:modified
2013-07-01 11:27:50,983 unit:oscied-orchestra/0: hook.output DEBUG: Cached relation hook contexts on 'storage:3': ['api:7', 'publisher:6', 'transform:5']
2013-07-01 11:27:50,999 unit:oscied-orchestra/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 11:27:51,037 unit:oscied-publisher/0: hook.output DEBUG: Cached relation hook contexts on 'publisher:6': ['storage:2']
2013-07-01 11:27:51,046 unit:oscied-publisher/0: unit.relation.lifecycle DEBUG: Executing hook publisher-relation-changed
2013-07-01 11:27:51,046 unit:oscied-publisher/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-publisher-0/charm/hooks/publisher-relation-changed
2013-07-01 11:27:51,184 unit:oscied-storage/0: unit.hook.api INFO: [INFO] Add ip-10-164-71-53.ec2.internal to allowed clients IPs
2013-07-01 11:27:51,245 unit:oscied-webui/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 11:27:51,517 unit:oscied-storage/0: unit.hook.api INFO: [INFO] Set volume medias_volume_0 allowed clients IP list to ip-10-154-177-94.ec2.internal,ip-10-164-2-99.ec2.internal,ip-10-164-71-53.ec2.internal,*
2013-07-01 11:27:51,617 unit:oscied-webui/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 11:27:51,847 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Execute gluster volume set medias_volume_0 auth.allow "ip-10-154-177-94.ec2.internal,ip-10-164-2-99.ec2.internal,ip-10-164-71-53.ec2.internal,*"
2013-07-01 11:27:51,783 unit:oscied-orchestra/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 11:27:51,982 unit:oscied-webui/0: unit.hook.api INFO: --> Entering WebuiHooks.py
2013-07-01 11:27:51,994 unit:oscied-publisher/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 11:27:52,167 unit:oscied-orchestra/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 11:27:52,331 unit:oscied-webui/0: unit.hook.api INFO: [HOOK] Execute WebuiHooks hook api-relation-changed
2013-07-01 11:27:52,351 unit:oscied-publisher/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 11:27:52,506 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 11:27:52,706 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 11:27:52,855 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'root_secret': u'5FrvHcm7oyF4WQFW', 'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': True, 'hosts_file': '/etc/hosts', 'rabbit_connection': u'amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': u'mongodb://admin:Iz85QVjdCJugEosz@localhost:27017/orchestra', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}, 'name': 'oscied-orchestra/0', 'public_address': 'ec2-54-234-192-63.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-71-53.ec2.internal', 'juju_log': <function callable_command at 0x28fd7d0>, 'config': {u'repositories_pass': u'41nVGq07GmSgK9Ud', u'storage_options': u'', 'verbose': True, u'storage_nat_address': u'', u'rabbit_password': u'OZy23iO0D4UpYS2k', u'storage_fstype': u'', u'nodes_secret': u'bdZccPuG9fibjwCS', u'transform_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/transform/source', u'repositories_user': u'oscied', u'root_secret': u'5FrvHcm7oyF4WQFW', u'storage_mountpoint': u'', u'mongo_nodes_password': u'M2qlif8rdtKtBYil', u'publisher_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/publisher/source', u'mongo_admin_password': u'Iz85QVjdCJugEosz', u'storage_address': u'', u'webui_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/webui/source'}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED orchestrator.\n", 'provides': {'publisher': {'interface': 'subordinate'}, 'api': {'interface': 'orchestra'}, 'transform': {'interface': 'subordinate'}}, 'name': 'oscied-orchestra', 'requires': {'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Orchestra"}}
2013-07-01 11:27:53,028 unit:oscied-webui/0: unit.hook.api INFO: [REMARK] Waiting for complete setup !
2013-07-01 11:27:53,043 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'proxy_ips': [], 'storage_fstype': 'glusterfs', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-234-214-201.compute-1.amazonaws.com', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-publisher/0', 'public_address': 'ec2-54-234-214-201.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-2-99.ec2.internal', 'juju_log': <function callable_command at 0x14725f0>, 'config': {u'max_upload_size': 4294967296, u'storage_mountpoint': u'', 'verbose': True, u'max_input_time': 600, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'publisher_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 2, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u'', u'max_execution_time': 180}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media publisher. Contains apache & mod streaming.\nCan be scaled to multiple instances.\n", 'provides': {'streaming': {'interface': 'http'}}, 'name': 'oscied-publisher', 'requires': {'publisher': {'interface': 'subordinate'}, 'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Publisher"}}
2013-07-01 11:27:53,193 unit:oscied-orchestra/0: unit.hook.api INFO: --> Entering OrchestraHooks.py
2013-07-01 11:27:53,375 unit:oscied-publisher/0: unit.hook.api INFO: --> Entering PublisherHooks.py
2013-07-01 11:27:53,388 unit:oscied-webui/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_options': '', 'verbose': None, 'database_template_file': 'templates/database.php.template', 'hosts_file': '/etc/hosts', 'sites_enabled_path': '/etc/apache2/sites-enabled', 'storage_path': '/mnt/storage', 'storage_mountpoint': 'medias_volume_0', 'api_url': '', 'site_database_file': 'webui-db.sql', 'general_config_file': '/var/www/application/config/config.php', 'database_config_file': '/var/www/application/config/database.php', 'proxy_ips': [], 'htaccess_template_file': 'templates/htaccess.template', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'www_medias_path': '/var/www/medias', 'www_uploads_path': '/var/www/uploads', '_pickle_filename': 'local_config.pkl', 'site_template_file': 'templates/000-default', 'storage_mount_sleep_delay': 5, 'storage_nat_address': '', 'encryption_key': '5UCuWXhlrxOscNFuShIfJtLlI2oB3crZ', 'storage_fstype': 'glusterfs', 'www_root_path': '/var/www', 'general_template_file': 'templates/config.php.template', 'htaccess_config_file': '/var/www/.htaccess'}
2013-07-01 11:27:53,427 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Execute gluster volume info medias_volume_0 
2013-07-01 11:27:53,528 unit:oscied-orchestra/0: unit.hook.api INFO: [HOOK] Execute OrchestraHooks hook publisher-relation-joined
2013-07-01 11:27:53,708 unit:oscied-publisher/0: unit.hook.api INFO: [HOOK] Execute PublisherHooks hook subordinate-relation-changed
2013-07-01 11:27:53,742 unit:oscied-webui/0: unit.hook.api INFO: <-- Exiting WebuiHooks.py
2013-07-01 11:27:53,789 unit:oscied-webui/0: hook.output DEBUG: hook api-relation-changed exited, exit code 0.
2013-07-01 11:27:53,858 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Volume infos stdout: '\nVolume Name: medias_volume_0\nType: Distribute\nStatus: Started\nNumber of Bricks: 1\nTransport-type: tcp\nBricks:\nBrick1: ip-10-154-181-123.ec2.internal:/exp0\nOptions Reconfigured:\nauth.allow: ip-10-154-177-94.ec2.internal,ip-10-164-2-99.ec2.internal,ip-10-164-71-53.ec2.internal,*\n'
2013-07-01 11:27:53,861 unit:oscied-webui/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-webui-0/charm/hooks/api-relation-changed
2013-07-01 11:27:54,192 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Execute gluster volume info medias_volume_0 
2013-07-01 11:27:54,238 unit:oscied-orchestra/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'root_secret': u'5FrvHcm7oyF4WQFW', 'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': True, 'hosts_file': '/etc/hosts', 'rabbit_connection': u'amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': u'mongodb://admin:Iz85QVjdCJugEosz@localhost:27017/orchestra', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}
2013-07-01 11:27:54,625 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Volume infos stdout: '\nVolume Name: medias_volume_0\nType: Distribute\nStatus: Started\nNumber of Bricks: 1\nTransport-type: tcp\nBricks:\nBrick1: ip-10-154-181-123.ec2.internal:/exp0\nOptions Reconfigured:\nauth.allow: ip-10-154-177-94.ec2.internal,ip-10-164-2-99.ec2.internal,ip-10-164-71-53.ec2.internal,*\n'
2013-07-01 11:27:54,595 unit:oscied-orchestra/0: unit.hook.api INFO: <-- Exiting OrchestraHooks.py
2013-07-01 11:27:54,645 unit:oscied-orchestra/0: hook.output DEBUG: hook publisher-relation-joined exited, exit code 0.
2013-07-01 11:27:54,690 unit:oscied-publisher/0: unit.relation.watch DEBUG: relation watcher settings change <ClientEvent changed at '/relations/relation-0000000006/settings/unit-0000000000' state: connected handle:0>
2013-07-01 11:27:54,704 unit:oscied-publisher/0: hook.scheduler DEBUG: settings changed: (('oscied-orchestra/0', 1),)
2013-07-01 11:27:54,742 unit:oscied-orchestra/0: hook.output DEBUG: Flushed values for hook 'publisher-relation-joined' on 'publisher:6'
    Setting changed: u'mongo_connection'=u'mongodb://nodes:M2qlif8rdtKtBYil@ip-10-164-71-53.ec2.internal:27017/celery' (was unset)
    Setting changed: u'rabbit_connection'=u'amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery' (was unset)
2013-07-01 11:27:54,743 unit:oscied-orchestra/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-orchestra-0/charm/hooks/publisher-relation-joined
2013-07-01 11:27:54,746 unit:oscied-orchestra/0: hook.scheduler DEBUG: executing hook for oscied-publisher/0:modified
2013-07-01 11:27:54,747 unit:oscied-orchestra/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-orchestra-0/charm/hooks/api-relation-joined
2013-07-01 11:27:54,959 unit:oscied-storage/0: unit.hook.api INFO: [INFO] {'status': 'Started', 'name': 'medias_volume_0', 'bricks': ['ip-10-154-181-123.ec2.internal:/exp0'], 'auth_allow': 'ip-10-154-177-94.ec2.internal,ip-10-164-2-99.ec2.internal,ip-10-164-71-53.ec2.internal,*', 'type': 'Distribute', 'transport': 'tcp'}
2013-07-01 11:27:55,000 unit:oscied-orchestra/0: hook.output DEBUG: Cached relation hook contexts on 'publisher:6': ['api:7', 'storage:3', 'transform:5']
2013-07-01 11:27:55,037 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] Orchestra address is ip-10-164-71-53.ec2.internal, MongoDB is , RabbitMQ is 
2013-07-01 11:27:55,014 unit:oscied-orchestra/0: unit.relation.lifecycle DEBUG: Executing hook publisher-relation-changed
2013-07-01 11:27:55,291 unit:oscied-storage/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1255d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': ['ip-10-154-177-94.ec2.internal', 'ip-10-164-2-99.ec2.internal', 'ip-10-164-71-53.ec2.internal'], 'verbose': True}
2013-07-01 11:27:55,367 unit:oscied-publisher/0: unit.hook.api INFO: [REMARK] Waiting for complete setup !
2013-07-01 11:27:55,623 unit:oscied-storage/0: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 11:27:55,667 unit:oscied-storage/0: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 11:27:55,657 unit:oscied-orchestra/0: unit.relation.watch DEBUG: relation watcher settings change <ClientEvent changed at '/relations/relation-0000000003/settings/unit-0000000002' state: connected handle:0>
2013-07-01 11:27:55,698 unit:oscied-publisher/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'proxy_ips': [], 'storage_fstype': 'glusterfs', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-234-214-201.compute-1.amazonaws.com', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 11:27:55,665 unit:oscied-orchestra/0: hook.scheduler DEBUG: settings changed: (('oscied-storage/0', 1),)
2013-07-01 11:27:55,848 unit:oscied-storage/0: hook.output DEBUG: Flushed values for hook 'storage-relation-joined' on 'storage:3'
    Setting changed: u'fstype'=u'glusterfs' (was unset)
    Setting changed: u'mountpoint'=u'medias_volume_0' (was unset)
2013-07-01 11:27:55,849 unit:oscied-storage/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-0/charm/hooks/storage-relation-joined
2013-07-01 11:27:55,852 unit:oscied-storage/0: hook.scheduler DEBUG: executing hook for oscied-orchestra/0:modified
2013-07-01 11:27:55,789 unit:oscied-orchestra/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 11:27:56,049 unit:oscied-storage/0: hook.output DEBUG: Cached relation hook contexts on 'storage:3': ['peer:0', 'storage:1', 'storage:2', 'storage:4']
2013-07-01 11:27:56,029 unit:oscied-publisher/0: unit.hook.api INFO: <-- Exiting PublisherHooks.py
2013-07-01 11:27:56,064 unit:oscied-storage/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 11:27:56,064 unit:oscied-storage/0: hook.executor INFO: Hook does not exist, skipping /var/lib/juju/units/oscied-storage-0/charm/hooks/storage-relation-changed
2013-07-01 11:27:56,078 unit:oscied-publisher/0: hook.output DEBUG: hook publisher-relation-changed exited, exit code 0.
2013-07-01 11:27:56,104 unit:oscied-publisher/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-publisher-0/charm/hooks/publisher-relation-changed
2013-07-01 11:27:56,105 unit:oscied-publisher/0: hook.scheduler DEBUG: executing hook for oscied-orchestra/0:modified
2013-07-01 11:27:56,185 unit:oscied-publisher/0: hook.output DEBUG: Cached relation hook contexts on 'publisher:6': ['storage:2']
2013-07-01 11:27:56,198 unit:oscied-publisher/0: unit.relation.lifecycle DEBUG: Executing hook publisher-relation-changed
2013-07-01 11:27:56,199 unit:oscied-publisher/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-publisher-0/charm/hooks/publisher-relation-changed
2013-07-01 11:27:56,161 unit:oscied-orchestra/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 11:27:56,526 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 11:27:56,870 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'root_secret': u'5FrvHcm7oyF4WQFW', 'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': True, 'hosts_file': '/etc/hosts', 'rabbit_connection': u'amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': u'mongodb://admin:Iz85QVjdCJugEosz@localhost:27017/orchestra', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}, 'name': 'oscied-orchestra/0', 'public_address': 'ec2-54-234-192-63.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-71-53.ec2.internal', 'juju_log': <function callable_command at 0x28b87d0>, 'config': {u'repositories_pass': u'41nVGq07GmSgK9Ud', u'storage_options': u'', 'verbose': True, u'storage_nat_address': u'', u'rabbit_password': u'OZy23iO0D4UpYS2k', u'storage_fstype': u'', u'nodes_secret': u'bdZccPuG9fibjwCS', u'transform_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/transform/source', u'repositories_user': u'oscied', u'root_secret': u'5FrvHcm7oyF4WQFW', u'storage_mountpoint': u'', u'mongo_nodes_password': u'M2qlif8rdtKtBYil', u'publisher_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/publisher/source', u'mongo_admin_password': u'Iz85QVjdCJugEosz', u'storage_address': u'', u'webui_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/webui/source'}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED orchestrator.\n", 'provides': {'publisher': {'interface': 'subordinate'}, 'api': {'interface': 'orchestra'}, 'transform': {'interface': 'subordinate'}}, 'name': 'oscied-orchestra', 'requires': {'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Orchestra"}}
2013-07-01 11:27:57,127 unit:oscied-publisher/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 11:27:57,209 unit:oscied-orchestra/0: unit.hook.api INFO: --> Entering OrchestraHooks.py
2013-07-01 11:27:57,479 unit:oscied-publisher/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 11:27:57,546 unit:oscied-orchestra/0: unit.hook.api INFO: [HOOK] Execute OrchestraHooks hook api-relation-joined
2013-07-01 11:27:57,824 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 11:27:58,166 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'proxy_ips': [], 'storage_fstype': 'glusterfs', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-234-214-201.compute-1.amazonaws.com', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-publisher/0', 'public_address': 'ec2-54-234-214-201.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-2-99.ec2.internal', 'juju_log': <function callable_command at 0x128d5f0>, 'config': {u'max_upload_size': 4294967296, u'storage_mountpoint': u'', 'verbose': True, u'max_input_time': 600, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'publisher_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 2, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u'', u'max_execution_time': 180}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media publisher. Contains apache & mod streaming.\nCan be scaled to multiple instances.\n", 'provides': {'streaming': {'interface': 'http'}}, 'name': 'oscied-publisher', 'requires': {'publisher': {'interface': 'subordinate'}, 'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Publisher"}}
2013-07-01 11:27:58,231 unit:oscied-orchestra/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'root_secret': u'5FrvHcm7oyF4WQFW', 'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': True, 'hosts_file': '/etc/hosts', 'rabbit_connection': u'amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': u'mongodb://admin:Iz85QVjdCJugEosz@localhost:27017/orchestra', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}
2013-07-01 11:27:58,496 unit:oscied-publisher/0: unit.hook.api INFO: --> Entering PublisherHooks.py
2013-07-01 11:27:58,571 unit:oscied-orchestra/0: unit.hook.api INFO: <-- Exiting OrchestraHooks.py
2013-07-01 11:27:58,616 unit:oscied-orchestra/0: hook.output DEBUG: hook api-relation-joined exited, exit code 0.
2013-07-01 11:27:58,703 unit:oscied-webui/0: unit.relation.watch DEBUG: relation watcher settings change <ClientEvent changed at '/relations/relation-0000000007/settings/unit-0000000000' state: connected handle:0>
2013-07-01 11:27:58,714 unit:oscied-webui/0: hook.scheduler DEBUG: settings changed: (('oscied-orchestra/0', 1),)
2013-07-01 11:27:58,715 unit:oscied-webui/0: hook.scheduler DEBUG: executing hook for oscied-orchestra/0:modified
2013-07-01 11:27:58,688 unit:oscied-orchestra/0: hook.output DEBUG: Flushed values for hook 'api-relation-joined' on 'api:7'
    Setting changed: u'api_url'=u'http://ip-10-164-71-53.ec2.internal:5000' (was unset)
2013-07-01 11:27:58,688 unit:oscied-orchestra/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-orchestra-0/charm/hooks/api-relation-joined
2013-07-01 11:27:58,692 unit:oscied-orchestra/0: hook.scheduler DEBUG: executing hook for oscied-webui/0:modified
2013-07-01 11:27:58,693 unit:oscied-orchestra/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-orchestra-0/charm/hooks/config-changed
2013-07-01 11:27:58,828 unit:oscied-publisher/0: unit.hook.api INFO: [HOOK] Execute PublisherHooks hook subordinate-relation-changed
2013-07-01 11:27:58,844 unit:oscied-webui/0: hook.output DEBUG: Cached relation hook contexts on 'api:7': ['storage:4']
2013-07-01 11:27:58,855 unit:oscied-webui/0: unit.relation.lifecycle DEBUG: Executing hook api-relation-changed
2013-07-01 11:27:58,856 unit:oscied-webui/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-webui-0/charm/hooks/api-relation-changed
2013-07-01 11:27:58,979 unit:oscied-orchestra/0: hook.output DEBUG: Cached relation hook contexts on 'api:7': ['publisher:6', 'storage:3', 'transform:5']
2013-07-01 11:27:58,990 unit:oscied-orchestra/0: unit.relation.lifecycle DEBUG: Executing hook api-relation-changed
2013-07-01 11:27:59,683 unit:oscied-orchestra/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 11:27:59,757 unit:oscied-webui/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 11:28:00,059 unit:oscied-orchestra/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 11:28:00,121 unit:oscied-webui/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 11:28:00,146 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] Orchestra address is ip-10-164-71-53.ec2.internal, MongoDB is mongodb://nodes:M2qlif8rdtKtBYil@ip-10-164-71-53.ec2.internal:27017/celery, RabbitMQ is amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery
2013-07-01 11:28:00,404 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 11:28:00,478 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] Execute ['screen', '-ls', 'Publisher']
2013-07-01 11:28:00,480 unit:oscied-webui/0: unit.hook.api INFO: --> Entering WebuiHooks.py
2013-07-01 11:28:00,749 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'root_secret': u'5FrvHcm7oyF4WQFW', 'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': True, 'hosts_file': '/etc/hosts', 'rabbit_connection': u'amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': u'mongodb://admin:Iz85QVjdCJugEosz@localhost:27017/orchestra', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}, 'name': 'oscied-orchestra/0', 'public_address': 'ec2-54-234-192-63.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-71-53.ec2.internal', 'juju_log': <function callable_command at 0x1d357d0>, 'config': {u'repositories_pass': u'41nVGq07GmSgK9Ud', u'storage_options': u'', 'verbose': True, u'storage_nat_address': u'', u'rabbit_password': u'OZy23iO0D4UpYS2k', u'storage_fstype': u'', u'nodes_secret': u'bdZccPuG9fibjwCS', u'transform_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/transform/source', u'repositories_user': u'oscied', u'root_secret': u'5FrvHcm7oyF4WQFW', u'storage_mountpoint': u'', u'mongo_nodes_password': u'M2qlif8rdtKtBYil', u'publisher_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/publisher/source', u'mongo_admin_password': u'Iz85QVjdCJugEosz', u'storage_address': u'', u'webui_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/webui/source'}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED orchestrator.\n", 'provides': {'publisher': {'interface': 'subordinate'}, 'api': {'interface': 'orchestra'}, 'transform': {'interface': 'subordinate'}}, 'name': 'oscied-orchestra', 'requires': {'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Orchestra"}}
2013-07-01 11:28:00,824 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] Execute service apache2 stop
2013-07-01 11:28:00,829 unit:oscied-webui/0: unit.hook.api INFO: [HOOK] Execute WebuiHooks hook api-relation-changed
2013-07-01 11:28:01,088 unit:oscied-orchestra/0: unit.hook.api INFO: --> Entering OrchestraHooks.py
2013-07-01 11:28:01,264 unit:oscied-publisher/0: unit.hook.api INFO: [INFO] Use subordinate parameters from charm relation
2013-07-01 11:28:01,429 unit:oscied-orchestra/0: unit.hook.api INFO: [HOOK] Execute OrchestraHooks hook config-changed
2013-07-01 11:28:01,613 unit:oscied-publisher/0: unit.hook.api INFO: [INFO] Register the Orchestrator
2013-07-01 11:28:01,676 unit:oscied-webui/0: unit.hook.api INFO: [INFO] Use storage parameters from charm api relation
2013-07-01 11:28:01,781 unit:oscied-orchestra/0: unit.hook.api INFO: [INFO] Configure MongoDB Scalable NoSQL DB
2013-07-01 11:28:01,966 unit:oscied-publisher/0: unit.hook.api INFO: [REMARK] File celeryconfig.py successfully generated !
2013-07-01 11:28:02,034 unit:oscied-webui/0: unit.hook.api INFO: [REMARK] File /var/www/application/config/config.php successfully generated !
2013-07-01 11:28:02,127 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute mongo f.js
2013-07-01 11:28:02,308 unit:oscied-publisher/0: unit.hook.api INFO: [REMARK] Orchestrator successfully registered !
2013-07-01 11:28:02,412 unit:oscied-webui/0: unit.hook.api INFO: [REMARK] File /var/www/application/config/database.php successfully generated !
2013-07-01 11:28:02,539 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute mongo orchestra f.js
2013-07-01 11:28:02,657 unit:oscied-publisher/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'proxy_ips': [], 'storage_fstype': 'glusterfs', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-234-214-201.compute-1.amazonaws.com', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 11:28:02,779 unit:oscied-webui/0: unit.hook.api INFO: [REMARK] File /var/www/.htaccess successfully generated !
2013-07-01 11:28:02,942 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute mongo celery g.js
2013-07-01 11:28:03,003 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] Execute service apache2 start
2013-07-01 11:28:03,138 unit:oscied-webui/0: unit.hook.api INFO: [INFO] Create uploads directory and symlink storage
2013-07-01 11:28:03,342 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] MongoDB configuration is: {'list_values': True, 'encoding': None, 'initial_comment': ['# mongodb.conf', '', '# Where to store the data.'], 'default_encoding': None, 'BOM': False, 'configspec': None, 'newlines': '\n', 'stringify': True, 'inline_comments': {'dbpath': None, 'journal': None, 'logappend': None, 'logpath': None, 'auth': None, 'bind_ip': None, 'noauth': None}, 'comments': {'dbpath': [], 'journal': ['#port = 27017', '', '# Enable journaling, http://www.mongodb.org/display/DOCS/Journaling'], 'logappend': [''], 'logpath': ['', '#where to log'], 'auth': [], 'bind_ip': [''], 'noauth': []}, 'filename': '/etc/mongodb.conf', 'indent_type': '', 'main': ConfigObj({'dbpath': '/var/lib/mongodb', 'logpath': '/var/log/mongodb/mongodb.log', 'logappend': 'true', 'bind_ip': '0.0.0.0', 'journal': 'true', 'noauth': 'false', 'auth': 'true'}), 'sections': [], 'interpolation': True, 'defaults': [], 'parent': ConfigObj({'dbpath': '/var/lib/mongodb', 'logpath': '/var/log/mongodb/mongodb.log', 'logappend': 'true', 'bind_ip': '0.0.0.0', 'journal': 'true', 'noauth': 'false', 'auth': 'true'}), 'scalars': ['dbpath', 'logpath', 'logappend', 'bind_ip', 'journal', 'noauth', 'auth'], '_inspec': False, 'create_empty': False, 'unrepr': False, 'default_values': {}, 'write_empty_values': False, 'name': None, '_original_configspec': None, 'final_comment': ['', '# Enables periodic logging of CPU utilization and I/O wait', '#cpu = true', '', '# Turn on/off security.  Off is currently the default', '#noauth = true', '#auth = true', '', '# Verbose logging output.', '#verbose = true', '', '# Inspect all client data for validity on receipt (useful for', '# developing drivers)', '#objcheck = true', '', '# Enable db quota management', '#quota = true', '', '# Set oplogging level where n is', '#   0=off (default)', '#   1=W', '#   2=R', '#   3=both', '#   7=W+some reads', '#oplog = 0', '', '# Diagnostic/debugging option', '#nocursors = true', '', '# Ignore query hints', '#nohints = true', '', '# Disable the HTTP interface (Defaults to localhost:27018).', '#nohttpinterface = true', '', '# Turns off server-side scripting.  This will result in greatly limited', '# functionality', '#noscripting = true', '', '# Turns off table scans.  Any query that would do a table scan fails.', '#notablescan = true', '', '# Disable data file preallocation.', '#noprealloc = true', '', '# Specify .ns file size for new databases.', '# nssize = <size>', '', '# Accout token for Mongo monitoring server.', '#mms-token = <token>', '', '# Server name for Mongo monitoring server.', '#mms-name = <server-name>', '', '# Ping interval for Mongo monitoring server.', '#mms-interval = <seconds>', '', '# Replication Options', '', '# in replicated mongo databases, specify here whether this is a slave or master', '#slave = true', '#source = master.example.com', '# Slave only: specify a single database to replicate', '#only = master.example.com', '# or', '#master = true', '#source = slave.example.com', '', '# Address of a server to pair with.', '#pairwith = <server:port>', '# Address of arbiter server.', '#arbiter = <server:port>', '# Automatically resync if slave data is stale', '#autoresync', '# Custom size for replication operation log.', '#oplogSize = <MB>', '# Size limit for in-memory storage of op ids.', '#opIdMem = <bytes>', '', '# SSL options', '# Enable SSL on normal ports', '#sslOnNormalPorts = true', '# SSL Key file and password', '#sslPEMKeyFile = /etc/ssl/mongodb.pem', '#sslPEMKeyPassword = pass'], 'file_error': False, '_interpolation_engine': <configobj.ConfigParserInterpolation object at 0x1d37cd0>, 'depth': 0, 'raise_errors': False, 'extra_values': [], '_created': False}
2013-07-01 11:28:03,423 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] Execute ['screen', '-ls', 'Publisher']
2013-07-01 11:28:03,685 unit:oscied-orchestra/0: unit.hook.api INFO: [INFO] Configure RabbitMQ Message Broker
2013-07-01 11:28:04,028 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute rabbitmqctl delete_user guest
2013-07-01 11:28:04,661 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute rabbitmqctl delete_vhost /
2013-07-01 11:28:05,276 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute rabbitmqctl add_user nodes "OZy23iO0D4UpYS2k"
2013-07-01 11:28:05,894 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute rabbitmqctl add_vhost celery
2013-07-01 11:28:06,178 unit:oscied-webui/0: unit.hook.api INFO: [REMARK] Web user interface successfully started !
2013-07-01 11:28:06,527 unit:oscied-webui/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_options': '', 'verbose': None, 'database_template_file': 'templates/database.php.template', 'hosts_file': '/etc/hosts', 'sites_enabled_path': '/etc/apache2/sites-enabled', 'storage_path': '/mnt/storage', 'storage_mountpoint': 'medias_volume_0', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'site_database_file': 'webui-db.sql', 'general_config_file': '/var/www/application/config/config.php', 'database_config_file': '/var/www/application/config/database.php', 'proxy_ips': [], 'htaccess_template_file': 'templates/htaccess.template', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'www_medias_path': '/var/www/medias', 'www_uploads_path': '/var/www/uploads', '_pickle_filename': 'local_config.pkl', 'site_template_file': 'templates/000-default', 'storage_mount_sleep_delay': 5, 'storage_nat_address': '', 'encryption_key': '5UCuWXhlrxOscNFuShIfJtLlI2oB3crZ', 'storage_fstype': 'glusterfs', 'www_root_path': '/var/www', 'general_template_file': 'templates/config.php.template', 'htaccess_config_file': '/var/www/.htaccess'}
2013-07-01 11:28:06,491 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute rabbitmqctl set_permissions -p celery nodes ".*" ".*" ".*"
2013-07-01 11:28:06,888 unit:oscied-webui/0: unit.hook.api INFO: <-- Exiting WebuiHooks.py
2013-07-01 11:28:06,936 unit:oscied-webui/0: hook.output DEBUG: hook api-relation-changed exited, exit code 0.
2013-07-01 11:28:06,959 unit:oscied-webui/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-webui-0/charm/hooks/api-relation-changed
2013-07-01 11:28:07,121 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute rabbitmqctl list_users
2013-07-01 11:28:07,725 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute rabbitmqctl list_vhosts
2013-07-01 11:28:08,322 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] RabbitMQ users: ['nodes'] vhosts: ['celery']
2013-07-01 11:28:08,664 unit:oscied-orchestra/0: unit.hook.api INFO: [INFO] Configure Orchestra the Orchestrator
2013-07-01 11:28:08,816 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] Execute ['screen', '-ls', 'Publisher']
2013-07-01 11:28:09,004 unit:oscied-orchestra/0: unit.hook.api INFO: [REMARK] File celeryconfig.py successfully generated !
2013-07-01 11:28:09,161 unit:oscied-publisher/0: unit.hook.api INFO: [REMARK] Publisher successfully started !
2013-07-01 11:28:09,344 unit:oscied-orchestra/0: unit.hook.api INFO: [REMARK] Orchestrator successfully configured !
2013-07-01 11:28:09,493 unit:oscied-publisher/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'proxy_ips': [], 'storage_fstype': 'glusterfs', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-234-214-201.compute-1.amazonaws.com', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 11:28:09,679 unit:oscied-orchestra/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'root_secret': u'5FrvHcm7oyF4WQFW', 'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': True, 'hosts_file': '/etc/hosts', 'rabbit_connection': u'amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': u'mongodb://admin:Iz85QVjdCJugEosz@localhost:27017/orchestra', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}
2013-07-01 11:28:09,831 unit:oscied-publisher/0: unit.hook.api INFO: <-- Exiting PublisherHooks.py
2013-07-01 11:28:09,879 unit:oscied-publisher/0: hook.output DEBUG: hook publisher-relation-changed exited, exit code 0.
2013-07-01 11:28:09,904 unit:oscied-publisher/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-publisher-0/charm/hooks/publisher-relation-changed
2013-07-01 11:28:10,015 unit:oscied-orchestra/0: unit.hook.api INFO: <-- Exiting OrchestraHooks.py
2013-07-01 11:28:10,059 unit:oscied-orchestra/0: hook.output DEBUG: hook config-changed exited, exit code 0.
2013-07-01 11:28:10,153 unit:oscied-orchestra/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-orchestra-0/charm/hooks/config-changed
2013-07-01 11:28:10,153 unit:oscied-orchestra/0: unit.lifecycle DEBUG: configured unit
2013-07-01 11:28:10,155 unit:oscied-orchestra/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-orchestra-0/charm/hooks/storage-relation-changed
2013-07-01 11:28:10,266 unit:oscied-orchestra/0: statemachine DEBUG: unitworkflowstate: transition complete configure (state started) {}
2013-07-01 11:28:10,283 unit:oscied-orchestra/0: juju.agents.unit INFO: No upgrade flag set.
2013-07-01 11:28:11,049 unit:oscied-orchestra/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 11:28:11,405 unit:oscied-orchestra/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 11:28:11,743 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 11:28:12,083 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'root_secret': u'5FrvHcm7oyF4WQFW', 'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': True, 'hosts_file': '/etc/hosts', 'rabbit_connection': u'amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': u'mongodb://admin:Iz85QVjdCJugEosz@localhost:27017/orchestra', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}, 'name': 'oscied-orchestra/0', 'public_address': 'ec2-54-234-192-63.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-71-53.ec2.internal', 'juju_log': <function callable_command at 0x2e9b7d0>, 'config': {u'repositories_pass': u'41nVGq07GmSgK9Ud', u'storage_options': u'', 'verbose': True, u'storage_nat_address': u'', u'rabbit_password': u'OZy23iO0D4UpYS2k', u'storage_fstype': u'', u'nodes_secret': u'bdZccPuG9fibjwCS', u'transform_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/transform/source', u'repositories_user': u'oscied', u'root_secret': u'5FrvHcm7oyF4WQFW', u'storage_mountpoint': u'', u'mongo_nodes_password': u'M2qlif8rdtKtBYil', u'publisher_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/publisher/source', u'mongo_admin_password': u'Iz85QVjdCJugEosz', u'storage_address': u'', u'webui_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/webui/source'}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED orchestrator.\n", 'provides': {'publisher': {'interface': 'subordinate'}, 'api': {'interface': 'orchestra'}, 'transform': {'interface': 'subordinate'}}, 'name': 'oscied-orchestra', 'requires': {'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Orchestra"}}
2013-07-01 11:28:12,415 unit:oscied-orchestra/0: unit.hook.api INFO: --> Entering OrchestraHooks.py
2013-07-01 11:28:12,746 unit:oscied-orchestra/0: unit.hook.api INFO: [HOOK] Execute OrchestraHooks hook storage-relation-changed
2013-07-01 11:28:14,439 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Storage address is ip-10-154-181-123.ec2.internal, fstype: glusterfs, mountpoint: medias_volume_0, options: 
2013-07-01 11:28:14,772 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute ['screen', '-ls', 'Orchestra']
2013-07-01 11:28:15,151 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute service rabbitmq-server stop
2013-07-01 11:28:17,365 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute service mongodb stop
2013-07-01 11:28:17,751 unit:oscied-orchestra/0: unit.hook.api INFO: [INFO] Use storage parameters from charm storage relation
2013-07-01 11:28:18,094 unit:oscied-orchestra/0: unit.hook.api INFO: [INFO] Unregister shared storage
2013-07-01 11:28:18,430 unit:oscied-orchestra/0: unit.hook.api INFO: [REMARK] Shared storage already unmounted !
2013-07-01 11:28:18,768 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Mount shared storage [] ip-10-154-181-123.ec2.internal:medias_volume_0 type glusterfs options '' -> /mnt/storage
2013-07-01 11:28:19,108 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute ['mount', '-t', 'glusterfs', 'ip-10-154-181-123.ec2.internal:/medias_volume_0', '/mnt/storage']
2013-07-01 11:28:27,717 unit:oscied-orchestra/0: unit.hook.api INFO: [REMARK] Shared storage successfully registered !
2013-07-01 11:28:28,050 unit:oscied-orchestra/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'root_secret': u'5FrvHcm7oyF4WQFW', 'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': True, 'hosts_file': '/etc/hosts', 'rabbit_connection': u'amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': u'mongodb://admin:Iz85QVjdCJugEosz@localhost:27017/orchestra', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}
2013-07-01 11:28:28,387 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute service mongodb start
2013-07-01 11:28:28,893 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute service rabbitmq-server start
2013-07-01 11:28:33,676 unit:oscied-orchestra/0: unit.hook.api INFO: [INFO] Configure RabbitMQ Message Broker
2013-07-01 11:28:34,017 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute rabbitmqctl delete_user guest
2013-07-01 11:28:34,615 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute rabbitmqctl delete_vhost /
2013-07-01 11:28:35,219 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute rabbitmqctl add_user nodes "OZy23iO0D4UpYS2k"
2013-07-01 11:28:35,814 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute rabbitmqctl add_vhost celery
2013-07-01 11:28:36,408 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute rabbitmqctl set_permissions -p celery nodes ".*" ".*" ".*"
2013-07-01 11:28:37,025 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute rabbitmqctl list_users
2013-07-01 11:28:37,618 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute rabbitmqctl list_vhosts
2013-07-01 11:28:38,209 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] RabbitMQ users: ['nodes'] vhosts: ['celery']
2013-07-01 11:28:38,552 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute ['screen', '-ls', 'Orchestra']
2013-07-01 11:28:43,937 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute curl -s http://127.0.0.1:5000
2013-07-01 11:28:44,683 unit:oscied-orchestra/0: unit.hook.api INFO: [REMARK] Orchestra successfully started !
2013-07-01 11:28:45,032 unit:oscied-orchestra/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'root_secret': u'5FrvHcm7oyF4WQFW', 'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': True, 'hosts_file': '/etc/hosts', 'rabbit_connection': u'amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': u'mongodb://admin:Iz85QVjdCJugEosz@localhost:27017/orchestra', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}
2013-07-01 11:28:45,373 unit:oscied-orchestra/0: unit.hook.api INFO: <-- Exiting OrchestraHooks.py
2013-07-01 11:28:45,418 unit:oscied-orchestra/0: hook.output DEBUG: hook storage-relation-changed exited, exit code 0.
2013-07-01 11:28:45,483 unit:oscied-orchestra/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-orchestra-0/charm/hooks/storage-relation-changed
2013-07-01 11:28:45,484 unit:oscied-orchestra/0: hook.scheduler DEBUG: executing hook for oscied-storage/0:modified
2013-07-01 11:28:45,485 unit:oscied-orchestra/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-orchestra-0/charm/hooks/publisher-relation-changed
2013-07-01 11:28:45,743 unit:oscied-orchestra/0: hook.output DEBUG: Cached relation hook contexts on 'storage:3': ['api:7', 'publisher:6', 'transform:5']
2013-07-01 11:28:45,757 unit:oscied-orchestra/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 11:28:46,495 unit:oscied-orchestra/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 11:28:46,855 unit:oscied-orchestra/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 11:28:47,220 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 11:28:47,571 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'root_secret': u'5FrvHcm7oyF4WQFW', 'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': True, 'hosts_file': '/etc/hosts', 'rabbit_connection': u'amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': u'mongodb://admin:Iz85QVjdCJugEosz@localhost:27017/orchestra', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}, 'name': 'oscied-orchestra/0', 'public_address': 'ec2-54-234-192-63.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-71-53.ec2.internal', 'juju_log': <function callable_command at 0x24137d0>, 'config': {u'repositories_pass': u'41nVGq07GmSgK9Ud', u'storage_options': u'', 'verbose': True, u'storage_nat_address': u'', u'rabbit_password': u'OZy23iO0D4UpYS2k', u'storage_fstype': u'', u'nodes_secret': u'bdZccPuG9fibjwCS', u'transform_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/transform/source', u'repositories_user': u'oscied', u'root_secret': u'5FrvHcm7oyF4WQFW', u'storage_mountpoint': u'', u'mongo_nodes_password': u'M2qlif8rdtKtBYil', u'publisher_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/publisher/source', u'mongo_admin_password': u'Iz85QVjdCJugEosz', u'storage_address': u'', u'webui_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/webui/source'}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED orchestrator.\n", 'provides': {'publisher': {'interface': 'subordinate'}, 'api': {'interface': 'orchestra'}, 'transform': {'interface': 'subordinate'}}, 'name': 'oscied-orchestra', 'requires': {'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Orchestra"}}
2013-07-01 11:28:47,910 unit:oscied-orchestra/0: unit.hook.api INFO: --> Entering OrchestraHooks.py
2013-07-01 11:28:48,252 unit:oscied-orchestra/0: unit.hook.api INFO: [HOOK] Execute OrchestraHooks hook publisher-relation-changed
2013-07-01 11:28:48,924 unit:oscied-orchestra/0: unit.hook.api INFO: [INFO] Publisher address is ip-10-164-2-99.ec2.internal
2013-07-01 11:28:49,267 unit:oscied-orchestra/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'root_secret': u'5FrvHcm7oyF4WQFW', 'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': True, 'hosts_file': '/etc/hosts', 'rabbit_connection': u'amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': u'mongodb://admin:Iz85QVjdCJugEosz@localhost:27017/orchestra', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}
2013-07-01 11:28:49,616 unit:oscied-orchestra/0: unit.hook.api INFO: <-- Exiting OrchestraHooks.py
2013-07-01 11:28:49,661 unit:oscied-orchestra/0: hook.output DEBUG: hook publisher-relation-changed exited, exit code 0.
2013-07-01 11:28:49,730 unit:oscied-orchestra/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-orchestra-0/charm/hooks/publisher-relation-changed
2013-07-01 11:28:49,731 unit:oscied-orchestra/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-orchestra-0/charm/hooks/api-relation-changed
2013-07-01 11:28:50,635 unit:oscied-orchestra/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 11:28:50,999 unit:oscied-orchestra/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 11:28:51,341 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 11:28:51,685 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'root_secret': u'5FrvHcm7oyF4WQFW', 'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': True, 'hosts_file': '/etc/hosts', 'rabbit_connection': u'amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': u'mongodb://admin:Iz85QVjdCJugEosz@localhost:27017/orchestra', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}, 'name': 'oscied-orchestra/0', 'public_address': 'ec2-54-234-192-63.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-71-53.ec2.internal', 'juju_log': <function callable_command at 0x2fbd7d0>, 'config': {u'repositories_pass': u'41nVGq07GmSgK9Ud', u'storage_options': u'', 'verbose': True, u'storage_nat_address': u'', u'rabbit_password': u'OZy23iO0D4UpYS2k', u'storage_fstype': u'', u'nodes_secret': u'bdZccPuG9fibjwCS', u'transform_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/transform/source', u'repositories_user': u'oscied', u'root_secret': u'5FrvHcm7oyF4WQFW', u'storage_mountpoint': u'', u'mongo_nodes_password': u'M2qlif8rdtKtBYil', u'publisher_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/publisher/source', u'mongo_admin_password': u'Iz85QVjdCJugEosz', u'storage_address': u'', u'webui_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/webui/source'}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED orchestrator.\n", 'provides': {'publisher': {'interface': 'subordinate'}, 'api': {'interface': 'orchestra'}, 'transform': {'interface': 'subordinate'}}, 'name': 'oscied-orchestra', 'requires': {'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Orchestra"}}
2013-07-01 11:28:52,027 unit:oscied-orchestra/0: unit.hook.api INFO: --> Entering OrchestraHooks.py
2013-07-01 11:28:52,362 unit:oscied-orchestra/0: unit.hook.api INFO: [HOOK] Execute OrchestraHooks hook api-relation-changed
2013-07-01 11:28:53,052 unit:oscied-orchestra/0: unit.hook.api INFO: [INFO] Web UI address is ip-10-154-177-94.ec2.internal
2013-07-01 11:28:53,388 unit:oscied-orchestra/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'root_secret': u'5FrvHcm7oyF4WQFW', 'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': True, 'hosts_file': '/etc/hosts', 'rabbit_connection': u'amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': u'mongodb://admin:Iz85QVjdCJugEosz@localhost:27017/orchestra', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}
2013-07-01 11:28:53,725 unit:oscied-orchestra/0: unit.hook.api INFO: <-- Exiting OrchestraHooks.py
2013-07-01 11:28:53,769 unit:oscied-orchestra/0: hook.output DEBUG: hook api-relation-changed exited, exit code 0.
2013-07-01 11:28:53,835 unit:oscied-orchestra/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-orchestra-0/charm/hooks/api-relation-changed
2013-07-01 11:28:53,836 unit:oscied-orchestra/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-orchestra-0/charm/hooks/storage-relation-changed
2013-07-01 11:28:54,719 unit:oscied-orchestra/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 11:28:55,095 unit:oscied-orchestra/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 11:28:55,098 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] Execute make install
2013-07-01 11:28:55,434 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 11:28:55,776 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'root_secret': u'5FrvHcm7oyF4WQFW', 'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': True, 'hosts_file': '/etc/hosts', 'rabbit_connection': u'amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': u'mongodb://admin:Iz85QVjdCJugEosz@localhost:27017/orchestra', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}, 'name': 'oscied-orchestra/0', 'public_address': 'ec2-54-234-192-63.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-71-53.ec2.internal', 'juju_log': <function callable_command at 0x261b7d0>, 'config': {u'repositories_pass': u'41nVGq07GmSgK9Ud', u'storage_options': u'', 'verbose': True, u'storage_nat_address': u'', u'rabbit_password': u'OZy23iO0D4UpYS2k', u'storage_fstype': u'', u'nodes_secret': u'bdZccPuG9fibjwCS', u'transform_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/transform/source', u'repositories_user': u'oscied', u'root_secret': u'5FrvHcm7oyF4WQFW', u'storage_mountpoint': u'', u'mongo_nodes_password': u'M2qlif8rdtKtBYil', u'publisher_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/publisher/source', u'mongo_admin_password': u'Iz85QVjdCJugEosz', u'storage_address': u'', u'webui_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/webui/source'}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED orchestrator.\n", 'provides': {'publisher': {'interface': 'subordinate'}, 'api': {'interface': 'orchestra'}, 'transform': {'interface': 'subordinate'}}, 'name': 'oscied-orchestra', 'requires': {'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Orchestra"}}
2013-07-01 11:28:55,969 unit:oscied-transform/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 11:28:56,119 unit:oscied-orchestra/0: unit.hook.api INFO: --> Entering OrchestraHooks.py
2013-07-01 11:28:56,305 unit:oscied-transform/0: unit.hook.api INFO: <-- Exiting TransformHooks.py
2013-07-01 11:28:56,361 unit:oscied-transform/0: hook.output DEBUG: hook install exited, exit code 0.
2013-07-01 11:28:56,362 unit:oscied-transform/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-transform-0/charm/hooks/install
2013-07-01 11:28:56,384 unit:oscied-transform/0: statemachine DEBUG: unitworkflowstate: transition complete install (state installed) {}
2013-07-01 11:28:56,392 unit:oscied-transform/0: statemachine DEBUG: unitworkflowstate: transition start (installed -> started) {}
2013-07-01 11:28:56,392 unit:oscied-transform/0: statemachine DEBUG: unitworkflowstate:  execute action do_start
2013-07-01 11:28:56,392 unit:oscied-transform/0: unit.lifecycle DEBUG: pre-start acquire, running:False
2013-07-01 11:28:56,393 unit:oscied-transform/0: unit.lifecycle DEBUG: start running, unit lifecycle
2013-07-01 11:28:56,431 unit:oscied-transform/0: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:1
2013-07-01 11:28:56,436 unit:oscied-transform/0: juju.state.hook DEBUG: Ignoring partially constructed relation: transform:5
2013-07-01 11:28:56,436 unit:oscied-transform/0: hook.output DEBUG: Cached relation hook contexts: []
2013-07-01 11:28:56,453 unit:oscied-orchestra/0: unit.hook.api INFO: [HOOK] Execute OrchestraHooks hook storage-relation-changed
2013-07-01 11:28:56,515 unit:oscied-transform/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-transform-0/charm/hooks/config-changed
2013-07-01 11:28:57,452 unit:oscied-transform/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 11:28:57,803 unit:oscied-transform/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 11:28:58,141 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 11:28:58,139 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Storage address is ip-10-154-181-123.ec2.internal, fstype: glusterfs, mountpoint: medias_volume_0, options: 
2013-07-01 11:28:58,473 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute ['screen', '-ls', 'Orchestra']
2013-07-01 11:28:58,479 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-transform/0', 'public_address': 'ec2-72-44-43-150.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-25-113.ec2.internal', 'juju_log': <function callable_command at 0x22af2a8>, 'config': {u'storage_mountpoint': u'', 'verbose': True, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'transform_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 1, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u''}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media transform. Contains ffmpeg & x264.\nCan be scaled to multiple instances.\n", 'name': 'oscied-transform', 'requires': {'storage': {'interface': 'mount'}, 'transform': {'interface': 'subordinate'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Encoder"}}
2013-07-01 11:28:58,811 unit:oscied-transform/0: unit.hook.api INFO: --> Entering TransformHooks.py
2013-07-01 11:28:58,823 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute ['screen', '-S', '14265.Orchestra', '-X', 'quit']
2013-07-01 11:28:59,142 unit:oscied-transform/0: unit.hook.api INFO: [HOOK] Execute TransformHooks hook config-changed
2013-07-01 11:28:59,181 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute service rabbitmq-server stop
2013-07-01 11:28:59,476 unit:oscied-transform/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 11:28:59,809 unit:oscied-transform/0: unit.hook.api INFO: <-- Exiting TransformHooks.py
2013-07-01 11:28:59,858 unit:oscied-transform/0: hook.output DEBUG: hook config-changed exited, exit code 0.
2013-07-01 11:28:59,859 unit:oscied-transform/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-transform-0/charm/hooks/config-changed
2013-07-01 11:28:59,886 unit:oscied-transform/0: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:1
2013-07-01 11:28:59,899 unit:oscied-transform/0: juju.state.hook DEBUG: Ignoring partially constructed relation: transform:5
2013-07-01 11:28:59,899 unit:oscied-transform/0: hook.output DEBUG: Cached relation hook contexts: []
2013-07-01 11:28:59,909 unit:oscied-transform/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-transform-0/charm/hooks/start
2013-07-01 11:29:00,832 unit:oscied-transform/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 11:29:01,218 unit:oscied-transform/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 11:29:01,579 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 11:29:01,927 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-transform/0', 'public_address': 'ec2-72-44-43-150.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-25-113.ec2.internal', 'juju_log': <function callable_command at 0x281e2a8>, 'config': {u'storage_mountpoint': u'', 'verbose': True, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'transform_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 1, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u''}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media transform. Contains ffmpeg & x264.\nCan be scaled to multiple instances.\n", 'name': 'oscied-transform', 'requires': {'storage': {'interface': 'mount'}, 'transform': {'interface': 'subordinate'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Encoder"}}
2013-07-01 11:29:02,213 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute service mongodb stop
2013-07-01 11:29:02,275 unit:oscied-transform/0: unit.hook.api INFO: --> Entering TransformHooks.py
2013-07-01 11:29:02,620 unit:oscied-transform/0: unit.hook.api INFO: [HOOK] Execute TransformHooks hook start
2013-07-01 11:29:02,620 unit:oscied-orchestra/0: unit.hook.api INFO: [INFO] Use storage parameters from charm storage relation
2013-07-01 11:29:02,958 unit:oscied-transform/0: unit.hook.api INFO: [REMARK] Do not start transform daemon : No shared storage !
2013-07-01 11:29:02,973 unit:oscied-orchestra/0: unit.hook.api INFO: [REMARK] Skip remount already mounted shared storage !
2013-07-01 11:29:03,292 unit:oscied-transform/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 11:29:03,347 unit:oscied-orchestra/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'root_secret': u'5FrvHcm7oyF4WQFW', 'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': True, 'hosts_file': '/etc/hosts', 'rabbit_connection': u'amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': u'mongodb://admin:Iz85QVjdCJugEosz@localhost:27017/orchestra', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}
2013-07-01 11:29:03,624 unit:oscied-transform/0: unit.hook.api INFO: <-- Exiting TransformHooks.py
2013-07-01 11:29:03,673 unit:oscied-transform/0: hook.output DEBUG: hook start exited, exit code 0.
2013-07-01 11:29:03,674 unit:oscied-transform/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-transform-0/charm/hooks/start
2013-07-01 11:29:03,674 unit:oscied-transform/0: unit.lifecycle DEBUG: starting service relation watch
2013-07-01 11:29:03,675 unit:oscied-transform/0: unit.lifecycle DEBUG: starting unit relation resolved watch
2013-07-01 11:29:03,690 unit:oscied-transform/0: unit.lifecycle DEBUG: relation resolved changed
2013-07-01 11:29:03,690 unit:oscied-transform/0: unit.lifecycle INFO: processing relation resolved changed
2013-07-01 11:29:03,696 unit:oscied-transform/0: unit.lifecycle DEBUG: services changed old:None new:[<ServiceRelationState name:storage role:client id:relation-0000000001 scope:global>, <ServiceRelationState name:transform role:client id:relation-0000000005 scope:global>]
2013-07-01 11:29:03,699 unit:oscied-transform/0: unit.lifecycle DEBUG: processing relations changed
2013-07-01 11:29:03,708 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute service mongodb start
2013-07-01 11:29:03,811 unit:oscied-storage/0: unit.relation.watch DEBUG: relation membership change
2013-07-01 11:29:03,741 unit:oscied-transform/0: unit.relation.lifecycle DEBUG: stopped relation:storage lifecycle
2013-07-01 11:29:03,816 unit:oscied-storage/0: hook.scheduler DEBUG: members changed: old=[], new=['oscied-transform/0']
2013-07-01 11:29:03,817 unit:oscied-storage/0: hook.scheduler DEBUG: executing hook for oscied-transform/0:joined
2013-07-01 11:29:03,748 unit:oscied-transform/0: statemachine DEBUG: relationworkflowstate: transition start (None -> up) {}
2013-07-01 11:29:03,748 unit:oscied-transform/0: statemachine DEBUG: relationworkflowstate:  execute action do_start
2013-07-01 11:29:03,748 unit:oscied-transform/0: hook.scheduler DEBUG: start
2013-07-01 11:29:03,819 unit:oscied-storage/0: hook.scheduler DEBUG: settings changed: (('oscied-transform/0', 0),)
2013-07-01 11:29:03,768 unit:oscied-transform/0: unit.relation.watch DEBUG: relation watcher start
2013-07-01 11:29:03,768 unit:oscied-transform/0: unit.relation.lifecycle DEBUG: started relation:storage lifecycle
2013-07-01 11:29:03,779 unit:oscied-transform/0: hook.scheduler DEBUG: members changed: old=[], new=['oscied-storage/0']
2013-07-01 11:29:03,780 unit:oscied-transform/0: hook.scheduler DEBUG: executing hook for oscied-storage/0:joined
2013-07-01 11:29:03,781 unit:oscied-transform/0: hook.scheduler DEBUG: settings changed: (('oscied-storage/0', 0),)
2013-07-01 11:29:03,782 unit:oscied-transform/0: statemachine DEBUG: relationworkflowstate: transition complete start (state up) {}
2013-07-01 11:29:03,817 unit:oscied-transform/0: juju.state.hook DEBUG: Ignoring partially constructed relation: transform:5
2013-07-01 11:29:03,817 unit:oscied-transform/0: hook.output DEBUG: Cached relation hook contexts on 'storage:1': []
2013-07-01 11:29:03,828 unit:oscied-transform/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 11:29:03,829 unit:oscied-transform/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-transform-0/charm/hooks/storage-relation-joined
2013-07-01 11:29:03,857 unit:oscied-orchestra/0: unit.relation.watch DEBUG: relation membership change
2013-07-01 11:29:03,862 unit:oscied-transform/0: unit.relation.lifecycle DEBUG: stopped relation:transform lifecycle
2013-07-01 11:29:03,873 unit:oscied-transform/0: statemachine DEBUG: relationworkflowstate: transition start (None -> up) {}
2013-07-01 11:29:03,873 unit:oscied-transform/0: statemachine DEBUG: relationworkflowstate:  execute action do_start
2013-07-01 11:29:03,874 unit:oscied-transform/0: hook.scheduler DEBUG: start
2013-07-01 11:29:03,868 unit:oscied-orchestra/0: hook.scheduler DEBUG: members changed: old=[], new=['oscied-transform/0']
2013-07-01 11:29:03,869 unit:oscied-orchestra/0: hook.scheduler DEBUG: executing hook for oscied-transform/0:joined
2013-07-01 11:29:03,876 unit:oscied-orchestra/0: hook.scheduler DEBUG: settings changed: (('oscied-transform/0', 0),)
2013-07-01 11:29:03,893 unit:oscied-transform/0: unit.relation.watch DEBUG: relation watcher start
2013-07-01 11:29:03,894 unit:oscied-transform/0: unit.relation.lifecycle DEBUG: started relation:transform lifecycle
2013-07-01 11:29:03,908 unit:oscied-transform/0: hook.scheduler DEBUG: members changed: old=[], new=['oscied-orchestra/0']
2013-07-01 11:29:03,909 unit:oscied-transform/0: hook.scheduler DEBUG: executing hook for oscied-orchestra/0:joined
2013-07-01 11:29:03,911 unit:oscied-transform/0: hook.scheduler DEBUG: settings changed: (('oscied-orchestra/0', 0),)
2013-07-01 11:29:03,913 unit:oscied-transform/0: statemachine DEBUG: relationworkflowstate: transition complete start (state up) {}
2013-07-01 11:29:03,917 unit:oscied-transform/0: unit.lifecycle DEBUG: started unit lifecycle
2013-07-01 11:29:03,947 unit:oscied-transform/0: statemachine DEBUG: unitworkflowstate: transition complete start (state started) {}
2013-07-01 11:29:04,027 unit:oscied-transform/0: juju.agents.unit DEBUG: Configuration Changed
2013-07-01 11:29:04,098 unit:oscied-storage/0: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['peer:0', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 11:29:04,111 unit:oscied-storage/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 11:29:04,112 unit:oscied-storage/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-0/charm/hooks/storage-relation-joined
2013-07-01 11:29:04,043 unit:oscied-transform/0: statemachine DEBUG: unitworkflowstate: transition configure (started -> started) {}
2013-07-01 11:29:04,043 unit:oscied-transform/0: statemachine DEBUG: unitworkflowstate:  execute action do_configure
2013-07-01 11:29:04,124 unit:oscied-transform/0: hook.output DEBUG: Cached relation hook contexts on 'transform:5': ['storage:1']
2013-07-01 11:29:04,133 unit:oscied-transform/0: unit.relation.lifecycle DEBUG: Executing hook transform-relation-joined
2013-07-01 11:29:04,203 unit:oscied-orchestra/0: hook.output DEBUG: Cached relation hook contexts on 'transform:5': ['api:7', 'publisher:6', 'storage:3']
2013-07-01 11:29:04,220 unit:oscied-orchestra/0: unit.relation.lifecycle DEBUG: Executing hook transform-relation-joined
2013-07-01 11:29:04,263 unit:oscied-transform/0: hook.output DEBUG: Cached relation hook contexts: ['storage:1', 'transform:5']
2013-07-01 11:29:04,370 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute service rabbitmq-server start
2013-07-01 11:29:04,986 unit:oscied-storage/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 11:29:04,951 unit:oscied-transform/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 11:29:05,350 unit:oscied-storage/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 11:29:05,312 unit:oscied-transform/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 11:29:05,698 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 11:29:05,650 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 11:29:06,042 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x2065d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': ['ip-10-154-177-94.ec2.internal', 'ip-10-164-2-99.ec2.internal', 'ip-10-164-71-53.ec2.internal'], 'verbose': True}, 'name': 'oscied-storage/0', 'public_address': 'ec2-54-227-38-161.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-154-181-123.ec2.internal', 'juju_log': <function callable_command at 0x261f0c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 11:29:05,992 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-transform/0', 'public_address': 'ec2-72-44-43-150.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-25-113.ec2.internal', 'juju_log': <function callable_command at 0x25212a8>, 'config': {u'storage_mountpoint': u'', 'verbose': True, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'transform_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 1, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u''}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media transform. Contains ffmpeg & x264.\nCan be scaled to multiple instances.\n", 'name': 'oscied-transform', 'requires': {'storage': {'interface': 'mount'}, 'transform': {'interface': 'subordinate'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Encoder"}}
2013-07-01 11:29:06,386 unit:oscied-storage/0: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 11:29:06,336 unit:oscied-transform/0: unit.hook.api INFO: --> Entering TransformHooks.py
2013-07-01 11:29:06,733 unit:oscied-storage/0: unit.hook.api INFO: [HOOK] Execute StorageHooks hook storage-relation-joined
2013-07-01 11:29:06,668 unit:oscied-transform/0: unit.hook.api INFO: [HOOK] Execute TransformHooks hook storage-relation-joined
2013-07-01 11:29:07,000 unit:oscied-transform/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 11:29:07,085 unit:oscied-storage/0: unit.hook.api INFO: [INFO] Send filesystem (volume medias_volume_0) configuration to remote client
2013-07-01 11:29:07,332 unit:oscied-transform/0: unit.hook.api INFO: <-- Exiting TransformHooks.py
2013-07-01 11:29:07,380 unit:oscied-transform/0: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 11:29:07,387 unit:oscied-transform/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-transform-0/charm/hooks/storage-relation-joined
2013-07-01 11:29:07,389 unit:oscied-transform/0: hook.scheduler DEBUG: executing hook for oscied-storage/0:modified
2013-07-01 11:29:07,390 unit:oscied-transform/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-transform-0/charm/hooks/transform-relation-joined
2013-07-01 11:29:07,490 unit:oscied-transform/0: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['transform:5']
2013-07-01 11:29:07,499 unit:oscied-transform/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 11:29:07,557 unit:oscied-orchestra/0: unit.hook.api INFO: [INFO] Configure RabbitMQ Message Broker
2013-07-01 11:29:07,900 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute rabbitmqctl delete_user guest
2013-07-01 11:29:08,112 unit:oscied-storage/0: unit.hook.api INFO: [INFO] Add ip-10-164-25-113.ec2.internal to allowed clients IPs
2013-07-01 11:29:08,361 unit:oscied-transform/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 11:29:08,450 unit:oscied-storage/0: unit.hook.api INFO: [INFO] Set volume medias_volume_0 allowed clients IP list to ip-10-154-177-94.ec2.internal,ip-10-164-2-99.ec2.internal,ip-10-164-71-53.ec2.internal,ip-10-164-25-113.ec2.internal,*
2013-07-01 11:29:08,528 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute rabbitmqctl delete_vhost /
2013-07-01 11:29:08,707 unit:oscied-transform/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 11:29:08,785 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Execute gluster volume set medias_volume_0 auth.allow "ip-10-154-177-94.ec2.internal,ip-10-164-2-99.ec2.internal,ip-10-164-71-53.ec2.internal,ip-10-164-25-113.ec2.internal,*"
2013-07-01 11:29:09,041 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 11:29:09,189 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute rabbitmqctl add_user nodes "OZy23iO0D4UpYS2k"
2013-07-01 11:29:09,378 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-transform/0', 'public_address': 'ec2-72-44-43-150.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-25-113.ec2.internal', 'juju_log': <function callable_command at 0x2c072a8>, 'config': {u'storage_mountpoint': u'', 'verbose': True, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'transform_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 1, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u''}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media transform. Contains ffmpeg & x264.\nCan be scaled to multiple instances.\n", 'name': 'oscied-transform', 'requires': {'storage': {'interface': 'mount'}, 'transform': {'interface': 'subordinate'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Encoder"}}
2013-07-01 11:29:09,709 unit:oscied-transform/0: unit.hook.api INFO: --> Entering TransformHooks.py
2013-07-01 11:29:09,819 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute rabbitmqctl add_vhost celery
2013-07-01 11:29:10,052 unit:oscied-transform/0: unit.hook.api INFO: [HOOK] Execute TransformHooks hook subordinate-relation-joined
2013-07-01 11:29:10,374 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Execute gluster volume info medias_volume_0 
2013-07-01 11:29:10,384 unit:oscied-transform/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 11:29:10,432 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute rabbitmqctl set_permissions -p celery nodes ".*" ".*" ".*"
2013-07-01 11:29:10,716 unit:oscied-transform/0: unit.hook.api INFO: <-- Exiting TransformHooks.py
2013-07-01 11:29:10,808 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Volume infos stdout: '\nVolume Name: medias_volume_0\nType: Distribute\nStatus: Started\nNumber of Bricks: 1\nTransport-type: tcp\nBricks:\nBrick1: ip-10-154-181-123.ec2.internal:/exp0\nOptions Reconfigured:\nauth.allow: ip-10-154-177-94.ec2.internal,ip-10-164-2-99.ec2.internal,ip-10-164-71-53.ec2.internal,ip-10-164-25-113.ec2.internal,*\n'
2013-07-01 11:29:10,764 unit:oscied-transform/0: hook.output DEBUG: hook transform-relation-joined exited, exit code 0.
2013-07-01 11:29:10,849 unit:oscied-transform/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-transform-0/charm/hooks/transform-relation-joined
2013-07-01 11:29:10,852 unit:oscied-transform/0: hook.scheduler DEBUG: executing hook for oscied-orchestra/0:modified
2013-07-01 11:29:10,852 unit:oscied-transform/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-transform-0/charm/hooks/config-changed
2013-07-01 11:29:10,955 unit:oscied-transform/0: hook.output DEBUG: Cached relation hook contexts on 'transform:5': ['storage:1']
2013-07-01 11:29:10,964 unit:oscied-transform/0: unit.relation.lifecycle DEBUG: Executing hook transform-relation-changed
2013-07-01 11:29:11,171 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Execute gluster volume info medias_volume_0 
2013-07-01 11:29:11,121 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute rabbitmqctl list_users
2013-07-01 11:29:11,617 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Volume infos stdout: '\nVolume Name: medias_volume_0\nType: Distribute\nStatus: Started\nNumber of Bricks: 1\nTransport-type: tcp\nBricks:\nBrick1: ip-10-154-181-123.ec2.internal:/exp0\nOptions Reconfigured:\nauth.allow: ip-10-154-177-94.ec2.internal,ip-10-164-2-99.ec2.internal,ip-10-164-71-53.ec2.internal,ip-10-164-25-113.ec2.internal,*\n'
2013-07-01 11:29:11,724 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute rabbitmqctl list_vhosts
2013-07-01 11:29:11,828 unit:oscied-transform/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 11:29:11,960 unit:oscied-storage/0: unit.hook.api INFO: [INFO] {'status': 'Started', 'name': 'medias_volume_0', 'bricks': ['ip-10-154-181-123.ec2.internal:/exp0'], 'auth_allow': 'ip-10-154-177-94.ec2.internal,ip-10-164-2-99.ec2.internal,ip-10-164-71-53.ec2.internal,ip-10-164-25-113.ec2.internal,*', 'type': 'Distribute', 'transport': 'tcp'}
2013-07-01 11:29:12,207 unit:oscied-transform/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 11:29:12,312 unit:oscied-storage/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x2065d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': ['ip-10-154-177-94.ec2.internal', 'ip-10-164-2-99.ec2.internal', 'ip-10-164-71-53.ec2.internal', 'ip-10-164-25-113.ec2.internal'], 'verbose': True}
2013-07-01 11:29:12,367 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] RabbitMQ users: ['nodes'] vhosts: ['celery']
2013-07-01 11:29:12,542 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 11:29:12,664 unit:oscied-storage/0: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 11:29:12,709 unit:oscied-storage/0: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 11:29:12,715 unit:oscied-transform/0: unit.relation.watch DEBUG: relation watcher settings change <ClientEvent changed at '/relations/relation-0000000001/settings/unit-0000000002' state: connected handle:0>
2013-07-01 11:29:12,720 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute ['screen', '-ls', 'Orchestra']
2013-07-01 11:29:12,729 unit:oscied-transform/0: hook.scheduler DEBUG: settings changed: (('oscied-storage/0', 1),)
2013-07-01 11:29:12,937 unit:oscied-storage/0: hook.output DEBUG: Flushed values for hook 'storage-relation-joined' on 'storage:1'
    Setting changed: u'fstype'=u'glusterfs' (was unset)
    Setting changed: u'mountpoint'=u'medias_volume_0' (was unset)
2013-07-01 11:29:12,938 unit:oscied-storage/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-0/charm/hooks/storage-relation-joined
2013-07-01 11:29:12,946 unit:oscied-storage/0: hook.scheduler DEBUG: executing hook for oscied-transform/0:modified
2013-07-01 11:29:12,883 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-transform/0', 'public_address': 'ec2-72-44-43-150.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-25-113.ec2.internal', 'juju_log': <function callable_command at 0x281a2a8>, 'config': {u'storage_mountpoint': u'', 'verbose': True, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'transform_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 1, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u''}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media transform. Contains ffmpeg & x264.\nCan be scaled to multiple instances.\n", 'name': 'oscied-transform', 'requires': {'storage': {'interface': 'mount'}, 'transform': {'interface': 'subordinate'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Encoder"}}
2013-07-01 11:29:13,214 unit:oscied-transform/0: unit.hook.api INFO: --> Entering TransformHooks.py
2013-07-01 11:29:13,587 unit:oscied-storage/0: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['peer:0', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 11:29:13,595 unit:oscied-storage/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 11:29:13,595 unit:oscied-storage/0: hook.executor INFO: Hook does not exist, skipping /var/lib/juju/units/oscied-storage-0/charm/hooks/storage-relation-changed
2013-07-01 11:29:13,545 unit:oscied-transform/0: unit.hook.api INFO: [HOOK] Execute TransformHooks hook config-changed
2013-07-01 11:29:13,876 unit:oscied-transform/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 11:29:14,208 unit:oscied-transform/0: unit.hook.api INFO: <-- Exiting TransformHooks.py
2013-07-01 11:29:14,257 unit:oscied-transform/0: hook.output DEBUG: hook config-changed exited, exit code 0.
2013-07-01 11:29:14,286 unit:oscied-transform/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-transform-0/charm/hooks/config-changed
2013-07-01 11:29:14,286 unit:oscied-transform/0: unit.lifecycle DEBUG: configured unit
2013-07-01 11:29:14,288 unit:oscied-transform/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-transform-0/charm/hooks/storage-relation-changed
2013-07-01 11:29:14,309 unit:oscied-transform/0: statemachine DEBUG: unitworkflowstate: transition complete configure (state started) {}
2013-07-01 11:29:14,314 unit:oscied-transform/0: juju.agents.unit INFO: No upgrade flag set.
2013-07-01 11:29:15,215 unit:oscied-transform/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 11:29:15,564 unit:oscied-transform/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 11:29:15,911 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 11:29:16,248 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-transform/0', 'public_address': 'ec2-72-44-43-150.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-25-113.ec2.internal', 'juju_log': <function callable_command at 0x1c4d2a8>, 'config': {u'storage_mountpoint': u'', 'verbose': True, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'transform_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 1, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u''}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media transform. Contains ffmpeg & x264.\nCan be scaled to multiple instances.\n", 'name': 'oscied-transform', 'requires': {'storage': {'interface': 'mount'}, 'transform': {'interface': 'subordinate'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Encoder"}}
2013-07-01 11:29:16,579 unit:oscied-transform/0: unit.hook.api INFO: --> Entering TransformHooks.py
2013-07-01 11:29:16,909 unit:oscied-transform/0: unit.hook.api INFO: [HOOK] Execute TransformHooks hook storage-relation-changed
2013-07-01 11:29:18,107 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Execute curl -s http://127.0.0.1:5000
2013-07-01 11:29:18,469 unit:oscied-orchestra/0: unit.hook.api INFO: [REMARK] Orchestra successfully started !
2013-07-01 11:29:18,566 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] Storage address is ip-10-154-181-123.ec2.internal, fstype: glusterfs, mountpoint: medias_volume_0, options: 
2013-07-01 11:29:18,815 unit:oscied-orchestra/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'root_secret': u'5FrvHcm7oyF4WQFW', 'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': True, 'hosts_file': '/etc/hosts', 'rabbit_connection': u'amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': u'mongodb://admin:Iz85QVjdCJugEosz@localhost:27017/orchestra', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}
2013-07-01 11:29:18,896 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] Execute ['screen', '-ls', 'Transform']
2013-07-01 11:29:19,150 unit:oscied-orchestra/0: unit.hook.api INFO: <-- Exiting OrchestraHooks.py
2013-07-01 11:29:19,198 unit:oscied-orchestra/0: hook.output DEBUG: hook storage-relation-changed exited, exit code 0.
2013-07-01 11:29:19,240 unit:oscied-transform/0: unit.hook.api INFO: [INFO] Use storage parameters from charm storage relation
2013-07-01 11:29:19,299 unit:oscied-orchestra/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-orchestra-0/charm/hooks/storage-relation-changed
2013-07-01 11:29:19,301 unit:oscied-orchestra/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-orchestra-0/charm/hooks/transform-relation-joined
2013-07-01 11:29:19,570 unit:oscied-transform/0: unit.hook.api INFO: [INFO] Unregister shared storage
2013-07-01 11:29:19,900 unit:oscied-transform/0: unit.hook.api INFO: [REMARK] Shared storage already unmounted !
2013-07-01 11:29:20,238 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] Mount shared storage [] ip-10-154-181-123.ec2.internal:medias_volume_0 type glusterfs options '' -> /mnt/storage
2013-07-01 11:29:20,235 unit:oscied-orchestra/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 11:29:20,602 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] Execute ['mount', '-t', 'glusterfs', 'ip-10-154-181-123.ec2.internal:/medias_volume_0', '/mnt/storage']
2013-07-01 11:29:20,607 unit:oscied-orchestra/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 11:29:20,964 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 11:29:21,309 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'root_secret': u'5FrvHcm7oyF4WQFW', 'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': True, 'hosts_file': '/etc/hosts', 'rabbit_connection': u'amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': u'mongodb://admin:Iz85QVjdCJugEosz@localhost:27017/orchestra', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}, 'name': 'oscied-orchestra/0', 'public_address': 'ec2-54-234-192-63.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-71-53.ec2.internal', 'juju_log': <function callable_command at 0x207b7d0>, 'config': {u'repositories_pass': u'41nVGq07GmSgK9Ud', u'storage_options': u'', 'verbose': True, u'storage_nat_address': u'', u'rabbit_password': u'OZy23iO0D4UpYS2k', u'storage_fstype': u'', u'nodes_secret': u'bdZccPuG9fibjwCS', u'transform_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/transform/source', u'repositories_user': u'oscied', u'root_secret': u'5FrvHcm7oyF4WQFW', u'storage_mountpoint': u'', u'mongo_nodes_password': u'M2qlif8rdtKtBYil', u'publisher_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/publisher/source', u'mongo_admin_password': u'Iz85QVjdCJugEosz', u'storage_address': u'', u'webui_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/webui/source'}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED orchestrator.\n", 'provides': {'publisher': {'interface': 'subordinate'}, 'api': {'interface': 'orchestra'}, 'transform': {'interface': 'subordinate'}}, 'name': 'oscied-orchestra', 'requires': {'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Orchestra"}}
2013-07-01 11:29:21,645 unit:oscied-orchestra/0: unit.hook.api INFO: --> Entering OrchestraHooks.py
2013-07-01 11:29:21,988 unit:oscied-orchestra/0: unit.hook.api INFO: [HOOK] Execute OrchestraHooks hook transform-relation-joined
2013-07-01 11:29:22,670 unit:oscied-orchestra/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'root_secret': u'5FrvHcm7oyF4WQFW', 'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': True, 'hosts_file': '/etc/hosts', 'rabbit_connection': u'amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': u'mongodb://admin:Iz85QVjdCJugEosz@localhost:27017/orchestra', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}
2013-07-01 11:29:23,028 unit:oscied-orchestra/0: unit.hook.api INFO: <-- Exiting OrchestraHooks.py
2013-07-01 11:29:23,078 unit:oscied-orchestra/0: hook.output DEBUG: hook transform-relation-joined exited, exit code 0.
2013-07-01 11:29:23,178 unit:oscied-transform/0: unit.relation.watch DEBUG: relation watcher settings change <ClientEvent changed at '/relations/relation-0000000005/settings/unit-0000000000' state: connected handle:0>
2013-07-01 11:29:23,190 unit:oscied-transform/0: hook.scheduler DEBUG: settings changed: (('oscied-orchestra/0', 1),)
2013-07-01 11:29:23,215 unit:oscied-orchestra/0: hook.output DEBUG: Flushed values for hook 'transform-relation-joined' on 'transform:5'
    Setting changed: u'mongo_connection'=u'mongodb://nodes:M2qlif8rdtKtBYil@ip-10-164-71-53.ec2.internal:27017/celery' (was unset)
    Setting changed: u'rabbit_connection'=u'amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery' (was unset)
2013-07-01 11:29:23,225 unit:oscied-orchestra/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-orchestra-0/charm/hooks/transform-relation-joined
2013-07-01 11:29:23,228 unit:oscied-orchestra/0: hook.scheduler DEBUG: executing hook for oscied-transform/0:modified
2013-07-01 11:29:23,427 unit:oscied-orchestra/0: hook.output DEBUG: Cached relation hook contexts on 'transform:5': ['api:7', 'publisher:6', 'storage:3']
2013-07-01 11:29:23,443 unit:oscied-orchestra/0: unit.relation.lifecycle DEBUG: Executing hook transform-relation-changed
2013-07-01 11:29:23,444 unit:oscied-orchestra/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-orchestra-0/charm/hooks/transform-relation-changed
2013-07-01 11:29:24,392 unit:oscied-orchestra/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 11:29:24,779 unit:oscied-orchestra/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 11:29:25,157 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 11:29:25,513 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'root_secret': u'5FrvHcm7oyF4WQFW', 'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': True, 'hosts_file': '/etc/hosts', 'rabbit_connection': u'amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': u'mongodb://admin:Iz85QVjdCJugEosz@localhost:27017/orchestra', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}, 'name': 'oscied-orchestra/0', 'public_address': 'ec2-54-234-192-63.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-71-53.ec2.internal', 'juju_log': <function callable_command at 0x2f197d0>, 'config': {u'repositories_pass': u'41nVGq07GmSgK9Ud', u'storage_options': u'', 'verbose': True, u'storage_nat_address': u'', u'rabbit_password': u'OZy23iO0D4UpYS2k', u'storage_fstype': u'', u'nodes_secret': u'bdZccPuG9fibjwCS', u'transform_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/transform/source', u'repositories_user': u'oscied', u'root_secret': u'5FrvHcm7oyF4WQFW', u'storage_mountpoint': u'', u'mongo_nodes_password': u'M2qlif8rdtKtBYil', u'publisher_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/publisher/source', u'mongo_admin_password': u'Iz85QVjdCJugEosz', u'storage_address': u'', u'webui_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/webui/source'}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED orchestrator.\n", 'provides': {'publisher': {'interface': 'subordinate'}, 'api': {'interface': 'orchestra'}, 'transform': {'interface': 'subordinate'}}, 'name': 'oscied-orchestra', 'requires': {'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Orchestra"}}
2013-07-01 11:29:25,850 unit:oscied-orchestra/0: unit.hook.api INFO: --> Entering OrchestraHooks.py
2013-07-01 11:29:26,197 unit:oscied-orchestra/0: unit.hook.api INFO: [HOOK] Execute OrchestraHooks hook transform-relation-changed
2013-07-01 11:29:26,925 unit:oscied-orchestra/0: unit.hook.api INFO: [INFO] Transform address is ip-10-164-25-113.ec2.internal
2013-07-01 11:29:27,279 unit:oscied-orchestra/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'root_secret': u'5FrvHcm7oyF4WQFW', 'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': True, 'hosts_file': '/etc/hosts', 'rabbit_connection': u'amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': u'mongodb://admin:Iz85QVjdCJugEosz@localhost:27017/orchestra', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}
2013-07-01 11:29:27,624 unit:oscied-orchestra/0: unit.hook.api INFO: <-- Exiting OrchestraHooks.py
2013-07-01 11:29:27,670 unit:oscied-orchestra/0: hook.output DEBUG: hook transform-relation-changed exited, exit code 0.
2013-07-01 11:29:27,789 unit:oscied-orchestra/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-orchestra-0/charm/hooks/transform-relation-changed
2013-07-01 11:29:29,138 unit:oscied-transform/0: unit.hook.api INFO: [REMARK] Shared storage successfully registered !
2013-07-01 11:29:29,500 unit:oscied-transform/0: unit.hook.api INFO: [REMARK] Do not start transform daemon : No celery configuration file !
2013-07-01 11:29:29,846 unit:oscied-transform/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 11:29:30,201 unit:oscied-transform/0: unit.hook.api INFO: <-- Exiting TransformHooks.py
2013-07-01 11:29:30,255 unit:oscied-transform/0: hook.output DEBUG: hook storage-relation-changed exited, exit code 0.
2013-07-01 11:29:30,285 unit:oscied-transform/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-transform-0/charm/hooks/storage-relation-changed
2013-07-01 11:29:30,286 unit:oscied-transform/0: hook.scheduler DEBUG: executing hook for oscied-storage/0:modified
2013-07-01 11:29:30,287 unit:oscied-transform/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-transform-0/charm/hooks/transform-relation-changed
2013-07-01 11:29:30,412 unit:oscied-transform/0: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['transform:5']
2013-07-01 11:29:30,433 unit:oscied-transform/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 11:29:31,315 unit:oscied-transform/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 11:29:31,678 unit:oscied-transform/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 11:29:32,024 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 11:29:32,367 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-transform/0', 'public_address': 'ec2-72-44-43-150.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-25-113.ec2.internal', 'juju_log': <function callable_command at 0x2a5f2a8>, 'config': {u'storage_mountpoint': u'', 'verbose': True, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'transform_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 1, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u''}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media transform. Contains ffmpeg & x264.\nCan be scaled to multiple instances.\n", 'name': 'oscied-transform', 'requires': {'storage': {'interface': 'mount'}, 'transform': {'interface': 'subordinate'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Encoder"}}
2013-07-01 11:29:32,706 unit:oscied-transform/0: unit.hook.api INFO: --> Entering TransformHooks.py
2013-07-01 11:29:33,040 unit:oscied-transform/0: unit.hook.api INFO: [HOOK] Execute TransformHooks hook subordinate-relation-changed
2013-07-01 11:29:34,371 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] Orchestra address is ip-10-164-71-53.ec2.internal, MongoDB is mongodb://nodes:M2qlif8rdtKtBYil@ip-10-164-71-53.ec2.internal:27017/celery, RabbitMQ is amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery
2013-07-01 11:29:34,714 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] Execute ['screen', '-ls', 'Transform']
2013-07-01 11:29:35,069 unit:oscied-transform/0: unit.hook.api INFO: [INFO] Use subordinate parameters from charm relation
2013-07-01 11:29:35,400 unit:oscied-transform/0: unit.hook.api INFO: [INFO] Register the Orchestrator
2013-07-01 11:29:35,729 unit:oscied-transform/0: unit.hook.api INFO: [REMARK] File celeryconfig.py successfully generated !
2013-07-01 11:29:36,063 unit:oscied-transform/0: unit.hook.api INFO: [REMARK] Orchestrator successfully registered !
2013-07-01 11:29:36,401 unit:oscied-transform/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 11:29:36,734 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] Execute ['screen', '-ls', 'Transform']
2013-07-01 11:29:42,103 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] Execute ['screen', '-ls', 'Transform']
2013-07-01 11:29:42,453 unit:oscied-transform/0: unit.hook.api INFO: [REMARK] Transform successfully started !
2013-07-01 11:29:42,791 unit:oscied-transform/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 11:29:43,138 unit:oscied-transform/0: unit.hook.api INFO: <-- Exiting TransformHooks.py
2013-07-01 11:29:43,191 unit:oscied-transform/0: hook.output DEBUG: hook transform-relation-changed exited, exit code 0.
2013-07-01 11:29:43,214 unit:oscied-transform/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-transform-0/charm/hooks/transform-relation-changed
2013-07-01 11:29:43,215 unit:oscied-transform/0: hook.scheduler DEBUG: executing hook for oscied-orchestra/0:modified
2013-07-01 11:29:43,216 unit:oscied-transform/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-transform-0/charm/hooks/storage-relation-changed
2013-07-01 11:29:43,314 unit:oscied-transform/0: hook.output DEBUG: Cached relation hook contexts on 'transform:5': ['storage:1']
2013-07-01 11:29:43,329 unit:oscied-transform/0: unit.relation.lifecycle DEBUG: Executing hook transform-relation-changed
2013-07-01 11:29:44,187 unit:oscied-transform/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 11:29:44,533 unit:oscied-transform/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 11:29:44,872 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 11:29:45,213 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-transform/0', 'public_address': 'ec2-72-44-43-150.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-25-113.ec2.internal', 'juju_log': <function callable_command at 0x25ef2a8>, 'config': {u'storage_mountpoint': u'', 'verbose': True, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'transform_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 1, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u''}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media transform. Contains ffmpeg & x264.\nCan be scaled to multiple instances.\n", 'name': 'oscied-transform', 'requires': {'storage': {'interface': 'mount'}, 'transform': {'interface': 'subordinate'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Encoder"}}
2013-07-01 11:29:45,545 unit:oscied-transform/0: unit.hook.api INFO: --> Entering TransformHooks.py
2013-07-01 11:29:45,876 unit:oscied-transform/0: unit.hook.api INFO: [HOOK] Execute TransformHooks hook storage-relation-changed
2013-07-01 11:29:47,549 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] Storage address is ip-10-154-181-123.ec2.internal, fstype: glusterfs, mountpoint: medias_volume_0, options: 
2013-07-01 11:29:47,896 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] Execute ['screen', '-ls', 'Transform']
2013-07-01 11:29:48,253 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] Execute ['screen', '-S', '15400.Transform', '-X', 'quit']
2013-07-01 11:29:48,613 unit:oscied-transform/0: unit.hook.api INFO: [INFO] Use storage parameters from charm storage relation
2013-07-01 11:29:48,947 unit:oscied-transform/0: unit.hook.api INFO: [REMARK] Skip remount already mounted shared storage !
2013-07-01 11:29:49,286 unit:oscied-transform/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 11:29:49,625 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] Execute ['screen', '-ls', 'Transform']
2013-07-01 11:29:55,001 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] Execute ['screen', '-ls', 'Transform']
2013-07-01 11:29:55,356 unit:oscied-transform/0: unit.hook.api INFO: [REMARK] Transform successfully started !
2013-07-01 11:29:55,699 unit:oscied-transform/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 11:29:56,033 unit:oscied-transform/0: unit.hook.api INFO: <-- Exiting TransformHooks.py
2013-07-01 11:29:56,082 unit:oscied-transform/0: hook.output DEBUG: hook storage-relation-changed exited, exit code 0.
2013-07-01 11:29:56,103 unit:oscied-transform/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-transform-0/charm/hooks/storage-relation-changed
2013-07-01 11:29:56,105 unit:oscied-transform/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-transform-0/charm/hooks/transform-relation-changed
2013-07-01 11:29:57,042 unit:oscied-transform/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 11:29:57,405 unit:oscied-transform/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 11:29:57,750 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 11:29:58,097 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-transform/0', 'public_address': 'ec2-72-44-43-150.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-25-113.ec2.internal', 'juju_log': <function callable_command at 0x16362a8>, 'config': {u'storage_mountpoint': u'', 'verbose': True, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'transform_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 1, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u''}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media transform. Contains ffmpeg & x264.\nCan be scaled to multiple instances.\n", 'name': 'oscied-transform', 'requires': {'storage': {'interface': 'mount'}, 'transform': {'interface': 'subordinate'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Encoder"}}
2013-07-01 11:29:58,431 unit:oscied-transform/0: unit.hook.api INFO: --> Entering TransformHooks.py
2013-07-01 11:29:58,763 unit:oscied-transform/0: unit.hook.api INFO: [HOOK] Execute TransformHooks hook subordinate-relation-changed
2013-07-01 11:30:00,106 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] Orchestra address is ip-10-164-71-53.ec2.internal, MongoDB is mongodb://nodes:M2qlif8rdtKtBYil@ip-10-164-71-53.ec2.internal:27017/celery, RabbitMQ is amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery
2013-07-01 11:30:00,448 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] Execute ['screen', '-ls', 'Transform']
2013-07-01 11:30:00,809 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] Execute ['screen', '-S', '15532.Transform', '-X', 'quit']
2013-07-01 11:30:01,174 unit:oscied-transform/0: unit.hook.api INFO: [INFO] Use subordinate parameters from charm relation
2013-07-01 11:30:01,512 unit:oscied-transform/0: unit.hook.api INFO: [INFO] Register the Orchestrator
2013-07-01 11:30:01,888 unit:oscied-transform/0: unit.hook.api INFO: [REMARK] File celeryconfig.py successfully generated !
2013-07-01 11:30:02,253 unit:oscied-transform/0: unit.hook.api INFO: [REMARK] Orchestrator successfully registered !
2013-07-01 11:30:02,612 unit:oscied-transform/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 11:30:02,972 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] Execute ['screen', '-ls', 'Transform']
2013-07-01 11:30:08,353 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] Execute ['screen', '-ls', 'Transform']
2013-07-01 11:30:08,724 unit:oscied-transform/0: unit.hook.api INFO: [REMARK] Transform successfully started !
2013-07-01 11:30:09,067 unit:oscied-transform/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 11:30:09,415 unit:oscied-transform/0: unit.hook.api INFO: <-- Exiting TransformHooks.py
2013-07-01 11:30:09,470 unit:oscied-transform/0: hook.output DEBUG: hook transform-relation-changed exited, exit code 0.
2013-07-01 11:30:09,489 unit:oscied-transform/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-transform-0/charm/hooks/transform-relation-changed
2013-07-01 13:38:05,214 Machine:6: juju.agents.machine INFO: Machine agent started id:6
2013-07-01 13:38:05,221 Machine:6: juju.agents.machine DEBUG: Units changed old:set([]) new:set(['oscied-publisher/1'])
2013-07-01 13:38:05,221 Machine:6: juju.agents.machine DEBUG: Starting service unit: oscied-publisher/1 ...
2013-07-01 13:38:05,274 Machine:6: unit.deploy DEBUG: Downloading charm local:raring/oscied-publisher-6 to /var/lib/juju/charms
2013-07-01 13:38:05,459 Machine:6: unit.deploy DEBUG: Using <juju.machine.unit.UnitMachineDeployment object at 0x3188110> for oscied-publisher/1 in /var/lib/juju
2013-07-01 13:38:05,459 Machine:6: unit.deploy DEBUG: Starting service unit oscied-publisher/1...
2013-07-01 13:38:06,162 unit:oscied-publisher/1: hook.executor DEBUG: started
2013-07-01 13:38:06,168 unit:oscied-publisher/1: statemachine DEBUG: unitworkflowstate: transition install (None -> installed) {}
2013-07-01 13:38:06,168 unit:oscied-publisher/1: statemachine DEBUG: unitworkflowstate:  execute action do_install
2013-07-01 13:38:06,223 Machine:6: unit.deploy INFO: Started service unit oscied-publisher/1
2013-07-01 13:38:06,238 unit:oscied-publisher/1: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:2
2013-07-01 13:38:06,245 unit:oscied-publisher/1: juju.state.hook DEBUG: Ignoring partially constructed relation: publisher:6
2013-07-01 13:38:06,246 unit:oscied-publisher/1: hook.output DEBUG: Cached relation hook contexts: []
2013-07-01 13:38:06,259 unit:oscied-publisher/1: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-publisher-1/charm/hooks/install
2013-07-01 13:38:06,283 unit:oscied-publisher/1: hook.output INFO: Install OSCIED Library

Extracting templates from packages: 73%lisher/1: hook.output INFO: 
Extracting templates from packages: 100%isher/1: hook.output INFO: 

2013-07-01 13:38:24,138 Machine:7: juju.agents.machine INFO: Machine agent started id:7
2013-07-01 13:38:24,145 Machine:7: juju.agents.machine DEBUG: Units changed old:set([]) new:set(['oscied-storage/1'])
2013-07-01 13:38:24,145 Machine:7: juju.agents.machine DEBUG: Starting service unit: oscied-storage/1 ...
2013-07-01 13:38:24,175 Machine:7: unit.deploy DEBUG: Downloading charm local:raring/oscied-storage-14 to /var/lib/juju/charms
2013-07-01 13:38:24,237 Machine:7: unit.deploy DEBUG: Using <juju.machine.unit.UnitMachineDeployment object at 0x26ca0d0> for oscied-storage/1 in /var/lib/juju
2013-07-01 13:38:24,238 Machine:7: unit.deploy DEBUG: Starting service unit oscied-storage/1...
2013-07-01 13:38:24,335 Machine:10: juju.agents.machine INFO: Machine agent started id:10
2013-07-01 13:38:24,341 Machine:10: juju.agents.machine DEBUG: Units changed old:set([]) new:set(['oscied-storage/4'])
2013-07-01 13:38:24,342 Machine:10: juju.agents.machine DEBUG: Starting service unit: oscied-storage/4 ...
2013-07-01 13:38:24,380 Machine:10: unit.deploy DEBUG: Downloading charm local:raring/oscied-storage-14 to /var/lib/juju/charms
2013-07-01 13:38:24,457 Machine:10: unit.deploy DEBUG: Using <juju.machine.unit.UnitMachineDeployment object at 0x25500d0> for oscied-storage/4 in /var/lib/juju
2013-07-01 13:38:24,458 Machine:10: unit.deploy DEBUG: Starting service unit oscied-storage/4...
2013-07-01 13:38:24,955 Machine:7: unit.deploy INFO: Started service unit oscied-storage/1
2013-07-01 13:38:25,131 unit:oscied-storage/4: hook.executor DEBUG: started
2013-07-01 13:38:25,139 unit:oscied-storage/4: statemachine DEBUG: unitworkflowstate: transition install (None -> installed) {}
2013-07-01 13:38:25,139 unit:oscied-storage/4: statemachine DEBUG: unitworkflowstate:  execute action do_install
2013-07-01 13:38:25,195 unit:oscied-storage/4: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:2
2013-07-01 13:38:25,198 unit:oscied-storage/4: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:3
2013-07-01 13:38:25,200 Machine:10: unit.deploy INFO: Started service unit oscied-storage/4
2013-07-01 13:38:25,201 unit:oscied-storage/4: juju.state.hook DEBUG: Ignoring partially constructed relation: peer:0
2013-07-01 13:38:25,205 unit:oscied-storage/4: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:1
2013-07-01 13:38:25,212 unit:oscied-storage/4: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:4
2013-07-01 13:38:25,213 unit:oscied-storage/4: hook.output DEBUG: Cached relation hook contexts: []
2013-07-01 13:38:25,220 unit:oscied-storage/4: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-4/charm/hooks/install
2013-07-01 13:38:25,244 unit:oscied-storage/4: hook.output INFO: Install OSCIED Library

2013-07-01 13:38:25,917 unit:oscied-storage/1: hook.executor DEBUG: started
2013-07-01 13:38:25,931 unit:oscied-storage/1: statemachine DEBUG: unitworkflowstate: transition install (None -> installed) {}
2013-07-01 13:38:25,931 unit:oscied-storage/1: statemachine DEBUG: unitworkflowstate:  execute action do_install
2013-07-01 13:38:25,976 unit:oscied-storage/1: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:2
2013-07-01 13:38:25,979 unit:oscied-storage/1: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:3
2013-07-01 13:38:25,987 unit:oscied-storage/1: juju.state.hook DEBUG: Ignoring partially constructed relation: peer:0
2013-07-01 13:38:25,970 Machine:8: juju.agents.machine INFO: Machine agent started id:8
2013-07-01 13:38:25,991 unit:oscied-storage/1: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:1
2013-07-01 13:38:25,995 unit:oscied-storage/1: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:4
2013-07-01 13:38:25,995 unit:oscied-storage/1: hook.output DEBUG: Cached relation hook contexts: []
2013-07-01 13:38:25,978 Machine:8: juju.agents.machine DEBUG: Units changed old:set([]) new:set(['oscied-storage/2'])
2013-07-01 13:38:25,978 Machine:8: juju.agents.machine DEBUG: Starting service unit: oscied-storage/2 ...
2013-07-01 13:38:26,007 unit:oscied-storage/1: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-1/charm/hooks/install
2013-07-01 13:38:26,017 Machine:8: unit.deploy DEBUG: Downloading charm local:raring/oscied-storage-14 to /var/lib/juju/charms
2013-07-01 13:38:26,037 unit:oscied-storage/1: hook.output INFO: Install OSCIED Library

2013-07-01 13:38:26,110 Machine:8: unit.deploy DEBUG: Using <juju.machine.unit.UnitMachineDeployment object at 0x1f61210> for oscied-storage/2 in /var/lib/juju
2013-07-01 13:38:26,111 Machine:8: unit.deploy DEBUG: Starting service unit oscied-storage/2...
2013-07-01 13:38:26,708 unit:oscied-storage/2: hook.executor DEBUG: started
2013-07-01 13:38:26,715 unit:oscied-storage/2: statemachine DEBUG: unitworkflowstate: transition install (None -> installed) {}
2013-07-01 13:38:26,715 unit:oscied-storage/2: statemachine DEBUG: unitworkflowstate:  execute action do_install
2013-07-01 13:38:26,754 unit:oscied-storage/2: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:2
2013-07-01 13:38:26,759 unit:oscied-storage/2: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:3
2013-07-01 13:38:26,762 unit:oscied-storage/2: juju.state.hook DEBUG: Ignoring partially constructed relation: peer:0
2013-07-01 13:38:26,766 unit:oscied-storage/2: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:1
2013-07-01 13:38:26,768 unit:oscied-storage/2: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:4
2013-07-01 13:38:26,768 unit:oscied-storage/2: hook.output DEBUG: Cached relation hook contexts: []
2013-07-01 13:38:26,784 unit:oscied-storage/2: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-2/charm/hooks/install
2013-07-01 13:38:26,822 unit:oscied-storage/2: hook.output INFO: Install OSCIED Library

2013-07-01 13:38:26,820 Machine:8: unit.deploy INFO: Started service unit oscied-storage/2
2013-07-01 13:38:29,256 Machine:9: juju.agents.machine INFO: Machine agent started id:9
2013-07-01 13:38:29,263 Machine:9: juju.agents.machine DEBUG: Units changed old:set([]) new:set(['oscied-storage/3'])
2013-07-01 13:38:29,263 Machine:9: juju.agents.machine DEBUG: Starting service unit: oscied-storage/3 ...
2013-07-01 13:38:29,289 Machine:9: unit.deploy DEBUG: Downloading charm local:raring/oscied-storage-14 to /var/lib/juju/charms
2013-07-01 13:38:29,373 Machine:9: unit.deploy DEBUG: Using <juju.machine.unit.UnitMachineDeployment object at 0x34ba210> for oscied-storage/3 in /var/lib/juju
2013-07-01 13:38:29,374 Machine:9: unit.deploy DEBUG: Starting service unit oscied-storage/3...
2013-07-01 13:38:30,102 Machine:9: unit.deploy INFO: Started service unit oscied-storage/3
2013-07-01 13:38:31,041 unit:oscied-storage/3: hook.executor DEBUG: started
2013-07-01 13:38:31,048 unit:oscied-storage/3: statemachine DEBUG: unitworkflowstate: transition install (None -> installed) {}
2013-07-01 13:38:31,049 unit:oscied-storage/3: statemachine DEBUG: unitworkflowstate:  execute action do_install
2013-07-01 13:38:31,093 unit:oscied-storage/3: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:2
2013-07-01 13:38:31,097 unit:oscied-storage/3: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:3
2013-07-01 13:38:31,101 unit:oscied-storage/3: juju.state.hook DEBUG: Ignoring partially constructed relation: peer:0
2013-07-01 13:38:31,110 unit:oscied-storage/3: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:1
2013-07-01 13:38:31,114 unit:oscied-storage/3: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:4
2013-07-01 13:38:31,115 unit:oscied-storage/3: hook.output DEBUG: Cached relation hook contexts: []
2013-07-01 13:38:31,135 unit:oscied-storage/3: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-3/charm/hooks/install
2013-07-01 13:38:31,159 unit:oscied-storage/3: hook.output INFO: Install OSCIED Library

Extracting templates from packages: 73%rage/4: hook.output INFO: 
Extracting templates from packages: 100%age/4: hook.output INFO: 

Extracting templates from packages: 73%rage/2: hook.output INFO: 
Extracting templates from packages: 73%rage/1: hook.output INFO: 
Extracting templates from packages: 100%age/2: hook.output INFO: 

Extracting templates from packages: 100%age/1: hook.output INFO: 

Extracting templates from packages: 73%rage/3: hook.output INFO: 
Extracting templates from packages: 100%age/3: hook.output INFO: 

2013-07-01 13:38:44,726 Machine:11: juju.agents.machine INFO: Machine agent started id:11
2013-07-01 13:38:44,733 Machine:11: juju.agents.machine DEBUG: Units changed old:set([]) new:set(['oscied-transform/1'])
2013-07-01 13:38:44,733 Machine:11: juju.agents.machine DEBUG: Starting service unit: oscied-transform/1 ...
2013-07-01 13:38:44,759 Machine:11: unit.deploy DEBUG: Downloading charm local:raring/oscied-transform-7 to /var/lib/juju/charms
2013-07-01 13:38:45,170 Machine:11: unit.deploy DEBUG: Using <juju.machine.unit.UnitMachineDeployment object at 0x228e110> for oscied-transform/1 in /var/lib/juju
2013-07-01 13:38:45,171 Machine:11: unit.deploy DEBUG: Starting service unit oscied-transform/1...
2013-07-01 13:38:45,891 unit:oscied-transform/1: hook.executor DEBUG: started
2013-07-01 13:38:45,901 unit:oscied-transform/1: statemachine DEBUG: unitworkflowstate: transition install (None -> installed) {}
2013-07-01 13:38:45,901 unit:oscied-transform/1: statemachine DEBUG: unitworkflowstate:  execute action do_install
2013-07-01 13:38:45,938 unit:oscied-transform/1: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:1
2013-07-01 13:38:45,941 unit:oscied-transform/1: juju.state.hook DEBUG: Ignoring partially constructed relation: transform:5
2013-07-01 13:38:45,942 unit:oscied-transform/1: hook.output DEBUG: Cached relation hook contexts: []
2013-07-01 13:38:45,954 unit:oscied-transform/1: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-transform-1/charm/hooks/install
2013-07-01 13:38:45,986 Machine:11: unit.deploy INFO: Started service unit oscied-transform/1
2013-07-01 13:38:45,997 unit:oscied-transform/1: hook.output INFO: Install OSCIED Library

2013-07-01 13:38:48,148 unit:oscied-publisher/1: hook.output INFO: Requirement already up-to-date: argparse in /usr/lib/python2.7
Requirement already up-to-date: configobj in /usr/lib/python2.7/dist-packages
Downloading/unpacking celery
  Running setup.py egg_info for package celery
    Upgrade: no old version found.
    
    no previously-included directories found matching '*.pyc'
    no previously-included directories found matching '*.sw*'
Downloading/unpacking flask
  Running setup.py egg_info for package flask
    
    warning: no files found matching '*' under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
    warning: no previously-included files matching '*.pyc' found under directory 'tests'
    warning: no previously-included files matching '*.pyo' found under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'examples'
    warning: no previously-included files matching '*.pyo' found under directory 'examples'
    no previously-included directories found matching 'docs/_build'
    no previously-included directories found matching 'docs/_themes/.git'
Downloading/unpacking hashlib
  Running setup.py egg_info for package hashlib
    
    no previously-included directories found matching 'build'
    no previously-included directories found matching 'dist'
    no previously-included directories found matching 'RCS'
    no previously-included directories found matching 'CVS'
    no previously-included directories found matching '.svn'
Downloading/unpacking ipaddr
  Downloading ipaddr-2.1.10.tar.gz
  Running setup.py egg_info for package ipaddr
    
Downloading/unpacking mock
  Running setup.py egg_info for package mock
    
    warning: no files found matching '*.png' under directory 'docs'
    warning: no files found matching '*.css' under directory 'docs'
    warning: no files found matching '*.html' under directory 'docs'
    warning: no files found matching '*.js' under directory 'docs'
Downloading/unpacking passlib
  Running setup.py egg_info for package passlib
    
    warning: no files found matching 'passlib/*.cfg'
    no previously-included directories found matching '*.komodoproject'
Downloading/unpacking pymongo
  Running setup.py egg_info for package pymongo
    
Downloading/unpacking requests from https://pypi.python.org/packages/source/r/requests/requests-1.2.3.tar.gz#md5=adbd3f18445f7fe5e77f65c502e264fb
  Running setup.py egg_info for package requests
    
Downloading/unpacking six from https://pypi.python.org/packages/source/s/six/six-1.3.0.tar.gz#md5=ec47fe6070a8a64c802363d2c2b1e2ee
  Downloading six-1.3.0.tar.gz
  Running setup.py egg_info for package six
    
Downloading/unpacking billiard>=2.7.3.30,<3.0 (from celery)
  Running setup.py egg_info for package billiard
    
    warning: no files found matching '*.py' under directory 'Lib'
Downloading/unpacking python-dateutil>=1.5 from https://pypi.python.org/packages/source/p/python-dateutil/python-dateutil-2.1.tar.gz#md5=1534bb15cf311f07afaa3aacba1c028b (from celery)
  Running setup.py egg_info for package python-dateutil
    
Downloading/unpacking kombu>=2.5.12,<3.0 (from celery)
  Running setup.py egg_info for package kombu
    
Downloading/unpacking Werkzeug>=0.7 (from flask)
  Running setup.py egg_info for package Werkzeug
    
    warning: no files found matching '*' under directory 'werkzeug/debug/templates'
    warning: no files found matching '*' under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
    warning: no previously-included files matching '*.pyc' found under directory 'tests'
    warning: no previously-included files matching '*.pyo' found under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'examples'
    warning: no previously-included files matching '*.pyo' found under directory 'examples'
    no previousl
Extracting templates from packages: 73%nsform/1: hook.output INFO: 
Extracting templates from packages: 100%sform/1: hook.output INFO: 

2013-07-01 13:38:53,684 unit:oscied-publisher/1: hook.output INFO: y-included directories found matching 'docs/_build'
Downloading/unpacking Jinja2>=2.4 (from flask)
  Running setup.py egg_info for package Jinja2
    
    warning: no files found matching '*' under directory 'custom_fixers'
    warning: no previously-included files matching '*' found under directory 'docs/_build'
    warning: no previously-included files matching '*.pyc' found under directory 'jinja2'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'jinja2'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
Downloading/unpacking itsdangerous>=0.21 (from flask)
  Downloading itsdangerous-0.21.tar.gz
  Running setup.py egg_info for package itsdangerous
    
Downloading/unpacking anyjson>=0.3.3 (from kombu>=2.5.12,<3.0->celery)
  Downloading anyjson-0.3.3.tar.gz
  Running setup.py egg_info for package anyjson
    
Downloading/unpacking amqp>=1.0.12,<1.1.0 (from kombu>=2.5.12,<3.0->celery)
  Running setup.py egg_info for package amqp
    
Downloading/unpacking markupsafe (from Jinja2>=2.4->flask)
  Downloading MarkupSafe-0.18.tar.gz
  Running setup.py egg_info for package markupsafe
    
Installing collected packages: celery, flask, hashlib, ipaddr, mock, passlib, pymongo, requests, six, billiard, python-dateutil, kombu, Werkzeug, Jinja2, itsdangerous, anyjson, amqp, markupsafe
  Running setup.py install for celery
    Upgrade: no old version found.
    
    no previously-included directories found matching '*.pyc'
    no previously-included directories found matching '*.sw*'
    Installing celeryctl script to /usr/local/bin
    Installing celeryd script to /usr/local/bin
    Installing camqadm script to /usr/local/bin
    Installing celeryev script to /usr/local/bin
    Installing celery script to /usr/local/bin
    Installing celeryd-multi script to /usr/local/bin
    Installing celerybeat script to /usr/local/bin
  Running setup.py install for flask
    
    warning: no files found matching '*' under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
    warning: no previously-included files matching '*.pyc' found under directory 'tests'
    warning: no previously-included files matching '*.pyo' found under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'examples'
    warning: no previously-included files matching '*.pyo' found under directory 'examples'
    no previously-included directories found matching 'docs/_build'
    no previously-included directories found matching 'docs/_themes/.git'
  Running setup.py install for hashlib
    building '_sha' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/shamodule.c -o build/temp.linux-x86_64-2.7/Modules/shamodule.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/shamodule.o -o build/lib.linux-x86_64-2.7/_sha.so
    building '_md5' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/md5module.c -o build/temp.linux-x86_64-2.7/Modules/md5module.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/md5.c -o build/temp.linux-x86_64-2.7/Modules/md5.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-prote
2013-07-01 13:38:58,227 unit:oscied-publisher/1: hook.output INFO: ctor --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/md5module.o build/temp.linux-x86_64-2.7/Modules/md5.o -o build/lib.linux-x86_64-2.7/_md5.so
    building '_sha256' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/sha256module.c -o build/temp.linux-x86_64-2.7/Modules/sha256module.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/sha256module.o -o build/lib.linux-x86_64-2.7/_sha256.so
    building '_sha512' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/sha512module.c -o build/temp.linux-x86_64-2.7/Modules/sha512module.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/sha512module.o -o build/lib.linux-x86_64-2.7/_sha512.so
    
    no previously-included directories found matching 'build'
    no previously-included directories found matching 'dist'
    no previously-included directories found matching 'RCS'
    no previously-included directories found matching 'CVS'
    no previously-included directories found matching '.svn'
  Running setup.py install for ipaddr
    
  Running setup.py install for mock
    
    warning: no files found matching '*.png' under directory 'docs'
    warning: no files found matching '*.css' under directory 'docs'
    warning: no files found matching '*.html' under directory 'docs'
    warning: no files found matching '*.js' under directory 'docs'
  Running setup.py install for passlib
    
    warning: no files found matching 'passlib/*.cfg'
    no previously-included directories found matching '*.komodoproject'
  Running setup.py install for pymongo
    building 'bson._cbson' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c bson/_cbsonmodule.c -o build/temp.linux-x86_64-2.7/bson/_cbsonmodule.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c bson/time64.c -o build/temp.linux-x86_64-2.7/bson/time64.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c bson/buffer.c -o build/temp.linux-x86_64-2.7/bson/buffer.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c bson/encoding_helpers.c -o build/temp.linux-x86_64-2.7/bson/encoding_helpers.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/bson/_cbsonmodule.o build/temp.linux-x86_64-2.7/bson/time64.o build/temp.linux-x86_64-2.7/bson/buffer.o build/temp.linux-x86_64-2.7/bson/encoding_helpers.o -o build/lib.linux-x86_64-2.7/bson/_cbson.so
    building 'pymongo._cmessage' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c pymongo/_cmessagemodule.c -o build/temp.linux-x86_64-2.7/pymongo/_cmessagemodule.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -f
2013-07-01 13:39:02,449 Machine:12: juju.agents.machine INFO: Machine agent started id:12
2013-07-01 13:39:02,457 Machine:12: juju.agents.machine DEBUG: Units changed old:set([]) new:set(['oscied-transform/2'])
2013-07-01 13:39:02,457 Machine:12: juju.agents.machine DEBUG: Starting service unit: oscied-transform/2 ...
2013-07-01 13:39:02,546 unit:oscied-publisher/1: hook.output INFO: PIC -Ibson -I/usr/include/python2.7 -c bson/buffer.c -o build/temp.linux-x86_64-2.7/bson/buffer.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/pymongo/_cmessagemodule.o build/temp.linux-x86_64-2.7/bson/buffer.o -o build/lib.linux-x86_64-2.7/pymongo/_cmessage.so
    
  Found existing installation: requests 1.1.0
    Uninstalling requests:
      Successfully uninstalled requests
  Running setup.py install for requests
    
  Found existing installation: six 1.2.0
    Uninstalling six:
      Successfully uninstalled six
  Running setup.py install for six
    
  Running setup.py install for billiard
    building '_billiard' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DHAVE_SEM_OPEN=1 -DHAVE_FD_TRANSFER=1 -DHAVE_SEM_TIMEDWAIT=1 -IModules/_billiard -I/usr/include/python2.7 -c Modules/_billiard/multiprocessing.c -o build/temp.linux-x86_64-2.7/Modules/_billiard/multiprocessing.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DHAVE_SEM_OPEN=1 -DHAVE_FD_TRANSFER=1 -DHAVE_SEM_TIMEDWAIT=1 -IModules/_billiard -I/usr/include/python2.7 -c Modules/_billiard/socket_connection.c -o build/temp.linux-x86_64-2.7/Modules/_billiard/socket_connection.o
    In file included from Modules/_billiard/socket_connection.c:229:0:
    Modules/_billiard/connection.h: In function 'Billiard_connection_recv_payload':
    Modules/_billiard/connection.h:387:15: warning: unused variable 'result' [-Wunused-variable]
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DHAVE_SEM_OPEN=1 -DHAVE_FD_TRANSFER=1 -DHAVE_SEM_TIMEDWAIT=1 -IModules/_billiard -I/usr/include/python2.7 -c Modules/_billiard/semaphore.c -o build/temp.linux-x86_64-2.7/Modules/_billiard/semaphore.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/_billiard/multiprocessing.o build/temp.linux-x86_64-2.7/Modules/_billiard/socket_connection.o build/temp.linux-x86_64-2.7/Modules/_billiard/semaphore.o -lrt -o build/lib.linux-x86_64-2.7/_billiard.so
    
    warning: no files found matching '*.py' under directory 'Lib'
  Found existing installation: python-dateutil 1.5
    Uninstalling python-dateutil:
      Successfully uninstalled python-dateutil
  Running setup.py install for python-dateutil
    
  Running setup.py install for kombu
    
  Running setup.py install for Werkzeug
    
    warning: no files found matching '*' under directory 'werkzeug/debug/templates'
    warning: no files found matching '*' under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
    warning: no previously-included files matching '*.pyc' found under directory 'tests'
    warning: no previously-included files matching '*.pyo' found under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'examples'
    warning: no previously-included files matching '*.pyo' found under directory 'examples'
    no previously-included directories found matching 'docs/_build'
  Running setup.py install for Jinja2
    
    warning: no files found matching '*' under directory 'custom_fixers'
    warning: no previously-included files matching '*' found under directory 'docs/_build'
    warning: no previously-included files matching '*.pyc' found under directory 'jinja2'
    warning: no previously-included files matching '*.pyc' fo
2013-07-01 13:39:02,548 Machine:12: unit.deploy DEBUG: Downloading charm local:raring/oscied-transform-7 to /var/lib/juju/charms
2013-07-01 13:39:03,346 Machine:12: unit.deploy DEBUG: Using <juju.machine.unit.UnitMachineDeployment object at 0x1935110> for oscied-transform/2 in /var/lib/juju
2013-07-01 13:39:03,347 Machine:12: unit.deploy DEBUG: Starting service unit oscied-transform/2...
2013-07-01 13:39:03,903 unit:oscied-publisher/1: hook.output INFO: und under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'jinja2'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
  Running setup.py install for itsdangerous
    
  Running setup.py install for anyjson
    
  Running setup.py install for amqp
    
  Running setup.py install for markupsafe
    
    building 'markupsafe._speedups' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c markupsafe/_speedups.c -o build/temp.linux-x86_64-2.7/markupsafe/_speedups.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/markupsafe/_speedups.o -o build/lib.linux-x86_64-2.7/markupsafe/_speedups.so
Successfully installed celery flask hashlib ipaddr mock passlib pymongo requests six billiard python-dateutil kombu Werkzeug Jinja2 itsdangerous anyjson amqp markupsafe
Cleaning up...

2013-07-01 13:39:04,068 unit:oscied-transform/2: hook.executor DEBUG: started
2013-07-01 13:39:04,075 unit:oscied-transform/2: statemachine DEBUG: unitworkflowstate: transition install (None -> installed) {}
2013-07-01 13:39:04,075 unit:oscied-transform/2: statemachine DEBUG: unitworkflowstate:  execute action do_install
2013-07-01 13:39:04,120 unit:oscied-transform/2: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:1
2013-07-01 13:39:04,123 unit:oscied-transform/2: juju.state.hook DEBUG: Ignoring partially constructed relation: transform:5
2013-07-01 13:39:04,123 unit:oscied-transform/2: hook.output DEBUG: Cached relation hook contexts: []
2013-07-01 13:39:04,164 Machine:12: unit.deploy INFO: Started service unit oscied-transform/2
2013-07-01 13:39:04,137 unit:oscied-transform/2: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-transform-2/charm/hooks/install
2013-07-01 13:39:04,174 unit:oscied-transform/2: hook.output INFO: Install OSCIED Library

2013-07-01 13:39:05,612 unit:oscied-publisher/1: hook.output INFO: gpg: 
2013-07-01 13:39:05,613 unit:oscied-publisher/1: hook.output INFO: keyring `/tmp/tmpgr3i6e/secring.gpg' created

2013-07-01 13:39:05,614 unit:oscied-publisher/1: hook.output INFO: gpg: 
2013-07-01 13:39:05,614 unit:oscied-publisher/1: hook.output INFO: keyring `/tmp/tmpgr3i6e/pubring.gpg' created

2013-07-01 13:39:05,617 unit:oscied-publisher/1: hook.output INFO: gpg: requesting key C8068B11 from hkp server keyserver.ubuntu.com

2013-07-01 13:39:05,872 unit:oscied-publisher/1: hook.output INFO: gpg: 
2013-07-01 13:39:05,873 unit:oscied-publisher/1: hook.output INFO: /tmp/tmpgr3i6e/trustdb.gpg: trustdb created

2013-07-01 13:39:05,874 unit:oscied-publisher/1: hook.output INFO: gpg: 
2013-07-01 13:39:05,876 unit:oscied-publisher/1: hook.output INFO: key C8068B11: public key "Launchpad Ensemble PPA" imported
gpg: Total number processed: 1
gpg:               imported: 1  (RSA: 1)

2013-07-01 13:39:05,974 unit:oscied-publisher/1: hook.output INFO: OK

2013-07-01 13:39:06,023 unit:oscied-publisher/1: hook.output INFO: Reading package lists...
2013-07-01 13:39:09,063 unit:oscied-publisher/1: hook.output INFO: 

2013-07-01 13:39:09,074 unit:oscied-publisher/1: hook.output INFO: Building dependency tree...
2013-07-01 13:39:09,262 unit:oscied-publisher/1: hook.output INFO: 

2013-07-01 13:39:09,263 unit:oscied-publisher/1: hook.output INFO: Reading state information...
2013-07-01 13:39:09,265 unit:oscied-publisher/1: hook.output INFO: 

2013-07-01 13:39:09,415 unit:oscied-publisher/1: hook.output INFO: The following extra packages will be installed:

2013-07-01 13:39:09,416 unit:oscied-publisher/1: hook.output INFO:   python-shelltoolbox

2013-07-01 13:39:09,418 unit:oscied-publisher/1: hook.output INFO: The following NEW packages will be installed:

2013-07-01 13:39:09,419 unit:oscied-publisher/1: hook.output INFO:   python-charmhelpers python-shelltoolbox

2013-07-01 13:39:09,496 unit:oscied-publisher/1: hook.output INFO: 0 upgraded, 2 newly installed, 0 to remove and 0 not upgraded.
Need to get 19.9 kB of archives.
After this operation, 167 kB of additional disk space will be used.
Get:1 http://us-east-1.ec2.archive.ubuntu.com/ubuntu/ raring/universe python-shelltoolbox all 0.2.1+bzr17-1 [13.5 kB]

2013-07-01 13:39:09,703 unit:oscied-publisher/1: hook.output INFO: Get:2 http://ppa.launchpad.net/juju/pkgs/ubuntu/ raring/main python-charmhelpers all 0.3+bzr178-3~raring1 [6410 B]

2013-07-01 13:39:10,084 unit:oscied-publisher/1: hook.output INFO: Fetched 19.9 kB in 0s (59.2 kB/s)

Extracting templates from packages: 73%nsform/2: hook.output INFO: 
2013-07-01 13:39:10,173 unit:oscied-publisher/1: hook.output INFO: Selecting previously unselected package python-shelltoolbox.

2013-07-01 13:39:10,174 unit:oscied-publisher/1: hook.output INFO: (Reading database ... 
Extracting templates from packages: 100%sform/2: hook.output INFO: 

2013-07-01 13:39:10,229 unit:oscied-publisher/1: hook.output INFO: 61600 files and directories currently installed.)

2013-07-01 13:39:10,235 unit:oscied-publisher/1: hook.output INFO: Unpacking python-shelltoolbox (from .../python-shelltoolbox_0.2.1+bzr17-1_all.deb) ...

2013-07-01 13:39:10,351 unit:oscied-publisher/1: hook.output INFO: Selecting previously unselected package python-charmhelpers.

2013-07-01 13:39:10,367 unit:oscied-publisher/1: hook.output INFO: Unpacking python-charmhelpers (from .../python-charmhelpers_0.3+bzr178-3~raring1_all.deb) ...

2013-07-01 13:39:10,513 unit:oscied-publisher/1: hook.output INFO: Setting up python-shelltoolbox (0.2.1+bzr17-1) ...

2013-07-01 13:39:10,681 unit:oscied-publisher/1: hook.output INFO: Setting up python-charmhelpers (0.3+bzr178-3~raring1) ...

2013-07-01 13:39:10,874 unit:oscied-storage/4: hook.output INFO: Requirement already up-to-date: argparse in /usr/lib/python2.7
Requirement already up-to-date: configobj in /usr/lib/python2.7/dist-packages
Downloading/unpacking celery
  Running setup.py egg_info for package celery
    Upgrade: no old version found.
    
    no previously-included directories found matching '*.pyc'
    no previously-included directories found matching '*.sw*'
Downloading/unpacking flask
  Running setup.py egg_info for package flask
    
    warning: no files found matching '*' under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
    warning: no previously-included files matching '*.pyc' found under directory 'tests'
    warning: no previously-included files matching '*.pyo' found under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'examples'
    warning: no previously-included files matching '*.pyo' found under directory 'examples'
    no previously-included directories found matching 'docs/_build'
    no previously-included directories found matching 'docs/_themes/.git'
Downloading/unpacking hashlib
  Running setup.py egg_info for package hashlib
    
    no previously-included directories found matching 'build'
    no previously-included directories found matching 'dist'
    no previously-included directories found matching 'RCS'
    no previously-included directories found matching 'CVS'
    no previously-included directories found matching '.svn'
Downloading/unpacking ipaddr
  Downloading ipaddr-2.1.10.tar.gz
  Running setup.py egg_info for package ipaddr
    
Downloading/unpacking mock
  Running setup.py egg_info for package mock
    
    warning: no files found matching '*.png' under directory 'docs'
    warning: no files found matching '*.css' under directory 'docs'
    warning: no files found matching '*.html' under directory 'docs'
    warning: no files found matching '*.js' under directory 'docs'
Downloading/unpacking passlib
  Running setup.py egg_info for package passlib
    
    warning: no files found matching 'passlib/*.cfg'
    no previously-included directories found matching '*.komodoproject'
Downloading/unpacking pymongo
  Running setup.py egg_info for package pymongo
    
Downloading/unpacking requests from https://pypi.python.org/packages/source/r/requests/requests-1.2.3.tar.gz#md5=adbd3f18445f7fe5e77f65c502e264fb
  Running setup.py egg_info for package requests
    
Downloading/unpacking six from https://pypi.python.org/packages/source/s/six/six-1.3.0.tar.gz#md5=ec47fe6070a8a64c802363d2c2b1e2ee
  Downloading six-1.3.0.tar.gz
  Running setup.py egg_info for package six
    
Downloading/unpacking billiard>=2.7.3.30,<3.0 (from celery)
  Running setup.py egg_info for package billiard
    
    warning: no files found matching '*.py' under directory 'Lib'
Downloading/unpacking python-dateutil>=1.5 from https://pypi.python.org/packages/source/p/python-dateutil/python-dateutil-2.1.tar.gz#md5=1534bb15cf311f07afaa3aacba1c028b (from celery)
  Running setup.py egg_info for package python-dateutil
    
Downloading/unpacking kombu>=2.5.12,<3.0 (from celery)
  Running setup.py egg_info for package kombu
    
Downloading/unpacking Werkzeug>=0.7 (from flask)
  Running setup.py egg_info for package Werkzeug
    
    warning: no files found matching '*' under directory 'werkzeug/debug/templates'
    warning: no files found matching '*' under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
    warning: no previously-included files matching '*.pyc' found under directory 'tests'
    warning: no previously-included files matching '*.pyo' found under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'examples'
    warning: no previously-included files matching '*.pyo' found under directory 'examples'
    no previousl
2013-07-01 13:39:11,902 unit:oscied-storage/3: hook.output INFO: Requirement already up-to-date: argparse in /usr/lib/python2.7
Requirement already up-to-date: configobj in /usr/lib/python2.7/dist-packages
Downloading/unpacking celery
  Running setup.py egg_info for package celery
    Upgrade: no old version found.
    
    no previously-included directories found matching '*.pyc'
    no previously-included directories found matching '*.sw*'
Downloading/unpacking flask
  Running setup.py egg_info for package flask
    
    warning: no files found matching '*' under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
    warning: no previously-included files matching '*.pyc' found under directory 'tests'
    warning: no previously-included files matching '*.pyo' found under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'examples'
    warning: no previously-included files matching '*.pyo' found under directory 'examples'
    no previously-included directories found matching 'docs/_build'
    no previously-included directories found matching 'docs/_themes/.git'
Downloading/unpacking hashlib
  Running setup.py egg_info for package hashlib
    
    no previously-included directories found matching 'build'
    no previously-included directories found matching 'dist'
    no previously-included directories found matching 'RCS'
    no previously-included directories found matching 'CVS'
    no previously-included directories found matching '.svn'
Downloading/unpacking ipaddr
  Downloading ipaddr-2.1.10.tar.gz
  Running setup.py egg_info for package ipaddr
    
Downloading/unpacking mock
  Running setup.py egg_info for package mock
    
    warning: no files found matching '*.png' under directory 'docs'
    warning: no files found matching '*.css' under directory 'docs'
    warning: no files found matching '*.html' under directory 'docs'
    warning: no files found matching '*.js' under directory 'docs'
Downloading/unpacking passlib
  Running setup.py egg_info for package passlib
    
    warning: no files found matching 'passlib/*.cfg'
    no previously-included directories found matching '*.komodoproject'
Downloading/unpacking pymongo
  Running setup.py egg_info for package pymongo
    
Downloading/unpacking requests from https://pypi.python.org/packages/source/r/requests/requests-1.2.3.tar.gz#md5=adbd3f18445f7fe5e77f65c502e264fb
  Running setup.py egg_info for package requests
    
Downloading/unpacking six from https://pypi.python.org/packages/source/s/six/six-1.3.0.tar.gz#md5=ec47fe6070a8a64c802363d2c2b1e2ee
  Downloading six-1.3.0.tar.gz
  Running setup.py egg_info for package six
    
Downloading/unpacking billiard>=2.7.3.30,<3.0 (from celery)
  Running setup.py egg_info for package billiard
    
    warning: no files found matching '*.py' under directory 'Lib'
Downloading/unpacking python-dateutil>=1.5 from https://pypi.python.org/packages/source/p/python-dateutil/python-dateutil-2.1.tar.gz#md5=1534bb15cf311f07afaa3aacba1c028b (from celery)
  Running setup.py egg_info for package python-dateutil
    
Downloading/unpacking kombu>=2.5.12,<3.0 (from celery)
  Running setup.py egg_info for package kombu
    
Downloading/unpacking Werkzeug>=0.7 (from flask)
  Running setup.py egg_info for package Werkzeug
    
    warning: no files found matching '*' under directory 'werkzeug/debug/templates'
    warning: no files found matching '*' under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
    warning: no previously-included files matching '*.pyc' found under directory 'tests'
    warning: no previously-included files matching '*.pyo' found under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'examples'
    warning: no previously-included files matching '*.pyo' found under directory 'examples'
    no previousl
2013-07-01 13:39:12,456 unit:oscied-publisher/1: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:39:12,834 unit:oscied-publisher/1: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:39:13,194 unit:oscied-storage/2: hook.output INFO: Requirement already up-to-date: argparse in /usr/lib/python2.7
Requirement already up-to-date: configobj in /usr/lib/python2.7/dist-packages
Downloading/unpacking celery
  Running setup.py egg_info for package celery
    Upgrade: no old version found.
    
    no previously-included directories found matching '*.pyc'
    no previously-included directories found matching '*.sw*'
Downloading/unpacking flask
  Running setup.py egg_info for package flask
    
    warning: no files found matching '*' under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
    warning: no previously-included files matching '*.pyc' found under directory 'tests'
    warning: no previously-included files matching '*.pyo' found under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'examples'
    warning: no previously-included files matching '*.pyo' found under directory 'examples'
    no previously-included directories found matching 'docs/_build'
    no previously-included directories found matching 'docs/_themes/.git'
Downloading/unpacking hashlib
  Running setup.py egg_info for package hashlib
    
    no previously-included directories found matching 'build'
    no previously-included directories found matching 'dist'
    no previously-included directories found matching 'RCS'
    no previously-included directories found matching 'CVS'
    no previously-included directories found matching '.svn'
Downloading/unpacking ipaddr
  Downloading ipaddr-2.1.10.tar.gz
  Running setup.py egg_info for package ipaddr
    
Downloading/unpacking mock
  Running setup.py egg_info for package mock
    
    warning: no files found matching '*.png' under directory 'docs'
    warning: no files found matching '*.css' under directory 'docs'
    warning: no files found matching '*.html' under directory 'docs'
    warning: no files found matching '*.js' under directory 'docs'
Downloading/unpacking passlib
  Running setup.py egg_info for package passlib
    
    warning: no files found matching 'passlib/*.cfg'
    no previously-included directories found matching '*.komodoproject'
Downloading/unpacking pymongo
  Running setup.py egg_info for package pymongo
    
Downloading/unpacking requests from https://pypi.python.org/packages/source/r/requests/requests-1.2.3.tar.gz#md5=adbd3f18445f7fe5e77f65c502e264fb
  Running setup.py egg_info for package requests
    
Downloading/unpacking six from https://pypi.python.org/packages/source/s/six/six-1.3.0.tar.gz#md5=ec47fe6070a8a64c802363d2c2b1e2ee
  Downloading six-1.3.0.tar.gz
  Running setup.py egg_info for package six
    
Downloading/unpacking billiard>=2.7.3.30,<3.0 (from celery)
  Running setup.py egg_info for package billiard
    
    warning: no files found matching '*.py' under directory 'Lib'
Downloading/unpacking python-dateutil>=1.5 from https://pypi.python.org/packages/source/p/python-dateutil/python-dateutil-2.1.tar.gz#md5=1534bb15cf311f07afaa3aacba1c028b (from celery)
  Running setup.py egg_info for package python-dateutil
    
Downloading/unpacking kombu>=2.5.12,<3.0 (from celery)
  Running setup.py egg_info for package kombu
    
Downloading/unpacking Werkzeug>=0.7 (from flask)
  Running setup.py egg_info for package Werkzeug
    
    warning: no files found matching '*' under directory 'werkzeug/debug/templates'
    warning: no files found matching '*' under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
    warning: no previously-included files matching '*.pyc' found under directory 'tests'
    warning: no previously-included files matching '*.pyo' found under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'examples'
    warning: no previously-included files matching '*.pyo' found under directory 'examples'
    no previousl
2013-07-01 13:39:13,196 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:39:13,560 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'proxy_ips': [], 'storage_fstype': '', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-227-33-48.compute-1.amazonaws.com', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-publisher/1', 'public_address': 'ec2-54-227-33-48.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-50-5.ec2.internal', 'juju_log': <function callable_command at 0x195d5f0>, 'config': {u'max_upload_size': 4294967296, u'storage_mountpoint': u'', 'verbose': True, u'max_input_time': 600, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'publisher_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 2, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u'', u'max_execution_time': 180}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media publisher. Contains apache & mod streaming.\nCan be scaled to multiple instances.\n", 'provides': {'streaming': {'interface': 'http'}}, 'name': 'oscied-publisher', 'requires': {'publisher': {'interface': 'subordinate'}, 'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Publisher"}}
2013-07-01 13:39:13,906 unit:oscied-publisher/1: unit.hook.api INFO: --> Entering PublisherHooks.py
2013-07-01 13:39:14,260 unit:oscied-publisher/1: unit.hook.api INFO: [HOOK] Execute PublisherHooks hook install
2013-07-01 13:39:14,617 unit:oscied-publisher/1: unit.hook.api INFO: [INFO] Uninstall prerequisities, unregister service and load default configuration
2013-07-01 13:39:14,974 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] Execute ['screen', '-ls', 'Publisher']
2013-07-01 13:39:15,359 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] Execute service apache2 stop
2013-07-01 13:39:15,731 unit:oscied-publisher/1: unit.hook.api INFO: [INFO] Unregister shared storage
2013-07-01 13:39:16,086 unit:oscied-publisher/1: unit.hook.api INFO: [REMARK] Shared storage already unmounted !
2013-07-01 13:39:16,442 unit:oscied-publisher/1: unit.hook.api INFO: [INFO] Unregister the Orchestrator
2013-07-01 13:39:16,793 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] Execute apt-get -y remove --purge glusterfs-client nfs-common ntp make apache2 apache2-threaded-dev
2013-07-01 13:39:17,636 unit:oscied-storage/2: hook.output INFO: y-included directories found matching 'docs/_build'
Downloading/unpacking Jinja2>=2.4 (from flask)
  Running setup.py egg_info for package Jinja2
    
    warning: no files found matching '*' under directory 'custom_fixers'
    warning: no previously-included files matching '*' found under directory 'docs/_build'
    warning: no previously-included files matching '*.pyc' found under directory 'jinja2'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'jinja2'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
Downloading/unpacking itsdangerous>=0.21 (from flask)
  Downloading itsdangerous-0.21.tar.gz
  Running setup.py egg_info for package itsdangerous
    
Downloading/unpacking anyjson>=0.3.3 (from kombu>=2.5.12,<3.0->celery)
  Downloading anyjson-0.3.3.tar.gz
  Running setup.py egg_info for package anyjson
    
Downloading/unpacking amqp>=1.0.12,<1.1.0 (from kombu>=2.5.12,<3.0->celery)
  Running setup.py egg_info for package amqp
    
Downloading/unpacking markupsafe (from Jinja2>=2.4->flask)
  Downloading MarkupSafe-0.18.tar.gz
  Running setup.py egg_info for package markupsafe
    
Installing collected packages: celery, flask, hashlib, ipaddr, mock, passlib, pymongo, requests, six, billiard, python-dateutil, kombu, Werkzeug, Jinja2, itsdangerous, anyjson, amqp, markupsafe
  Running setup.py install for celery
    Upgrade: no old version found.
    
    no previously-included directories found matching '*.pyc'
    no previously-included directories found matching '*.sw*'
    Installing celeryctl script to /usr/local/bin
    Installing celeryd script to /usr/local/bin
    Installing camqadm script to /usr/local/bin
    Installing celeryev script to /usr/local/bin
    Installing celery script to /usr/local/bin
    Installing celeryd-multi script to /usr/local/bin
    Installing celerybeat script to /usr/local/bin
  Running setup.py install for flask
    
    warning: no files found matching '*' under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
    warning: no previously-included files matching '*.pyc' found under directory 'tests'
    warning: no previously-included files matching '*.pyo' found under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'examples'
    warning: no previously-included files matching '*.pyo' found under directory 'examples'
    no previously-included directories found matching 'docs/_build'
    no previously-included directories found matching 'docs/_themes/.git'
  Running setup.py install for hashlib
    building '_sha' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/shamodule.c -o build/temp.linux-x86_64-2.7/Modules/shamodule.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/shamodule.o -o build/lib.linux-x86_64-2.7/_sha.so
    building '_md5' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/md5module.c -o build/temp.linux-x86_64-2.7/Modules/md5module.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/md5.c -o build/temp.linux-x86_64-2.7/Modules/md5.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-prote
2013-07-01 13:39:17,880 unit:oscied-storage/4: hook.output INFO: y-included directories found matching 'docs/_build'
Downloading/unpacking Jinja2>=2.4 (from flask)
  Running setup.py egg_info for package Jinja2
    
    warning: no files found matching '*' under directory 'custom_fixers'
    warning: no previously-included files matching '*' found under directory 'docs/_build'
    warning: no previously-included files matching '*.pyc' found under directory 'jinja2'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'jinja2'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
Downloading/unpacking itsdangerous>=0.21 (from flask)
  Downloading itsdangerous-0.21.tar.gz
  Running setup.py egg_info for package itsdangerous
    
Downloading/unpacking anyjson>=0.3.3 (from kombu>=2.5.12,<3.0->celery)
  Downloading anyjson-0.3.3.tar.gz
  Running setup.py egg_info for package anyjson
    
Downloading/unpacking amqp>=1.0.12,<1.1.0 (from kombu>=2.5.12,<3.0->celery)
  Running setup.py egg_info for package amqp
    
Downloading/unpacking markupsafe (from Jinja2>=2.4->flask)
  Downloading MarkupSafe-0.18.tar.gz
  Running setup.py egg_info for package markupsafe
    
Installing collected packages: celery, flask, hashlib, ipaddr, mock, passlib, pymongo, requests, six, billiard, python-dateutil, kombu, Werkzeug, Jinja2, itsdangerous, anyjson, amqp, markupsafe
  Running setup.py install for celery
    Upgrade: no old version found.
    
    no previously-included directories found matching '*.pyc'
    no previously-included directories found matching '*.sw*'
    Installing celeryctl script to /usr/local/bin
    Installing celeryd script to /usr/local/bin
    Installing camqadm script to /usr/local/bin
    Installing celeryev script to /usr/local/bin
    Installing celery script to /usr/local/bin
    Installing celeryd-multi script to /usr/local/bin
    Installing celerybeat script to /usr/local/bin
  Running setup.py install for flask
    
    warning: no files found matching '*' under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
    warning: no previously-included files matching '*.pyc' found under directory 'tests'
    warning: no previously-included files matching '*.pyo' found under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'examples'
    warning: no previously-included files matching '*.pyo' found under directory 'examples'
    no previously-included directories found matching 'docs/_build'
    no previously-included directories found matching 'docs/_themes/.git'
  Running setup.py install for hashlib
    building '_sha' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/shamodule.c -o build/temp.linux-x86_64-2.7/Modules/shamodule.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/shamodule.o -o build/lib.linux-x86_64-2.7/_sha.so
    building '_md5' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/md5module.c -o build/temp.linux-x86_64-2.7/Modules/md5module.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/md5.c -o build/temp.linux-x86_64-2.7/Modules/md5.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-prote
2013-07-01 13:39:18,026 unit:oscied-storage/3: hook.output INFO: y-included directories found matching 'docs/_build'
Downloading/unpacking Jinja2>=2.4 (from flask)
  Running setup.py egg_info for package Jinja2
    
    warning: no files found matching '*' under directory 'custom_fixers'
    warning: no previously-included files matching '*' found under directory 'docs/_build'
    warning: no previously-included files matching '*.pyc' found under directory 'jinja2'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'jinja2'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
Downloading/unpacking itsdangerous>=0.21 (from flask)
  Downloading itsdangerous-0.21.tar.gz
  Running setup.py egg_info for package itsdangerous
    
Downloading/unpacking anyjson>=0.3.3 (from kombu>=2.5.12,<3.0->celery)
  Downloading anyjson-0.3.3.tar.gz
  Running setup.py egg_info for package anyjson
    
Downloading/unpacking amqp>=1.0.12,<1.1.0 (from kombu>=2.5.12,<3.0->celery)
  Running setup.py egg_info for package amqp
    
Downloading/unpacking markupsafe (from Jinja2>=2.4->flask)
  Downloading MarkupSafe-0.18.tar.gz
  Running setup.py egg_info for package markupsafe
    
Installing collected packages: celery, flask, hashlib, ipaddr, mock, passlib, pymongo, requests, six, billiard, python-dateutil, kombu, Werkzeug, Jinja2, itsdangerous, anyjson, amqp, markupsafe
  Running setup.py install for celery
    Upgrade: no old version found.
    
    no previously-included directories found matching '*.pyc'
    no previously-included directories found matching '*.sw*'
    Installing celeryctl script to /usr/local/bin
    Installing celeryd script to /usr/local/bin
    Installing camqadm script to /usr/local/bin
    Installing celeryev script to /usr/local/bin
    Installing celery script to /usr/local/bin
    Installing celeryd-multi script to /usr/local/bin
    Installing celerybeat script to /usr/local/bin
  Running setup.py install for flask
    
    warning: no files found matching '*' under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
    warning: no previously-included files matching '*.pyc' found under directory 'tests'
    warning: no previously-included files matching '*.pyo' found under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'examples'
    warning: no previously-included files matching '*.pyo' found under directory 'examples'
    no previously-included directories found matching 'docs/_build'
    no previously-included directories found matching 'docs/_themes/.git'
  Running setup.py install for hashlib
    building '_sha' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/shamodule.c -o build/temp.linux-x86_64-2.7/Modules/shamodule.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/shamodule.o -o build/lib.linux-x86_64-2.7/_sha.so
    building '_md5' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/md5module.c -o build/temp.linux-x86_64-2.7/Modules/md5module.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/md5.c -o build/temp.linux-x86_64-2.7/Modules/md5.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-prote
2013-07-01 13:39:19,192 unit:oscied-storage/1: hook.output INFO: Requirement already up-to-date: argparse in /usr/lib/python2.7
Requirement already up-to-date: configobj in /usr/lib/python2.7/dist-packages
Downloading/unpacking celery
  Running setup.py egg_info for package celery
    Upgrade: no old version found.
    
    no previously-included directories found matching '*.pyc'
    no previously-included directories found matching '*.sw*'
Downloading/unpacking flask
  Running setup.py egg_info for package flask
    
    warning: no files found matching '*' under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
    warning: no previously-included files matching '*.pyc' found under directory 'tests'
    warning: no previously-included files matching '*.pyo' found under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'examples'
    warning: no previously-included files matching '*.pyo' found under directory 'examples'
    no previously-included directories found matching 'docs/_build'
    no previously-included directories found matching 'docs/_themes/.git'
Downloading/unpacking hashlib
  Running setup.py egg_info for package hashlib
    
    no previously-included directories found matching 'build'
    no previously-included directories found matching 'dist'
    no previously-included directories found matching 'RCS'
    no previously-included directories found matching 'CVS'
    no previously-included directories found matching '.svn'
Downloading/unpacking ipaddr
  Downloading ipaddr-2.1.10.tar.gz
  Running setup.py egg_info for package ipaddr
    
Downloading/unpacking mock
  Running setup.py egg_info for package mock
    
    warning: no files found matching '*.png' under directory 'docs'
    warning: no files found matching '*.css' under directory 'docs'
    warning: no files found matching '*.html' under directory 'docs'
    warning: no files found matching '*.js' under directory 'docs'
Downloading/unpacking passlib
  Running setup.py egg_info for package passlib
    
    warning: no files found matching 'passlib/*.cfg'
    no previously-included directories found matching '*.komodoproject'
Downloading/unpacking pymongo
  Running setup.py egg_info for package pymongo
    
Downloading/unpacking requests from https://pypi.python.org/packages/source/r/requests/requests-1.2.3.tar.gz#md5=adbd3f18445f7fe5e77f65c502e264fb
  Running setup.py egg_info for package requests
    
Downloading/unpacking six from https://pypi.python.org/packages/source/s/six/six-1.3.0.tar.gz#md5=ec47fe6070a8a64c802363d2c2b1e2ee
  Downloading six-1.3.0.tar.gz
  Running setup.py egg_info for package six
    
Downloading/unpacking billiard>=2.7.3.30,<3.0 (from celery)
  Running setup.py egg_info for package billiard
    
    warning: no files found matching '*.py' under directory 'Lib'
Downloading/unpacking python-dateutil>=1.5 from https://pypi.python.org/packages/source/p/python-dateutil/python-dateutil-2.1.tar.gz#md5=1534bb15cf311f07afaa3aacba1c028b (from celery)
  Running setup.py egg_info for package python-dateutil
    
Downloading/unpacking kombu>=2.5.12,<3.0 (from celery)
  Running setup.py egg_info for package kombu
    
Downloading/unpacking Werkzeug>=0.7 (from flask)
  Running setup.py egg_info for package Werkzeug
    
    warning: no files found matching '*' under directory 'werkzeug/debug/templates'
    warning: no files found matching '*' under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
    warning: no previously-included files matching '*.pyc' found under directory 'tests'
    warning: no previously-included files matching '*.pyo' found under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'examples'
    warning: no previously-included files matching '*.pyo' found under directory 'examples'
    no previousl
2013-07-01 13:39:20,051 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] Execute apt-get -y remove --purge apache2.2-common
2013-07-01 13:39:20,792 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] Execute apt-get -y autoremove
2013-07-01 13:39:21,480 unit:oscied-storage/2: hook.output INFO: ctor --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/md5module.o build/temp.linux-x86_64-2.7/Modules/md5.o -o build/lib.linux-x86_64-2.7/_md5.so
    building '_sha256' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/sha256module.c -o build/temp.linux-x86_64-2.7/Modules/sha256module.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/sha256module.o -o build/lib.linux-x86_64-2.7/_sha256.so
    building '_sha512' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/sha512module.c -o build/temp.linux-x86_64-2.7/Modules/sha512module.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/sha512module.o -o build/lib.linux-x86_64-2.7/_sha512.so
    
    no previously-included directories found matching 'build'
    no previously-included directories found matching 'dist'
    no previously-included directories found matching 'RCS'
    no previously-included directories found matching 'CVS'
    no previously-included directories found matching '.svn'
  Running setup.py install for ipaddr
    
  Running setup.py install for mock
    
    warning: no files found matching '*.png' under directory 'docs'
    warning: no files found matching '*.css' under directory 'docs'
    warning: no files found matching '*.html' under directory 'docs'
    warning: no files found matching '*.js' under directory 'docs'
  Running setup.py install for passlib
    
    warning: no files found matching 'passlib/*.cfg'
    no previously-included directories found matching '*.komodoproject'
  Running setup.py install for pymongo
    building 'bson._cbson' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c bson/_cbsonmodule.c -o build/temp.linux-x86_64-2.7/bson/_cbsonmodule.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c bson/time64.c -o build/temp.linux-x86_64-2.7/bson/time64.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c bson/buffer.c -o build/temp.linux-x86_64-2.7/bson/buffer.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c bson/encoding_helpers.c -o build/temp.linux-x86_64-2.7/bson/encoding_helpers.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/bson/_cbsonmodule.o build/temp.linux-x86_64-2.7/bson/time64.o build/temp.linux-x86_64-2.7/bson/buffer.o build/temp.linux-x86_64-2.7/bson/encoding_helpers.o -o build/lib.linux-x86_64-2.7/bson/_cbson.so
    building 'pymongo._cmessage' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c pymongo/_cmessagemodule.c -o build/temp.linux-x86_64-2.7/pymongo/_cmessagemodule.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -f
2013-07-01 13:39:22,247 unit:oscied-storage/4: hook.output INFO: ctor --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/md5module.o build/temp.linux-x86_64-2.7/Modules/md5.o -o build/lib.linux-x86_64-2.7/_md5.so
    building '_sha256' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/sha256module.c -o build/temp.linux-x86_64-2.7/Modules/sha256module.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/sha256module.o -o build/lib.linux-x86_64-2.7/_sha256.so
    building '_sha512' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/sha512module.c -o build/temp.linux-x86_64-2.7/Modules/sha512module.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/sha512module.o -o build/lib.linux-x86_64-2.7/_sha512.so
    
    no previously-included directories found matching 'build'
    no previously-included directories found matching 'dist'
    no previously-included directories found matching 'RCS'
    no previously-included directories found matching 'CVS'
    no previously-included directories found matching '.svn'
  Running setup.py install for ipaddr
    
  Running setup.py install for mock
    
    warning: no files found matching '*.png' under directory 'docs'
    warning: no files found matching '*.css' under directory 'docs'
    warning: no files found matching '*.html' under directory 'docs'
    warning: no files found matching '*.js' under directory 'docs'
  Running setup.py install for passlib
    
    warning: no files found matching 'passlib/*.cfg'
    no previously-included directories found matching '*.komodoproject'
  Running setup.py install for pymongo
    building 'bson._cbson' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c bson/_cbsonmodule.c -o build/temp.linux-x86_64-2.7/bson/_cbsonmodule.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c bson/time64.c -o build/temp.linux-x86_64-2.7/bson/time64.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c bson/buffer.c -o build/temp.linux-x86_64-2.7/bson/buffer.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c bson/encoding_helpers.c -o build/temp.linux-x86_64-2.7/bson/encoding_helpers.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/bson/_cbsonmodule.o build/temp.linux-x86_64-2.7/bson/time64.o build/temp.linux-x86_64-2.7/bson/buffer.o build/temp.linux-x86_64-2.7/bson/encoding_helpers.o -o build/lib.linux-x86_64-2.7/bson/_cbson.so
    building 'pymongo._cmessage' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c pymongo/_cmessagemodule.c -o build/temp.linux-x86_64-2.7/pymongo/_cmessagemodule.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -f
2013-07-01 13:39:22,456 unit:oscied-storage/3: hook.output INFO: ctor --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/md5module.o build/temp.linux-x86_64-2.7/Modules/md5.o -o build/lib.linux-x86_64-2.7/_md5.so
    building '_sha256' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/sha256module.c -o build/temp.linux-x86_64-2.7/Modules/sha256module.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/sha256module.o -o build/lib.linux-x86_64-2.7/_sha256.so
    building '_sha512' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/sha512module.c -o build/temp.linux-x86_64-2.7/Modules/sha512module.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/sha512module.o -o build/lib.linux-x86_64-2.7/_sha512.so
    
    no previously-included directories found matching 'build'
    no previously-included directories found matching 'dist'
    no previously-included directories found matching 'RCS'
    no previously-included directories found matching 'CVS'
    no previously-included directories found matching '.svn'
  Running setup.py install for ipaddr
    
  Running setup.py install for mock
    
    warning: no files found matching '*.png' under directory 'docs'
    warning: no files found matching '*.css' under directory 'docs'
    warning: no files found matching '*.html' under directory 'docs'
    warning: no files found matching '*.js' under directory 'docs'
  Running setup.py install for passlib
    
    warning: no files found matching 'passlib/*.cfg'
    no previously-included directories found matching '*.komodoproject'
  Running setup.py install for pymongo
    building 'bson._cbson' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c bson/_cbsonmodule.c -o build/temp.linux-x86_64-2.7/bson/_cbsonmodule.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c bson/time64.c -o build/temp.linux-x86_64-2.7/bson/time64.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c bson/buffer.c -o build/temp.linux-x86_64-2.7/bson/buffer.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c bson/encoding_helpers.c -o build/temp.linux-x86_64-2.7/bson/encoding_helpers.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/bson/_cbsonmodule.o build/temp.linux-x86_64-2.7/bson/time64.o build/temp.linux-x86_64-2.7/bson/buffer.o build/temp.linux-x86_64-2.7/bson/encoding_helpers.o -o build/lib.linux-x86_64-2.7/bson/_cbson.so
    building 'pymongo._cmessage' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c pymongo/_cmessagemodule.c -o build/temp.linux-x86_64-2.7/pymongo/_cmessagemodule.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -f
2013-07-01 13:39:24,173 unit:oscied-storage/1: hook.output INFO: y-included directories found matching 'docs/_build'
Downloading/unpacking Jinja2>=2.4 (from flask)
  Running setup.py egg_info for package Jinja2
    
    warning: no files found matching '*' under directory 'custom_fixers'
    warning: no previously-included files matching '*' found under directory 'docs/_build'
    warning: no previously-included files matching '*.pyc' found under directory 'jinja2'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'jinja2'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
Downloading/unpacking itsdangerous>=0.21 (from flask)
  Downloading itsdangerous-0.21.tar.gz
  Running setup.py egg_info for package itsdangerous
    
Downloading/unpacking anyjson>=0.3.3 (from kombu>=2.5.12,<3.0->celery)
  Downloading anyjson-0.3.3.tar.gz
  Running setup.py egg_info for package anyjson
    
Downloading/unpacking amqp>=1.0.12,<1.1.0 (from kombu>=2.5.12,<3.0->celery)
  Running setup.py egg_info for package amqp
    
Downloading/unpacking markupsafe (from Jinja2>=2.4->flask)
  Downloading MarkupSafe-0.18.tar.gz
  Running setup.py egg_info for package markupsafe
    
Installing collected packages: celery, flask, hashlib, ipaddr, mock, passlib, pymongo, requests, six, billiard, python-dateutil, kombu, Werkzeug, Jinja2, itsdangerous, anyjson, amqp, markupsafe
  Running setup.py install for celery
    Upgrade: no old version found.
    
    no previously-included directories found matching '*.pyc'
    no previously-included directories found matching '*.sw*'
    Installing celeryctl script to /usr/local/bin
    Installing celeryd script to /usr/local/bin
    Installing camqadm script to /usr/local/bin
    Installing celeryev script to /usr/local/bin
    Installing celery script to /usr/local/bin
    Installing celeryd-multi script to /usr/local/bin
    Installing celerybeat script to /usr/local/bin
  Running setup.py install for flask
    
    warning: no files found matching '*' under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
    warning: no previously-included files matching '*.pyc' found under directory 'tests'
    warning: no previously-included files matching '*.pyo' found under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'examples'
    warning: no previously-included files matching '*.pyo' found under directory 'examples'
    no previously-included directories found matching 'docs/_build'
    no previously-included directories found matching 'docs/_themes/.git'
  Running setup.py install for hashlib
    building '_sha' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/shamodule.c -o build/temp.linux-x86_64-2.7/Modules/shamodule.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/shamodule.o -o build/lib.linux-x86_64-2.7/_sha.so
    building '_md5' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/md5module.c -o build/temp.linux-x86_64-2.7/Modules/md5module.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/md5.c -o build/temp.linux-x86_64-2.7/Modules/md5.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-prote
2013-07-01 13:39:25,206 unit:oscied-storage/2: hook.output INFO: PIC -Ibson -I/usr/include/python2.7 -c bson/buffer.c -o build/temp.linux-x86_64-2.7/bson/buffer.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/pymongo/_cmessagemodule.o build/temp.linux-x86_64-2.7/bson/buffer.o -o build/lib.linux-x86_64-2.7/pymongo/_cmessage.so
    
  Found existing installation: requests 1.1.0
    Uninstalling requests:
      Successfully uninstalled requests
  Running setup.py install for requests
    
  Found existing installation: six 1.2.0
    Uninstalling six:
      Successfully uninstalled six
  Running setup.py install for six
    
  Running setup.py install for billiard
    building '_billiard' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DHAVE_SEM_OPEN=1 -DHAVE_FD_TRANSFER=1 -DHAVE_SEM_TIMEDWAIT=1 -IModules/_billiard -I/usr/include/python2.7 -c Modules/_billiard/multiprocessing.c -o build/temp.linux-x86_64-2.7/Modules/_billiard/multiprocessing.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DHAVE_SEM_OPEN=1 -DHAVE_FD_TRANSFER=1 -DHAVE_SEM_TIMEDWAIT=1 -IModules/_billiard -I/usr/include/python2.7 -c Modules/_billiard/socket_connection.c -o build/temp.linux-x86_64-2.7/Modules/_billiard/socket_connection.o
    In file included from Modules/_billiard/socket_connection.c:229:0:
    Modules/_billiard/connection.h: In function 'Billiard_connection_recv_payload':
    Modules/_billiard/connection.h:387:15: warning: unused variable 'result' [-Wunused-variable]
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DHAVE_SEM_OPEN=1 -DHAVE_FD_TRANSFER=1 -DHAVE_SEM_TIMEDWAIT=1 -IModules/_billiard -I/usr/include/python2.7 -c Modules/_billiard/semaphore.c -o build/temp.linux-x86_64-2.7/Modules/_billiard/semaphore.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/_billiard/multiprocessing.o build/temp.linux-x86_64-2.7/Modules/_billiard/socket_connection.o build/temp.linux-x86_64-2.7/Modules/_billiard/semaphore.o -lrt -o build/lib.linux-x86_64-2.7/_billiard.so
    
    warning: no files found matching '*.py' under directory 'Lib'
  Found existing installation: python-dateutil 1.5
    Uninstalling python-dateutil:
      Successfully uninstalled python-dateutil
  Running setup.py install for python-dateutil
    
  Running setup.py install for kombu
    
  Running setup.py install for Werkzeug
    
    warning: no files found matching '*' under directory 'werkzeug/debug/templates'
    warning: no files found matching '*' under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
    warning: no previously-included files matching '*.pyc' found under directory 'tests'
    warning: no previously-included files matching '*.pyo' found under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'examples'
    warning: no previously-included files matching '*.pyo' found under directory 'examples'
    no previously-included directories found matching 'docs/_build'
  Running setup.py install for Jinja2
    
    warning: no files found matching '*' under directory 'custom_fixers'
    warning: no previously-included files matching '*' found under directory 'docs/_build'
    warning: no previously-included files matching '*.pyc' found under directory 'jinja2'
    warning: no previously-included files matching '*.pyc' fo
2013-07-01 13:39:26,384 unit:oscied-publisher/1: unit.hook.api INFO: [INFO] Upgrade system and install prerequisites
2013-07-01 13:39:26,607 unit:oscied-storage/3: hook.output INFO: PIC -Ibson -I/usr/include/python2.7 -c bson/buffer.c -o build/temp.linux-x86_64-2.7/bson/buffer.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/pymongo/_cmessagemodule.o build/temp.linux-x86_64-2.7/bson/buffer.o -o build/lib.linux-x86_64-2.7/pymongo/_cmessage.so
    
  Found existing installation: requests 1.1.0
    Uninstalling requests:
      Successfully uninstalled requests
  Running setup.py install for requests
    
  Found existing installation: six 1.2.0
    Uninstalling six:
      Successfully uninstalled six
  Running setup.py install for six
    
  Running setup.py install for billiard
    building '_billiard' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DHAVE_SEM_OPEN=1 -DHAVE_FD_TRANSFER=1 -DHAVE_SEM_TIMEDWAIT=1 -IModules/_billiard -I/usr/include/python2.7 -c Modules/_billiard/multiprocessing.c -o build/temp.linux-x86_64-2.7/Modules/_billiard/multiprocessing.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DHAVE_SEM_OPEN=1 -DHAVE_FD_TRANSFER=1 -DHAVE_SEM_TIMEDWAIT=1 -IModules/_billiard -I/usr/include/python2.7 -c Modules/_billiard/socket_connection.c -o build/temp.linux-x86_64-2.7/Modules/_billiard/socket_connection.o
    In file included from Modules/_billiard/socket_connection.c:229:0:
    Modules/_billiard/connection.h: In function 'Billiard_connection_recv_payload':
    Modules/_billiard/connection.h:387:15: warning: unused variable 'result' [-Wunused-variable]
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DHAVE_SEM_OPEN=1 -DHAVE_FD_TRANSFER=1 -DHAVE_SEM_TIMEDWAIT=1 -IModules/_billiard -I/usr/include/python2.7 -c Modules/_billiard/semaphore.c -o build/temp.linux-x86_64-2.7/Modules/_billiard/semaphore.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/_billiard/multiprocessing.o build/temp.linux-x86_64-2.7/Modules/_billiard/socket_connection.o build/temp.linux-x86_64-2.7/Modules/_billiard/semaphore.o -lrt -o build/lib.linux-x86_64-2.7/_billiard.so
    
    warning: no files found matching '*.py' under directory 'Lib'
  Found existing installation: python-dateutil 1.5
    Uninstalling python-dateutil:
      Successfully uninstalled python-dateutil
  Running setup.py install for python-dateutil
    
  Running setup.py install for kombu
    
  Running setup.py install for Werkzeug
    
    warning: no files found matching '*' under directory 'werkzeug/debug/templates'
    warning: no files found matching '*' under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
    warning: no previously-included files matching '*.pyc' found under directory 'tests'
    warning: no previously-included files matching '*.pyo' found under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'examples'
    warning: no previously-included files matching '*.pyo' found under directory 'examples'
    no previously-included directories found matching 'docs/_build'
  Running setup.py install for Jinja2
    
    warning: no files found matching '*' under directory 'custom_fixers'
    warning: no previously-included files matching '*' found under directory 'docs/_build'
    warning: no previously-included files matching '*.pyc' found under directory 'jinja2'
    warning: no previously-included files matching '*.pyc' fo
2013-07-01 13:39:26,721 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] Execute apt-add-repository -y ppa:jon-severinsson/ffmpeg
2013-07-01 13:39:27,221 unit:oscied-storage/4: hook.output INFO: PIC -Ibson -I/usr/include/python2.7 -c bson/buffer.c -o build/temp.linux-x86_64-2.7/bson/buffer.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/pymongo/_cmessagemodule.o build/temp.linux-x86_64-2.7/bson/buffer.o -o build/lib.linux-x86_64-2.7/pymongo/_cmessage.so
    
  Found existing installation: requests 1.1.0
    Uninstalling requests:
      Successfully uninstalled requests
  Running setup.py install for requests
    
  Found existing installation: six 1.2.0
    Uninstalling six:
      Successfully uninstalled six
  Running setup.py install for six
    
  Running setup.py install for billiard
    building '_billiard' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DHAVE_SEM_OPEN=1 -DHAVE_FD_TRANSFER=1 -DHAVE_SEM_TIMEDWAIT=1 -IModules/_billiard -I/usr/include/python2.7 -c Modules/_billiard/multiprocessing.c -o build/temp.linux-x86_64-2.7/Modules/_billiard/multiprocessing.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DHAVE_SEM_OPEN=1 -DHAVE_FD_TRANSFER=1 -DHAVE_SEM_TIMEDWAIT=1 -IModules/_billiard -I/usr/include/python2.7 -c Modules/_billiard/socket_connection.c -o build/temp.linux-x86_64-2.7/Modules/_billiard/socket_connection.o
    In file included from Modules/_billiard/socket_connection.c:229:0:
    Modules/_billiard/connection.h: In function 'Billiard_connection_recv_payload':
    Modules/_billiard/connection.h:387:15: warning: unused variable 'result' [-Wunused-variable]
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DHAVE_SEM_OPEN=1 -DHAVE_FD_TRANSFER=1 -DHAVE_SEM_TIMEDWAIT=1 -IModules/_billiard -I/usr/include/python2.7 -c Modules/_billiard/semaphore.c -o build/temp.linux-x86_64-2.7/Modules/_billiard/semaphore.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/_billiard/multiprocessing.o build/temp.linux-x86_64-2.7/Modules/_billiard/socket_connection.o build/temp.linux-x86_64-2.7/Modules/_billiard/semaphore.o -lrt -o build/lib.linux-x86_64-2.7/_billiard.so
    
    warning: no files found matching '*.py' under directory 'Lib'
  Found existing installation: python-dateutil 1.5
    Uninstalling python-dateutil:
      Successfully uninstalled python-dateutil
  Running setup.py install for python-dateutil
    
  Running setup.py install for kombu
    
  Running setup.py install for Werkzeug
    
    warning: no files found matching '*' under directory 'werkzeug/debug/templates'
    warning: no files found matching '*' under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
    warning: no previously-included files matching '*.pyc' found under directory 'tests'
    warning: no previously-included files matching '*.pyo' found under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'examples'
    warning: no previously-included files matching '*.pyo' found under directory 'examples'
    no previously-included directories found matching 'docs/_build'
  Running setup.py install for Jinja2
    
    warning: no files found matching '*' under directory 'custom_fixers'
    warning: no previously-included files matching '*' found under directory 'docs/_build'
    warning: no previously-included files matching '*.pyc' found under directory 'jinja2'
    warning: no previously-included files matching '*.pyc' fo
2013-07-01 13:39:27,317 unit:oscied-storage/2: hook.output INFO: und under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'jinja2'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
  Running setup.py install for itsdangerous
    
  Running setup.py install for anyjson
    
  Running setup.py install for amqp
    
  Running setup.py install for markupsafe
    
    building 'markupsafe._speedups' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c markupsafe/_speedups.c -o build/temp.linux-x86_64-2.7/markupsafe/_speedups.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/markupsafe/_speedups.o -o build/lib.linux-x86_64-2.7/markupsafe/_speedups.so
Successfully installed celery flask hashlib ipaddr mock passlib pymongo requests six billiard python-dateutil kombu Werkzeug Jinja2 itsdangerous anyjson amqp markupsafe
Cleaning up...

2013-07-01 13:39:27,931 unit:oscied-storage/3: hook.output INFO: und under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'jinja2'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
  Running setup.py install for itsdangerous
    
  Running setup.py install for anyjson
    
  Running setup.py install for amqp
    
  Running setup.py install for markupsafe
    
    building 'markupsafe._speedups' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c markupsafe/_speedups.c -o build/temp.linux-x86_64-2.7/markupsafe/_speedups.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/markupsafe/_speedups.o -o build/lib.linux-x86_64-2.7/markupsafe/_speedups.so
Successfully installed celery flask hashlib ipaddr mock passlib pymongo requests six billiard python-dateutil kombu Werkzeug Jinja2 itsdangerous anyjson amqp markupsafe
Cleaning up...

2013-07-01 13:39:28,369 unit:oscied-storage/2: hook.output INFO: gpg: 
2013-07-01 13:39:28,369 unit:oscied-storage/2: hook.output INFO: keyring `/tmp/tmphicirc/secring.gpg' created

2013-07-01 13:39:28,370 unit:oscied-storage/2: hook.output INFO: gpg: 
2013-07-01 13:39:28,371 unit:oscied-storage/2: hook.output INFO: keyring `/tmp/tmphicirc/pubring.gpg' created

2013-07-01 13:39:28,373 unit:oscied-storage/2: hook.output INFO: gpg: requesting key C8068B11 from hkp server keyserver.ubuntu.com

2013-07-01 13:39:28,341 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] Execute apt-get -y update
2013-07-01 13:39:28,613 unit:oscied-storage/2: hook.output INFO: gpg: /tmp/tmphicirc/trustdb.gpg: trustdb created

2013-07-01 13:39:28,614 unit:oscied-storage/2: hook.output INFO: gpg: 
2013-07-01 13:39:28,617 unit:oscied-storage/2: hook.output INFO: key C8068B11: public key "Launchpad Ensemble PPA" imported
gpg: Total number processed: 1
gpg:               imported: 1  (RSA: 1)

2013-07-01 13:39:28,564 unit:oscied-storage/4: hook.output INFO: und under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'jinja2'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
  Running setup.py install for itsdangerous
    
  Running setup.py install for anyjson
    
  Running setup.py install for amqp
    
  Running setup.py install for markupsafe
    
    building 'markupsafe._speedups' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c markupsafe/_speedups.c -o build/temp.linux-x86_64-2.7/markupsafe/_speedups.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/markupsafe/_speedups.o -o build/lib.linux-x86_64-2.7/markupsafe/_speedups.so
Successfully installed celery flask hashlib ipaddr mock passlib pymongo requests six billiard python-dateutil kombu Werkzeug Jinja2 itsdangerous anyjson amqp markupsafe
Cleaning up...

2013-07-01 13:39:28,668 unit:oscied-storage/1: hook.output INFO: ctor --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/md5module.o build/temp.linux-x86_64-2.7/Modules/md5.o -o build/lib.linux-x86_64-2.7/_md5.so
    building '_sha256' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/sha256module.c -o build/temp.linux-x86_64-2.7/Modules/sha256module.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/sha256module.o -o build/lib.linux-x86_64-2.7/_sha256.so
    building '_sha512' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/sha512module.c -o build/temp.linux-x86_64-2.7/Modules/sha512module.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/sha512module.o -o build/lib.linux-x86_64-2.7/_sha512.so
    
    no previously-included directories found matching 'build'
    no previously-included directories found matching 'dist'
    no previously-included directories found matching 'RCS'
    no previously-included directories found matching 'CVS'
    no previously-included directories found matching '.svn'
  Running setup.py install for ipaddr
    
  Running setup.py install for mock
    
    warning: no files found matching '*.png' under directory 'docs'
    warning: no files found matching '*.css' under directory 'docs'
    warning: no files found matching '*.html' under directory 'docs'
    warning: no files found matching '*.js' under directory 'docs'
  Running setup.py install for passlib
    
    warning: no files found matching 'passlib/*.cfg'
    no previously-included directories found matching '*.komodoproject'
  Running setup.py install for pymongo
    building 'bson._cbson' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c bson/_cbsonmodule.c -o build/temp.linux-x86_64-2.7/bson/_cbsonmodule.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c bson/time64.c -o build/temp.linux-x86_64-2.7/bson/time64.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c bson/buffer.c -o build/temp.linux-x86_64-2.7/bson/buffer.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c bson/encoding_helpers.c -o build/temp.linux-x86_64-2.7/bson/encoding_helpers.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/bson/_cbsonmodule.o build/temp.linux-x86_64-2.7/bson/time64.o build/temp.linux-x86_64-2.7/bson/buffer.o build/temp.linux-x86_64-2.7/bson/encoding_helpers.o -o build/lib.linux-x86_64-2.7/bson/_cbson.so
    building 'pymongo._cmessage' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c pymongo/_cmessagemodule.c -o build/temp.linux-x86_64-2.7/pymongo/_cmessagemodule.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -f
2013-07-01 13:39:28,689 unit:oscied-storage/2: hook.output INFO: OK

2013-07-01 13:39:28,736 unit:oscied-storage/2: hook.output INFO: Reading package lists...
2013-07-01 13:39:29,191 unit:oscied-storage/3: hook.output INFO: gpg: 
2013-07-01 13:39:29,192 unit:oscied-storage/3: hook.output INFO: keyring `/tmp/tmp5ypza3/secring.gpg' created

2013-07-01 13:39:29,192 unit:oscied-storage/3: hook.output INFO: gpg: 
2013-07-01 13:39:29,193 unit:oscied-storage/3: hook.output INFO: keyring `/tmp/tmp5ypza3/pubring.gpg' created

2013-07-01 13:39:29,196 unit:oscied-storage/3: hook.output INFO: gpg: requesting key C8068B11 from hkp server keyserver.ubuntu.com

2013-07-01 13:39:29,455 unit:oscied-storage/3: hook.output INFO: gpg: 
2013-07-01 13:39:29,456 unit:oscied-storage/3: hook.output INFO: /tmp/tmp5ypza3/trustdb.gpg: trustdb created

2013-07-01 13:39:29,457 unit:oscied-storage/3: hook.output INFO: gpg: 
2013-07-01 13:39:29,461 unit:oscied-storage/3: hook.output INFO: key C8068B11: public key "Launchpad Ensemble PPA" imported
gpg: Total number processed: 1
gpg:               imported: 1  (RSA: 1)

2013-07-01 13:39:29,555 unit:oscied-storage/3: hook.output INFO: OK

2013-07-01 13:39:29,605 unit:oscied-storage/3: hook.output INFO: Reading package lists...
2013-07-01 13:39:29,653 unit:oscied-storage/4: hook.output INFO: gpg: 
2013-07-01 13:39:29,654 unit:oscied-storage/4: hook.output INFO: keyring `/tmp/tmphztvux/secring.gpg' created

2013-07-01 13:39:29,654 unit:oscied-storage/4: hook.output INFO: gpg: 
2013-07-01 13:39:29,655 unit:oscied-storage/4: hook.output INFO: keyring `/tmp/tmphztvux/pubring.gpg' created

2013-07-01 13:39:29,657 unit:oscied-storage/4: hook.output INFO: gpg: requesting key C8068B11 from hkp server keyserver.ubuntu.com

2013-07-01 13:39:29,895 unit:oscied-storage/4: hook.output INFO: gpg: /tmp/tmphztvux/trustdb.gpg: trustdb created

2013-07-01 13:39:29,896 unit:oscied-storage/4: hook.output INFO: gpg: 
2013-07-01 13:39:29,899 unit:oscied-storage/4: hook.output INFO: key C8068B11: public key "Launchpad Ensemble PPA" imported
gpg: Total number processed: 1
gpg:               imported: 1  (RSA: 1)

2013-07-01 13:39:29,986 unit:oscied-storage/4: hook.output INFO: OK

2013-07-01 13:39:30,031 unit:oscied-storage/4: hook.output INFO: Reading package lists...
2013-07-01 13:39:30,634 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] Execute apt-get -y upgrade
2013-07-01 13:39:32,063 unit:oscied-storage/2: hook.output INFO: 

2013-07-01 13:39:32,071 unit:oscied-storage/2: hook.output INFO: Building dependency tree...
2013-07-01 13:39:32,222 unit:oscied-storage/2: hook.output INFO: 

2013-07-01 13:39:32,222 unit:oscied-storage/2: hook.output INFO: Reading state information...
2013-07-01 13:39:32,223 unit:oscied-storage/2: hook.output INFO: 

2013-07-01 13:39:32,345 unit:oscied-storage/2: hook.output INFO: The following extra packages will be installed:

2013-07-01 13:39:32,346 unit:oscied-storage/2: hook.output INFO:   python-shelltoolbox

2013-07-01 13:39:32,350 unit:oscied-storage/2: hook.output INFO: The following NEW packages will be installed:

2013-07-01 13:39:32,351 unit:oscied-storage/2: hook.output INFO:   python-charmhelpers python-shelltoolbox

2013-07-01 13:39:32,424 unit:oscied-storage/2: hook.output INFO: 0 upgraded, 2 newly installed, 0 to remove and 0 not upgraded.
Need to get 19.9 kB of archives.
After this operation, 167 kB of additional disk space will be used.
Get:1 http://us-east-1.ec2.archive.ubuntu.com/ubuntu/ raring/universe python-shelltoolbox all 0.2.1+bzr17-1 [13.5 kB]

2013-07-01 13:39:32,548 unit:oscied-storage/2: hook.output INFO: Get:2 http://ppa.launchpad.net/juju/pkgs/ubuntu/ raring/main python-charmhelpers all 0.3+bzr178-3~raring1 [6410 B]

2013-07-01 13:39:32,847 unit:oscied-storage/2: hook.output INFO: Fetched 19.9 kB in 0s (80.3 kB/s)

2013-07-01 13:39:32,938 unit:oscied-storage/1: hook.output INFO: PIC -Ibson -I/usr/include/python2.7 -c bson/buffer.c -o build/temp.linux-x86_64-2.7/bson/buffer.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/pymongo/_cmessagemodule.o build/temp.linux-x86_64-2.7/bson/buffer.o -o build/lib.linux-x86_64-2.7/pymongo/_cmessage.so
    
  Found existing installation: requests 1.1.0
    Uninstalling requests:
      Successfully uninstalled requests
  Running setup.py install for requests
    
  Found existing installation: six 1.2.0
    Uninstalling six:
      Successfully uninstalled six
  Running setup.py install for six
    
  Running setup.py install for billiard
    building '_billiard' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DHAVE_SEM_OPEN=1 -DHAVE_FD_TRANSFER=1 -DHAVE_SEM_TIMEDWAIT=1 -IModules/_billiard -I/usr/include/python2.7 -c Modules/_billiard/multiprocessing.c -o build/temp.linux-x86_64-2.7/Modules/_billiard/multiprocessing.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DHAVE_SEM_OPEN=1 -DHAVE_FD_TRANSFER=1 -DHAVE_SEM_TIMEDWAIT=1 -IModules/_billiard -I/usr/include/python2.7 -c Modules/_billiard/socket_connection.c -o build/temp.linux-x86_64-2.7/Modules/_billiard/socket_connection.o
    In file included from Modules/_billiard/socket_connection.c:229:0:
    Modules/_billiard/connection.h: In function 'Billiard_connection_recv_payload':
    Modules/_billiard/connection.h:387:15: warning: unused variable 'result' [-Wunused-variable]
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DHAVE_SEM_OPEN=1 -DHAVE_FD_TRANSFER=1 -DHAVE_SEM_TIMEDWAIT=1 -IModules/_billiard -I/usr/include/python2.7 -c Modules/_billiard/semaphore.c -o build/temp.linux-x86_64-2.7/Modules/_billiard/semaphore.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/_billiard/multiprocessing.o build/temp.linux-x86_64-2.7/Modules/_billiard/socket_connection.o build/temp.linux-x86_64-2.7/Modules/_billiard/semaphore.o -lrt -o build/lib.linux-x86_64-2.7/_billiard.so
    
    warning: no files found matching '*.py' under directory 'Lib'
  Found existing installation: python-dateutil 1.5
    Uninstalling python-dateutil:
      Successfully uninstalled python-dateutil
  Running setup.py install for python-dateutil
    
  Running setup.py install for kombu
    
  Running setup.py install for Werkzeug
    
    warning: no files found matching '*' under directory 'werkzeug/debug/templates'
    warning: no files found matching '*' under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
    warning: no previously-included files matching '*.pyc' found under directory 'tests'
    warning: no previously-included files matching '*.pyo' found under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'examples'
    warning: no previously-included files matching '*.pyo' found under directory 'examples'
    no previously-included directories found matching 'docs/_build'
  Running setup.py install for Jinja2
    
    warning: no files found matching '*' under directory 'custom_fixers'
    warning: no previously-included files matching '*' found under directory 'docs/_build'
    warning: no previously-included files matching '*.pyc' found under directory 'jinja2'
    warning: no previously-included files matching '*.pyc' fo
2013-07-01 13:39:32,968 unit:oscied-storage/2: hook.output INFO: Selecting previously unselected package python-shelltoolbox.

2013-07-01 13:39:32,968 unit:oscied-storage/2: hook.output INFO: (Reading database ... 
2013-07-01 13:39:33,015 unit:oscied-storage/2: hook.output INFO: 61600 files and directories currently installed.)

2013-07-01 13:39:33,023 unit:oscied-storage/2: hook.output INFO: Unpacking python-shelltoolbox (from .../python-shelltoolbox_0.2.1+bzr17-1_all.deb) ...

2013-07-01 13:39:33,220 unit:oscied-storage/2: hook.output INFO: Selecting previously unselected package python-charmhelpers.

2013-07-01 13:39:33,235 unit:oscied-storage/2: hook.output INFO: Unpacking python-charmhelpers (from .../python-charmhelpers_0.3+bzr178-3~raring1_all.deb) ...

2013-07-01 13:39:33,300 unit:oscied-storage/3: hook.output INFO: 

2013-07-01 13:39:33,314 unit:oscied-storage/3: hook.output INFO: Building dependency tree...
2013-07-01 13:39:33,366 unit:oscied-storage/4: hook.output INFO: 

2013-07-01 13:39:33,478 unit:oscied-storage/3: hook.output INFO: 

2013-07-01 13:39:33,478 unit:oscied-storage/3: hook.output INFO: Reading state information...
2013-07-01 13:39:33,479 unit:oscied-storage/3: hook.output INFO: 

2013-07-01 13:39:33,377 unit:oscied-storage/4: hook.output INFO: Building dependency tree...
2013-07-01 13:39:33,448 unit:oscied-storage/2: hook.output INFO: Setting up python-shelltoolbox (0.2.1+bzr17-1) ...

2013-07-01 13:39:33,588 unit:oscied-storage/3: hook.output INFO: The following extra packages will be installed:

2013-07-01 13:39:33,589 unit:oscied-storage/3: hook.output INFO:   python-shelltoolbox

2013-07-01 13:39:33,592 unit:oscied-storage/3: hook.output INFO: The following NEW packages will be installed:

2013-07-01 13:39:33,592 unit:oscied-storage/3: hook.output INFO:   python-charmhelpers python-shelltoolbox

2013-07-01 13:39:33,530 unit:oscied-storage/4: hook.output INFO: 

2013-07-01 13:39:33,531 unit:oscied-storage/4: hook.output INFO: Reading state information...
2013-07-01 13:39:33,532 unit:oscied-storage/4: hook.output INFO: 

2013-07-01 13:39:33,631 unit:oscied-storage/2: hook.output INFO: Setting up python-charmhelpers (0.3+bzr178-3~raring1) ...

2013-07-01 13:39:33,685 unit:oscied-storage/3: hook.output INFO: 0 upgraded, 2 newly installed, 0 to remove and 0 not upgraded.
Need to get 19.9 kB of archives.
After this operation, 167 kB of additional disk space will be used.
Get:1 http://us-east-1.ec2.archive.ubuntu.com/ubuntu/ raring/universe python-shelltoolbox all 0.2.1+bzr17-1 [13.5 kB]

2013-07-01 13:39:33,640 unit:oscied-storage/4: hook.output INFO: The following extra packages will be installed:

2013-07-01 13:39:33,641 unit:oscied-storage/4: hook.output INFO:   python-shelltoolbox

2013-07-01 13:39:33,643 unit:oscied-storage/4: hook.output INFO: The following NEW packages will be installed:

2013-07-01 13:39:33,643 unit:oscied-storage/4: hook.output INFO:   python-charmhelpers python-shelltoolbox

2013-07-01 13:39:33,698 unit:oscied-storage/4: hook.output INFO: 0 upgraded, 2 newly installed, 0 to remove and 0 not upgraded.
Need to get 19.9 kB of archives.
After this operation, 167 kB of additional disk space will be used.
Get:1 http://us-east-1.ec2.archive.ubuntu.com/ubuntu/ raring/universe python-shelltoolbox all 0.2.1+bzr17-1 [13.5 kB]

2013-07-01 13:39:33,812 unit:oscied-storage/3: hook.output INFO: Get:2 http://ppa.launchpad.net/juju/pkgs/ubuntu/ raring/main python-charmhelpers all 0.3+bzr178-3~raring1 [6410 B]

2013-07-01 13:39:33,836 unit:oscied-storage/4: hook.output INFO: Get:2 http://ppa.launchpad.net/juju/pkgs/ubuntu/ raring/main python-charmhelpers all 0.3+bzr178-3~raring1 [6410 B]

2013-07-01 13:39:33,868 unit:oscied-transform/1: hook.output INFO: Requirement already up-to-date: argparse in /usr/lib/python2.7
Requirement already up-to-date: configobj in /usr/lib/python2.7/dist-packages
Downloading/unpacking celery
  Running setup.py egg_info for package celery
    Upgrade: no old version found.
    
    no previously-included directories found matching '*.pyc'
    no previously-included directories found matching '*.sw*'
Downloading/unpacking flask
  Running setup.py egg_info for package flask
    
    warning: no files found matching '*' under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
    warning: no previously-included files matching '*.pyc' found under directory 'tests'
    warning: no previously-included files matching '*.pyo' found under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'examples'
    warning: no previously-included files matching '*.pyo' found under directory 'examples'
    no previously-included directories found matching 'docs/_build'
    no previously-included directories found matching 'docs/_themes/.git'
Downloading/unpacking hashlib
  Running setup.py egg_info for package hashlib
    
    no previously-included directories found matching 'build'
    no previously-included directories found matching 'dist'
    no previously-included directories found matching 'RCS'
    no previously-included directories found matching 'CVS'
    no previously-included directories found matching '.svn'
Downloading/unpacking ipaddr
  Downloading ipaddr-2.1.10.tar.gz
  Running setup.py egg_info for package ipaddr
    
Downloading/unpacking mock
  Running setup.py egg_info for package mock
    
    warning: no files found matching '*.png' under directory 'docs'
    warning: no files found matching '*.css' under directory 'docs'
    warning: no files found matching '*.html' under directory 'docs'
    warning: no files found matching '*.js' under directory 'docs'
Downloading/unpacking passlib
  Running setup.py egg_info for package passlib
    
    warning: no files found matching 'passlib/*.cfg'
    no previously-included directories found matching '*.komodoproject'
Downloading/unpacking pymongo
  Running setup.py egg_info for package pymongo
    
Downloading/unpacking requests from https://pypi.python.org/packages/source/r/requests/requests-1.2.3.tar.gz#md5=adbd3f18445f7fe5e77f65c502e264fb
  Running setup.py egg_info for package requests
    
Downloading/unpacking six from https://pypi.python.org/packages/source/s/six/six-1.3.0.tar.gz#md5=ec47fe6070a8a64c802363d2c2b1e2ee
  Downloading six-1.3.0.tar.gz
  Running setup.py egg_info for package six
    
Downloading/unpacking billiard>=2.7.3.30,<3.0 (from celery)
  Running setup.py egg_info for package billiard
    
    warning: no files found matching '*.py' under directory 'Lib'
Downloading/unpacking python-dateutil>=1.5 from https://pypi.python.org/packages/source/p/python-dateutil/python-dateutil-2.1.tar.gz#md5=1534bb15cf311f07afaa3aacba1c028b (from celery)
  Running setup.py egg_info for package python-dateutil
    
Downloading/unpacking kombu>=2.5.12,<3.0 (from celery)
  Running setup.py egg_info for package kombu
    
Downloading/unpacking Werkzeug>=0.7 (from flask)
  Running setup.py egg_info for package Werkzeug
    
    warning: no files found matching '*' under directory 'werkzeug/debug/templates'
    warning: no files found matching '*' under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
    warning: no previously-included files matching '*.pyc' found under directory 'tests'
    warning: no previously-included files matching '*.pyo' found under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'examples'
    warning: no previously-included files matching '*.pyo' found under directory 'examples'
    no previousl
2013-07-01 13:39:34,066 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] Execute apt-get -y install glusterfs-client nfs-common ntp make apache2 apache2-threaded-dev
2013-07-01 13:39:34,198 unit:oscied-storage/3: hook.output INFO: Fetched 19.9 kB in 0s (71.2 kB/s)

2013-07-01 13:39:34,170 unit:oscied-storage/1: hook.output INFO: und under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'jinja2'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
  Running setup.py install for itsdangerous
    
  Running setup.py install for anyjson
    
  Running setup.py install for amqp
    
  Running setup.py install for markupsafe
    
    building 'markupsafe._speedups' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c markupsafe/_speedups.c -o build/temp.linux-x86_64-2.7/markupsafe/_speedups.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/markupsafe/_speedups.o -o build/lib.linux-x86_64-2.7/markupsafe/_speedups.so
Successfully installed celery flask hashlib ipaddr mock passlib pymongo requests six billiard python-dateutil kombu Werkzeug Jinja2 itsdangerous anyjson amqp markupsafe
Cleaning up...

2013-07-01 13:39:34,188 unit:oscied-storage/4: hook.output INFO: Fetched 19.9 kB in 0s (83.0 kB/s)

2013-07-01 13:39:34,301 unit:oscied-storage/3: hook.output INFO: Selecting previously unselected package python-shelltoolbox.

2013-07-01 13:39:34,302 unit:oscied-storage/3: hook.output INFO: (Reading database ... 
2013-07-01 13:39:34,353 unit:oscied-storage/3: hook.output INFO: 61600 files and directories currently installed.)

2013-07-01 13:39:34,356 unit:oscied-storage/3: hook.output INFO: Unpacking python-shelltoolbox (from .../python-shelltoolbox_0.2.1+bzr17-1_all.deb) ...

2013-07-01 13:39:34,321 unit:oscied-storage/4: hook.output INFO: Selecting previously unselected package python-shelltoolbox.

2013-07-01 13:39:34,321 unit:oscied-storage/4: hook.output INFO: (Reading database ... 
2013-07-01 13:39:34,371 unit:oscied-storage/4: hook.output INFO: 61600 files and directories currently installed.)

2013-07-01 13:39:34,374 unit:oscied-storage/4: hook.output INFO: Unpacking python-shelltoolbox (from .../python-shelltoolbox_0.2.1+bzr17-1_all.deb) ...

2013-07-01 13:39:34,548 unit:oscied-storage/3: hook.output INFO: Selecting previously unselected package python-charmhelpers.

2013-07-01 13:39:34,565 unit:oscied-storage/3: hook.output INFO: Unpacking python-charmhelpers (from .../python-charmhelpers_0.3+bzr178-3~raring1_all.deb) ...

2013-07-01 13:39:34,619 unit:oscied-storage/4: hook.output INFO: Selecting previously unselected package python-charmhelpers.

2013-07-01 13:39:34,630 unit:oscied-storage/4: hook.output INFO: Unpacking python-charmhelpers (from .../python-charmhelpers_0.3+bzr178-3~raring1_all.deb) ...

2013-07-01 13:39:34,795 unit:oscied-storage/3: hook.output INFO: Setting up python-shelltoolbox (0.2.1+bzr17-1) ...

2013-07-01 13:39:34,824 unit:oscied-storage/4: hook.output INFO: Setting up python-shelltoolbox (0.2.1+bzr17-1) ...

2013-07-01 13:39:34,993 unit:oscied-storage/3: hook.output INFO: Setting up python-charmhelpers (0.3+bzr178-3~raring1) ...

2013-07-01 13:39:35,024 unit:oscied-storage/4: hook.output INFO: Setting up python-charmhelpers (0.3+bzr178-3~raring1) ...

2013-07-01 13:39:35,307 unit:oscied-storage/1: hook.output INFO: gpg: 
2013-07-01 13:39:35,308 unit:oscied-storage/1: hook.output INFO: keyring `/tmp/tmpwx3n_e/secring.gpg' created

2013-07-01 13:39:35,308 unit:oscied-storage/1: hook.output INFO: gpg: 
2013-07-01 13:39:35,309 unit:oscied-storage/1: hook.output INFO: keyring `/tmp/tmpwx3n_e/pubring.gpg' created

2013-07-01 13:39:35,312 unit:oscied-storage/1: hook.output INFO: gpg: requesting key C8068B11 from hkp server keyserver.ubuntu.com

2013-07-01 13:39:35,603 unit:oscied-storage/1: hook.output INFO: gpg: /tmp/tmpwx3n_e/trustdb.gpg: trustdb created

2013-07-01 13:39:35,604 unit:oscied-storage/1: hook.output INFO: gpg: 
2013-07-01 13:39:35,609 unit:oscied-storage/1: hook.output INFO: key C8068B11: public key "Launchpad Ensemble PPA" imported
gpg: Total number processed: 1
gpg:               imported: 1  (RSA: 1)

2013-07-01 13:39:35,697 unit:oscied-storage/1: hook.output INFO: OK

2013-07-01 13:39:35,745 unit:oscied-storage/1: hook.output INFO: Reading package lists...
2013-07-01 13:39:35,882 unit:oscied-storage/2: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:39:36,186 unit:oscied-storage/2: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:39:36,474 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:39:36,752 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x2d42f40>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/2', 'public_address': 'ec2-50-16-110-129.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-202-41-54.ec2.internal', 'juju_log': <function callable_command at 0x2fa10c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:39:37,030 unit:oscied-storage/2: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:39:37,084 unit:oscied-storage/4: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:39:37,315 unit:oscied-storage/2: unit.hook.api INFO: [HOOK] Execute StorageHooks hook install
2013-07-01 13:39:37,389 unit:oscied-storage/3: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:39:37,450 unit:oscied-storage/4: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:39:37,597 unit:oscied-storage/2: unit.hook.api INFO: [INFO] Uninstall prerequisites, remove files & bricks and load default configuration
2013-07-01 13:39:37,748 unit:oscied-storage/3: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:39:37,795 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:39:37,873 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] Execute pgrep glusterd
2013-07-01 13:39:38,103 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:39:38,164 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] Execute apt-get -y remove --purge glusterfs-server nfs-common
2013-07-01 13:39:38,148 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1374d30>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/4', 'public_address': 'ec2-54-242-176-247.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-73-202.ec2.internal', 'juju_log': <function callable_command at 0x16f00c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:39:38,455 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1c170b0>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/3', 'public_address': 'ec2-54-242-71-153.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-37-115.ec2.internal', 'juju_log': <function callable_command at 0x1e740c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:39:38,490 unit:oscied-storage/4: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:39:38,804 unit:oscied-storage/3: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:39:38,754 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] Execute apt-get -y autoremove
2013-07-01 13:39:38,838 unit:oscied-storage/4: unit.hook.api INFO: [HOOK] Execute StorageHooks hook install
2013-07-01 13:39:38,950 unit:oscied-transform/1: hook.output INFO: y-included directories found matching 'docs/_build'
Downloading/unpacking Jinja2>=2.4 (from flask)
  Running setup.py egg_info for package Jinja2
    
    warning: no files found matching '*' under directory 'custom_fixers'
    warning: no previously-included files matching '*' found under directory 'docs/_build'
    warning: no previously-included files matching '*.pyc' found under directory 'jinja2'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'jinja2'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
Downloading/unpacking itsdangerous>=0.21 (from flask)
  Downloading itsdangerous-0.21.tar.gz
  Running setup.py egg_info for package itsdangerous
    
Downloading/unpacking anyjson>=0.3.3 (from kombu>=2.5.12,<3.0->celery)
  Downloading anyjson-0.3.3.tar.gz
  Running setup.py egg_info for package anyjson
    
Downloading/unpacking amqp>=1.0.12,<1.1.0 (from kombu>=2.5.12,<3.0->celery)
  Running setup.py egg_info for package amqp
    
Downloading/unpacking markupsafe (from Jinja2>=2.4->flask)
  Downloading MarkupSafe-0.18.tar.gz
  Running setup.py egg_info for package markupsafe
    
Installing collected packages: celery, flask, hashlib, ipaddr, mock, passlib, pymongo, requests, six, billiard, python-dateutil, kombu, Werkzeug, Jinja2, itsdangerous, anyjson, amqp, markupsafe
  Running setup.py install for celery
    Upgrade: no old version found.
    
    no previously-included directories found matching '*.pyc'
    no previously-included directories found matching '*.sw*'
    Installing celeryctl script to /usr/local/bin
    Installing celeryd script to /usr/local/bin
    Installing camqadm script to /usr/local/bin
    Installing celeryev script to /usr/local/bin
    Installing celery script to /usr/local/bin
    Installing celeryd-multi script to /usr/local/bin
    Installing celerybeat script to /usr/local/bin
  Running setup.py install for flask
    
    warning: no files found matching '*' under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
    warning: no previously-included files matching '*.pyc' found under directory 'tests'
    warning: no previously-included files matching '*.pyo' found under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'examples'
    warning: no previously-included files matching '*.pyo' found under directory 'examples'
    no previously-included directories found matching 'docs/_build'
    no previously-included directories found matching 'docs/_themes/.git'
  Running setup.py install for hashlib
    building '_sha' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/shamodule.c -o build/temp.linux-x86_64-2.7/Modules/shamodule.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/shamodule.o -o build/lib.linux-x86_64-2.7/_sha.so
    building '_md5' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/md5module.c -o build/temp.linux-x86_64-2.7/Modules/md5module.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/md5.c -o build/temp.linux-x86_64-2.7/Modules/md5.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-prote
2013-07-01 13:39:39,147 unit:oscied-storage/3: unit.hook.api INFO: [HOOK] Execute StorageHooks hook install
2013-07-01 13:39:39,184 unit:oscied-storage/4: unit.hook.api INFO: [INFO] Uninstall prerequisites, remove files & bricks and load default configuration
2013-07-01 13:39:39,352 unit:oscied-storage/1: hook.output INFO: 

2013-07-01 13:39:39,334 unit:oscied-storage/2: unit.hook.api INFO: [INFO] Upgrade system and install prerequisites
2013-07-01 13:39:39,363 unit:oscied-storage/1: hook.output INFO: Building dependency tree...
2013-07-01 13:39:39,496 unit:oscied-storage/3: unit.hook.api INFO: [INFO] Uninstall prerequisites, remove files & bricks and load default configuration
2013-07-01 13:39:39,520 unit:oscied-storage/1: hook.output INFO: 

2013-07-01 13:39:39,520 unit:oscied-storage/1: hook.output INFO: Reading state information...
2013-07-01 13:39:39,522 unit:oscied-storage/1: hook.output INFO: 

2013-07-01 13:39:39,518 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] Execute pgrep glusterd
2013-07-01 13:39:39,602 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] Execute apt-get -y update
2013-07-01 13:39:39,630 unit:oscied-storage/1: hook.output INFO: The following extra packages will be installed:

2013-07-01 13:39:39,630 unit:oscied-storage/1: hook.output INFO:   python-shelltoolbox

2013-07-01 13:39:39,633 unit:oscied-storage/1: hook.output INFO: The following NEW packages will be installed:

2013-07-01 13:39:39,633 unit:oscied-storage/1: hook.output INFO:   python-charmhelpers python-shelltoolbox

2013-07-01 13:39:39,682 unit:oscied-storage/1: hook.output INFO: 0 upgraded, 2 newly installed, 0 to remove and 0 not upgraded.
Need to get 19.9 kB of archives.
After this operation, 167 kB of additional disk space will be used.
Get:1 http://us-east-1.ec2.archive.ubuntu.com/ubuntu/ raring/universe python-shelltoolbox all 0.2.1+bzr17-1 [13.5 kB]

2013-07-01 13:39:39,841 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] Execute pgrep glusterd
2013-07-01 13:39:39,831 unit:oscied-storage/1: hook.output INFO: Get:2 http://ppa.launchpad.net/juju/pkgs/ubuntu/ raring/main python-charmhelpers all 0.3+bzr178-3~raring1 [6410 B]

2013-07-01 13:39:39,863 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] Execute apt-get -y remove --purge glusterfs-server nfs-common
2013-07-01 13:39:40,182 unit:oscied-storage/1: hook.output INFO: Fetched 19.9 kB in 0s (80.5 kB/s)

2013-07-01 13:39:40,219 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] Execute apt-get -y remove --purge glusterfs-server nfs-common
2013-07-01 13:39:40,307 unit:oscied-storage/1: hook.output INFO: Selecting previously unselected package python-shelltoolbox.

2013-07-01 13:39:40,307 unit:oscied-storage/1: hook.output INFO: (Reading database ... 
2013-07-01 13:39:40,357 unit:oscied-storage/1: hook.output INFO: 61600 files and directories currently installed.)

2013-07-01 13:39:40,360 unit:oscied-storage/1: hook.output INFO: Unpacking python-shelltoolbox (from .../python-shelltoolbox_0.2.1+bzr17-1_all.deb) ...

2013-07-01 13:39:40,549 unit:oscied-storage/1: hook.output INFO: Selecting previously unselected package python-charmhelpers.

2013-07-01 13:39:40,562 unit:oscied-storage/1: hook.output INFO: Unpacking python-charmhelpers (from .../python-charmhelpers_0.3+bzr178-3~raring1_all.deb) ...

2013-07-01 13:39:40,496 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] Execute apt-get -y autoremove
2013-07-01 13:39:40,783 unit:oscied-storage/1: hook.output INFO: Setting up python-shelltoolbox (0.2.1+bzr17-1) ...

2013-07-01 13:39:40,903 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] Execute apt-get -y autoremove
2013-07-01 13:39:40,985 unit:oscied-storage/1: hook.output INFO: Setting up python-charmhelpers (0.3+bzr178-3~raring1) ...

2013-07-01 13:39:41,145 unit:oscied-storage/4: unit.hook.api INFO: [INFO] Upgrade system and install prerequisites
2013-07-01 13:39:41,474 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] Execute apt-get -y update
2013-07-01 13:39:41,629 unit:oscied-storage/3: unit.hook.api INFO: [INFO] Upgrade system and install prerequisites
2013-07-01 13:39:41,979 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] Execute apt-get -y update
2013-07-01 13:39:43,363 unit:oscied-storage/1: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:39:43,362 unit:oscied-transform/1: hook.output INFO: ctor --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/md5module.o build/temp.linux-x86_64-2.7/Modules/md5.o -o build/lib.linux-x86_64-2.7/_md5.so
    building '_sha256' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/sha256module.c -o build/temp.linux-x86_64-2.7/Modules/sha256module.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/sha256module.o -o build/lib.linux-x86_64-2.7/_sha256.so
    building '_sha512' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/sha512module.c -o build/temp.linux-x86_64-2.7/Modules/sha512module.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/sha512module.o -o build/lib.linux-x86_64-2.7/_sha512.so
    
    no previously-included directories found matching 'build'
    no previously-included directories found matching 'dist'
    no previously-included directories found matching 'RCS'
    no previously-included directories found matching 'CVS'
    no previously-included directories found matching '.svn'
  Running setup.py install for ipaddr
    
  Running setup.py install for mock
    
    warning: no files found matching '*.png' under directory 'docs'
    warning: no files found matching '*.css' under directory 'docs'
    warning: no files found matching '*.html' under directory 'docs'
    warning: no files found matching '*.js' under directory 'docs'
  Running setup.py install for passlib
    
    warning: no files found matching 'passlib/*.cfg'
    no previously-included directories found matching '*.komodoproject'
  Running setup.py install for pymongo
    building 'bson._cbson' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c bson/_cbsonmodule.c -o build/temp.linux-x86_64-2.7/bson/_cbsonmodule.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c bson/time64.c -o build/temp.linux-x86_64-2.7/bson/time64.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c bson/buffer.c -o build/temp.linux-x86_64-2.7/bson/buffer.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c bson/encoding_helpers.c -o build/temp.linux-x86_64-2.7/bson/encoding_helpers.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/bson/_cbsonmodule.o build/temp.linux-x86_64-2.7/bson/time64.o build/temp.linux-x86_64-2.7/bson/buffer.o build/temp.linux-x86_64-2.7/bson/encoding_helpers.o -o build/lib.linux-x86_64-2.7/bson/_cbson.so
    building 'pymongo._cmessage' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c pymongo/_cmessagemodule.c -o build/temp.linux-x86_64-2.7/pymongo/_cmessagemodule.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -f
2013-07-01 13:39:43,715 unit:oscied-storage/1: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:39:44,012 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] Execute apt-get -y upgrade
2013-07-01 13:39:44,049 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:39:44,385 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1850d30>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/1', 'public_address': 'ec2-107-21-196-203.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-47-249.ec2.internal', 'juju_log': <function callable_command at 0x1bcc0c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:39:44,594 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] Execute apt-get -y install ntp glusterfs-server nfs-common
2013-07-01 13:39:44,719 unit:oscied-storage/1: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:39:45,049 unit:oscied-storage/1: unit.hook.api INFO: [HOOK] Execute StorageHooks hook install
2013-07-01 13:39:45,379 unit:oscied-storage/1: unit.hook.api INFO: [INFO] Uninstall prerequisites, remove files & bricks and load default configuration
2013-07-01 13:39:45,569 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] Execute apt-get -y upgrade
2013-07-01 13:39:45,714 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] Execute pgrep glusterd
2013-07-01 13:39:46,061 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] Execute apt-get -y remove --purge glusterfs-server nfs-common
2013-07-01 13:39:46,220 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] Execute apt-get -y install ntp glusterfs-server nfs-common
2013-07-01 13:39:46,622 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] Execute apt-get -y upgrade
2013-07-01 13:39:46,701 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] Execute apt-get -y autoremove
2013-07-01 13:39:46,894 unit:oscied-transform/2: hook.output INFO: Requirement already up-to-date: argparse in /usr/lib/python2.7
Requirement already up-to-date: configobj in /usr/lib/python2.7/dist-packages
Downloading/unpacking celery
  Running setup.py egg_info for package celery
    Upgrade: no old version found.
    
    no previously-included directories found matching '*.pyc'
    no previously-included directories found matching '*.sw*'
Downloading/unpacking flask
  Running setup.py egg_info for package flask
    
    warning: no files found matching '*' under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
    warning: no previously-included files matching '*.pyc' found under directory 'tests'
    warning: no previously-included files matching '*.pyo' found under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'examples'
    warning: no previously-included files matching '*.pyo' found under directory 'examples'
    no previously-included directories found matching 'docs/_build'
    no previously-included directories found matching 'docs/_themes/.git'
Downloading/unpacking hashlib
  Running setup.py egg_info for package hashlib
    
    no previously-included directories found matching 'build'
    no previously-included directories found matching 'dist'
    no previously-included directories found matching 'RCS'
    no previously-included directories found matching 'CVS'
    no previously-included directories found matching '.svn'
Downloading/unpacking ipaddr
  Downloading ipaddr-2.1.10.tar.gz
  Running setup.py egg_info for package ipaddr
    
Downloading/unpacking mock
  Running setup.py egg_info for package mock
    
    warning: no files found matching '*.png' under directory 'docs'
    warning: no files found matching '*.css' under directory 'docs'
    warning: no files found matching '*.html' under directory 'docs'
    warning: no files found matching '*.js' under directory 'docs'
Downloading/unpacking passlib
  Running setup.py egg_info for package passlib
    
    warning: no files found matching 'passlib/*.cfg'
    no previously-included directories found matching '*.komodoproject'
Downloading/unpacking pymongo
  Running setup.py egg_info for package pymongo
    
Downloading/unpacking requests from https://pypi.python.org/packages/source/r/requests/requests-1.2.3.tar.gz#md5=adbd3f18445f7fe5e77f65c502e264fb
  Running setup.py egg_info for package requests
    
Downloading/unpacking six from https://pypi.python.org/packages/source/s/six/six-1.3.0.tar.gz#md5=ec47fe6070a8a64c802363d2c2b1e2ee
  Downloading six-1.3.0.tar.gz
  Running setup.py egg_info for package six
    
Downloading/unpacking billiard>=2.7.3.30,<3.0 (from celery)
  Running setup.py egg_info for package billiard
    
    warning: no files found matching '*.py' under directory 'Lib'
Downloading/unpacking python-dateutil>=1.5 from https://pypi.python.org/packages/source/p/python-dateutil/python-dateutil-2.1.tar.gz#md5=1534bb15cf311f07afaa3aacba1c028b (from celery)
  Running setup.py egg_info for package python-dateutil
    
Downloading/unpacking kombu>=2.5.12,<3.0 (from celery)
  Running setup.py egg_info for package kombu
    
Downloading/unpacking Werkzeug>=0.7 (from flask)
  Running setup.py egg_info for package Werkzeug
    
    warning: no files found matching '*' under directory 'werkzeug/debug/templates'
    warning: no files found matching '*' under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
    warning: no previously-included files matching '*.pyc' found under directory 'tests'
    warning: no previously-included files matching '*.pyo' found under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'examples'
    warning: no previously-included files matching '*.pyo' found under directory 'examples'
    no previousl
2013-07-01 13:39:47,321 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] Execute apt-get -y install ntp glusterfs-server nfs-common
2013-07-01 13:39:47,337 unit:oscied-storage/1: unit.hook.api INFO: [INFO] Upgrade system and install prerequisites
2013-07-01 13:39:47,439 unit:oscied-transform/1: hook.output INFO: PIC -Ibson -I/usr/include/python2.7 -c bson/buffer.c -o build/temp.linux-x86_64-2.7/bson/buffer.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/pymongo/_cmessagemodule.o build/temp.linux-x86_64-2.7/bson/buffer.o -o build/lib.linux-x86_64-2.7/pymongo/_cmessage.so
    
  Found existing installation: requests 1.1.0
    Uninstalling requests:
      Successfully uninstalled requests
  Running setup.py install for requests
    
  Found existing installation: six 1.2.0
    Uninstalling six:
      Successfully uninstalled six
  Running setup.py install for six
    
  Running setup.py install for billiard
    building '_billiard' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DHAVE_SEM_OPEN=1 -DHAVE_FD_TRANSFER=1 -DHAVE_SEM_TIMEDWAIT=1 -IModules/_billiard -I/usr/include/python2.7 -c Modules/_billiard/multiprocessing.c -o build/temp.linux-x86_64-2.7/Modules/_billiard/multiprocessing.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DHAVE_SEM_OPEN=1 -DHAVE_FD_TRANSFER=1 -DHAVE_SEM_TIMEDWAIT=1 -IModules/_billiard -I/usr/include/python2.7 -c Modules/_billiard/socket_connection.c -o build/temp.linux-x86_64-2.7/Modules/_billiard/socket_connection.o
    In file included from Modules/_billiard/socket_connection.c:229:0:
    Modules/_billiard/connection.h: In function 'Billiard_connection_recv_payload':
    Modules/_billiard/connection.h:387:15: warning: unused variable 'result' [-Wunused-variable]
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DHAVE_SEM_OPEN=1 -DHAVE_FD_TRANSFER=1 -DHAVE_SEM_TIMEDWAIT=1 -IModules/_billiard -I/usr/include/python2.7 -c Modules/_billiard/semaphore.c -o build/temp.linux-x86_64-2.7/Modules/_billiard/semaphore.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/_billiard/multiprocessing.o build/temp.linux-x86_64-2.7/Modules/_billiard/socket_connection.o build/temp.linux-x86_64-2.7/Modules/_billiard/semaphore.o -lrt -o build/lib.linux-x86_64-2.7/_billiard.so
    
    warning: no files found matching '*.py' under directory 'Lib'
  Found existing installation: python-dateutil 1.5
    Uninstalling python-dateutil:
      Successfully uninstalled python-dateutil
  Running setup.py install for python-dateutil
    
  Running setup.py install for kombu
    
  Running setup.py install for Werkzeug
    
    warning: no files found matching '*' under directory 'werkzeug/debug/templates'
    warning: no files found matching '*' under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
    warning: no previously-included files matching '*.pyc' found under directory 'tests'
    warning: no previously-included files matching '*.pyo' found under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'examples'
    warning: no previously-included files matching '*.pyo' found under directory 'examples'
    no previously-included directories found matching 'docs/_build'
  Running setup.py install for Jinja2
    
    warning: no files found matching '*' under directory 'custom_fixers'
    warning: no previously-included files matching '*' found under directory 'docs/_build'
    warning: no previously-included files matching '*.pyc' found under directory 'jinja2'
    warning: no previously-included files matching '*.pyc' fo
2013-07-01 13:39:47,667 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] Execute apt-get -y update
2013-07-01 13:39:48,650 unit:oscied-transform/1: hook.output INFO: und under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'jinja2'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
  Running setup.py install for itsdangerous
    
  Running setup.py install for anyjson
    
  Running setup.py install for amqp
    
  Running setup.py install for markupsafe
    
    building 'markupsafe._speedups' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c markupsafe/_speedups.c -o build/temp.linux-x86_64-2.7/markupsafe/_speedups.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/markupsafe/_speedups.o -o build/lib.linux-x86_64-2.7/markupsafe/_speedups.so
Successfully installed celery flask hashlib ipaddr mock passlib pymongo requests six billiard python-dateutil kombu Werkzeug Jinja2 itsdangerous anyjson amqp markupsafe
Cleaning up...

2013-07-01 13:39:49,828 unit:oscied-transform/1: hook.output INFO: gpg: 
2013-07-01 13:39:49,829 unit:oscied-transform/1: hook.output INFO: keyring `/tmp/tmpac5u_h/secring.gpg' created

2013-07-01 13:39:49,829 unit:oscied-transform/1: hook.output INFO: gpg: 
2013-07-01 13:39:49,830 unit:oscied-transform/1: hook.output INFO: keyring `/tmp/tmpac5u_h/pubring.gpg' created

2013-07-01 13:39:49,831 unit:oscied-transform/1: hook.output INFO: gpg: 
2013-07-01 13:39:49,832 unit:oscied-transform/1: hook.output INFO: requesting key C8068B11 from hkp server keyserver.ubuntu.com

2013-07-01 13:39:50,070 unit:oscied-transform/1: hook.output INFO: gpg: /tmp/tmpac5u_h/trustdb.gpg: trustdb created
gpg: key C8068B11: public key "Launchpad Ensemble PPA" imported
gpg: Total number processed: 1
gpg:               imported: 1  (RSA: 1)

2013-07-01 13:39:50,159 unit:oscied-transform/1: hook.output INFO: OK

2013-07-01 13:39:50,205 unit:oscied-transform/1: hook.output INFO: Reading package lists...
2013-07-01 13:39:51,645 unit:oscied-transform/2: hook.output INFO: y-included directories found matching 'docs/_build'
Downloading/unpacking Jinja2>=2.4 (from flask)
  Running setup.py egg_info for package Jinja2
    
    warning: no files found matching '*' under directory 'custom_fixers'
    warning: no previously-included files matching '*' found under directory 'docs/_build'
    warning: no previously-included files matching '*.pyc' found under directory 'jinja2'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'jinja2'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
Downloading/unpacking itsdangerous>=0.21 (from flask)
  Downloading itsdangerous-0.21.tar.gz
  Running setup.py egg_info for package itsdangerous
    
Downloading/unpacking anyjson>=0.3.3 (from kombu>=2.5.12,<3.0->celery)
  Downloading anyjson-0.3.3.tar.gz
  Running setup.py egg_info for package anyjson
    
Downloading/unpacking amqp>=1.0.12,<1.1.0 (from kombu>=2.5.12,<3.0->celery)
  Running setup.py egg_info for package amqp
    
Downloading/unpacking markupsafe (from Jinja2>=2.4->flask)
  Downloading MarkupSafe-0.18.tar.gz
  Running setup.py egg_info for package markupsafe
    
Installing collected packages: celery, flask, hashlib, ipaddr, mock, passlib, pymongo, requests, six, billiard, python-dateutil, kombu, Werkzeug, Jinja2, itsdangerous, anyjson, amqp, markupsafe
  Running setup.py install for celery
    Upgrade: no old version found.
    
    no previously-included directories found matching '*.pyc'
    no previously-included directories found matching '*.sw*'
    Installing celeryctl script to /usr/local/bin
    Installing celeryd script to /usr/local/bin
    Installing camqadm script to /usr/local/bin
    Installing celeryev script to /usr/local/bin
    Installing celery script to /usr/local/bin
    Installing celeryd-multi script to /usr/local/bin
    Installing celerybeat script to /usr/local/bin
  Running setup.py install for flask
    
    warning: no files found matching '*' under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
    warning: no previously-included files matching '*.pyc' found under directory 'tests'
    warning: no previously-included files matching '*.pyo' found under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'examples'
    warning: no previously-included files matching '*.pyo' found under directory 'examples'
    no previously-included directories found matching 'docs/_build'
    no previously-included directories found matching 'docs/_themes/.git'
  Running setup.py install for hashlib
    building '_sha' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/shamodule.c -o build/temp.linux-x86_64-2.7/Modules/shamodule.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/shamodule.o -o build/lib.linux-x86_64-2.7/_sha.so
    building '_md5' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/md5module.c -o build/temp.linux-x86_64-2.7/Modules/md5module.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/md5.c -o build/temp.linux-x86_64-2.7/Modules/md5.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-prote
2013-07-01 13:39:51,926 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] Execute apt-get -y upgrade
2013-07-01 13:39:52,565 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] Execute apt-get -y install ntp glusterfs-server nfs-common
2013-07-01 13:39:53,095 unit:oscied-transform/1: hook.output INFO: 

2013-07-01 13:39:53,106 unit:oscied-transform/1: hook.output INFO: Building dependency tree...
2013-07-01 13:39:53,260 unit:oscied-transform/1: hook.output INFO: 

2013-07-01 13:39:53,261 unit:oscied-transform/1: hook.output INFO: Reading state information...
2013-07-01 13:39:53,262 unit:oscied-transform/1: hook.output INFO: 

2013-07-01 13:39:53,368 unit:oscied-transform/1: hook.output INFO: The following extra packages will be installed:

2013-07-01 13:39:53,368 unit:oscied-transform/1: hook.output INFO:   python-shelltoolbox

2013-07-01 13:39:53,370 unit:oscied-transform/1: hook.output INFO: The following NEW packages will be installed:

2013-07-01 13:39:53,371 unit:oscied-transform/1: hook.output INFO:   python-charmhelpers python-shelltoolbox

2013-07-01 13:39:53,423 unit:oscied-transform/1: hook.output INFO: 0 upgraded, 2 newly installed, 0 to remove and 0 not upgraded.
Need to get 19.9 kB of archives.
After this operation, 167 kB of additional disk space will be used.
Get:1 http://us-east-1.ec2.archive.ubuntu.com/ubuntu/ raring/universe python-shelltoolbox all 0.2.1+bzr17-1 [13.5 kB]

2013-07-01 13:39:53,564 unit:oscied-transform/1: hook.output INFO: Get:2 http://ppa.launchpad.net/juju/pkgs/ubuntu/ raring/main python-charmhelpers all 0.3+bzr178-3~raring1 [6410 B]

2013-07-01 13:39:53,906 unit:oscied-transform/1: hook.output INFO: Fetched 19.9 kB in 0s (82.4 kB/s)

2013-07-01 13:39:54,028 unit:oscied-transform/1: hook.output INFO: Selecting previously unselected package python-shelltoolbox.

2013-07-01 13:39:54,028 unit:oscied-transform/1: hook.output INFO: (Reading database ... 
2013-07-01 13:39:54,076 unit:oscied-transform/1: hook.output INFO: 61600 files and directories currently installed.)

2013-07-01 13:39:54,080 unit:oscied-transform/1: hook.output INFO: Unpacking python-shelltoolbox (from .../python-shelltoolbox_0.2.1+bzr17-1_all.deb) ...

2013-07-01 13:39:54,273 unit:oscied-transform/1: hook.output INFO: Selecting previously unselected package python-charmhelpers.

2013-07-01 13:39:54,286 unit:oscied-transform/1: hook.output INFO: Unpacking python-charmhelpers (from .../python-charmhelpers_0.3+bzr178-3~raring1_all.deb) ...

2013-07-01 13:39:54,934 unit:oscied-transform/1: hook.output INFO: Setting up python-shelltoolbox (0.2.1+bzr17-1) ...

2013-07-01 13:39:55,134 unit:oscied-transform/1: hook.output INFO: Setting up python-charmhelpers (0.3+bzr178-3~raring1) ...

2013-07-01 13:39:56,244 unit:oscied-transform/2: hook.output INFO: ctor --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/md5module.o build/temp.linux-x86_64-2.7/Modules/md5.o -o build/lib.linux-x86_64-2.7/_md5.so
    building '_sha256' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/sha256module.c -o build/temp.linux-x86_64-2.7/Modules/sha256module.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/sha256module.o -o build/lib.linux-x86_64-2.7/_sha256.so
    building '_sha512' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c Modules/sha512module.c -o build/temp.linux-x86_64-2.7/Modules/sha512module.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/sha512module.o -o build/lib.linux-x86_64-2.7/_sha512.so
    
    no previously-included directories found matching 'build'
    no previously-included directories found matching 'dist'
    no previously-included directories found matching 'RCS'
    no previously-included directories found matching 'CVS'
    no previously-included directories found matching '.svn'
  Running setup.py install for ipaddr
    
  Running setup.py install for mock
    
    warning: no files found matching '*.png' under directory 'docs'
    warning: no files found matching '*.css' under directory 'docs'
    warning: no files found matching '*.html' under directory 'docs'
    warning: no files found matching '*.js' under directory 'docs'
  Running setup.py install for passlib
    
    warning: no files found matching 'passlib/*.cfg'
    no previously-included directories found matching '*.komodoproject'
  Running setup.py install for pymongo
    building 'bson._cbson' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c bson/_cbsonmodule.c -o build/temp.linux-x86_64-2.7/bson/_cbsonmodule.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c bson/time64.c -o build/temp.linux-x86_64-2.7/bson/time64.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c bson/buffer.c -o build/temp.linux-x86_64-2.7/bson/buffer.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c bson/encoding_helpers.c -o build/temp.linux-x86_64-2.7/bson/encoding_helpers.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/bson/_cbsonmodule.o build/temp.linux-x86_64-2.7/bson/time64.o build/temp.linux-x86_64-2.7/bson/buffer.o build/temp.linux-x86_64-2.7/bson/encoding_helpers.o -o build/lib.linux-x86_64-2.7/bson/_cbson.so
    building 'pymongo._cmessage' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -Ibson -I/usr/include/python2.7 -c pymongo/_cmessagemodule.c -o build/temp.linux-x86_64-2.7/pymongo/_cmessagemodule.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -f
2013-07-01 13:39:57,006 unit:oscied-transform/1: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:39:57,360 unit:oscied-transform/1: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:39:57,694 unit:oscied-transform/1: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:39:58,029 unit:oscied-transform/1: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-transform/1', 'public_address': 'ec2-50-16-38-137.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-152-161-89.ec2.internal', 'juju_log': <function callable_command at 0x18432a8>, 'config': {u'storage_mountpoint': u'', 'verbose': True, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'transform_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 1, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u''}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media transform. Contains ffmpeg & x264.\nCan be scaled to multiple instances.\n", 'name': 'oscied-transform', 'requires': {'storage': {'interface': 'mount'}, 'transform': {'interface': 'subordinate'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Encoder"}}
2013-07-01 13:39:58,360 unit:oscied-transform/1: unit.hook.api INFO: --> Entering TransformHooks.py
2013-07-01 13:39:58,690 unit:oscied-transform/1: unit.hook.api INFO: [HOOK] Execute TransformHooks hook install
2013-07-01 13:39:59,021 unit:oscied-transform/1: unit.hook.api INFO: [INFO] Uninstall prerequisities, unregister service and load default configuration
2013-07-01 13:39:59,356 unit:oscied-transform/1: unit.hook.api INFO: [DEBUG] Execute ['screen', '-ls', 'Transform']
2013-07-01 13:39:59,544 unit:oscied-storage/2: unit.hook.api INFO: [INFO] Restart network time protocol service
2013-07-01 13:39:59,717 unit:oscied-transform/1: unit.hook.api INFO: [INFO] Unregister shared storage
2013-07-01 13:39:59,828 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] Execute service ntp restart
2013-07-01 13:40:00,074 unit:oscied-transform/1: unit.hook.api INFO: [REMARK] Shared storage already unmounted !
2013-07-01 13:40:00,415 unit:oscied-transform/1: unit.hook.api INFO: [INFO] Unregister the Orchestrator
2013-07-01 13:40:00,456 unit:oscied-transform/2: hook.output INFO: PIC -Ibson -I/usr/include/python2.7 -c bson/buffer.c -o build/temp.linux-x86_64-2.7/bson/buffer.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/pymongo/_cmessagemodule.o build/temp.linux-x86_64-2.7/bson/buffer.o -o build/lib.linux-x86_64-2.7/pymongo/_cmessage.so
    
  Found existing installation: requests 1.1.0
    Uninstalling requests:
      Successfully uninstalled requests
  Running setup.py install for requests
    
  Found existing installation: six 1.2.0
    Uninstalling six:
      Successfully uninstalled six
  Running setup.py install for six
    
  Running setup.py install for billiard
    building '_billiard' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DHAVE_SEM_OPEN=1 -DHAVE_FD_TRANSFER=1 -DHAVE_SEM_TIMEDWAIT=1 -IModules/_billiard -I/usr/include/python2.7 -c Modules/_billiard/multiprocessing.c -o build/temp.linux-x86_64-2.7/Modules/_billiard/multiprocessing.o
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DHAVE_SEM_OPEN=1 -DHAVE_FD_TRANSFER=1 -DHAVE_SEM_TIMEDWAIT=1 -IModules/_billiard -I/usr/include/python2.7 -c Modules/_billiard/socket_connection.c -o build/temp.linux-x86_64-2.7/Modules/_billiard/socket_connection.o
    In file included from Modules/_billiard/socket_connection.c:229:0:
    Modules/_billiard/connection.h: In function 'Billiard_connection_recv_payload':
    Modules/_billiard/connection.h:387:15: warning: unused variable 'result' [-Wunused-variable]
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -DHAVE_SEM_OPEN=1 -DHAVE_FD_TRANSFER=1 -DHAVE_SEM_TIMEDWAIT=1 -IModules/_billiard -I/usr/include/python2.7 -c Modules/_billiard/semaphore.c -o build/temp.linux-x86_64-2.7/Modules/_billiard/semaphore.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/Modules/_billiard/multiprocessing.o build/temp.linux-x86_64-2.7/Modules/_billiard/socket_connection.o build/temp.linux-x86_64-2.7/Modules/_billiard/semaphore.o -lrt -o build/lib.linux-x86_64-2.7/_billiard.so
    
    warning: no files found matching '*.py' under directory 'Lib'
  Found existing installation: python-dateutil 1.5
    Uninstalling python-dateutil:
      Successfully uninstalled python-dateutil
  Running setup.py install for python-dateutil
    
  Running setup.py install for kombu
    
  Running setup.py install for Werkzeug
    
    warning: no files found matching '*' under directory 'werkzeug/debug/templates'
    warning: no files found matching '*' under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
    warning: no previously-included files matching '*.pyc' found under directory 'tests'
    warning: no previously-included files matching '*.pyo' found under directory 'tests'
    warning: no previously-included files matching '*.pyc' found under directory 'examples'
    warning: no previously-included files matching '*.pyo' found under directory 'examples'
    no previously-included directories found matching 'docs/_build'
  Running setup.py install for Jinja2
    
    warning: no files found matching '*' under directory 'custom_fixers'
    warning: no previously-included files matching '*' found under directory 'docs/_build'
    warning: no previously-included files matching '*.pyc' found under directory 'jinja2'
    warning: no previously-included files matching '*.pyc' fo
2013-07-01 13:40:00,756 unit:oscied-transform/1: unit.hook.api INFO: [DEBUG] Execute apt-get -y remove --purge glusterfs-client ffmpeg libavcodec-dev nfs-common ntp libavutil-dev libavcodec-extra-53 libavformat-dev libswscale-dev x264 zlib1g-dev libavdevice-dev
2013-07-01 13:40:01,430 unit:oscied-transform/1: unit.hook.api INFO: [DEBUG] Execute apt-get -y autoremove
2013-07-01 13:40:01,891 unit:oscied-transform/2: hook.output INFO: und under directory 'docs'
    warning: no previously-included files matching '*.pyo' found under directory 'jinja2'
    warning: no previously-included files matching '*.pyo' found under directory 'docs'
  Running setup.py install for itsdangerous
    
  Running setup.py install for anyjson
    
  Running setup.py install for amqp
    
  Running setup.py install for markupsafe
    
    building 'markupsafe._speedups' extension
    x86_64-linux-gnu-gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I/usr/include/python2.7 -c markupsafe/_speedups.c -o build/temp.linux-x86_64-2.7/markupsafe/_speedups.o
    x86_64-linux-gnu-gcc -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions -Wl,-Bsymbolic-functions -Wl,-z,relro -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -D_FORTIFY_SOURCE=2 -g -fstack-protector --param=ssp-buffer-size=4 -Wformat -Werror=format-security build/temp.linux-x86_64-2.7/markupsafe/_speedups.o -o build/lib.linux-x86_64-2.7/markupsafe/_speedups.so
Successfully installed celery flask hashlib ipaddr mock passlib pymongo requests six billiard python-dateutil kombu Werkzeug Jinja2 itsdangerous anyjson amqp markupsafe
Cleaning up...

2013-07-01 13:40:02,042 unit:oscied-storage/4: unit.hook.api INFO: [INFO] Restart network time protocol service
2013-07-01 13:40:02,196 unit:oscied-transform/1: unit.hook.api INFO: [INFO] Upgrade system and install prerequisites
2013-07-01 13:40:02,383 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] Execute service ntp restart
2013-07-01 13:40:02,493 unit:oscied-storage/2: unit.hook.api INFO: [INFO] Create and start a replica=1 volume medias_volume_2 with 1 brick
2013-07-01 13:40:02,543 unit:oscied-transform/1: unit.hook.api INFO: [DEBUG] Execute apt-add-repository -y ppa:jon-severinsson/ffmpeg
2013-07-01 13:40:02,810 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] Execute gluster volume create medias_volume_2  ip-10-202-41-54.ec2.internal:/exp2
2013-07-01 13:40:03,055 unit:oscied-transform/2: hook.output INFO: gpg: 
2013-07-01 13:40:03,055 unit:oscied-transform/2: hook.output INFO: keyring `/tmp/tmpvsef9l/secring.gpg' created

2013-07-01 13:40:03,056 unit:oscied-transform/2: hook.output INFO: gpg: 
2013-07-01 13:40:03,057 unit:oscied-transform/2: hook.output INFO: keyring `/tmp/tmpvsef9l/pubring.gpg' created

2013-07-01 13:40:03,058 unit:oscied-transform/2: hook.output INFO: gpg: 
2013-07-01 13:40:03,058 unit:oscied-transform/2: hook.output INFO: requesting key C8068B11 from hkp server keyserver.ubuntu.com

2013-07-01 13:40:03,252 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] Execute gluster volume start medias_volume_2 
2013-07-01 13:40:03,300 unit:oscied-transform/2: hook.output INFO: gpg: 
2013-07-01 13:40:03,302 unit:oscied-transform/2: hook.output INFO: /tmp/tmpvsef9l/trustdb.gpg: trustdb created
gpg: key C8068B11: public key "Launchpad Ensemble PPA" imported
gpg: Total number processed: 1
gpg:               imported: 1  (RSA: 1)

2013-07-01 13:40:03,393 unit:oscied-transform/2: hook.output INFO: OK

2013-07-01 13:40:03,440 unit:oscied-transform/2: hook.output INFO: Reading package lists...
2013-07-01 13:40:03,900 unit:oscied-storage/3: unit.hook.api INFO: [INFO] Restart network time protocol service
2013-07-01 13:40:04,164 unit:oscied-transform/1: unit.hook.api INFO: [DEBUG] Execute apt-get -y update
2013-07-01 13:40:04,245 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] Execute service ntp restart
2013-07-01 13:40:04,231 unit:oscied-publisher/1: unit.hook.api INFO: [INFO] Restart network time protocol service
2013-07-01 13:40:04,333 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] Execute gluster volume info medias_volume_2 
2013-07-01 13:40:04,586 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] Execute service ntp restart
2013-07-01 13:40:04,736 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] Volume infos stdout: '\nVolume Name: medias_volume_2\nType: Distribute\nStatus: Started\nNumber of Bricks: 1\nTransport-type: tcp\nBricks:\nBrick1: ip-10-202-41-54.ec2.internal:/exp2\n'
2013-07-01 13:40:04,801 unit:oscied-storage/4: unit.hook.api INFO: [INFO] Create and start a replica=1 volume medias_volume_4 with 1 brick
2013-07-01 13:40:05,013 unit:oscied-storage/2: unit.hook.api INFO: [INFO] {'status': 'Started', 'name': 'medias_volume_2', 'bricks': ['ip-10-202-41-54.ec2.internal:/exp2'], 'auth_allow': '', 'type': 'Distribute', 'transport': 'tcp'}
2013-07-01 13:40:05,133 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] Execute gluster volume create medias_volume_4  ip-10-164-73-202.ec2.internal:/exp4
2013-07-01 13:40:05,286 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] Execute gluster volume rebalance medias_volume_2 status
2013-07-01 13:40:05,594 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] Execute gluster volume start medias_volume_4 
2013-07-01 13:40:05,641 unit:oscied-storage/2: unit.hook.api INFO: [INFO] nothing to rebalance on volume medias_volume_2

2013-07-01 13:40:05,916 unit:oscied-storage/2: unit.hook.api INFO: [INFO] Expose GlusterFS Server service
2013-07-01 13:40:06,227 unit:oscied-storage/2: unit.hook.api DEBUG: opened 111/tcp
2013-07-01 13:40:06,368 unit:oscied-transform/1: unit.hook.api INFO: [DEBUG] Execute apt-get -y upgrade
2013-07-01 13:40:06,418 unit:oscied-transform/2: hook.output INFO: 

2013-07-01 13:40:06,429 unit:oscied-transform/2: hook.output INFO: Building dependency tree...
2013-07-01 13:40:06,529 unit:oscied-storage/2: unit.hook.api DEBUG: opened 24007/tcp
2013-07-01 13:40:06,685 unit:oscied-storage/3: unit.hook.api INFO: [INFO] Create and start a replica=1 volume medias_volume_3 with 1 brick
2013-07-01 13:40:06,612 unit:oscied-transform/2: hook.output INFO: 

2013-07-01 13:40:06,613 unit:oscied-transform/2: hook.output INFO: Reading state information...
2013-07-01 13:40:06,614 unit:oscied-transform/2: hook.output INFO: 

2013-07-01 13:40:06,740 unit:oscied-transform/2: hook.output INFO: The following extra packages will be installed:

2013-07-01 13:40:06,740 unit:oscied-transform/2: hook.output INFO:   python-shelltoolbox

2013-07-01 13:40:06,743 unit:oscied-transform/2: hook.output INFO: The following NEW packages will be installed:

2013-07-01 13:40:06,743 unit:oscied-transform/2: hook.output INFO:   python-charmhelpers python-shelltoolbox

2013-07-01 13:40:06,835 unit:oscied-storage/2: unit.hook.api DEBUG: opened 24009/tcp
2013-07-01 13:40:06,878 unit:oscied-storage/1: unit.hook.api INFO: [INFO] Restart network time protocol service
2013-07-01 13:40:06,814 unit:oscied-transform/2: hook.output INFO: 0 upgraded, 2 newly installed, 0 to remove and 0 not upgraded.
Need to get 19.9 kB of archives.
After this operation, 167 kB of additional disk space will be used.
Get:1 http://us-east-1.ec2.archive.ubuntu.com/ubuntu/ raring/universe python-shelltoolbox all 0.2.1+bzr17-1 [13.5 kB]

2013-07-01 13:40:06,934 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] Execute gluster volume info medias_volume_4 
2013-07-01 13:40:07,043 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] Execute gluster volume create medias_volume_3  ip-10-164-37-115.ec2.internal:/exp3
2013-07-01 13:40:06,956 unit:oscied-transform/2: hook.output INFO: Get:2 http://ppa.launchpad.net/juju/pkgs/ubuntu/ raring/main python-charmhelpers all 0.3+bzr178-3~raring1 [6410 B]

2013-07-01 13:40:07,017 unit:oscied-publisher/1: unit.hook.api INFO: [INFO] Compile and install Apache H.264 streaming module
2013-07-01 13:40:07,164 unit:oscied-storage/2: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x2d42f40>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:40:07,219 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] Execute service ntp restart
2013-07-01 13:40:07,322 unit:oscied-transform/2: hook.output INFO: Fetched 19.9 kB in 0s (74.2 kB/s)

2013-07-01 13:40:07,385 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] Volume infos stdout: '\nVolume Name: medias_volume_4\nType: Distribute\nStatus: Started\nNumber of Bricks: 1\nTransport-type: tcp\nBricks:\nBrick1: ip-10-164-73-202.ec2.internal:/exp4\n'
2013-07-01 13:40:07,404 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] Execute which apxs2
2013-07-01 13:40:07,412 unit:oscied-transform/2: hook.output INFO: Selecting previously unselected package python-shelltoolbox.

2013-07-01 13:40:07,413 unit:oscied-transform/2: hook.output INFO: (Reading database ... 
2013-07-01 13:40:07,549 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] Execute gluster volume start medias_volume_3 
2013-07-01 13:40:07,464 unit:oscied-transform/2: hook.output INFO: 61600 files and directories currently installed.)

2013-07-01 13:40:07,535 unit:oscied-storage/2: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:40:07,469 unit:oscied-transform/2: hook.output INFO: Unpacking python-shelltoolbox (from .../python-shelltoolbox_0.2.1+bzr17-1_all.deb) ...

2013-07-01 13:40:07,615 unit:oscied-storage/2: hook.output DEBUG: hook install exited, exit code 0.
2013-07-01 13:40:07,615 unit:oscied-storage/2: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-2/charm/hooks/install
2013-07-01 13:40:07,630 unit:oscied-storage/2: statemachine DEBUG: unitworkflowstate: transition complete install (state installed) {}
2013-07-01 13:40:07,639 unit:oscied-storage/2: statemachine DEBUG: unitworkflowstate: transition start (installed -> started) {}
2013-07-01 13:40:07,640 unit:oscied-storage/2: statemachine DEBUG: unitworkflowstate:  execute action do_start
2013-07-01 13:40:07,640 unit:oscied-storage/2: unit.lifecycle DEBUG: pre-start acquire, running:False
2013-07-01 13:40:07,640 unit:oscied-storage/2: unit.lifecycle DEBUG: start running, unit lifecycle
2013-07-01 13:40:07,600 unit:oscied-transform/2: hook.output INFO: Selecting previously unselected package python-charmhelpers.

2013-07-01 13:40:07,616 unit:oscied-transform/2: hook.output INFO: Unpacking python-charmhelpers (from .../python-charmhelpers_0.3+bzr178-3~raring1_all.deb) ...

2013-07-01 13:40:07,740 unit:oscied-storage/2: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:2
2013-07-01 13:40:07,749 unit:oscied-storage/2: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:3
2013-07-01 13:40:07,719 unit:oscied-storage/4: unit.hook.api INFO: [INFO] {'status': 'Started', 'name': 'medias_volume_4', 'bricks': ['ip-10-164-73-202.ec2.internal:/exp4'], 'auth_allow': '', 'type': 'Distribute', 'transport': 'tcp'}
2013-07-01 13:40:07,758 unit:oscied-storage/2: juju.state.hook DEBUG: Ignoring partially constructed relation: peer:0
2013-07-01 13:40:07,763 unit:oscied-storage/2: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:1
2013-07-01 13:40:07,767 unit:oscied-storage/2: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:4
2013-07-01 13:40:07,767 unit:oscied-storage/2: hook.output DEBUG: Cached relation hook contexts: []
2013-07-01 13:40:07,782 unit:oscied-storage/2: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-2/charm/hooks/config-changed
2013-07-01 13:40:07,757 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] Execute ./configure --with-apxs=/usr/bin/apxs2

2013-07-01 13:40:07,825 unit:oscied-transform/2: hook.output INFO: Setting up python-shelltoolbox (0.2.1+bzr17-1) ...

2013-07-01 13:40:08,003 unit:oscied-transform/2: hook.output INFO: Setting up python-charmhelpers (0.3+bzr178-3~raring1) ...

2013-07-01 13:40:08,049 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] Execute gluster volume rebalance medias_volume_4 status
2013-07-01 13:40:08,473 unit:oscied-storage/4: unit.hook.api INFO: [INFO] nothing to rebalance on volume medias_volume_4

2013-07-01 13:40:08,665 unit:oscied-storage/2: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:08,803 unit:oscied-storage/4: unit.hook.api INFO: [INFO] Expose GlusterFS Server service
2013-07-01 13:40:08,986 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] Execute gluster volume info medias_volume_3 
2013-07-01 13:40:09,005 unit:oscied-storage/2: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:09,161 unit:oscied-storage/4: unit.hook.api DEBUG: opened 111/tcp
2013-07-01 13:40:09,317 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:09,433 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] Volume infos stdout: '\nVolume Name: medias_volume_3\nType: Distribute\nStatus: Started\nNumber of Bricks: 1\nTransport-type: tcp\nBricks:\nBrick1: ip-10-164-37-115.ec2.internal:/exp3\n'
2013-07-01 13:40:09,517 unit:oscied-storage/4: unit.hook.api DEBUG: opened 24007/tcp
2013-07-01 13:40:09,637 unit:oscied-storage/1: unit.hook.api INFO: [INFO] Create and start a replica=1 volume medias_volume_1 with 1 brick
2013-07-01 13:40:09,649 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0xddfb90>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/2', 'public_address': 'ec2-50-16-110-129.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-202-41-54.ec2.internal', 'juju_log': <function callable_command at 0x13ae0c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:40:09,777 unit:oscied-storage/3: unit.hook.api INFO: [INFO] {'status': 'Started', 'name': 'medias_volume_3', 'bricks': ['ip-10-164-37-115.ec2.internal:/exp3'], 'auth_allow': '', 'type': 'Distribute', 'transport': 'tcp'}
2013-07-01 13:40:09,880 unit:oscied-storage/4: unit.hook.api DEBUG: opened 24009/tcp
2013-07-01 13:40:09,969 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] Execute gluster volume create medias_volume_1  ip-10-164-47-249.ec2.internal:/exp1
2013-07-01 13:40:09,965 unit:oscied-storage/2: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:40:09,974 unit:oscied-transform/2: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:10,125 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] Execute gluster volume rebalance medias_volume_3 status
2013-07-01 13:40:10,170 unit:oscied-transform/1: unit.hook.api INFO: [DEBUG] Execute apt-get -y install glusterfs-client ffmpeg libavcodec-dev nfs-common ntp libavutil-dev libavcodec-extra-53 libavformat-dev libswscale-dev x264 zlib1g-dev libavdevice-dev
2013-07-01 13:40:10,222 unit:oscied-storage/4: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1374d30>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:40:10,270 unit:oscied-storage/2: unit.hook.api INFO: [HOOK] Execute StorageHooks hook config-changed
2013-07-01 13:40:10,338 unit:oscied-transform/2: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:10,442 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] Execute gluster volume start medias_volume_1 
2013-07-01 13:40:10,577 unit:oscied-storage/3: unit.hook.api INFO: [INFO] nothing to rebalance on volume medias_volume_3

2013-07-01 13:40:10,600 unit:oscied-storage/2: unit.hook.api INFO: [INFO] Set volume medias_volume_2 allowed clients IP list to *
2013-07-01 13:40:10,569 unit:oscied-storage/4: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:40:10,620 unit:oscied-storage/4: hook.output DEBUG: hook install exited, exit code 0.
2013-07-01 13:40:10,620 unit:oscied-storage/4: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-4/charm/hooks/install
2013-07-01 13:40:10,635 unit:oscied-storage/4: statemachine DEBUG: unitworkflowstate: transition complete install (state installed) {}
2013-07-01 13:40:10,662 unit:oscied-storage/4: statemachine DEBUG: unitworkflowstate: transition start (installed -> started) {}
2013-07-01 13:40:10,662 unit:oscied-storage/4: statemachine DEBUG: unitworkflowstate:  execute action do_start
2013-07-01 13:40:10,663 unit:oscied-storage/4: unit.lifecycle DEBUG: pre-start acquire, running:False
2013-07-01 13:40:10,663 unit:oscied-storage/4: unit.lifecycle DEBUG: start running, unit lifecycle
2013-07-01 13:40:10,706 unit:oscied-storage/4: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:2
2013-07-01 13:40:10,717 unit:oscied-storage/4: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:3
2013-07-01 13:40:10,720 unit:oscied-storage/4: juju.state.hook DEBUG: Ignoring partially constructed relation: peer:0
2013-07-01 13:40:10,725 unit:oscied-storage/4: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:1
2013-07-01 13:40:10,728 unit:oscied-storage/4: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:4
2013-07-01 13:40:10,729 unit:oscied-storage/4: hook.output DEBUG: Cached relation hook contexts: []
2013-07-01 13:40:10,699 unit:oscied-transform/2: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:10,745 unit:oscied-storage/4: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-4/charm/hooks/config-changed
2013-07-01 13:40:10,922 unit:oscied-storage/3: unit.hook.api INFO: [INFO] Expose GlusterFS Server service
2013-07-01 13:40:11,022 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] Execute gluster volume set medias_volume_2 auth.allow "*"
2013-07-01 13:40:11,049 unit:oscied-transform/2: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-transform/2', 'public_address': 'ec2-54-235-228-173.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-154-190-123.ec2.internal', 'juju_log': <function callable_command at 0x31ab2a8>, 'config': {u'storage_mountpoint': u'', 'verbose': True, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'transform_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 1, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u''}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media transform. Contains ffmpeg & x264.\nCan be scaled to multiple instances.\n", 'name': 'oscied-transform', 'requires': {'storage': {'interface': 'mount'}, 'transform': {'interface': 'subordinate'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Encoder"}}
2013-07-01 13:40:11,301 unit:oscied-storage/3: unit.hook.api DEBUG: opened 111/tcp
2013-07-01 13:40:11,394 unit:oscied-transform/2: unit.hook.api INFO: --> Entering TransformHooks.py
2013-07-01 13:40:11,680 unit:oscied-storage/3: unit.hook.api DEBUG: opened 24007/tcp
2013-07-01 13:40:11,629 unit:oscied-storage/4: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:11,804 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] Execute gluster volume info medias_volume_1 
2013-07-01 13:40:11,744 unit:oscied-transform/2: unit.hook.api INFO: [HOOK] Execute TransformHooks hook install
2013-07-01 13:40:12,065 unit:oscied-storage/3: unit.hook.api DEBUG: opened 24009/tcp
2013-07-01 13:40:11,985 unit:oscied-storage/4: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:12,098 unit:oscied-transform/2: unit.hook.api INFO: [INFO] Uninstall prerequisities, unregister service and load default configuration
2013-07-01 13:40:12,262 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] Volume infos stdout: '\nVolume Name: medias_volume_1\nType: Distribute\nStatus: Started\nNumber of Bricks: 1\nTransport-type: tcp\nBricks:\nBrick1: ip-10-164-47-249.ec2.internal:/exp1\n'
2013-07-01 13:40:12,424 unit:oscied-storage/3: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1c170b0>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:40:12,339 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:12,447 unit:oscied-transform/2: unit.hook.api INFO: [DEBUG] Execute ['screen', '-ls', 'Transform']
2013-07-01 13:40:12,592 unit:oscied-storage/1: unit.hook.api INFO: [INFO] {'status': 'Started', 'name': 'medias_volume_1', 'bricks': ['ip-10-164-47-249.ec2.internal:/exp1'], 'auth_allow': '', 'type': 'Distribute', 'transport': 'tcp'}
2013-07-01 13:40:12,636 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] Execute gluster volume info medias_volume_2 
2013-07-01 13:40:12,675 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0xf2bb90>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/4', 'public_address': 'ec2-54-242-176-247.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-73-202.ec2.internal', 'juju_log': <function callable_command at 0x14fa0c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:40:12,772 unit:oscied-storage/3: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:40:12,821 unit:oscied-storage/3: hook.output DEBUG: hook install exited, exit code 0.
2013-07-01 13:40:12,822 unit:oscied-storage/3: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-3/charm/hooks/install
2013-07-01 13:40:12,835 unit:oscied-storage/3: statemachine DEBUG: unitworkflowstate: transition complete install (state installed) {}
2013-07-01 13:40:12,843 unit:oscied-storage/3: statemachine DEBUG: unitworkflowstate: transition start (installed -> started) {}
2013-07-01 13:40:12,844 unit:oscied-storage/3: statemachine DEBUG: unitworkflowstate:  execute action do_start
2013-07-01 13:40:12,844 unit:oscied-storage/3: unit.lifecycle DEBUG: pre-start acquire, running:False
2013-07-01 13:40:12,844 unit:oscied-storage/3: unit.lifecycle DEBUG: start running, unit lifecycle
2013-07-01 13:40:12,891 unit:oscied-storage/3: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:2
2013-07-01 13:40:12,895 unit:oscied-storage/3: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:3
2013-07-01 13:40:12,898 unit:oscied-storage/3: juju.state.hook DEBUG: Ignoring partially constructed relation: peer:0
2013-07-01 13:40:12,901 unit:oscied-storage/3: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:1
2013-07-01 13:40:12,903 unit:oscied-storage/3: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:4
2013-07-01 13:40:12,903 unit:oscied-storage/3: hook.output DEBUG: Cached relation hook contexts: []
2013-07-01 13:40:12,918 unit:oscied-storage/3: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-3/charm/hooks/config-changed
2013-07-01 13:40:12,812 unit:oscied-transform/2: unit.hook.api INFO: [INFO] Unregister shared storage
2013-07-01 13:40:12,920 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] Execute gluster volume rebalance medias_volume_1 status
2013-07-01 13:40:13,005 unit:oscied-storage/4: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:40:13,088 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] Volume infos stdout: '\nVolume Name: medias_volume_2\nType: Distribute\nStatus: Started\nNumber of Bricks: 1\nTransport-type: tcp\nBricks:\nBrick1: ip-10-202-41-54.ec2.internal:/exp2\nOptions Reconfigured:\nauth.allow: *\n'
2013-07-01 13:40:13,169 unit:oscied-transform/2: unit.hook.api INFO: [REMARK] Shared storage already unmounted !
2013-07-01 13:40:13,346 unit:oscied-storage/1: unit.hook.api INFO: [INFO] nothing to rebalance on volume medias_volume_1

2013-07-01 13:40:13,334 unit:oscied-storage/4: unit.hook.api INFO: [HOOK] Execute StorageHooks hook config-changed
2013-07-01 13:40:13,438 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] Execute gluster volume info medias_volume_2 
2013-07-01 13:40:13,510 unit:oscied-transform/2: unit.hook.api INFO: [INFO] Unregister the Orchestrator
2013-07-01 13:40:13,676 unit:oscied-storage/1: unit.hook.api INFO: [INFO] Expose GlusterFS Server service
2013-07-01 13:40:13,661 unit:oscied-storage/4: unit.hook.api INFO: [INFO] Set volume medias_volume_4 allowed clients IP list to *
2013-07-01 13:40:13,886 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] Volume infos stdout: '\nVolume Name: medias_volume_2\nType: Distribute\nStatus: Started\nNumber of Bricks: 1\nTransport-type: tcp\nBricks:\nBrick1: ip-10-202-41-54.ec2.internal:/exp2\nOptions Reconfigured:\nauth.allow: *\n'
2013-07-01 13:40:13,946 unit:oscied-storage/3: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:13,851 unit:oscied-transform/2: unit.hook.api INFO: [DEBUG] Execute apt-get -y remove --purge glusterfs-client ffmpeg libavcodec-dev nfs-common ntp libavutil-dev libavcodec-extra-53 libavformat-dev libswscale-dev x264 zlib1g-dev libavdevice-dev
2013-07-01 13:40:13,998 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] Execute gluster volume set medias_volume_4 auth.allow "*"
2013-07-01 13:40:14,244 unit:oscied-storage/2: unit.hook.api INFO: [INFO] {'status': 'Started', 'name': 'medias_volume_2', 'bricks': ['ip-10-202-41-54.ec2.internal:/exp2'], 'auth_allow': '*', 'type': 'Distribute', 'transport': 'tcp'}
2013-07-01 13:40:14,326 unit:oscied-storage/1: unit.hook.api DEBUG: opened 111/tcp
2013-07-01 13:40:14,397 unit:oscied-storage/3: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:14,551 unit:oscied-storage/2: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0xddfb90>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:40:14,541 unit:oscied-transform/2: unit.hook.api INFO: [DEBUG] Execute apt-get -y autoremove
2013-07-01 13:40:14,692 unit:oscied-storage/1: unit.hook.api DEBUG: opened 24007/tcp
2013-07-01 13:40:14,748 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:14,855 unit:oscied-storage/2: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:40:14,933 unit:oscied-storage/2: hook.output DEBUG: hook config-changed exited, exit code 0.
2013-07-01 13:40:14,934 unit:oscied-storage/2: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-2/charm/hooks/config-changed
2013-07-01 13:40:14,979 unit:oscied-storage/2: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:2
2013-07-01 13:40:14,982 unit:oscied-storage/2: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:3
2013-07-01 13:40:14,987 unit:oscied-storage/2: juju.state.hook DEBUG: Ignoring partially constructed relation: peer:0
2013-07-01 13:40:14,995 unit:oscied-storage/2: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:1
2013-07-01 13:40:14,998 unit:oscied-storage/2: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:4
2013-07-01 13:40:14,998 unit:oscied-storage/2: hook.output DEBUG: Cached relation hook contexts: []
2013-07-01 13:40:15,007 unit:oscied-storage/2: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-2/charm/hooks/start
2013-07-01 13:40:15,052 unit:oscied-storage/1: unit.hook.api DEBUG: opened 24009/tcp
2013-07-01 13:40:15,103 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x201ab90>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/3', 'public_address': 'ec2-54-242-71-153.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-37-115.ec2.internal', 'juju_log': <function callable_command at 0x25e90c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:40:15,252 unit:oscied-transform/2: unit.hook.api INFO: [INFO] Upgrade system and install prerequisites
2013-07-01 13:40:15,383 unit:oscied-storage/1: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1850d30>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:40:15,453 unit:oscied-storage/3: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:40:15,560 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] Execute gluster volume info medias_volume_4 
2013-07-01 13:40:15,595 unit:oscied-transform/2: unit.hook.api INFO: [DEBUG] Execute apt-add-repository -y ppa:jon-severinsson/ffmpeg
2013-07-01 13:40:15,714 unit:oscied-storage/1: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:40:15,757 unit:oscied-storage/1: hook.output DEBUG: hook install exited, exit code 0.
2013-07-01 13:40:15,758 unit:oscied-storage/1: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-1/charm/hooks/install
2013-07-01 13:40:15,793 unit:oscied-storage/3: unit.hook.api INFO: [HOOK] Execute StorageHooks hook config-changed
2013-07-01 13:40:15,773 unit:oscied-storage/1: statemachine DEBUG: unitworkflowstate: transition complete install (state installed) {}
2013-07-01 13:40:15,783 unit:oscied-storage/1: statemachine DEBUG: unitworkflowstate: transition start (installed -> started) {}
2013-07-01 13:40:15,784 unit:oscied-storage/1: statemachine DEBUG: unitworkflowstate:  execute action do_start
2013-07-01 13:40:15,784 unit:oscied-storage/1: unit.lifecycle DEBUG: pre-start acquire, running:False
2013-07-01 13:40:15,784 unit:oscied-storage/1: unit.lifecycle DEBUG: start running, unit lifecycle
2013-07-01 13:40:15,782 unit:oscied-storage/2: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:15,823 unit:oscied-storage/1: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:2
2013-07-01 13:40:15,831 unit:oscied-storage/1: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:3
2013-07-01 13:40:15,833 unit:oscied-storage/1: juju.state.hook DEBUG: Ignoring partially constructed relation: peer:0
2013-07-01 13:40:15,837 unit:oscied-storage/1: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:1
2013-07-01 13:40:15,839 unit:oscied-storage/1: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:4
2013-07-01 13:40:15,840 unit:oscied-storage/1: hook.output DEBUG: Cached relation hook contexts: []
2013-07-01 13:40:15,848 unit:oscied-storage/1: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-1/charm/hooks/config-changed
2013-07-01 13:40:15,984 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] Volume infos stdout: '\nVolume Name: medias_volume_4\nType: Distribute\nStatus: Started\nNumber of Bricks: 1\nTransport-type: tcp\nBricks:\nBrick1: ip-10-164-73-202.ec2.internal:/exp4\nOptions Reconfigured:\nauth.allow: *\n'
2013-07-01 13:40:16,147 unit:oscied-storage/3: unit.hook.api INFO: [INFO] Set volume medias_volume_3 allowed clients IP list to *
2013-07-01 13:40:16,121 unit:oscied-storage/2: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:16,313 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] Execute gluster volume info medias_volume_4 
2013-07-01 13:40:16,430 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:16,489 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] Execute gluster volume set medias_volume_3 auth.allow "*"
2013-07-01 13:40:16,720 unit:oscied-storage/1: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:16,756 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x2a98320>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/2', 'public_address': 'ec2-50-16-110-129.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-202-41-54.ec2.internal', 'juju_log': <function callable_command at 0x2e170c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:40:16,758 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] Volume infos stdout: '\nVolume Name: medias_volume_4\nType: Distribute\nStatus: Started\nNumber of Bricks: 1\nTransport-type: tcp\nBricks:\nBrick1: ip-10-164-73-202.ec2.internal:/exp4\nOptions Reconfigured:\nauth.allow: *\n'
2013-07-01 13:40:17,064 unit:oscied-storage/2: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:40:17,091 unit:oscied-storage/1: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:17,090 unit:oscied-storage/4: unit.hook.api INFO: [INFO] {'status': 'Started', 'name': 'medias_volume_4', 'bricks': ['ip-10-164-73-202.ec2.internal:/exp4'], 'auth_allow': '*', 'type': 'Distribute', 'transport': 'tcp'}
2013-07-01 13:40:17,294 unit:oscied-transform/2: unit.hook.api INFO: [DEBUG] Execute apt-get -y update
2013-07-01 13:40:17,370 unit:oscied-storage/2: unit.hook.api INFO: [HOOK] Execute StorageHooks hook start
2013-07-01 13:40:17,463 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:17,445 unit:oscied-storage/4: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0xf2bb90>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:40:17,688 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] Execute pgrep glusterd
2013-07-01 13:40:17,823 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1b38b90>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/1', 'public_address': 'ec2-107-21-196-203.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-47-249.ec2.internal', 'juju_log': <function callable_command at 0x21070c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:40:17,777 unit:oscied-storage/4: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:40:17,820 unit:oscied-storage/4: hook.output DEBUG: hook config-changed exited, exit code 0.
2013-07-01 13:40:17,821 unit:oscied-storage/4: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-4/charm/hooks/config-changed
2013-07-01 13:40:17,867 unit:oscied-storage/4: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:2
2013-07-01 13:40:17,871 unit:oscied-storage/4: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:3
2013-07-01 13:40:17,873 unit:oscied-storage/4: juju.state.hook DEBUG: Ignoring partially constructed relation: peer:0
2013-07-01 13:40:17,877 unit:oscied-storage/4: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:1
2013-07-01 13:40:17,880 unit:oscied-storage/4: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:4
2013-07-01 13:40:17,881 unit:oscied-storage/4: hook.output DEBUG: Cached relation hook contexts: []
2013-07-01 13:40:17,897 unit:oscied-storage/4: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-4/charm/hooks/start
2013-07-01 13:40:18,062 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] Execute gluster volume info medias_volume_3 
2013-07-01 13:40:18,012 unit:oscied-storage/2: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x2a98320>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:40:18,174 unit:oscied-storage/1: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:40:18,317 unit:oscied-storage/2: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:40:18,372 unit:oscied-storage/2: hook.output DEBUG: hook start exited, exit code 0.
2013-07-01 13:40:18,372 unit:oscied-storage/2: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-2/charm/hooks/start
2013-07-01 13:40:18,373 unit:oscied-storage/2: unit.lifecycle DEBUG: starting service relation watch
2013-07-01 13:40:18,373 unit:oscied-storage/2: unit.lifecycle DEBUG: starting unit relation resolved watch
2013-07-01 13:40:18,383 unit:oscied-storage/2: unit.lifecycle DEBUG: relation resolved changed
2013-07-01 13:40:18,384 unit:oscied-storage/2: unit.lifecycle INFO: processing relation resolved changed
2013-07-01 13:40:18,404 unit:oscied-storage/2: unit.lifecycle DEBUG: services changed old:None new:[<ServiceRelationState name:storage role:server id:relation-0000000002 scope:global>, <ServiceRelationState name:storage role:server id:relation-0000000003 scope:global>, <ServiceRelationState name:peer role:peer id:relation-0000000000 scope:global>, <ServiceRelationState name:storage role:server id:relation-0000000001 scope:global>, <ServiceRelationState name:storage role:server id:relation-0000000004 scope:global>]
2013-07-01 13:40:18,405 unit:oscied-storage/2: unit.lifecycle DEBUG: processing relations changed
2013-07-01 13:40:18,500 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] Volume infos stdout: '\nVolume Name: medias_volume_3\nType: Distribute\nStatus: Started\nNumber of Bricks: 1\nTransport-type: tcp\nBricks:\nBrick1: ip-10-164-37-115.ec2.internal:/exp3\nOptions Reconfigured:\nauth.allow: *\n'
2013-07-01 13:40:18,407 unit:oscied-storage/0: unit.relation.watch DEBUG: relation membership change
2013-07-01 13:40:18,450 unit:oscied-storage/2: unit.relation.lifecycle DEBUG: stopped relation:peer lifecycle
2013-07-01 13:40:18,413 unit:oscied-storage/0: hook.scheduler DEBUG: members changed: old=[], new=['oscied-storage/2']
2013-07-01 13:40:18,414 unit:oscied-storage/0: hook.scheduler DEBUG: executing hook for oscied-storage/2:joined
2013-07-01 13:40:18,457 unit:oscied-storage/2: statemachine DEBUG: relationworkflowstate: transition start (None -> up) {}
2013-07-01 13:40:18,457 unit:oscied-storage/2: statemachine DEBUG: relationworkflowstate:  execute action do_start
2013-07-01 13:40:18,458 unit:oscied-storage/2: hook.scheduler DEBUG: start
2013-07-01 13:40:18,419 unit:oscied-storage/0: hook.scheduler DEBUG: settings changed: (('oscied-storage/2', 0),)
2013-07-01 13:40:18,472 unit:oscied-storage/2: unit.relation.watch DEBUG: relation watcher start
2013-07-01 13:40:18,472 unit:oscied-storage/2: unit.relation.lifecycle DEBUG: started relation:peer lifecycle
2013-07-01 13:40:18,478 unit:oscied-storage/2: hook.scheduler DEBUG: members changed: old=[], new=['oscied-storage/0']
2013-07-01 13:40:18,479 unit:oscied-storage/2: hook.scheduler DEBUG: executing hook for oscied-storage/0:joined
2013-07-01 13:40:18,482 unit:oscied-storage/2: hook.scheduler DEBUG: settings changed: (('oscied-storage/0', 0),)
2013-07-01 13:40:18,483 unit:oscied-storage/2: statemachine DEBUG: relationworkflowstate: transition complete start (state up) {}
2013-07-01 13:40:18,509 unit:oscied-storage/1: unit.hook.api INFO: [HOOK] Execute StorageHooks hook config-changed
2013-07-01 13:40:18,549 unit:oscied-storage/2: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:2
2013-07-01 13:40:18,557 unit:oscied-storage/2: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:3
2013-07-01 13:40:18,564 unit:oscied-storage/2: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:1
2013-07-01 13:40:18,572 unit:oscied-storage/2: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:4
2013-07-01 13:40:18,572 unit:oscied-storage/2: hook.output DEBUG: Cached relation hook contexts on 'peer:0': []
2013-07-01 13:40:18,533 unit:oscied-transform/0: unit.relation.watch DEBUG: relation membership change
2013-07-01 13:40:18,575 unit:oscied-storage/2: unit.relation.lifecycle DEBUG: stopped relation:storage lifecycle
2013-07-01 13:40:18,541 unit:oscied-transform/0: hook.scheduler DEBUG: members changed: old=['oscied-storage/0'], new=['oscied-storage/0', 'oscied-storage/2']
2013-07-01 13:40:18,542 unit:oscied-transform/0: hook.scheduler DEBUG: executing hook for oscied-storage/2:joined
2013-07-01 13:40:18,585 unit:oscied-storage/2: unit.relation.lifecycle DEBUG: Executing hook peer-relation-joined
2013-07-01 13:40:18,544 unit:oscied-transform/0: hook.scheduler DEBUG: settings changed: (('oscied-storage/2', 0),)
2013-07-01 13:40:18,586 unit:oscied-storage/2: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-2/charm/hooks/peer-relation-joined
2013-07-01 13:40:18,605 unit:oscied-storage/2: statemachine DEBUG: relationworkflowstate: transition start (None -> up) {}
2013-07-01 13:40:18,612 unit:oscied-storage/2: statemachine DEBUG: relationworkflowstate:  execute action do_start
2013-07-01 13:40:18,613 unit:oscied-storage/2: hook.scheduler DEBUG: start
2013-07-01 13:40:18,631 unit:oscied-storage/2: unit.relation.watch DEBUG: relation watcher start
2013-07-01 13:40:18,631 unit:oscied-storage/2: unit.relation.lifecycle DEBUG: started relation:storage lifecycle
2013-07-01 13:40:18,640 unit:oscied-storage/2: hook.scheduler DEBUG: members changed: old=[], new=['oscied-transform/0']
2013-07-01 13:40:18,641 unit:oscied-storage/2: hook.scheduler DEBUG: executing hook for oscied-transform/0:joined
2013-07-01 13:40:18,650 unit:oscied-storage/2: hook.scheduler DEBUG: settings changed: (('oscied-transform/0', 0),)
2013-07-01 13:40:18,652 unit:oscied-storage/2: statemachine DEBUG: relationworkflowstate: transition complete start (state up) {}
2013-07-01 13:40:18,622 unit:oscied-transform/0: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['transform:5']
2013-07-01 13:40:18,632 unit:oscied-transform/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:40:18,632 unit:oscied-transform/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-transform-0/charm/hooks/storage-relation-joined
2013-07-01 13:40:18,639 unit:oscied-storage/0: hook.output DEBUG: Cached relation hook contexts on 'peer:0': ['storage:1', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:40:18,648 unit:oscied-storage/0: unit.relation.lifecycle DEBUG: Executing hook peer-relation-joined
2013-07-01 13:40:18,649 unit:oscied-storage/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-0/charm/hooks/peer-relation-joined
2013-07-01 13:40:18,726 unit:oscied-storage/2: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:2
2013-07-01 13:40:18,735 unit:oscied-storage/2: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:3
2013-07-01 13:40:18,742 unit:oscied-storage/2: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:4
2013-07-01 13:40:18,705 unit:oscied-publisher/0: unit.relation.watch DEBUG: relation membership change
2013-07-01 13:40:18,744 unit:oscied-storage/2: unit.relation.lifecycle DEBUG: stopped relation:storage lifecycle
2013-07-01 13:40:18,714 unit:oscied-publisher/0: hook.scheduler DEBUG: members changed: old=['oscied-storage/0'], new=['oscied-storage/0', 'oscied-storage/2']
2013-07-01 13:40:18,715 unit:oscied-publisher/0: hook.scheduler DEBUG: executing hook for oscied-storage/2:joined
2013-07-01 13:40:18,717 unit:oscied-publisher/0: hook.scheduler DEBUG: settings changed: (('oscied-storage/2', 0),)
2013-07-01 13:40:18,774 unit:oscied-storage/2: statemachine DEBUG: relationworkflowstate: transition start (None -> up) {}
2013-07-01 13:40:18,775 unit:oscied-storage/2: statemachine DEBUG: relationworkflowstate:  execute action do_start
2013-07-01 13:40:18,776 unit:oscied-storage/2: hook.scheduler DEBUG: start
2013-07-01 13:40:18,777 unit:oscied-storage/4: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:18,816 unit:oscied-storage/2: unit.relation.watch DEBUG: relation watcher start
2013-07-01 13:40:18,819 unit:oscied-storage/2: unit.relation.lifecycle DEBUG: started relation:storage lifecycle
2013-07-01 13:40:18,843 unit:oscied-storage/1: unit.hook.api INFO: [INFO] Set volume medias_volume_1 allowed clients IP list to *
2013-07-01 13:40:18,855 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] Execute gluster volume info medias_volume_3 
2013-07-01 13:40:18,795 unit:oscied-publisher/0: hook.output DEBUG: Cached relation hook contexts on 'storage:2': ['publisher:6']
2013-07-01 13:40:18,833 unit:oscied-storage/2: hook.scheduler DEBUG: members changed: old=[], new=['oscied-publisher/0']
2013-07-01 13:40:18,835 unit:oscied-storage/2: hook.scheduler DEBUG: executing hook for oscied-publisher/0:joined
2013-07-01 13:40:18,840 unit:oscied-storage/2: hook.scheduler DEBUG: settings changed: (('oscied-publisher/0', 0),)
2013-07-01 13:40:18,841 unit:oscied-storage/2: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:3
2013-07-01 13:40:18,842 unit:oscied-storage/2: statemachine DEBUG: relationworkflowstate: transition complete start (state up) {}
2013-07-01 13:40:18,813 unit:oscied-publisher/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:40:18,813 unit:oscied-publisher/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-publisher-0/charm/hooks/storage-relation-joined
2013-07-01 13:40:18,834 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] Execute make -j1
2013-07-01 13:40:18,903 unit:oscied-storage/2: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:4
2013-07-01 13:40:18,906 unit:oscied-storage/2: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['peer:0']
2013-07-01 13:40:18,927 unit:oscied-storage/2: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:40:18,931 unit:oscied-storage/2: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:3
2013-07-01 13:40:18,948 unit:oscied-storage/2: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:4
2013-07-01 13:40:18,905 unit:oscied-orchestra/0: unit.relation.watch DEBUG: relation membership change
2013-07-01 13:40:18,952 unit:oscied-storage/2: unit.relation.lifecycle DEBUG: stopped relation:storage lifecycle
2013-07-01 13:40:18,912 unit:oscied-orchestra/0: hook.scheduler DEBUG: members changed: old=['oscied-storage/0'], new=['oscied-storage/0', 'oscied-storage/2']
2013-07-01 13:40:18,913 unit:oscied-orchestra/0: hook.scheduler DEBUG: executing hook for oscied-storage/2:joined
2013-07-01 13:40:18,915 unit:oscied-orchestra/0: hook.scheduler DEBUG: settings changed: (('oscied-storage/2', 0),)
2013-07-01 13:40:18,989 unit:oscied-storage/2: statemachine DEBUG: relationworkflowstate: transition start (None -> up) {}
2013-07-01 13:40:18,989 unit:oscied-storage/2: statemachine DEBUG: relationworkflowstate:  execute action do_start
2013-07-01 13:40:18,990 unit:oscied-storage/2: hook.scheduler DEBUG: start
2013-07-01 13:40:19,031 unit:oscied-storage/2: unit.relation.watch DEBUG: relation watcher start
2013-07-01 13:40:19,032 unit:oscied-storage/2: unit.relation.lifecycle DEBUG: started relation:storage lifecycle
2013-07-01 13:40:19,044 unit:oscied-storage/2: hook.scheduler DEBUG: members changed: old=[], new=['oscied-orchestra/0']
2013-07-01 13:40:19,045 unit:oscied-storage/2: hook.scheduler DEBUG: executing hook for oscied-orchestra/0:joined
2013-07-01 13:40:19,048 unit:oscied-storage/2: hook.scheduler DEBUG: settings changed: (('oscied-orchestra/0', 0),)
2013-07-01 13:40:19,052 unit:oscied-storage/2: statemachine DEBUG: relationworkflowstate: transition complete start (state up) {}
2013-07-01 13:40:19,110 unit:oscied-storage/2: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:4
2013-07-01 13:40:19,082 unit:oscied-orchestra/0: hook.output DEBUG: Cached relation hook contexts on 'storage:3': ['api:7', 'publisher:6', 'transform:5']
2013-07-01 13:40:19,090 unit:oscied-orchestra/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:40:19,091 unit:oscied-orchestra/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-orchestra-0/charm/hooks/storage-relation-joined
2013-07-01 13:40:19,192 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] Execute gluster volume set medias_volume_1 auth.allow "*"
2013-07-01 13:40:19,157 unit:oscied-storage/4: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:19,193 unit:oscied-storage/2: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:4
2013-07-01 13:40:19,195 unit:oscied-storage/2: unit.relation.lifecycle DEBUG: stopped relation:storage lifecycle
2013-07-01 13:40:19,150 unit:oscied-webui/0: unit.relation.watch DEBUG: relation membership change
2013-07-01 13:40:19,162 unit:oscied-webui/0: hook.scheduler DEBUG: members changed: old=['oscied-storage/0'], new=['oscied-storage/0', 'oscied-storage/2']
2013-07-01 13:40:19,163 unit:oscied-webui/0: hook.scheduler DEBUG: executing hook for oscied-storage/2:joined
2013-07-01 13:40:19,166 unit:oscied-webui/0: hook.scheduler DEBUG: settings changed: (('oscied-storage/2', 0),)
2013-07-01 13:40:19,229 unit:oscied-storage/2: statemachine DEBUG: relationworkflowstate: transition start (None -> up) {}
2013-07-01 13:40:19,230 unit:oscied-storage/2: statemachine DEBUG: relationworkflowstate:  execute action do_start
2013-07-01 13:40:19,230 unit:oscied-storage/2: hook.scheduler DEBUG: start
2013-07-01 13:40:19,244 unit:oscied-storage/2: hook.output DEBUG: Cached relation hook contexts on 'storage:2': ['peer:0', 'storage:1']
2013-07-01 13:40:19,318 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] Volume infos stdout: '\nVolume Name: medias_volume_3\nType: Distribute\nStatus: Started\nNumber of Bricks: 1\nTransport-type: tcp\nBricks:\nBrick1: ip-10-164-37-115.ec2.internal:/exp3\nOptions Reconfigured:\nauth.allow: *\n'
2013-07-01 13:40:19,269 unit:oscied-storage/2: unit.relation.watch DEBUG: relation watcher start
2013-07-01 13:40:19,270 unit:oscied-storage/2: unit.relation.lifecycle DEBUG: started relation:storage lifecycle
2013-07-01 13:40:19,273 unit:oscied-storage/2: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:40:19,280 unit:oscied-storage/2: hook.scheduler DEBUG: members changed: old=[], new=['oscied-webui/0']
2013-07-01 13:40:19,281 unit:oscied-storage/2: hook.scheduler DEBUG: executing hook for oscied-webui/0:joined
2013-07-01 13:40:19,284 unit:oscied-storage/2: hook.scheduler DEBUG: settings changed: (('oscied-webui/0', 0),)
2013-07-01 13:40:19,289 unit:oscied-storage/2: statemachine DEBUG: relationworkflowstate: transition complete start (state up) {}
2013-07-01 13:40:19,245 unit:oscied-webui/0: hook.output DEBUG: Cached relation hook contexts on 'storage:4': ['api:7']
2013-07-01 13:40:19,290 unit:oscied-storage/2: unit.lifecycle DEBUG: started unit lifecycle
2013-07-01 13:40:19,257 unit:oscied-webui/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:40:19,258 unit:oscied-webui/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-webui-0/charm/hooks/storage-relation-joined
2013-07-01 13:40:19,323 unit:oscied-storage/2: statemachine DEBUG: unitworkflowstate: transition complete start (state started) {}
2013-07-01 13:40:19,386 unit:oscied-storage/2: juju.agents.unit DEBUG: Configuration Changed
2013-07-01 13:40:19,423 unit:oscied-storage/2: statemachine DEBUG: unitworkflowstate: transition configure (started -> started) {}
2013-07-01 13:40:19,423 unit:oscied-storage/2: statemachine DEBUG: unitworkflowstate:  execute action do_configure
2013-07-01 13:40:19,519 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:19,524 unit:oscied-storage/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:19,653 unit:oscied-storage/3: unit.hook.api INFO: [INFO] {'status': 'Started', 'name': 'medias_volume_3', 'bricks': ['ip-10-164-37-115.ec2.internal:/exp3'], 'auth_allow': '*', 'type': 'Distribute', 'transport': 'tcp'}
2013-07-01 13:40:19,597 unit:oscied-transform/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:19,662 unit:oscied-storage/2: hook.output DEBUG: Cached relation hook contexts on 'storage:3': ['peer:0', 'storage:1', 'storage:2']
2013-07-01 13:40:19,684 unit:oscied-storage/2: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:40:19,712 unit:oscied-transform/2: unit.hook.api INFO: [DEBUG] Execute apt-get -y upgrade
2013-07-01 13:40:19,803 unit:oscied-publisher/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:19,904 unit:oscied-storage/2: hook.output DEBUG: Cached relation hook contexts on 'storage:4': ['peer:0', 'storage:1', 'storage:2', 'storage:3']
2013-07-01 13:40:19,875 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x2886320>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/4', 'public_address': 'ec2-54-242-176-247.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-73-202.ec2.internal', 'juju_log': <function callable_command at 0x2c060c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:40:19,895 unit:oscied-storage/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:19,937 unit:oscied-storage/2: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:40:20,003 unit:oscied-storage/3: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x201ab90>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:40:19,952 unit:oscied-transform/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:20,012 unit:oscied-storage/2: hook.output DEBUG: Cached relation hook contexts: ['peer:0', 'storage:1', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:40:19,974 unit:oscied-orchestra/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:20,124 unit:oscied-storage/2: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:20,123 unit:oscied-webui/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:20,170 unit:oscied-publisher/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:20,233 unit:oscied-storage/4: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:40:20,231 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:20,353 unit:oscied-storage/3: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:40:20,287 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:20,398 unit:oscied-storage/3: hook.output DEBUG: hook config-changed exited, exit code 0.
2013-07-01 13:40:20,398 unit:oscied-storage/3: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-3/charm/hooks/config-changed
2013-07-01 13:40:20,326 unit:oscied-orchestra/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:20,457 unit:oscied-storage/3: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:2
2013-07-01 13:40:20,465 unit:oscied-storage/3: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:3
2013-07-01 13:40:20,476 unit:oscied-storage/3: juju.state.hook DEBUG: Ignoring partially constructed relation: peer:0
2013-07-01 13:40:20,479 unit:oscied-storage/3: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:1
2013-07-01 13:40:20,484 unit:oscied-storage/3: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:4
2013-07-01 13:40:20,485 unit:oscied-storage/3: hook.output DEBUG: Cached relation hook contexts: []
2013-07-01 13:40:20,494 unit:oscied-storage/3: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-3/charm/hooks/start
2013-07-01 13:40:20,483 unit:oscied-webui/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:20,535 unit:oscied-storage/2: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:20,540 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:20,578 unit:oscied-storage/4: unit.hook.api INFO: [HOOK] Execute StorageHooks hook start
2013-07-01 13:40:20,571 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x2972d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': ['ip-10-154-177-94.ec2.internal', 'ip-10-164-2-99.ec2.internal', 'ip-10-164-71-53.ec2.internal', 'ip-10-164-25-113.ec2.internal'], 'verbose': True}, 'name': 'oscied-storage/0', 'public_address': 'ec2-54-227-38-161.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-154-181-123.ec2.internal', 'juju_log': <function callable_command at 0x2f2c0c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:40:20,630 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-transform/0', 'public_address': 'ec2-72-44-43-150.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-25-113.ec2.internal', 'juju_log': <function callable_command at 0x16eb2a8>, 'config': {u'storage_mountpoint': u'', 'verbose': True, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'transform_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 1, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u''}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media transform. Contains ffmpeg & x264.\nCan be scaled to multiple instances.\n", 'name': 'oscied-transform', 'requires': {'storage': {'interface': 'mount'}, 'transform': {'interface': 'subordinate'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Encoder"}}
2013-07-01 13:40:20,664 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:20,780 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] Execute gluster volume info medias_volume_1 
2013-07-01 13:40:20,855 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:20,834 unit:oscied-webui/0: unit.hook.api INFO: --> Entering WebuiHooks.py
2013-07-01 13:40:20,894 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'proxy_ips': [], 'storage_fstype': 'glusterfs', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-234-214-201.compute-1.amazonaws.com', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-publisher/0', 'public_address': 'ec2-54-234-214-201.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-2-99.ec2.internal', 'juju_log': <function callable_command at 0x26745f0>, 'config': {u'max_upload_size': 4294967296, u'storage_mountpoint': u'', 'verbose': True, u'max_input_time': 600, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'publisher_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 2, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u'', u'max_execution_time': 180}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media publisher. Contains apache & mod streaming.\nCan be scaled to multiple instances.\n", 'provides': {'streaming': {'interface': 'http'}}, 'name': 'oscied-publisher', 'requires': {'publisher': {'interface': 'subordinate'}, 'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Publisher"}}
2013-07-01 13:40:20,911 unit:oscied-storage/0: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:40:20,923 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] Execute pgrep glusterd
2013-07-01 13:40:20,971 unit:oscied-transform/0: unit.hook.api INFO: --> Entering TransformHooks.py
2013-07-01 13:40:21,016 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'root_secret': u'5FrvHcm7oyF4WQFW', 'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': True, 'hosts_file': '/etc/hosts', 'rabbit_connection': u'amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': u'mongodb://admin:Iz85QVjdCJugEosz@localhost:27017/orchestra', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}, 'name': 'oscied-orchestra/0', 'public_address': 'ec2-54-234-192-63.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-71-53.ec2.internal', 'juju_log': <function callable_command at 0x14087d0>, 'config': {u'repositories_pass': u'41nVGq07GmSgK9Ud', u'storage_options': u'', 'verbose': True, u'storage_nat_address': u'', u'rabbit_password': u'OZy23iO0D4UpYS2k', u'storage_fstype': u'', u'nodes_secret': u'bdZccPuG9fibjwCS', u'transform_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/transform/source', u'repositories_user': u'oscied', u'root_secret': u'5FrvHcm7oyF4WQFW', u'storage_mountpoint': u'', u'mongo_nodes_password': u'M2qlif8rdtKtBYil', u'publisher_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/publisher/source', u'mongo_admin_password': u'Iz85QVjdCJugEosz', u'storage_address': u'', u'webui_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/webui/source'}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED orchestrator.\n", 'provides': {'publisher': {'interface': 'subordinate'}, 'api': {'interface': 'orchestra'}, 'transform': {'interface': 'subordinate'}}, 'name': 'oscied-orchestra', 'requires': {'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Orchestra"}}
2013-07-01 13:40:21,165 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1bcdd60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/2', 'public_address': 'ec2-50-16-110-129.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-202-41-54.ec2.internal', 'juju_log': <function callable_command at 0x21870c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:40:21,170 unit:oscied-webui/0: unit.hook.api INFO: [HOOK] Execute WebuiHooks hook storage-relation-joined
2013-07-01 13:40:21,245 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] Volume infos stdout: '\nVolume Name: medias_volume_1\nType: Distribute\nStatus: Started\nNumber of Bricks: 1\nTransport-type: tcp\nBricks:\nBrick1: ip-10-164-47-249.ec2.internal:/exp1\nOptions Reconfigured:\nauth.allow: *\n'
2013-07-01 13:40:21,230 unit:oscied-publisher/0: unit.hook.api INFO: --> Entering PublisherHooks.py
2013-07-01 13:40:21,253 unit:oscied-storage/0: unit.hook.api INFO: [HOOK] Execute StorageHooks hook peer-relation-joined
2013-07-01 13:40:21,284 unit:oscied-storage/4: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x2886320>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:40:21,386 unit:oscied-storage/3: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:21,308 unit:oscied-transform/0: unit.hook.api INFO: [HOOK] Execute TransformHooks hook storage-relation-joined
2013-07-01 13:40:21,355 unit:oscied-orchestra/0: unit.hook.api INFO: --> Entering OrchestraHooks.py
2013-07-01 13:40:21,476 unit:oscied-storage/2: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:40:21,504 unit:oscied-webui/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_options': '', 'verbose': None, 'database_template_file': 'templates/database.php.template', 'hosts_file': '/etc/hosts', 'sites_enabled_path': '/etc/apache2/sites-enabled', 'storage_path': '/mnt/storage', 'storage_mountpoint': 'medias_volume_0', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'site_database_file': 'webui-db.sql', 'general_config_file': '/var/www/application/config/config.php', 'database_config_file': '/var/www/application/config/database.php', 'proxy_ips': [], 'htaccess_template_file': 'templates/htaccess.template', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'www_medias_path': '/var/www/medias', 'www_uploads_path': '/var/www/uploads', '_pickle_filename': 'local_config.pkl', 'site_template_file': 'templates/000-default', 'storage_mount_sleep_delay': 5, 'storage_nat_address': '', 'encryption_key': '5UCuWXhlrxOscNFuShIfJtLlI2oB3crZ', 'storage_fstype': 'glusterfs', 'www_root_path': '/var/www', 'general_template_file': 'templates/config.php.template', 'htaccess_config_file': '/var/www/.htaccess'}
2013-07-01 13:40:21,600 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] Execute gluster volume info medias_volume_1 
2013-07-01 13:40:21,566 unit:oscied-publisher/0: unit.hook.api INFO: [HOOK] Execute PublisherHooks hook storage-relation-joined
2013-07-01 13:40:21,636 unit:oscied-storage/4: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:40:21,648 unit:oscied-transform/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:40:21,764 unit:oscied-storage/3: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:21,685 unit:oscied-storage/4: hook.output DEBUG: hook start exited, exit code 0.
2013-07-01 13:40:21,686 unit:oscied-storage/4: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-4/charm/hooks/start
2013-07-01 13:40:21,686 unit:oscied-storage/4: unit.lifecycle DEBUG: starting service relation watch
2013-07-01 13:40:21,687 unit:oscied-storage/4: unit.lifecycle DEBUG: starting unit relation resolved watch
2013-07-01 13:40:21,703 unit:oscied-storage/4: unit.lifecycle DEBUG: relation resolved changed
2013-07-01 13:40:21,703 unit:oscied-storage/4: unit.lifecycle INFO: processing relation resolved changed
2013-07-01 13:40:21,692 unit:oscied-orchestra/0: unit.hook.api INFO: [HOOK] Execute OrchestraHooks hook storage-relation-joined
2013-07-01 13:40:21,710 unit:oscied-storage/4: unit.lifecycle DEBUG: services changed old:None new:[<ServiceRelationState name:storage role:server id:relation-0000000002 scope:global>, <ServiceRelationState name:storage role:server id:relation-0000000003 scope:global>, <ServiceRelationState name:peer role:peer id:relation-0000000000 scope:global>, <ServiceRelationState name:storage role:server id:relation-0000000001 scope:global>, <ServiceRelationState name:storage role:server id:relation-0000000004 scope:global>]
2013-07-01 13:40:21,711 unit:oscied-storage/4: unit.lifecycle DEBUG: processing relations changed
2013-07-01 13:40:21,789 unit:oscied-storage/2: unit.hook.api INFO: [HOOK] Execute StorageHooks hook peer-relation-joined
2013-07-01 13:40:21,796 unit:oscied-storage/2: unit.relation.watch DEBUG: relation membership change
2013-07-01 13:40:21,756 unit:oscied-storage/0: unit.relation.watch DEBUG: relation membership change
2013-07-01 13:40:21,766 unit:oscied-storage/4: unit.relation.lifecycle DEBUG: stopped relation:peer lifecycle
2013-07-01 13:40:21,762 unit:oscied-storage/0: hook.scheduler DEBUG: members changed: old=['oscied-storage/2'], new=['oscied-storage/2', 'oscied-storage/4']
2013-07-01 13:40:21,775 unit:oscied-storage/4: statemachine DEBUG: relationworkflowstate: transition start (None -> up) {}
2013-07-01 13:40:21,775 unit:oscied-storage/4: statemachine DEBUG: relationworkflowstate:  execute action do_start
2013-07-01 13:40:21,776 unit:oscied-storage/4: hook.scheduler DEBUG: start
2013-07-01 13:40:21,767 unit:oscied-storage/0: hook.scheduler DEBUG: settings changed: (('oscied-storage/4', 0),)
2013-07-01 13:40:21,801 unit:oscied-storage/2: hook.scheduler DEBUG: members changed: old=['oscied-storage/0'], new=['oscied-storage/0', 'oscied-storage/4']
2013-07-01 13:40:21,811 unit:oscied-storage/2: hook.scheduler DEBUG: settings changed: (('oscied-storage/4', 0),)
2013-07-01 13:40:21,789 unit:oscied-storage/4: unit.relation.watch DEBUG: relation watcher start
2013-07-01 13:40:21,789 unit:oscied-storage/4: unit.relation.lifecycle DEBUG: started relation:peer lifecycle
2013-07-01 13:40:21,795 unit:oscied-storage/4: hook.scheduler DEBUG: members changed: old=[], new=['oscied-storage/0', 'oscied-storage/2']
2013-07-01 13:40:21,796 unit:oscied-storage/4: hook.scheduler DEBUG: executing hook for oscied-storage/0:joined
2013-07-01 13:40:21,800 unit:oscied-storage/4: hook.scheduler DEBUG: settings changed: (('oscied-storage/2', 0),)
2013-07-01 13:40:21,802 unit:oscied-storage/4: hook.scheduler DEBUG: settings changed: (('oscied-storage/0', 0),)
2013-07-01 13:40:21,804 unit:oscied-storage/4: statemachine DEBUG: relationworkflowstate: transition complete start (state up) {}
2013-07-01 13:40:21,840 unit:oscied-webui/0: unit.hook.api INFO: <-- Exiting WebuiHooks.py
2013-07-01 13:40:21,861 unit:oscied-storage/4: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:2
2013-07-01 13:40:21,871 unit:oscied-storage/4: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:3
2013-07-01 13:40:21,877 unit:oscied-storage/4: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:1
2013-07-01 13:40:21,881 unit:oscied-storage/4: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:4
2013-07-01 13:40:21,881 unit:oscied-storage/4: hook.output DEBUG: Cached relation hook contexts on 'peer:0': []
2013-07-01 13:40:21,883 unit:oscied-storage/4: unit.relation.lifecycle DEBUG: stopped relation:storage lifecycle
2013-07-01 13:40:21,874 unit:oscied-transform/0: unit.relation.watch DEBUG: relation membership change
2013-07-01 13:40:21,898 unit:oscied-storage/4: unit.relation.lifecycle DEBUG: Executing hook peer-relation-joined
2013-07-01 13:40:21,887 unit:oscied-transform/0: hook.scheduler DEBUG: members changed: old=['oscied-storage/0', 'oscied-storage/2'], new=['oscied-storage/0', 'oscied-storage/2', 'oscied-storage/4']
2013-07-01 13:40:21,885 unit:oscied-webui/0: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:40:21,898 unit:oscied-storage/4: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-4/charm/hooks/peer-relation-joined
2013-07-01 13:40:21,892 unit:oscied-transform/0: hook.scheduler DEBUG: settings changed: (('oscied-storage/4', 0),)
2013-07-01 13:40:21,901 unit:oscied-publisher/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'proxy_ips': [], 'storage_fstype': 'glusterfs', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-234-214-201.compute-1.amazonaws.com', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:40:21,916 unit:oscied-storage/4: statemachine DEBUG: relationworkflowstate: transition start (None -> up) {}
2013-07-01 13:40:21,917 unit:oscied-storage/4: statemachine DEBUG: relationworkflowstate:  execute action do_start
2013-07-01 13:40:21,918 unit:oscied-storage/4: hook.scheduler DEBUG: start
2013-07-01 13:40:21,919 unit:oscied-webui/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-webui-0/charm/hooks/storage-relation-joined
2013-07-01 13:40:21,935 unit:oscied-storage/4: unit.relation.watch DEBUG: relation watcher start
2013-07-01 13:40:21,922 unit:oscied-webui/0: hook.scheduler DEBUG: executing hook for oscied-storage/2:modified
2013-07-01 13:40:21,935 unit:oscied-storage/4: unit.relation.lifecycle DEBUG: started relation:storage lifecycle
2013-07-01 13:40:21,949 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] id=0 ids=[2]
2013-07-01 13:40:21,960 unit:oscied-storage/4: hook.scheduler DEBUG: members changed: old=[], new=['oscied-transform/0']
2013-07-01 13:40:21,961 unit:oscied-storage/4: hook.scheduler DEBUG: executing hook for oscied-transform/0:joined
2013-07-01 13:40:21,964 unit:oscied-storage/4: hook.scheduler DEBUG: settings changed: (('oscied-transform/0', 0),)
2013-07-01 13:40:21,968 unit:oscied-storage/4: statemachine DEBUG: relationworkflowstate: transition complete start (state up) {}
2013-07-01 13:40:22,050 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] Volume infos stdout: '\nVolume Name: medias_volume_1\nType: Distribute\nStatus: Started\nNumber of Bricks: 1\nTransport-type: tcp\nBricks:\nBrick1: ip-10-164-47-249.ec2.internal:/exp1\nOptions Reconfigured:\nauth.allow: *\n'
2013-07-01 13:40:21,996 unit:oscied-transform/0: unit.hook.api INFO: <-- Exiting TransformHooks.py
2013-07-01 13:40:21,998 unit:oscied-webui/0: hook.output DEBUG: Cached relation hook contexts on 'storage:4': ['api:7']
2013-07-01 13:40:22,016 unit:oscied-webui/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:40:22,017 unit:oscied-webui/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-webui-0/charm/hooks/storage-relation-changed
2013-07-01 13:40:22,118 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:22,041 unit:oscied-storage/4: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:2
2013-07-01 13:40:22,045 unit:oscied-storage/4: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:3
2013-07-01 13:40:22,040 unit:oscied-orchestra/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'root_secret': u'5FrvHcm7oyF4WQFW', 'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': True, 'hosts_file': '/etc/hosts', 'rabbit_connection': u'amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': u'mongodb://admin:Iz85QVjdCJugEosz@localhost:27017/orchestra', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}
2013-07-01 13:40:22,048 unit:oscied-transform/0: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:40:22,061 unit:oscied-storage/4: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:4
2013-07-01 13:40:22,069 unit:oscied-publisher/0: unit.relation.watch DEBUG: relation membership change
2013-07-01 13:40:22,076 unit:oscied-storage/4: unit.relation.lifecycle DEBUG: stopped relation:storage lifecycle
2013-07-01 13:40:22,074 unit:oscied-publisher/0: hook.scheduler DEBUG: members changed: old=['oscied-storage/0', 'oscied-storage/2'], new=['oscied-storage/0', 'oscied-storage/2', 'oscied-storage/4']
2013-07-01 13:40:22,078 unit:oscied-publisher/0: hook.scheduler DEBUG: settings changed: (('oscied-storage/4', 0),)
2013-07-01 13:40:22,082 unit:oscied-transform/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-transform-0/charm/hooks/storage-relation-joined
2013-07-01 13:40:22,107 unit:oscied-transform/0: hook.scheduler DEBUG: executing hook for oscied-storage/4:joined
2013-07-01 13:40:22,113 unit:oscied-storage/4: statemachine DEBUG: relationworkflowstate: transition start (None -> up) {}
2013-07-01 13:40:22,122 unit:oscied-storage/4: statemachine DEBUG: relationworkflowstate:  execute action do_start
2013-07-01 13:40:22,122 unit:oscied-storage/4: hook.scheduler DEBUG: start
2013-07-01 13:40:22,167 unit:oscied-storage/4: unit.relation.watch DEBUG: relation watcher start
2013-07-01 13:40:22,168 unit:oscied-storage/4: unit.relation.lifecycle DEBUG: started relation:storage lifecycle
2013-07-01 13:40:22,179 unit:oscied-storage/4: hook.scheduler DEBUG: members changed: old=[], new=['oscied-publisher/0']
2013-07-01 13:40:22,181 unit:oscied-storage/4: hook.scheduler DEBUG: executing hook for oscied-publisher/0:joined
2013-07-01 13:40:22,184 unit:oscied-storage/4: hook.scheduler DEBUG: settings changed: (('oscied-publisher/0', 0),)
2013-07-01 13:40:22,188 unit:oscied-storage/4: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:3
2013-07-01 13:40:22,188 unit:oscied-storage/4: statemachine DEBUG: relationworkflowstate: transition complete start (state up) {}
2013-07-01 13:40:22,186 unit:oscied-transform/0: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['transform:5']
2013-07-01 13:40:22,196 unit:oscied-transform/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:40:22,196 unit:oscied-transform/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-transform-0/charm/hooks/storage-relation-joined
2013-07-01 13:40:22,247 unit:oscied-storage/4: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:4
2013-07-01 13:40:22,248 unit:oscied-storage/4: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['peer:0']
2013-07-01 13:40:22,246 unit:oscied-publisher/0: unit.hook.api INFO: <-- Exiting PublisherHooks.py
2013-07-01 13:40:22,273 unit:oscied-storage/4: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:40:22,274 unit:oscied-storage/4: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:3
2013-07-01 13:40:22,286 unit:oscied-storage/4: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:4
2013-07-01 13:40:22,275 unit:oscied-orchestra/0: unit.relation.watch DEBUG: relation membership change
2013-07-01 13:40:22,289 unit:oscied-storage/4: unit.relation.lifecycle DEBUG: stopped relation:storage lifecycle
2013-07-01 13:40:22,281 unit:oscied-storage/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x2972d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': ['ip-10-154-177-94.ec2.internal', 'ip-10-164-2-99.ec2.internal', 'ip-10-164-71-53.ec2.internal', 'ip-10-164-25-113.ec2.internal'], 'verbose': True}
2013-07-01 13:40:22,288 unit:oscied-orchestra/0: hook.scheduler DEBUG: members changed: old=['oscied-storage/0', 'oscied-storage/2'], new=['oscied-storage/0', 'oscied-storage/2', 'oscied-storage/4']
2013-07-01 13:40:22,291 unit:oscied-orchestra/0: hook.scheduler DEBUG: settings changed: (('oscied-storage/4', 0),)
2013-07-01 13:40:22,297 unit:oscied-publisher/0: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:40:22,323 unit:oscied-storage/4: statemachine DEBUG: relationworkflowstate: transition start (None -> up) {}
2013-07-01 13:40:22,324 unit:oscied-storage/4: statemachine DEBUG: relationworkflowstate:  execute action do_start
2013-07-01 13:40:22,324 unit:oscied-storage/4: hook.scheduler DEBUG: start
2013-07-01 13:40:22,336 unit:oscied-publisher/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-publisher-0/charm/hooks/storage-relation-joined
2013-07-01 13:40:22,374 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] id=2 ids=[0]
2013-07-01 13:40:22,340 unit:oscied-publisher/0: hook.scheduler DEBUG: executing hook for oscied-storage/4:joined
2013-07-01 13:40:22,363 unit:oscied-storage/4: unit.relation.watch DEBUG: relation watcher start
2013-07-01 13:40:22,402 unit:oscied-storage/1: unit.hook.api INFO: [INFO] {'status': 'Started', 'name': 'medias_volume_1', 'bricks': ['ip-10-164-47-249.ec2.internal:/exp1'], 'auth_allow': '*', 'type': 'Distribute', 'transport': 'tcp'}
2013-07-01 13:40:22,367 unit:oscied-storage/4: unit.relation.lifecycle DEBUG: started relation:storage lifecycle
2013-07-01 13:40:22,374 unit:oscied-storage/4: hook.scheduler DEBUG: members changed: old=[], new=['oscied-orchestra/0']
2013-07-01 13:40:22,375 unit:oscied-storage/4: hook.scheduler DEBUG: executing hook for oscied-orchestra/0:joined
2013-07-01 13:40:22,378 unit:oscied-storage/4: hook.scheduler DEBUG: settings changed: (('oscied-orchestra/0', 0),)
2013-07-01 13:40:22,383 unit:oscied-storage/4: statemachine DEBUG: relationworkflowstate: transition complete start (state up) {}
2013-07-01 13:40:22,466 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0xce1320>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/3', 'public_address': 'ec2-54-242-71-153.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-37-115.ec2.internal', 'juju_log': <function callable_command at 0x10610c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:40:22,393 unit:oscied-orchestra/0: unit.hook.api INFO: <-- Exiting OrchestraHooks.py
2013-07-01 13:40:22,420 unit:oscied-publisher/0: hook.output DEBUG: Cached relation hook contexts on 'storage:2': ['publisher:6']
2013-07-01 13:40:22,428 unit:oscied-publisher/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:40:22,429 unit:oscied-publisher/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-publisher-0/charm/hooks/storage-relation-joined
2013-07-01 13:40:22,439 unit:oscied-storage/4: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:4
2013-07-01 13:40:22,437 unit:oscied-orchestra/0: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:40:22,502 unit:oscied-orchestra/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-orchestra-0/charm/hooks/storage-relation-joined
2013-07-01 13:40:22,517 unit:oscied-storage/4: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:4
2013-07-01 13:40:22,507 unit:oscied-orchestra/0: hook.scheduler DEBUG: executing hook for oscied-storage/4:joined
2013-07-01 13:40:22,521 unit:oscied-storage/4: unit.relation.lifecycle DEBUG: stopped relation:storage lifecycle
2013-07-01 13:40:22,509 unit:oscied-webui/0: unit.relation.watch DEBUG: relation membership change
2013-07-01 13:40:22,525 unit:oscied-webui/0: hook.scheduler DEBUG: members changed: old=['oscied-storage/0', 'oscied-storage/2'], new=['oscied-storage/0', 'oscied-storage/2', 'oscied-storage/4']
2013-07-01 13:40:22,529 unit:oscied-webui/0: hook.scheduler DEBUG: settings changed: (('oscied-storage/4', 0),)
2013-07-01 13:40:22,555 unit:oscied-storage/4: statemachine DEBUG: relationworkflowstate: transition start (None -> up) {}
2013-07-01 13:40:22,556 unit:oscied-storage/4: statemachine DEBUG: relationworkflowstate:  execute action do_start
2013-07-01 13:40:22,556 unit:oscied-storage/4: hook.scheduler DEBUG: start
2013-07-01 13:40:22,571 unit:oscied-storage/4: hook.output DEBUG: Cached relation hook contexts on 'storage:2': ['peer:0', 'storage:1']
2013-07-01 13:40:22,604 unit:oscied-storage/4: unit.relation.watch DEBUG: relation watcher start
2013-07-01 13:40:22,604 unit:oscied-storage/4: unit.relation.lifecycle DEBUG: started relation:storage lifecycle
2013-07-01 13:40:22,609 unit:oscied-storage/4: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:40:22,615 unit:oscied-storage/4: hook.scheduler DEBUG: members changed: old=[], new=['oscied-webui/0']
2013-07-01 13:40:22,647 unit:oscied-storage/2: unit.hook.api INFO: [INFO] As slave, stop and delete my own volume medias_volume_2
2013-07-01 13:40:22,617 unit:oscied-storage/4: hook.scheduler DEBUG: executing hook for oscied-webui/0:joined
2013-07-01 13:40:22,620 unit:oscied-storage/4: hook.scheduler DEBUG: settings changed: (('oscied-webui/0', 0),)
2013-07-01 13:40:22,615 unit:oscied-storage/0: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:40:22,627 unit:oscied-storage/4: statemachine DEBUG: relationworkflowstate: transition complete start (state up) {}
2013-07-01 13:40:22,629 unit:oscied-storage/4: unit.lifecycle DEBUG: started unit lifecycle
2013-07-01 13:40:22,662 unit:oscied-storage/4: statemachine DEBUG: unitworkflowstate: transition complete start (state started) {}
2013-07-01 13:40:22,659 unit:oscied-storage/0: hook.output DEBUG: hook peer-relation-joined exited, exit code 0.
2013-07-01 13:40:22,680 unit:oscied-orchestra/0: hook.output DEBUG: Cached relation hook contexts on 'storage:3': ['api:7', 'publisher:6', 'transform:5']
2013-07-01 13:40:22,689 unit:oscied-orchestra/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:40:22,690 unit:oscied-orchestra/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-orchestra-0/charm/hooks/storage-relation-joined
2013-07-01 13:40:22,757 unit:oscied-storage/1: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1b38b90>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:40:22,719 unit:oscied-storage/4: juju.agents.unit DEBUG: Configuration Changed
2013-07-01 13:40:22,809 unit:oscied-storage/3: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:40:22,735 unit:oscied-storage/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-0/charm/hooks/peer-relation-joined
2013-07-01 13:40:22,741 unit:oscied-storage/0: hook.scheduler DEBUG: executing hook for oscied-storage/4:joined
2013-07-01 13:40:22,755 unit:oscied-storage/4: statemachine DEBUG: unitworkflowstate: transition configure (started -> started) {}
2013-07-01 13:40:22,755 unit:oscied-storage/4: statemachine DEBUG: unitworkflowstate:  execute action do_configure
2013-07-01 13:40:22,912 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] Execute gluster volume info all 
2013-07-01 13:40:22,891 unit:oscied-webui/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:22,928 unit:oscied-storage/0: hook.output DEBUG: Cached relation hook contexts on 'peer:0': ['storage:1', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:40:22,936 unit:oscied-storage/0: unit.relation.lifecycle DEBUG: Executing hook peer-relation-joined
2013-07-01 13:40:22,936 unit:oscied-storage/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-0/charm/hooks/peer-relation-joined
2013-07-01 13:40:22,988 unit:oscied-storage/4: hook.output DEBUG: Cached relation hook contexts on 'storage:3': ['peer:0', 'storage:1', 'storage:2']
2013-07-01 13:40:23,013 unit:oscied-storage/4: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:40:23,095 unit:oscied-storage/1: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:40:23,149 unit:oscied-storage/3: unit.hook.api INFO: [HOOK] Execute StorageHooks hook start
2013-07-01 13:40:23,145 unit:oscied-storage/1: hook.output DEBUG: hook config-changed exited, exit code 0.
2013-07-01 13:40:23,146 unit:oscied-storage/1: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-1/charm/hooks/config-changed
2013-07-01 13:40:23,185 unit:oscied-storage/1: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:2
2013-07-01 13:40:23,188 unit:oscied-storage/1: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:3
2013-07-01 13:40:23,192 unit:oscied-storage/1: juju.state.hook DEBUG: Ignoring partially constructed relation: peer:0
2013-07-01 13:40:23,135 unit:oscied-transform/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:23,200 unit:oscied-storage/1: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:1
2013-07-01 13:40:23,203 unit:oscied-storage/1: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:4
2013-07-01 13:40:23,203 unit:oscied-storage/1: hook.output DEBUG: Cached relation hook contexts: []
2013-07-01 13:40:23,212 unit:oscied-storage/1: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-1/charm/hooks/start
2013-07-01 13:40:23,256 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] Execute gluster volume info medias_volume_2 
2013-07-01 13:40:23,243 unit:oscied-webui/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:23,282 unit:oscied-storage/4: hook.output DEBUG: Cached relation hook contexts on 'storage:4': ['peer:0', 'storage:1', 'storage:2', 'storage:3']
2013-07-01 13:40:23,328 unit:oscied-storage/4: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:40:23,405 unit:oscied-storage/4: hook.output DEBUG: Cached relation hook contexts: ['peer:0', 'storage:1', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:40:23,402 unit:oscied-publisher/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:23,482 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] Execute pgrep glusterd
2013-07-01 13:40:23,492 unit:oscied-transform/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:23,568 unit:oscied-storage/4: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:23,572 unit:oscied-orchestra/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:23,616 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] Volume infos stdout: '\nVolume Name: medias_volume_2\nType: Distribute\nStatus: Started\nNumber of Bricks: 1\nTransport-type: tcp\nBricks:\nBrick1: ip-10-202-41-54.ec2.internal:/exp2\nOptions Reconfigured:\nauth.allow: *\n'
2013-07-01 13:40:23,589 unit:oscied-webui/0: unit.hook.api INFO: --> Entering WebuiHooks.py
2013-07-01 13:40:23,829 unit:oscied-storage/3: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0xce1320>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:40:23,770 unit:oscied-publisher/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:23,788 unit:oscied-storage/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:23,826 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:23,886 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] {'status': 'Started', 'name': 'medias_volume_2', 'bricks': ['ip-10-202-41-54.ec2.internal:/exp2'], 'auth_allow': '*', 'type': 'Distribute', 'transport': 'tcp'}
2013-07-01 13:40:23,929 unit:oscied-storage/4: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:23,924 unit:oscied-webui/0: unit.hook.api INFO: [HOOK] Execute WebuiHooks hook storage-relation-changed
2013-07-01 13:40:23,927 unit:oscied-orchestra/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:24,108 unit:oscied-storage/1: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:24,165 unit:oscied-storage/3: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:40:24,115 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:24,164 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] Execute gluster volume stop medias_volume_2 force < 'y\n'
2013-07-01 13:40:24,216 unit:oscied-storage/3: hook.output DEBUG: hook start exited, exit code 0.
2013-07-01 13:40:24,217 unit:oscied-storage/3: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-3/charm/hooks/start
2013-07-01 13:40:24,218 unit:oscied-storage/3: unit.lifecycle DEBUG: starting service relation watch
2013-07-01 13:40:24,218 unit:oscied-storage/3: unit.lifecycle DEBUG: starting unit relation resolved watch
2013-07-01 13:40:24,242 unit:oscied-storage/3: unit.lifecycle DEBUG: relation resolved changed
2013-07-01 13:40:24,242 unit:oscied-storage/3: unit.lifecycle INFO: processing relation resolved changed
2013-07-01 13:40:24,155 unit:oscied-storage/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:24,249 unit:oscied-storage/3: unit.lifecycle DEBUG: services changed old:None new:[<ServiceRelationState name:storage role:server id:relation-0000000002 scope:global>, <ServiceRelationState name:storage role:server id:relation-0000000003 scope:global>, <ServiceRelationState name:peer role:peer id:relation-0000000000 scope:global>, <ServiceRelationState name:storage role:server id:relation-0000000001 scope:global>, <ServiceRelationState name:storage role:server id:relation-0000000004 scope:global>]
2013-07-01 13:40:24,250 unit:oscied-storage/3: unit.lifecycle DEBUG: processing relations changed
2013-07-01 13:40:24,179 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-transform/0', 'public_address': 'ec2-72-44-43-150.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-25-113.ec2.internal', 'juju_log': <function callable_command at 0x1f162a8>, 'config': {u'storage_mountpoint': u'', 'verbose': True, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'transform_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 1, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u''}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media transform. Contains ffmpeg & x264.\nCan be scaled to multiple instances.\n", 'name': 'oscied-transform', 'requires': {'storage': {'interface': 'mount'}, 'transform': {'interface': 'subordinate'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Encoder"}}
2013-07-01 13:40:24,217 unit:oscied-storage/4: unit.relation.watch DEBUG: relation membership change
2013-07-01 13:40:24,207 unit:oscied-storage/0: unit.relation.watch DEBUG: relation membership change
2013-07-01 13:40:24,246 unit:oscied-storage/2: unit.relation.watch DEBUG: relation membership change
2013-07-01 13:40:24,298 unit:oscied-storage/3: unit.relation.lifecycle DEBUG: stopped relation:peer lifecycle
2013-07-01 13:40:24,229 unit:oscied-storage/4: hook.scheduler DEBUG: members changed: old=['oscied-storage/0', 'oscied-storage/2'], new=['oscied-storage/0', 'oscied-storage/2', 'oscied-storage/3']
2013-07-01 13:40:24,258 unit:oscied-storage/2: hook.scheduler DEBUG: members changed: old=['oscied-storage/0', 'oscied-storage/4'], new=['oscied-storage/0', 'oscied-storage/3', 'oscied-storage/4']
2013-07-01 13:40:24,219 unit:oscied-storage/0: hook.scheduler DEBUG: members changed: old=['oscied-storage/2', 'oscied-storage/4'], new=['oscied-storage/2', 'oscied-storage/3', 'oscied-storage/4']
2013-07-01 13:40:24,261 unit:oscied-storage/2: hook.scheduler DEBUG: settings changed: (('oscied-storage/3', 0),)
2013-07-01 13:40:24,224 unit:oscied-storage/0: hook.scheduler DEBUG: settings changed: (('oscied-storage/3', 0),)
2013-07-01 13:40:24,235 unit:oscied-storage/4: hook.scheduler DEBUG: settings changed: (('oscied-storage/3', 0),)
2013-07-01 13:40:24,334 unit:oscied-storage/3: statemachine DEBUG: relationworkflowstate: transition start (None -> up) {}
2013-07-01 13:40:24,335 unit:oscied-storage/3: statemachine DEBUG: relationworkflowstate:  execute action do_start
2013-07-01 13:40:24,335 unit:oscied-storage/3: hook.scheduler DEBUG: start
2013-07-01 13:40:24,357 unit:oscied-storage/3: unit.relation.watch DEBUG: relation watcher start
2013-07-01 13:40:24,357 unit:oscied-storage/3: unit.relation.lifecycle DEBUG: started relation:peer lifecycle
2013-07-01 13:40:24,363 unit:oscied-storage/3: hook.scheduler DEBUG: members changed: old=[], new=['oscied-storage/0', 'oscied-storage/2', 'oscied-storage/4']
2013-07-01 13:40:24,364 unit:oscied-storage/3: hook.scheduler DEBUG: executing hook for oscied-storage/0:joined
2013-07-01 13:40:24,284 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:24,255 unit:oscied-transform/2: unit.hook.api INFO: [DEBUG] Execute apt-get -y install glusterfs-client ffmpeg libavcodec-dev nfs-common ntp libavutil-dev libavcodec-extra-53 libavformat-dev libswscale-dev x264 zlib1g-dev libavdevice-dev
2013-07-01 13:40:24,369 unit:oscied-storage/3: hook.scheduler DEBUG: settings changed: (('oscied-storage/2', 0),)
2013-07-01 13:40:24,371 unit:oscied-storage/3: hook.scheduler DEBUG: settings changed: (('oscied-storage/4', 0),)
2013-07-01 13:40:24,372 unit:oscied-storage/3: hook.scheduler DEBUG: settings changed: (('oscied-storage/0', 0),)
2013-07-01 13:40:24,374 unit:oscied-storage/3: statemachine DEBUG: relationworkflowstate: transition complete start (state up) {}
2013-07-01 13:40:24,283 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:24,430 unit:oscied-storage/3: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:2
2013-07-01 13:40:24,434 unit:oscied-storage/3: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:3
2013-07-01 13:40:24,439 unit:oscied-storage/3: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:1
2013-07-01 13:40:24,445 unit:oscied-storage/3: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:4
2013-07-01 13:40:24,445 unit:oscied-storage/3: hook.output DEBUG: Cached relation hook contexts on 'peer:0': []
2013-07-01 13:40:24,447 unit:oscied-storage/3: unit.relation.lifecycle DEBUG: stopped relation:storage lifecycle
2013-07-01 13:40:24,357 unit:oscied-transform/0: unit.relation.watch DEBUG: relation membership change
2013-07-01 13:40:24,363 unit:oscied-transform/0: hook.scheduler DEBUG: members changed: old=['oscied-storage/0', 'oscied-storage/2', 'oscied-storage/4'], new=['oscied-storage/0', 'oscied-storage/2', 'oscied-storage/3', 'oscied-storage/4']
2013-07-01 13:40:24,455 unit:oscied-storage/3: unit.relation.lifecycle DEBUG: Executing hook peer-relation-joined
2013-07-01 13:40:24,456 unit:oscied-storage/3: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-3/charm/hooks/peer-relation-joined
2013-07-01 13:40:24,369 unit:oscied-transform/0: hook.scheduler DEBUG: settings changed: (('oscied-storage/3', 0),)
2013-07-01 13:40:24,470 unit:oscied-storage/3: statemachine DEBUG: relationworkflowstate: transition start (None -> up) {}
2013-07-01 13:40:24,475 unit:oscied-storage/3: statemachine DEBUG: relationworkflowstate:  execute action do_start
2013-07-01 13:40:24,475 unit:oscied-storage/3: hook.scheduler DEBUG: start
2013-07-01 13:40:24,494 unit:oscied-storage/3: unit.relation.watch DEBUG: relation watcher start
2013-07-01 13:40:24,494 unit:oscied-storage/3: unit.relation.lifecycle DEBUG: started relation:storage lifecycle
2013-07-01 13:40:24,503 unit:oscied-storage/3: hook.scheduler DEBUG: members changed: old=[], new=['oscied-transform/0']
2013-07-01 13:40:24,504 unit:oscied-storage/3: hook.scheduler DEBUG: executing hook for oscied-transform/0:joined
2013-07-01 13:40:24,509 unit:oscied-storage/3: hook.scheduler DEBUG: settings changed: (('oscied-transform/0', 0),)
2013-07-01 13:40:24,480 unit:oscied-storage/1: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:24,511 unit:oscied-storage/3: statemachine DEBUG: relationworkflowstate: transition complete start (state up) {}
2013-07-01 13:40:24,465 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'proxy_ips': [], 'storage_fstype': 'glusterfs', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-234-214-201.compute-1.amazonaws.com', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-publisher/0', 'public_address': 'ec2-54-234-214-201.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-2-99.ec2.internal', 'juju_log': <function callable_command at 0x207e5f0>, 'config': {u'max_upload_size': 4294967296, u'storage_mountpoint': u'', 'verbose': True, u'max_input_time': 600, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'publisher_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 2, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u'', u'max_execution_time': 180}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media publisher. Contains apache & mod streaming.\nCan be scaled to multiple instances.\n", 'provides': {'streaming': {'interface': 'http'}}, 'name': 'oscied-publisher', 'requires': {'publisher': {'interface': 'subordinate'}, 'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Publisher"}}
2013-07-01 13:40:24,498 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:24,600 unit:oscied-storage/3: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:2
2013-07-01 13:40:24,603 unit:oscied-storage/3: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:3
2013-07-01 13:40:24,610 unit:oscied-storage/3: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:4
2013-07-01 13:40:24,522 unit:oscied-transform/0: unit.hook.api INFO: --> Entering TransformHooks.py
2013-07-01 13:40:24,525 unit:oscied-publisher/0: unit.relation.watch DEBUG: relation membership change
2013-07-01 13:40:24,613 unit:oscied-storage/3: unit.relation.lifecycle DEBUG: stopped relation:storage lifecycle
2013-07-01 13:40:24,537 unit:oscied-publisher/0: hook.scheduler DEBUG: members changed: old=['oscied-storage/0', 'oscied-storage/2', 'oscied-storage/4'], new=['oscied-storage/0', 'oscied-storage/2', 'oscied-storage/3', 'oscied-storage/4']
2013-07-01 13:40:24,542 unit:oscied-publisher/0: hook.scheduler DEBUG: settings changed: (('oscied-storage/3', 0),)
2013-07-01 13:40:24,644 unit:oscied-storage/3: statemachine DEBUG: relationworkflowstate: transition start (None -> up) {}
2013-07-01 13:40:24,647 unit:oscied-storage/3: statemachine DEBUG: relationworkflowstate:  execute action do_start
2013-07-01 13:40:24,647 unit:oscied-storage/3: hook.scheduler DEBUG: start
2013-07-01 13:40:24,689 unit:oscied-storage/3: unit.relation.watch DEBUG: relation watcher start
2013-07-01 13:40:24,689 unit:oscied-storage/3: unit.relation.lifecycle DEBUG: started relation:storage lifecycle
2013-07-01 13:40:24,697 unit:oscied-storage/3: hook.scheduler DEBUG: members changed: old=[], new=['oscied-publisher/0']
2013-07-01 13:40:24,701 unit:oscied-storage/3: hook.scheduler DEBUG: executing hook for oscied-publisher/0:joined
2013-07-01 13:40:24,703 unit:oscied-storage/3: hook.scheduler DEBUG: settings changed: (('oscied-publisher/0', 0),)
2013-07-01 13:40:24,707 unit:oscied-storage/3: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:3
2013-07-01 13:40:24,708 unit:oscied-storage/3: statemachine DEBUG: relationworkflowstate: transition complete start (state up) {}
2013-07-01 13:40:24,637 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x19b3d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/4', 'public_address': 'ec2-54-242-176-247.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-73-202.ec2.internal', 'juju_log': <function callable_command at 0x1f6d0c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:40:24,626 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'root_secret': u'5FrvHcm7oyF4WQFW', 'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': True, 'hosts_file': '/etc/hosts', 'rabbit_connection': u'amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': u'mongodb://admin:Iz85QVjdCJugEosz@localhost:27017/orchestra', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}, 'name': 'oscied-orchestra/0', 'public_address': 'ec2-54-234-192-63.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-71-53.ec2.internal', 'juju_log': <function callable_command at 0x1f217d0>, 'config': {u'repositories_pass': u'41nVGq07GmSgK9Ud', u'storage_options': u'', 'verbose': True, u'storage_nat_address': u'', u'rabbit_password': u'OZy23iO0D4UpYS2k', u'storage_fstype': u'', u'nodes_secret': u'bdZccPuG9fibjwCS', u'transform_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/transform/source', u'repositories_user': u'oscied', u'root_secret': u'5FrvHcm7oyF4WQFW', u'storage_mountpoint': u'', u'mongo_nodes_password': u'M2qlif8rdtKtBYil', u'publisher_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/publisher/source', u'mongo_admin_password': u'Iz85QVjdCJugEosz', u'storage_address': u'', u'webui_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/webui/source'}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED orchestrator.\n", 'provides': {'publisher': {'interface': 'subordinate'}, 'api': {'interface': 'orchestra'}, 'transform': {'interface': 'subordinate'}}, 'name': 'oscied-orchestra', 'requires': {'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Orchestra"}}
2013-07-01 13:40:24,777 unit:oscied-storage/3: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:4
2013-07-01 13:40:24,781 unit:oscied-storage/3: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['peer:0']
2013-07-01 13:40:24,799 unit:oscied-storage/3: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:40:24,802 unit:oscied-storage/3: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:3
2013-07-01 13:40:24,821 unit:oscied-storage/3: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:4
2013-07-01 13:40:24,729 unit:oscied-orchestra/0: unit.relation.watch DEBUG: relation membership change
2013-07-01 13:40:24,824 unit:oscied-storage/3: unit.relation.lifecycle DEBUG: stopped relation:storage lifecycle
2013-07-01 13:40:24,739 unit:oscied-orchestra/0: hook.scheduler DEBUG: members changed: old=['oscied-storage/0', 'oscied-storage/2', 'oscied-storage/4'], new=['oscied-storage/0', 'oscied-storage/2', 'oscied-storage/3', 'oscied-storage/4']
2013-07-01 13:40:24,743 unit:oscied-orchestra/0: hook.scheduler DEBUG: settings changed: (('oscied-storage/3', 0),)
2013-07-01 13:40:24,856 unit:oscied-storage/3: statemachine DEBUG: relationworkflowstate: transition start (None -> up) {}
2013-07-01 13:40:24,861 unit:oscied-storage/3: statemachine DEBUG: relationworkflowstate:  execute action do_start
2013-07-01 13:40:24,830 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:24,861 unit:oscied-storage/3: hook.scheduler DEBUG: start
2013-07-01 13:40:24,814 unit:oscied-publisher/0: unit.hook.api INFO: --> Entering PublisherHooks.py
2013-07-01 13:40:24,897 unit:oscied-storage/3: unit.relation.watch DEBUG: relation watcher start
2013-07-01 13:40:24,897 unit:oscied-storage/3: unit.relation.lifecycle DEBUG: started relation:storage lifecycle
2013-07-01 13:40:24,918 unit:oscied-storage/3: hook.scheduler DEBUG: members changed: old=[], new=['oscied-orchestra/0']
2013-07-01 13:40:24,920 unit:oscied-storage/3: hook.scheduler DEBUG: executing hook for oscied-orchestra/0:joined
2013-07-01 13:40:24,922 unit:oscied-storage/3: hook.scheduler DEBUG: settings changed: (('oscied-orchestra/0', 0),)
2013-07-01 13:40:24,926 unit:oscied-storage/3: statemachine DEBUG: relationworkflowstate: transition complete start (state up) {}
2013-07-01 13:40:24,840 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x13eed60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': ['ip-10-154-177-94.ec2.internal', 'ip-10-164-2-99.ec2.internal', 'ip-10-164-71-53.ec2.internal', 'ip-10-164-25-113.ec2.internal'], 'verbose': True}, 'name': 'oscied-storage/0', 'public_address': 'ec2-54-227-38-161.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-154-181-123.ec2.internal', 'juju_log': <function callable_command at 0x19a80c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:40:24,856 unit:oscied-transform/0: unit.hook.api INFO: [HOOK] Execute TransformHooks hook storage-relation-joined
2013-07-01 13:40:24,984 unit:oscied-storage/4: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:40:25,061 unit:oscied-storage/3: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:4
2013-07-01 13:40:24,976 unit:oscied-orchestra/0: unit.hook.api INFO: --> Entering OrchestraHooks.py
2013-07-01 13:40:25,146 unit:oscied-storage/3: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:4
2013-07-01 13:40:25,055 unit:oscied-webui/0: unit.relation.watch DEBUG: relation membership change
2013-07-01 13:40:25,149 unit:oscied-storage/3: unit.relation.lifecycle DEBUG: stopped relation:storage lifecycle
2013-07-01 13:40:25,067 unit:oscied-webui/0: hook.scheduler DEBUG: members changed: old=['oscied-storage/0', 'oscied-storage/2', 'oscied-storage/4'], new=['oscied-storage/0', 'oscied-storage/2', 'oscied-storage/3', 'oscied-storage/4']
2013-07-01 13:40:25,072 unit:oscied-webui/0: hook.scheduler DEBUG: settings changed: (('oscied-storage/3', 0),)
2013-07-01 13:40:25,181 unit:oscied-storage/3: statemachine DEBUG: relationworkflowstate: transition start (None -> up) {}
2013-07-01 13:40:25,182 unit:oscied-storage/3: statemachine DEBUG: relationworkflowstate:  execute action do_start
2013-07-01 13:40:25,182 unit:oscied-storage/3: hook.scheduler DEBUG: start
2013-07-01 13:40:25,193 unit:oscied-storage/3: hook.output DEBUG: Cached relation hook contexts on 'storage:2': ['peer:0', 'storage:1']
2013-07-01 13:40:25,186 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x10b3320>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/1', 'public_address': 'ec2-107-21-196-203.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-47-249.ec2.internal', 'juju_log': <function callable_command at 0x14330c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:40:25,222 unit:oscied-storage/3: unit.relation.watch DEBUG: relation watcher start
2013-07-01 13:40:25,223 unit:oscied-storage/3: unit.relation.lifecycle DEBUG: started relation:storage lifecycle
2013-07-01 13:40:25,228 unit:oscied-storage/3: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:40:25,235 unit:oscied-storage/3: hook.scheduler DEBUG: members changed: old=[], new=['oscied-webui/0']
2013-07-01 13:40:25,236 unit:oscied-storage/3: hook.scheduler DEBUG: executing hook for oscied-webui/0:joined
2013-07-01 13:40:25,238 unit:oscied-storage/3: hook.scheduler DEBUG: settings changed: (('oscied-webui/0', 0),)
2013-07-01 13:40:25,242 unit:oscied-storage/3: statemachine DEBUG: relationworkflowstate: transition complete start (state up) {}
2013-07-01 13:40:25,157 unit:oscied-publisher/0: unit.hook.api INFO: [HOOK] Execute PublisherHooks hook storage-relation-joined
2013-07-01 13:40:25,244 unit:oscied-storage/3: unit.lifecycle DEBUG: started unit lifecycle
2013-07-01 13:40:25,172 unit:oscied-storage/0: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:40:25,194 unit:oscied-transform/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:40:25,287 unit:oscied-storage/3: statemachine DEBUG: unitworkflowstate: transition complete start (state started) {}
2013-07-01 13:40:25,391 unit:oscied-storage/3: juju.agents.unit DEBUG: Configuration Changed
2013-07-01 13:40:25,311 unit:oscied-orchestra/0: unit.hook.api INFO: [HOOK] Execute OrchestraHooks hook storage-relation-joined
2013-07-01 13:40:25,330 unit:oscied-storage/4: unit.hook.api INFO: [HOOK] Execute StorageHooks hook peer-relation-joined
2013-07-01 13:40:25,435 unit:oscied-storage/3: statemachine DEBUG: unitworkflowstate: transition configure (started -> started) {}
2013-07-01 13:40:25,435 unit:oscied-storage/3: statemachine DEBUG: unitworkflowstate:  execute action do_configure
2013-07-01 13:40:25,528 unit:oscied-storage/1: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:40:25,491 unit:oscied-publisher/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'proxy_ips': [], 'storage_fstype': 'glusterfs', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-234-214-201.compute-1.amazonaws.com', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:40:25,502 unit:oscied-storage/0: unit.hook.api INFO: [HOOK] Execute StorageHooks hook peer-relation-joined
2013-07-01 13:40:25,566 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] Execute gluster volume delete medias_volume_2  < 'y\n'
2013-07-01 13:40:25,531 unit:oscied-transform/0: unit.hook.api INFO: <-- Exiting TransformHooks.py
2013-07-01 13:40:25,582 unit:oscied-transform/0: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:40:25,604 unit:oscied-transform/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-transform-0/charm/hooks/storage-relation-joined
2013-07-01 13:40:25,605 unit:oscied-webui/0: unit.hook.api INFO: [REMARK] Waiting for complete setup !
2013-07-01 13:40:25,609 unit:oscied-transform/0: hook.scheduler DEBUG: executing hook for oscied-storage/2:modified
2013-07-01 13:40:25,717 unit:oscied-storage/3: hook.output DEBUG: Cached relation hook contexts on 'storage:3': ['peer:0', 'storage:1', 'storage:2']
2013-07-01 13:40:25,737 unit:oscied-storage/3: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:40:25,646 unit:oscied-orchestra/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'root_secret': u'5FrvHcm7oyF4WQFW', 'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': True, 'hosts_file': '/etc/hosts', 'rabbit_connection': u'amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': u'mongodb://admin:Iz85QVjdCJugEosz@localhost:27017/orchestra', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}
2013-07-01 13:40:25,681 unit:oscied-transform/0: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['transform:5']
2013-07-01 13:40:25,688 unit:oscied-transform/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:40:25,688 unit:oscied-transform/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-transform-0/charm/hooks/storage-relation-changed
2013-07-01 13:40:25,858 unit:oscied-storage/1: unit.hook.api INFO: [HOOK] Execute StorageHooks hook start
2013-07-01 13:40:25,827 unit:oscied-publisher/0: unit.hook.api INFO: <-- Exiting PublisherHooks.py
2013-07-01 13:40:25,881 unit:oscied-publisher/0: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:40:25,934 unit:oscied-storage/2: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1bcdd60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:40:25,985 unit:oscied-storage/3: hook.output DEBUG: Cached relation hook contexts on 'storage:4': ['peer:0', 'storage:1', 'storage:2', 'storage:3']
2013-07-01 13:40:25,911 unit:oscied-publisher/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-publisher-0/charm/hooks/storage-relation-joined
2013-07-01 13:40:25,915 unit:oscied-publisher/0: hook.scheduler DEBUG: executing hook for oscied-storage/2:modified
2013-07-01 13:40:26,010 unit:oscied-storage/3: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:40:25,942 unit:oscied-webui/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_options': '', 'verbose': None, 'database_template_file': 'templates/database.php.template', 'hosts_file': '/etc/hosts', 'sites_enabled_path': '/etc/apache2/sites-enabled', 'storage_path': '/mnt/storage', 'storage_mountpoint': 'medias_volume_0', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'site_database_file': 'webui-db.sql', 'general_config_file': '/var/www/application/config/config.php', 'database_config_file': '/var/www/application/config/database.php', 'proxy_ips': [], 'htaccess_template_file': 'templates/htaccess.template', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'www_medias_path': '/var/www/medias', 'www_uploads_path': '/var/www/uploads', '_pickle_filename': 'local_config.pkl', 'site_template_file': 'templates/000-default', 'storage_mount_sleep_delay': 5, 'storage_nat_address': '', 'encryption_key': '5UCuWXhlrxOscNFuShIfJtLlI2oB3crZ', 'storage_fstype': 'glusterfs', 'www_root_path': '/var/www', 'general_template_file': 'templates/config.php.template', 'htaccess_config_file': '/var/www/.htaccess'}
2013-07-01 13:40:25,988 unit:oscied-orchestra/0: unit.hook.api INFO: <-- Exiting OrchestraHooks.py
2013-07-01 13:40:26,096 unit:oscied-storage/3: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:26,020 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] id=4 ids=[0]
2013-07-01 13:40:26,018 unit:oscied-publisher/0: hook.output DEBUG: Cached relation hook contexts on 'storage:2': ['publisher:6']
2013-07-01 13:40:26,108 unit:oscied-storage/3: hook.output DEBUG: Cached relation hook contexts: ['peer:0', 'storage:1', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:40:26,026 unit:oscied-publisher/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:40:26,026 unit:oscied-publisher/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-publisher-0/charm/hooks/storage-relation-changed
2013-07-01 13:40:26,033 unit:oscied-orchestra/0: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:40:26,095 unit:oscied-orchestra/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-orchestra-0/charm/hooks/storage-relation-joined
2013-07-01 13:40:26,099 unit:oscied-orchestra/0: hook.scheduler DEBUG: executing hook for oscied-storage/2:modified
2013-07-01 13:40:26,191 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] Execute pgrep glusterd
2013-07-01 13:40:26,161 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] id=0 ids=[2, 4]
2013-07-01 13:40:26,214 unit:oscied-storage/2: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:40:26,264 unit:oscied-storage/2: hook.output DEBUG: hook peer-relation-joined exited, exit code 0.
2013-07-01 13:40:26,269 unit:oscied-storage/2: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-2/charm/hooks/peer-relation-joined
2013-07-01 13:40:26,276 unit:oscied-storage/2: hook.scheduler DEBUG: executing hook for oscied-storage/4:joined
2013-07-01 13:40:26,277 unit:oscied-storage/2: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-2/charm/hooks/storage-relation-joined
2013-07-01 13:40:26,253 unit:oscied-orchestra/0: hook.output DEBUG: Cached relation hook contexts on 'storage:3': ['api:7', 'publisher:6', 'transform:5']
2013-07-01 13:40:26,262 unit:oscied-orchestra/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:40:26,263 unit:oscied-orchestra/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-orchestra-0/charm/hooks/storage-relation-changed
2013-07-01 13:40:26,280 unit:oscied-webui/0: unit.hook.api INFO: <-- Exiting WebuiHooks.py
2013-07-01 13:40:26,325 unit:oscied-webui/0: hook.output DEBUG: hook storage-relation-changed exited, exit code 0.
2013-07-01 13:40:26,346 unit:oscied-webui/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-webui-0/charm/hooks/storage-relation-changed
2013-07-01 13:40:26,347 unit:oscied-webui/0: hook.scheduler DEBUG: executing hook for oscied-storage/4:joined
2013-07-01 13:40:26,369 unit:oscied-storage/4: unit.hook.api INFO: [INFO] As slave, stop and delete my own volume medias_volume_4
2013-07-01 13:40:26,455 unit:oscied-storage/3: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:26,438 unit:oscied-webui/0: hook.output DEBUG: Cached relation hook contexts on 'storage:4': ['api:7']
2013-07-01 13:40:26,449 unit:oscied-webui/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:40:26,449 unit:oscied-webui/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-webui-0/charm/hooks/storage-relation-joined
2013-07-01 13:40:26,534 unit:oscied-storage/1: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x10b3320>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:40:26,493 unit:oscied-storage/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x13eed60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': ['ip-10-154-177-94.ec2.internal', 'ip-10-164-2-99.ec2.internal', 'ip-10-164-71-53.ec2.internal', 'ip-10-164-25-113.ec2.internal'], 'verbose': True}
2013-07-01 13:40:26,619 unit:oscied-storage/2: hook.output DEBUG: Cached relation hook contexts on 'peer:0': ['storage:1', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:40:26,628 unit:oscied-storage/2: unit.relation.lifecycle DEBUG: Executing hook peer-relation-joined
2013-07-01 13:40:26,638 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] Execute make install
2013-07-01 13:40:26,653 unit:oscied-transform/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:26,710 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] Execute gluster volume info all 
2013-07-01 13:40:26,822 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:26,865 unit:oscied-storage/1: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:40:26,826 unit:oscied-storage/0: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:40:26,908 unit:oscied-storage/1: hook.output DEBUG: hook start exited, exit code 0.
2013-07-01 13:40:26,908 unit:oscied-storage/1: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-1/charm/hooks/start
2013-07-01 13:40:26,909 unit:oscied-storage/1: unit.lifecycle DEBUG: starting service relation watch
2013-07-01 13:40:26,909 unit:oscied-storage/1: unit.lifecycle DEBUG: starting unit relation resolved watch
2013-07-01 13:40:26,926 unit:oscied-storage/1: unit.lifecycle DEBUG: relation resolved changed
2013-07-01 13:40:26,926 unit:oscied-storage/1: unit.lifecycle INFO: processing relation resolved changed
2013-07-01 13:40:26,870 unit:oscied-storage/0: hook.output DEBUG: hook peer-relation-joined exited, exit code 0.
2013-07-01 13:40:26,933 unit:oscied-storage/1: unit.lifecycle DEBUG: services changed old:None new:[<ServiceRelationState name:storage role:server id:relation-0000000002 scope:global>, <ServiceRelationState name:storage role:server id:relation-0000000003 scope:global>, <ServiceRelationState name:peer role:peer id:relation-0000000000 scope:global>, <ServiceRelationState name:storage role:server id:relation-0000000001 scope:global>, <ServiceRelationState name:storage role:server id:relation-0000000004 scope:global>]
2013-07-01 13:40:26,934 unit:oscied-storage/1: unit.lifecycle DEBUG: processing relations changed
2013-07-01 13:40:27,023 unit:oscied-storage/1: unit.relation.lifecycle DEBUG: stopped relation:peer lifecycle
2013-07-01 13:40:27,001 unit:oscied-storage/2: unit.relation.watch DEBUG: relation membership change
2013-07-01 13:40:26,973 unit:oscied-storage/4: unit.relation.watch DEBUG: relation membership change
2013-07-01 13:40:27,053 unit:oscied-storage/3: unit.relation.watch DEBUG: relation membership change
2013-07-01 13:40:26,965 unit:oscied-storage/0: unit.relation.watch DEBUG: relation membership change
2013-07-01 13:40:26,986 unit:oscied-storage/4: hook.scheduler DEBUG: members changed: old=['oscied-storage/0', 'oscied-storage/2', 'oscied-storage/3'], new=['oscied-storage/0', 'oscied-storage/1', 'oscied-storage/2', 'oscied-storage/3']
2013-07-01 13:40:27,014 unit:oscied-storage/2: hook.scheduler DEBUG: members changed: old=['oscied-storage/0', 'oscied-storage/3', 'oscied-storage/4'], new=['oscied-storage/0', 'oscied-storage/1', 'oscied-storage/3', 'oscied-storage/4']
2013-07-01 13:40:26,979 unit:oscied-storage/0: hook.scheduler DEBUG: members changed: old=['oscied-storage/2', 'oscied-storage/3', 'oscied-storage/4'], new=['oscied-storage/1', 'oscied-storage/2', 'oscied-storage/3', 'oscied-storage/4']
2013-07-01 13:40:27,038 unit:oscied-storage/1: statemachine DEBUG: relationworkflowstate: transition start (None -> up) {}
2013-07-01 13:40:27,038 unit:oscied-storage/1: statemachine DEBUG: relationworkflowstate:  execute action do_start
2013-07-01 13:40:27,066 unit:oscied-storage/3: hook.scheduler DEBUG: members changed: old=['oscied-storage/0', 'oscied-storage/2', 'oscied-storage/4'], new=['oscied-storage/0', 'oscied-storage/1', 'oscied-storage/2', 'oscied-storage/4']
2013-07-01 13:40:27,039 unit:oscied-storage/1: hook.scheduler DEBUG: start
2013-07-01 13:40:27,018 unit:oscied-storage/2: hook.scheduler DEBUG: settings changed: (('oscied-storage/1', 0),)
2013-07-01 13:40:26,992 unit:oscied-storage/4: hook.scheduler DEBUG: settings changed: (('oscied-storage/1', 0),)
2013-07-01 13:40:26,983 unit:oscied-storage/0: hook.scheduler DEBUG: settings changed: (('oscied-storage/1', 0),)
2013-07-01 13:40:27,073 unit:oscied-storage/3: hook.scheduler DEBUG: settings changed: (('oscied-storage/1', 0),)
2013-07-01 13:40:26,995 unit:oscied-publisher/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:27,061 unit:oscied-storage/1: unit.relation.watch DEBUG: relation watcher start
2013-07-01 13:40:27,062 unit:oscied-storage/1: unit.relation.lifecycle DEBUG: started relation:peer lifecycle
2013-07-01 13:40:27,069 unit:oscied-storage/1: hook.scheduler DEBUG: members changed: old=[], new=['oscied-storage/0', 'oscied-storage/2', 'oscied-storage/3', 'oscied-storage/4']
2013-07-01 13:40:27,070 unit:oscied-storage/1: hook.scheduler DEBUG: executing hook for oscied-storage/0:joined
2013-07-01 13:40:27,077 unit:oscied-storage/1: hook.scheduler DEBUG: settings changed: (('oscied-storage/2', 0),)
2013-07-01 13:40:27,019 unit:oscied-transform/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:27,079 unit:oscied-storage/1: hook.scheduler DEBUG: settings changed: (('oscied-storage/3', 0),)
2013-07-01 13:40:27,080 unit:oscied-storage/1: hook.scheduler DEBUG: settings changed: (('oscied-storage/4', 0),)
2013-07-01 13:40:27,082 unit:oscied-storage/1: hook.scheduler DEBUG: settings changed: (('oscied-storage/0', 0),)
2013-07-01 13:40:27,084 unit:oscied-storage/1: statemachine DEBUG: relationworkflowstate: transition complete start (state up) {}
2013-07-01 13:40:27,032 unit:oscied-storage/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-0/charm/hooks/peer-relation-joined
2013-07-01 13:40:27,037 unit:oscied-storage/0: hook.scheduler DEBUG: executing hook for oscied-storage/2:modified
2013-07-01 13:40:27,137 unit:oscied-storage/1: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:2
2013-07-01 13:40:27,141 unit:oscied-storage/1: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:3
2013-07-01 13:40:27,149 unit:oscied-storage/1: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:1
2013-07-01 13:40:27,179 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x20e3d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/3', 'public_address': 'ec2-54-242-71-153.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-37-115.ec2.internal', 'juju_log': <function callable_command at 0x269d0c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:40:27,153 unit:oscied-storage/1: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:4
2013-07-01 13:40:27,153 unit:oscied-storage/1: hook.output DEBUG: Cached relation hook contexts on 'peer:0': []
2013-07-01 13:40:27,158 unit:oscied-storage/1: unit.relation.lifecycle DEBUG: stopped relation:storage lifecycle
2013-07-01 13:40:27,099 unit:oscied-transform/0: unit.relation.watch DEBUG: relation membership change
2013-07-01 13:40:27,105 unit:oscied-transform/0: hook.scheduler DEBUG: members changed: old=['oscied-storage/0', 'oscied-storage/2', 'oscied-storage/3', 'oscied-storage/4'], new=['oscied-storage/0', 'oscied-storage/1', 'oscied-storage/2', 'oscied-storage/3', 'oscied-storage/4']
2013-07-01 13:40:27,165 unit:oscied-storage/1: unit.relation.lifecycle DEBUG: Executing hook peer-relation-joined
2013-07-01 13:40:27,166 unit:oscied-storage/1: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-1/charm/hooks/peer-relation-joined
2013-07-01 13:40:27,112 unit:oscied-transform/0: hook.scheduler DEBUG: settings changed: (('oscied-storage/1', 0),)
2013-07-01 13:40:27,180 unit:oscied-storage/1: statemachine DEBUG: relationworkflowstate: transition start (None -> up) {}
2013-07-01 13:40:27,184 unit:oscied-storage/1: statemachine DEBUG: relationworkflowstate:  execute action do_start
2013-07-01 13:40:27,163 unit:oscied-storage/2: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:27,186 unit:oscied-storage/1: hook.scheduler DEBUG: start
2013-07-01 13:40:27,212 unit:oscied-storage/1: unit.relation.watch DEBUG: relation watcher start
2013-07-01 13:40:27,212 unit:oscied-storage/1: unit.relation.lifecycle DEBUG: started relation:storage lifecycle
2013-07-01 13:40:27,151 unit:oscied-orchestra/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:27,219 unit:oscied-storage/1: hook.scheduler DEBUG: members changed: old=[], new=['oscied-transform/0']
2013-07-01 13:40:27,162 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] Execute gluster volume info medias_volume_4 
2013-07-01 13:40:27,221 unit:oscied-storage/1: hook.scheduler DEBUG: executing hook for oscied-transform/0:joined
2013-07-01 13:40:27,220 unit:oscied-publisher/1: unit.hook.api INFO: [INFO] Register Apache H.264 streaming module
2013-07-01 13:40:27,226 unit:oscied-storage/1: hook.scheduler DEBUG: settings changed: (('oscied-transform/0', 0),)
2013-07-01 13:40:27,285 unit:oscied-storage/1: statemachine DEBUG: relationworkflowstate: transition complete start (state up) {}
2013-07-01 13:40:27,309 unit:oscied-storage/0: hook.output DEBUG: Cached relation hook contexts on 'peer:0': ['storage:1', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:40:27,368 unit:oscied-storage/1: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:2
2013-07-01 13:40:27,313 unit:oscied-webui/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:27,374 unit:oscied-storage/1: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:3
2013-07-01 13:40:27,320 unit:oscied-storage/0: unit.relation.lifecycle DEBUG: Executing hook peer-relation-changed
2013-07-01 13:40:27,320 unit:oscied-storage/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-0/charm/hooks/peer-relation-changed
2013-07-01 13:40:27,358 unit:oscied-publisher/0: unit.relation.watch DEBUG: relation membership change
2013-07-01 13:40:27,406 unit:oscied-storage/1: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:4
2013-07-01 13:40:27,416 unit:oscied-storage/1: unit.relation.lifecycle DEBUG: stopped relation:storage lifecycle
2013-07-01 13:40:27,365 unit:oscied-publisher/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:27,376 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:27,377 unit:oscied-publisher/0: hook.scheduler DEBUG: members changed: old=['oscied-storage/0', 'oscied-storage/2', 'oscied-storage/3', 'oscied-storage/4'], new=['oscied-storage/0', 'oscied-storage/1', 'oscied-storage/2', 'oscied-storage/3', 'oscied-storage/4']
2013-07-01 13:40:27,395 unit:oscied-publisher/0: hook.scheduler DEBUG: settings changed: (('oscied-storage/1', 0),)
2013-07-01 13:40:27,453 unit:oscied-storage/1: statemachine DEBUG: relationworkflowstate: transition start (None -> up) {}
2013-07-01 13:40:27,454 unit:oscied-storage/1: statemachine DEBUG: relationworkflowstate:  execute action do_start
2013-07-01 13:40:27,454 unit:oscied-storage/1: hook.scheduler DEBUG: start
2013-07-01 13:40:27,518 unit:oscied-storage/3: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:40:27,473 unit:oscied-storage/2: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:27,505 unit:oscied-storage/1: unit.relation.watch DEBUG: relation watcher start
2013-07-01 13:40:27,505 unit:oscied-storage/1: unit.relation.lifecycle DEBUG: started relation:storage lifecycle
2013-07-01 13:40:27,512 unit:oscied-storage/1: hook.scheduler DEBUG: members changed: old=[], new=['oscied-publisher/0']
2013-07-01 13:40:27,513 unit:oscied-storage/1: hook.scheduler DEBUG: executing hook for oscied-publisher/0:joined
2013-07-01 13:40:27,517 unit:oscied-storage/1: hook.scheduler DEBUG: settings changed: (('oscied-publisher/0', 0),)
2013-07-01 13:40:27,519 unit:oscied-storage/1: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:3
2013-07-01 13:40:27,521 unit:oscied-storage/1: statemachine DEBUG: relationworkflowstate: transition complete start (state up) {}
2013-07-01 13:40:27,508 unit:oscied-orchestra/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:27,586 unit:oscied-storage/1: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:4
2013-07-01 13:40:27,586 unit:oscied-storage/1: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['peer:0']
2013-07-01 13:40:27,609 unit:oscied-storage/1: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:40:27,553 unit:oscied-publisher/1: unit.hook.api INFO: [INFO] Expose Apache 2 service
2013-07-01 13:40:27,611 unit:oscied-storage/1: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:3
2013-07-01 13:40:27,621 unit:oscied-storage/1: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:4
2013-07-01 13:40:27,563 unit:oscied-orchestra/0: unit.relation.watch DEBUG: relation membership change
2013-07-01 13:40:27,626 unit:oscied-storage/1: unit.relation.lifecycle DEBUG: stopped relation:storage lifecycle
2013-07-01 13:40:27,576 unit:oscied-orchestra/0: hook.scheduler DEBUG: members changed: old=['oscied-storage/0', 'oscied-storage/2', 'oscied-storage/3', 'oscied-storage/4'], new=['oscied-storage/0', 'oscied-storage/1', 'oscied-storage/2', 'oscied-storage/3', 'oscied-storage/4']
2013-07-01 13:40:27,583 unit:oscied-orchestra/0: hook.scheduler DEBUG: settings changed: (('oscied-storage/1', 0),)
2013-07-01 13:40:27,661 unit:oscied-storage/1: statemachine DEBUG: relationworkflowstate: transition start (None -> up) {}
2013-07-01 13:40:27,662 unit:oscied-storage/1: statemachine DEBUG: relationworkflowstate:  execute action do_start
2013-07-01 13:40:27,662 unit:oscied-storage/1: hook.scheduler DEBUG: start
2013-07-01 13:40:27,623 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] Volume infos stdout: '\nVolume Name: medias_volume_4\nType: Distribute\nStatus: Started\nNumber of Bricks: 1\nTransport-type: tcp\nBricks:\nBrick1: ip-10-164-73-202.ec2.internal:/exp4\nOptions Reconfigured:\nauth.allow: *\n'
2013-07-01 13:40:27,701 unit:oscied-storage/1: unit.relation.watch DEBUG: relation watcher start
2013-07-01 13:40:27,705 unit:oscied-storage/1: unit.relation.lifecycle DEBUG: started relation:storage lifecycle
2013-07-01 13:40:27,728 unit:oscied-storage/1: hook.scheduler DEBUG: members changed: old=[], new=['oscied-orchestra/0']
2013-07-01 13:40:27,730 unit:oscied-storage/1: hook.scheduler DEBUG: executing hook for oscied-orchestra/0:joined
2013-07-01 13:40:27,670 unit:oscied-webui/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:27,733 unit:oscied-storage/1: hook.scheduler DEBUG: settings changed: (('oscied-orchestra/0', 0),)
2013-07-01 13:40:27,737 unit:oscied-storage/1: statemachine DEBUG: relationworkflowstate: transition complete start (state up) {}
2013-07-01 13:40:27,717 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-transform/0', 'public_address': 'ec2-72-44-43-150.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-25-113.ec2.internal', 'juju_log': <function callable_command at 0x2aef2a8>, 'config': {u'storage_mountpoint': u'', 'verbose': True, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'transform_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 1, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u''}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media transform. Contains ffmpeg & x264.\nCan be scaled to multiple instances.\n", 'name': 'oscied-transform', 'requires': {'storage': {'interface': 'mount'}, 'transform': {'interface': 'subordinate'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Encoder"}}
2013-07-01 13:40:27,720 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:27,757 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:27,801 unit:oscied-storage/1: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:4
2013-07-01 13:40:27,859 unit:oscied-storage/3: unit.hook.api INFO: [HOOK] Execute StorageHooks hook peer-relation-joined
2013-07-01 13:40:27,889 unit:oscied-storage/1: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:4
2013-07-01 13:40:27,833 unit:oscied-webui/0: unit.relation.watch DEBUG: relation membership change
2013-07-01 13:40:27,894 unit:oscied-storage/1: unit.relation.lifecycle DEBUG: stopped relation:storage lifecycle
2013-07-01 13:40:27,839 unit:oscied-webui/0: hook.scheduler DEBUG: members changed: old=['oscied-storage/0', 'oscied-storage/2', 'oscied-storage/3', 'oscied-storage/4'], new=['oscied-storage/0', 'oscied-storage/1', 'oscied-storage/2', 'oscied-storage/3', 'oscied-storage/4']
2013-07-01 13:40:27,844 unit:oscied-webui/0: hook.scheduler DEBUG: settings changed: (('oscied-storage/1', 0),)
2013-07-01 13:40:27,855 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:27,943 unit:oscied-storage/1: statemachine DEBUG: relationworkflowstate: transition start (None -> up) {}
2013-07-01 13:40:27,945 unit:oscied-storage/1: statemachine DEBUG: relationworkflowstate:  execute action do_start
2013-07-01 13:40:27,945 unit:oscied-storage/1: hook.scheduler DEBUG: start
2013-07-01 13:40:27,960 unit:oscied-storage/1: hook.output DEBUG: Cached relation hook contexts on 'storage:2': ['peer:0', 'storage:1']
2013-07-01 13:40:27,924 unit:oscied-publisher/1: unit.hook.api DEBUG: opened 80/tcp
2013-07-01 13:40:27,993 unit:oscied-storage/1: unit.relation.watch DEBUG: relation watcher start
2013-07-01 13:40:27,994 unit:oscied-storage/1: unit.relation.lifecycle DEBUG: started relation:storage lifecycle
2013-07-01 13:40:27,999 unit:oscied-storage/1: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:40:27,972 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] {'status': 'Started', 'name': 'medias_volume_4', 'bricks': ['ip-10-164-73-202.ec2.internal:/exp4'], 'auth_allow': '*', 'type': 'Distribute', 'transport': 'tcp'}
2013-07-01 13:40:28,036 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1590d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/2', 'public_address': 'ec2-50-16-110-129.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-202-41-54.ec2.internal', 'juju_log': <function callable_command at 0x1b4a0c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:40:28,003 unit:oscied-storage/1: hook.scheduler DEBUG: members changed: old=[], new=['oscied-webui/0']
2013-07-01 13:40:28,007 unit:oscied-storage/1: hook.scheduler DEBUG: executing hook for oscied-webui/0:joined
2013-07-01 13:40:28,009 unit:oscied-storage/1: hook.scheduler DEBUG: settings changed: (('oscied-webui/0', 0),)
2013-07-01 13:40:28,078 unit:oscied-storage/1: statemachine DEBUG: relationworkflowstate: transition complete start (state up) {}
2013-07-01 13:40:28,081 unit:oscied-storage/1: unit.lifecycle DEBUG: started unit lifecycle
2013-07-01 13:40:28,026 unit:oscied-webui/0: unit.hook.api INFO: --> Entering WebuiHooks.py
2013-07-01 13:40:28,104 unit:oscied-storage/1: statemachine DEBUG: unitworkflowstate: transition complete start (state started) {}
2013-07-01 13:40:28,057 unit:oscied-transform/0: unit.hook.api INFO: --> Entering TransformHooks.py
2013-07-01 13:40:28,061 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'proxy_ips': [], 'storage_fstype': 'glusterfs', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-234-214-201.compute-1.amazonaws.com', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-publisher/0', 'public_address': 'ec2-54-234-214-201.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-2-99.ec2.internal', 'juju_log': <function callable_command at 0x12375f0>, 'config': {u'max_upload_size': 4294967296, u'storage_mountpoint': u'', 'verbose': True, u'max_input_time': 600, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'publisher_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 2, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u'', u'max_execution_time': 180}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media publisher. Contains apache & mod streaming.\nCan be scaled to multiple instances.\n", 'provides': {'streaming': {'interface': 'http'}}, 'name': 'oscied-publisher', 'requires': {'publisher': {'interface': 'subordinate'}, 'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Publisher"}}
2013-07-01 13:40:28,162 unit:oscied-storage/1: juju.agents.unit DEBUG: Configuration Changed
2013-07-01 13:40:28,203 unit:oscied-storage/1: statemachine DEBUG: unitworkflowstate: transition configure (started -> started) {}
2013-07-01 13:40:28,205 unit:oscied-storage/1: statemachine DEBUG: unitworkflowstate:  execute action do_configure
2013-07-01 13:40:28,192 unit:oscied-storage/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:28,202 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'root_secret': u'5FrvHcm7oyF4WQFW', 'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': True, 'hosts_file': '/etc/hosts', 'rabbit_connection': u'amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': u'mongodb://admin:Iz85QVjdCJugEosz@localhost:27017/orchestra', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}, 'name': 'oscied-orchestra/0', 'public_address': 'ec2-54-234-192-63.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-71-53.ec2.internal', 'juju_log': <function callable_command at 0x2e847d0>, 'config': {u'repositories_pass': u'41nVGq07GmSgK9Ud', u'storage_options': u'', 'verbose': True, u'storage_nat_address': u'', u'rabbit_password': u'OZy23iO0D4UpYS2k', u'storage_fstype': u'', u'nodes_secret': u'bdZccPuG9fibjwCS', u'transform_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/transform/source', u'repositories_user': u'oscied', u'root_secret': u'5FrvHcm7oyF4WQFW', u'storage_mountpoint': u'', u'mongo_nodes_password': u'M2qlif8rdtKtBYil', u'publisher_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/publisher/source', u'mongo_admin_password': u'Iz85QVjdCJugEosz', u'storage_address': u'', u'webui_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/webui/source'}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED orchestrator.\n", 'provides': {'publisher': {'interface': 'subordinate'}, 'api': {'interface': 'orchestra'}, 'transform': {'interface': 'subordinate'}}, 'name': 'oscied-orchestra', 'requires': {'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Orchestra"}}
2013-07-01 13:40:28,257 unit:oscied-publisher/1: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'proxy_ips': [], 'storage_fstype': '', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-227-33-48.compute-1.amazonaws.com', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:40:28,329 unit:oscied-storage/2: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:40:28,319 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] Execute gluster volume stop medias_volume_4 force < 'y\n'
2013-07-01 13:40:28,360 unit:oscied-webui/0: unit.hook.api INFO: [HOOK] Execute WebuiHooks hook storage-relation-joined
2013-07-01 13:40:28,396 unit:oscied-publisher/0: unit.hook.api INFO: --> Entering PublisherHooks.py
2013-07-01 13:40:28,396 unit:oscied-transform/0: unit.hook.api INFO: [HOOK] Execute TransformHooks hook storage-relation-changed
2013-07-01 13:40:28,469 unit:oscied-storage/1: hook.output DEBUG: Cached relation hook contexts on 'storage:3': ['peer:0', 'storage:1', 'storage:2']
2013-07-01 13:40:28,490 unit:oscied-storage/1: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:40:28,534 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] id=3 ids=[0]
2013-07-01 13:40:28,536 unit:oscied-orchestra/0: unit.hook.api INFO: --> Entering OrchestraHooks.py
2013-07-01 13:40:28,544 unit:oscied-storage/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:28,607 unit:oscied-storage/2: unit.hook.api INFO: [HOOK] Execute StorageHooks hook storage-relation-joined
2013-07-01 13:40:28,593 unit:oscied-publisher/1: unit.hook.api INFO: <-- Exiting PublisherHooks.py
2013-07-01 13:40:28,643 unit:oscied-publisher/1: hook.output DEBUG: hook install exited, exit code 0.
2013-07-01 13:40:28,644 unit:oscied-publisher/1: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-publisher-1/charm/hooks/install
2013-07-01 13:40:28,659 unit:oscied-publisher/1: statemachine DEBUG: unitworkflowstate: transition complete install (state installed) {}
2013-07-01 13:40:28,673 unit:oscied-publisher/1: statemachine DEBUG: unitworkflowstate: transition start (installed -> started) {}
2013-07-01 13:40:28,673 unit:oscied-publisher/1: statemachine DEBUG: unitworkflowstate:  execute action do_start
2013-07-01 13:40:28,674 unit:oscied-publisher/1: unit.lifecycle DEBUG: pre-start acquire, running:False
2013-07-01 13:40:28,674 unit:oscied-publisher/1: unit.lifecycle DEBUG: start running, unit lifecycle
2013-07-01 13:40:28,693 unit:oscied-webui/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_options': '', 'verbose': None, 'database_template_file': 'templates/database.php.template', 'hosts_file': '/etc/hosts', 'sites_enabled_path': '/etc/apache2/sites-enabled', 'storage_path': '/mnt/storage', 'storage_mountpoint': 'medias_volume_0', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'site_database_file': 'webui-db.sql', 'general_config_file': '/var/www/application/config/config.php', 'database_config_file': '/var/www/application/config/database.php', 'proxy_ips': [], 'htaccess_template_file': 'templates/htaccess.template', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'www_medias_path': '/var/www/medias', 'www_uploads_path': '/var/www/uploads', '_pickle_filename': 'local_config.pkl', 'site_template_file': 'templates/000-default', 'storage_mount_sleep_delay': 5, 'storage_nat_address': '', 'encryption_key': '5UCuWXhlrxOscNFuShIfJtLlI2oB3crZ', 'storage_fstype': 'glusterfs', 'www_root_path': '/var/www', 'general_template_file': 'templates/config.php.template', 'htaccess_config_file': '/var/www/.htaccess'}
2013-07-01 13:40:28,763 unit:oscied-storage/1: hook.output DEBUG: Cached relation hook contexts on 'storage:4': ['peer:0', 'storage:1', 'storage:2', 'storage:3']
2013-07-01 13:40:28,716 unit:oscied-publisher/1: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:2
2013-07-01 13:40:28,722 unit:oscied-publisher/1: juju.state.hook DEBUG: Ignoring partially constructed relation: publisher:6
2013-07-01 13:40:28,723 unit:oscied-publisher/1: hook.output DEBUG: Cached relation hook contexts: []
2013-07-01 13:40:28,733 unit:oscied-publisher/1: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-publisher-1/charm/hooks/config-changed
2013-07-01 13:40:28,797 unit:oscied-storage/1: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:40:28,741 unit:oscied-publisher/0: unit.hook.api INFO: [HOOK] Execute PublisherHooks hook storage-relation-changed
2013-07-01 13:40:28,830 unit:oscied-storage/1: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:28,880 unit:oscied-storage/3: unit.hook.api INFO: [INFO] As slave, stop and delete my own volume medias_volume_3
2013-07-01 13:40:28,896 unit:oscied-storage/1: hook.output DEBUG: Cached relation hook contexts: ['peer:0', 'storage:1', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:40:28,872 unit:oscied-orchestra/0: unit.hook.api INFO: [HOOK] Execute OrchestraHooks hook storage-relation-changed
2013-07-01 13:40:28,888 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:29,024 unit:oscied-webui/0: unit.hook.api INFO: <-- Exiting WebuiHooks.py
2013-07-01 13:40:29,068 unit:oscied-webui/0: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:40:29,087 unit:oscied-webui/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-webui-0/charm/hooks/storage-relation-joined
2013-07-01 13:40:29,091 unit:oscied-webui/0: hook.scheduler DEBUG: executing hook for oscied-storage/3:joined
2013-07-01 13:40:29,163 unit:oscied-storage/2: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1590d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:40:29,220 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] Execute gluster volume info all 
2013-07-01 13:40:29,226 unit:oscied-storage/1: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:29,171 unit:oscied-webui/0: hook.output DEBUG: Cached relation hook contexts on 'storage:4': ['api:7']
2013-07-01 13:40:29,177 unit:oscied-webui/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:40:29,178 unit:oscied-webui/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-webui-0/charm/hooks/storage-relation-joined
2013-07-01 13:40:29,238 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1b42d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': ['ip-10-154-177-94.ec2.internal', 'ip-10-164-2-99.ec2.internal', 'ip-10-164-71-53.ec2.internal', 'ip-10-164-25-113.ec2.internal'], 'verbose': True}, 'name': 'oscied-storage/0', 'public_address': 'ec2-54-227-38-161.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-154-181-123.ec2.internal', 'juju_log': <function callable_command at 0x20fc0c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:40:29,452 unit:oscied-storage/2: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:40:29,508 unit:oscied-storage/2: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:40:29,538 unit:oscied-storage/2: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-2/charm/hooks/storage-relation-joined
2013-07-01 13:40:29,560 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:29,541 unit:oscied-storage/2: hook.scheduler DEBUG: executing hook for oscied-transform/0:modified
2013-07-01 13:40:29,542 unit:oscied-storage/2: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-2/charm/hooks/storage-relation-joined
2013-07-01 13:40:29,568 unit:oscied-storage/0: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:40:29,678 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] Execute gluster volume info medias_volume_3 
2013-07-01 13:40:29,776 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] Execute gluster volume delete medias_volume_4  < 'y\n'
2013-07-01 13:40:29,790 unit:oscied-publisher/1: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:29,903 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x245bd60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/1', 'public_address': 'ec2-107-21-196-203.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-47-249.ec2.internal', 'juju_log': <function callable_command at 0x2a150c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:40:29,904 unit:oscied-storage/0: unit.hook.api INFO: [HOOK] Execute StorageHooks hook peer-relation-changed
2013-07-01 13:40:29,964 unit:oscied-storage/2: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['peer:0', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:40:29,972 unit:oscied-storage/2: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:40:30,135 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] Volume infos stdout: '\nVolume Name: medias_volume_3\nType: Distribute\nStatus: Started\nNumber of Bricks: 1\nTransport-type: tcp\nBricks:\nBrick1: ip-10-164-37-115.ec2.internal:/exp3\nOptions Reconfigured:\nauth.allow: *\n'
2013-07-01 13:40:30,062 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] Storage address is ip-10-202-41-54.ec2.internal, fstype: , mountpoint: , options: 
2013-07-01 13:40:30,137 unit:oscied-webui/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:30,184 unit:oscied-publisher/1: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:30,249 unit:oscied-storage/1: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:40:30,202 unit:oscied-storage/4: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x19b3d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:40:30,482 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] {'status': 'Started', 'name': 'medias_volume_3', 'bricks': ['ip-10-164-37-115.ec2.internal:/exp3'], 'auth_allow': '*', 'type': 'Distribute', 'transport': 'tcp'}
2013-07-01 13:40:30,413 unit:oscied-storage/2: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:30,408 unit:oscied-transform/0: unit.hook.api INFO: [REMARK] Waiting for complete setup !
2013-07-01 13:40:30,472 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] Storage address is ip-10-202-41-54.ec2.internal, fstype: , mountpoint: , options: 
2013-07-01 13:40:30,509 unit:oscied-webui/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:30,533 unit:oscied-storage/4: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:40:30,543 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:30,598 unit:oscied-storage/1: unit.hook.api INFO: [HOOK] Execute StorageHooks hook peer-relation-joined
2013-07-01 13:40:30,576 unit:oscied-storage/4: hook.output DEBUG: hook peer-relation-joined exited, exit code 0.
2013-07-01 13:40:30,568 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Storage address is ip-10-202-41-54.ec2.internal, fstype: , mountpoint: , options: 
2013-07-01 13:40:30,582 unit:oscied-storage/4: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-4/charm/hooks/peer-relation-joined
2013-07-01 13:40:30,585 unit:oscied-storage/4: hook.scheduler DEBUG: executing hook for oscied-storage/2:joined
2013-07-01 13:40:30,586 unit:oscied-storage/4: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-4/charm/hooks/storage-relation-joined
2013-07-01 13:40:30,579 unit:oscied-storage/0: unit.hook.api INFO: [INFO] Peer address is ip-10-202-41-54.ec2.internal
2013-07-01 13:40:30,758 unit:oscied-storage/2: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:30,744 unit:oscied-transform/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:40:30,847 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] Execute gluster volume stop medias_volume_3 force < 'y\n'
2013-07-01 13:40:30,814 unit:oscied-publisher/0: unit.hook.api INFO: [REMARK] Waiting for complete setup !
2013-07-01 13:40:30,859 unit:oscied-webui/0: unit.hook.api INFO: --> Entering WebuiHooks.py
2013-07-01 13:40:30,902 unit:oscied-orchestra/0: unit.hook.api INFO: [REMARK] Waiting for complete setup !
2013-07-01 13:40:30,913 unit:oscied-storage/0: unit.hook.api INFO: [INFO] Open required ports
2013-07-01 13:40:30,926 unit:oscied-storage/4: hook.output DEBUG: Cached relation hook contexts on 'peer:0': ['storage:1', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:40:30,926 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'proxy_ips': [], 'storage_fstype': '', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-227-33-48.compute-1.amazonaws.com', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-publisher/1', 'public_address': 'ec2-54-227-33-48.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-50-5.ec2.internal', 'juju_log': <function callable_command at 0x2b495f0>, 'config': {u'max_upload_size': 4294967296, u'storage_mountpoint': u'', 'verbose': True, u'max_input_time': 600, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'publisher_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 2, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u'', u'max_execution_time': 180}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media publisher. Contains apache & mod streaming.\nCan be scaled to multiple instances.\n", 'provides': {'streaming': {'interface': 'http'}}, 'name': 'oscied-publisher', 'requires': {'publisher': {'interface': 'subordinate'}, 'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Publisher"}}
2013-07-01 13:40:30,933 unit:oscied-storage/4: unit.relation.lifecycle DEBUG: Executing hook peer-relation-joined
2013-07-01 13:40:31,073 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:31,075 unit:oscied-transform/0: unit.hook.api INFO: <-- Exiting TransformHooks.py
2013-07-01 13:40:31,125 unit:oscied-transform/0: hook.output DEBUG: hook storage-relation-changed exited, exit code 0.
2013-07-01 13:40:31,144 unit:oscied-transform/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-transform-0/charm/hooks/storage-relation-changed
2013-07-01 13:40:31,145 unit:oscied-transform/0: hook.scheduler DEBUG: executing hook for oscied-storage/3:joined
2013-07-01 13:40:31,164 unit:oscied-publisher/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'proxy_ips': [], 'storage_fstype': 'glusterfs', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-234-214-201.compute-1.amazonaws.com', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:40:31,192 unit:oscied-webui/0: unit.hook.api INFO: [HOOK] Execute WebuiHooks hook storage-relation-joined
2013-07-01 13:40:31,218 unit:oscied-transform/0: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['transform:5']
2013-07-01 13:40:31,225 unit:oscied-transform/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:40:31,226 unit:oscied-transform/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-transform-0/charm/hooks/storage-relation-joined
2013-07-01 13:40:31,286 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] id=1 ids=[0]
2013-07-01 13:40:31,247 unit:oscied-orchestra/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'root_secret': u'5FrvHcm7oyF4WQFW', 'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': True, 'hosts_file': '/etc/hosts', 'rabbit_connection': u'amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': u'mongodb://admin:Iz85QVjdCJugEosz@localhost:27017/orchestra', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}
2013-07-01 13:40:31,276 unit:oscied-publisher/1: unit.hook.api INFO: --> Entering PublisherHooks.py
2013-07-01 13:40:31,349 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1f98d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/2', 'public_address': 'ec2-50-16-110-129.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-202-41-54.ec2.internal', 'juju_log': <function callable_command at 0x25520c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:40:31,517 unit:oscied-publisher/0: unit.hook.api INFO: <-- Exiting PublisherHooks.py
2013-07-01 13:40:31,530 unit:oscied-webui/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_options': '', 'verbose': None, 'database_template_file': 'templates/database.php.template', 'hosts_file': '/etc/hosts', 'sites_enabled_path': '/etc/apache2/sites-enabled', 'storage_path': '/mnt/storage', 'storage_mountpoint': 'medias_volume_0', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'site_database_file': 'webui-db.sql', 'general_config_file': '/var/www/application/config/config.php', 'database_config_file': '/var/www/application/config/database.php', 'proxy_ips': [], 'htaccess_template_file': 'templates/htaccess.template', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'www_medias_path': '/var/www/medias', 'www_uploads_path': '/var/www/uploads', '_pickle_filename': 'local_config.pkl', 'site_template_file': 'templates/000-default', 'storage_mount_sleep_delay': 5, 'storage_nat_address': '', 'encryption_key': '5UCuWXhlrxOscNFuShIfJtLlI2oB3crZ', 'storage_fstype': 'glusterfs', 'www_root_path': '/var/www', 'general_template_file': 'templates/config.php.template', 'htaccess_config_file': '/var/www/.htaccess'}
2013-07-01 13:40:31,574 unit:oscied-publisher/0: hook.output DEBUG: hook storage-relation-changed exited, exit code 0.
2013-07-01 13:40:31,582 unit:oscied-orchestra/0: unit.hook.api INFO: <-- Exiting OrchestraHooks.py
2013-07-01 13:40:31,624 unit:oscied-storage/2: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:40:31,600 unit:oscied-storage/4: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:31,635 unit:oscied-storage/1: unit.hook.api INFO: [INFO] As slave, stop and delete my own volume medias_volume_1
2013-07-01 13:40:31,601 unit:oscied-publisher/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-publisher-0/charm/hooks/storage-relation-changed
2013-07-01 13:40:31,603 unit:oscied-publisher/0: hook.scheduler DEBUG: executing hook for oscied-storage/3:joined
2013-07-01 13:40:31,603 unit:oscied-storage/0: unit.hook.api DEBUG: opened 24010/tcp
2013-07-01 13:40:31,620 unit:oscied-publisher/1: unit.hook.api INFO: [HOOK] Execute PublisherHooks hook config-changed
2013-07-01 13:40:31,627 unit:oscied-orchestra/0: hook.output DEBUG: hook storage-relation-changed exited, exit code 0.
2013-07-01 13:40:31,741 unit:oscied-publisher/0: hook.output DEBUG: Cached relation hook contexts on 'storage:2': ['publisher:6']
2013-07-01 13:40:31,753 unit:oscied-publisher/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:40:31,753 unit:oscied-publisher/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-publisher-0/charm/hooks/storage-relation-joined
2013-07-01 13:40:31,755 unit:oscied-orchestra/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-orchestra-0/charm/hooks/storage-relation-changed
2013-07-01 13:40:31,757 unit:oscied-orchestra/0: hook.scheduler DEBUG: executing hook for oscied-storage/3:joined
2013-07-01 13:40:31,904 unit:oscied-storage/2: unit.hook.api INFO: [HOOK] Execute StorageHooks hook storage-relation-joined
2013-07-01 13:40:31,867 unit:oscied-webui/0: unit.hook.api INFO: <-- Exiting WebuiHooks.py
2013-07-01 13:40:31,903 unit:oscied-orchestra/0: hook.output DEBUG: Cached relation hook contexts on 'storage:3': ['api:7', 'publisher:6', 'transform:5']
2013-07-01 13:40:31,967 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] Execute gluster volume info all 
2013-07-01 13:40:31,912 unit:oscied-webui/0: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:40:31,914 unit:oscied-orchestra/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:40:31,915 unit:oscied-orchestra/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-orchestra-0/charm/hooks/storage-relation-joined
2013-07-01 13:40:31,942 unit:oscied-webui/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-webui-0/charm/hooks/storage-relation-joined
2013-07-01 13:40:31,956 unit:oscied-storage/4: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:31,947 unit:oscied-webui/0: hook.scheduler DEBUG: executing hook for oscied-storage/1:joined
2013-07-01 13:40:31,962 unit:oscied-publisher/1: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'proxy_ips': [], 'storage_fstype': '', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-227-33-48.compute-1.amazonaws.com', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:40:32,028 unit:oscied-webui/0: hook.output DEBUG: Cached relation hook contexts on 'storage:4': ['api:7']
2013-07-01 13:40:32,036 unit:oscied-webui/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:40:32,036 unit:oscied-webui/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-webui-0/charm/hooks/storage-relation-joined
2013-07-01 13:40:32,172 unit:oscied-transform/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:32,327 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] Execute gluster volume delete medias_volume_3  < 'y\n'
2013-07-01 13:40:32,293 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:32,311 unit:oscied-storage/0: unit.hook.api DEBUG: opened 24011/tcp
2013-07-01 13:40:32,321 unit:oscied-publisher/1: unit.hook.api INFO: <-- Exiting PublisherHooks.py
2013-07-01 13:40:32,406 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] Execute gluster volume info medias_volume_1 
2013-07-01 13:40:32,378 unit:oscied-publisher/1: hook.output DEBUG: hook config-changed exited, exit code 0.
2013-07-01 13:40:32,379 unit:oscied-publisher/1: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-publisher-1/charm/hooks/config-changed
2013-07-01 13:40:32,414 unit:oscied-publisher/1: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:2
2013-07-01 13:40:32,426 unit:oscied-publisher/1: juju.state.hook DEBUG: Ignoring partially constructed relation: publisher:6
2013-07-01 13:40:32,427 unit:oscied-publisher/1: hook.output DEBUG: Cached relation hook contexts: []
2013-07-01 13:40:32,461 unit:oscied-storage/2: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1f98d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:40:32,446 unit:oscied-publisher/1: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-publisher-1/charm/hooks/start
2013-07-01 13:40:32,528 unit:oscied-transform/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:32,641 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1819d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/4', 'public_address': 'ec2-54-242-176-247.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-73-202.ec2.internal', 'juju_log': <function callable_command at 0x1dd30c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:40:32,795 unit:oscied-storage/3: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x20e3d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:40:32,748 unit:oscied-storage/2: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:40:32,746 unit:oscied-publisher/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:32,800 unit:oscied-storage/2: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:40:32,835 unit:oscied-storage/2: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-2/charm/hooks/storage-relation-joined
2013-07-01 13:40:32,842 unit:oscied-storage/2: hook.scheduler DEBUG: executing hook for oscied-publisher/0:modified
2013-07-01 13:40:32,843 unit:oscied-storage/2: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-2/charm/hooks/storage-relation-joined
2013-07-01 13:40:32,851 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] Volume infos stdout: '\nVolume Name: medias_volume_1\nType: Distribute\nStatus: Started\nNumber of Bricks: 1\nTransport-type: tcp\nBricks:\nBrick1: ip-10-164-47-249.ec2.internal:/exp1\nOptions Reconfigured:\nauth.allow: *\n'
2013-07-01 13:40:32,815 unit:oscied-orchestra/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:32,878 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:32,908 unit:oscied-webui/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:32,979 unit:oscied-storage/4: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:40:33,140 unit:oscied-storage/3: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:40:33,121 unit:oscied-storage/2: hook.output DEBUG: Cached relation hook contexts on 'storage:2': ['peer:0', 'storage:1', 'storage:3', 'storage:4']
2013-07-01 13:40:33,129 unit:oscied-storage/2: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:40:33,187 unit:oscied-storage/3: hook.output DEBUG: hook peer-relation-joined exited, exit code 0.
2013-07-01 13:40:33,190 unit:oscied-storage/3: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-3/charm/hooks/peer-relation-joined
2013-07-01 13:40:33,195 unit:oscied-storage/3: hook.scheduler DEBUG: executing hook for oscied-storage/2:joined
2013-07-01 13:40:33,195 unit:oscied-storage/3: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-3/charm/hooks/storage-relation-joined
2013-07-01 13:40:33,128 unit:oscied-publisher/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:33,188 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] {'status': 'Started', 'name': 'medias_volume_1', 'bricks': ['ip-10-164-47-249.ec2.internal:/exp1'], 'auth_allow': '*', 'type': 'Distribute', 'transport': 'tcp'}
2013-07-01 13:40:33,203 unit:oscied-orchestra/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:33,233 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-transform/0', 'public_address': 'ec2-72-44-43-150.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-25-113.ec2.internal', 'juju_log': <function callable_command at 0x206a2a8>, 'config': {u'storage_mountpoint': u'', 'verbose': True, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'transform_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 1, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u''}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media transform. Contains ffmpeg & x264.\nCan be scaled to multiple instances.\n", 'name': 'oscied-transform', 'requires': {'storage': {'interface': 'mount'}, 'transform': {'interface': 'subordinate'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Encoder"}}
2013-07-01 13:40:33,262 unit:oscied-webui/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:33,306 unit:oscied-storage/4: unit.hook.api INFO: [HOOK] Execute StorageHooks hook storage-relation-joined
2013-07-01 13:40:33,310 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] id=0 ids=[2, 4]
2013-07-01 13:40:33,411 unit:oscied-publisher/1: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:33,535 unit:oscied-storage/3: hook.output DEBUG: Cached relation hook contexts on 'peer:0': ['storage:1', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:40:33,544 unit:oscied-storage/3: unit.relation.lifecycle DEBUG: Executing hook peer-relation-joined
2013-07-01 13:40:33,527 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] Execute gluster volume stop medias_volume_1 force < 'y\n'
2013-07-01 13:40:33,476 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:33,551 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:33,576 unit:oscied-transform/0: unit.hook.api INFO: --> Entering TransformHooks.py
2013-07-01 13:40:33,610 unit:oscied-webui/0: unit.hook.api INFO: --> Entering WebuiHooks.py
2013-07-01 13:40:33,640 unit:oscied-storage/0: unit.hook.api INFO: [INFO] As leader, probe remote peer ip-10-202-41-54.ec2.internal and create or expand volume medias_volume_0
2013-07-01 13:40:33,689 unit:oscied-storage/2: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:33,778 unit:oscied-publisher/1: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:33,830 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'proxy_ips': [], 'storage_fstype': 'glusterfs', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-234-214-201.compute-1.amazonaws.com', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-publisher/0', 'public_address': 'ec2-54-234-214-201.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-2-99.ec2.internal', 'juju_log': <function callable_command at 0x13b05f0>, 'config': {u'max_upload_size': 4294967296, u'storage_mountpoint': u'', 'verbose': True, u'max_input_time': 600, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'publisher_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 2, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u'', u'max_execution_time': 180}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media publisher. Contains apache & mod streaming.\nCan be scaled to multiple instances.\n", 'provides': {'streaming': {'interface': 'http'}}, 'name': 'oscied-publisher', 'requires': {'publisher': {'interface': 'subordinate'}, 'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Publisher"}}
2013-07-01 13:40:33,904 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'root_secret': u'5FrvHcm7oyF4WQFW', 'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': True, 'hosts_file': '/etc/hosts', 'rabbit_connection': u'amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': u'mongodb://admin:Iz85QVjdCJugEosz@localhost:27017/orchestra', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}, 'name': 'oscied-orchestra/0', 'public_address': 'ec2-54-234-192-63.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-71-53.ec2.internal', 'juju_log': <function callable_command at 0x1e867d0>, 'config': {u'repositories_pass': u'41nVGq07GmSgK9Ud', u'storage_options': u'', 'verbose': True, u'storage_nat_address': u'', u'rabbit_password': u'OZy23iO0D4UpYS2k', u'storage_fstype': u'', u'nodes_secret': u'bdZccPuG9fibjwCS', u'transform_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/transform/source', u'repositories_user': u'oscied', u'root_secret': u'5FrvHcm7oyF4WQFW', u'storage_mountpoint': u'', u'mongo_nodes_password': u'M2qlif8rdtKtBYil', u'publisher_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/publisher/source', u'mongo_admin_password': u'Iz85QVjdCJugEosz', u'storage_address': u'', u'webui_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/webui/source'}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED orchestrator.\n", 'provides': {'publisher': {'interface': 'subordinate'}, 'api': {'interface': 'orchestra'}, 'transform': {'interface': 'subordinate'}}, 'name': 'oscied-orchestra', 'requires': {'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Orchestra"}}
2013-07-01 13:40:33,919 unit:oscied-transform/0: unit.hook.api INFO: [HOOK] Execute TransformHooks hook storage-relation-joined
2013-07-01 13:40:33,943 unit:oscied-webui/0: unit.hook.api INFO: [HOOK] Execute WebuiHooks hook storage-relation-joined
2013-07-01 13:40:33,985 unit:oscied-storage/2: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:33,965 unit:oscied-storage/4: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1819d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:40:33,990 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Execute gluster peer probe ip-10-202-41-54.ec2.internal
2013-07-01 13:40:34,126 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:34,180 unit:oscied-publisher/0: unit.hook.api INFO: --> Entering PublisherHooks.py
2013-07-01 13:40:34,295 unit:oscied-storage/3: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:34,264 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:34,251 unit:oscied-orchestra/0: unit.hook.api INFO: --> Entering OrchestraHooks.py
2013-07-01 13:40:34,273 unit:oscied-transform/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:40:34,277 unit:oscied-webui/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_options': '', 'verbose': None, 'database_template_file': 'templates/database.php.template', 'hosts_file': '/etc/hosts', 'sites_enabled_path': '/etc/apache2/sites-enabled', 'storage_path': '/mnt/storage', 'storage_mountpoint': 'medias_volume_0', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'site_database_file': 'webui-db.sql', 'general_config_file': '/var/www/application/config/config.php', 'database_config_file': '/var/www/application/config/database.php', 'proxy_ips': [], 'htaccess_template_file': 'templates/htaccess.template', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'www_medias_path': '/var/www/medias', 'www_uploads_path': '/var/www/uploads', '_pickle_filename': 'local_config.pkl', 'site_template_file': 'templates/000-default', 'storage_mount_sleep_delay': 5, 'storage_nat_address': '', 'encryption_key': '5UCuWXhlrxOscNFuShIfJtLlI2oB3crZ', 'storage_fstype': 'glusterfs', 'www_root_path': '/var/www', 'general_template_file': 'templates/config.php.template', 'htaccess_config_file': '/var/www/.htaccess'}
2013-07-01 13:40:34,305 unit:oscied-storage/4: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:40:34,349 unit:oscied-storage/4: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:40:34,375 unit:oscied-storage/4: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-4/charm/hooks/storage-relation-joined
2013-07-01 13:40:34,378 unit:oscied-storage/4: hook.scheduler DEBUG: executing hook for oscied-transform/0:modified
2013-07-01 13:40:34,378 unit:oscied-storage/4: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-4/charm/hooks/storage-relation-joined
2013-07-01 13:40:34,485 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'proxy_ips': [], 'storage_fstype': '', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-227-33-48.compute-1.amazonaws.com', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-publisher/1', 'public_address': 'ec2-54-227-33-48.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-50-5.ec2.internal', 'juju_log': <function callable_command at 0x19915f0>, 'config': {u'max_upload_size': 4294967296, u'storage_mountpoint': u'', 'verbose': True, u'max_input_time': 600, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'publisher_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 2, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u'', u'max_execution_time': 180}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media publisher. Contains apache & mod streaming.\nCan be scaled to multiple instances.\n", 'provides': {'streaming': {'interface': 'http'}}, 'name': 'oscied-publisher', 'requires': {'publisher': {'interface': 'subordinate'}, 'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Publisher"}}
2013-07-01 13:40:34,530 unit:oscied-publisher/0: unit.hook.api INFO: [HOOK] Execute PublisherHooks hook storage-relation-joined
2013-07-01 13:40:34,559 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1845d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/2', 'public_address': 'ec2-50-16-110-129.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-202-41-54.ec2.internal', 'juju_log': <function callable_command at 0x1dff0c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:40:34,585 unit:oscied-orchestra/0: unit.hook.api INFO: [HOOK] Execute OrchestraHooks hook storage-relation-joined
2013-07-01 13:40:34,613 unit:oscied-transform/0: unit.hook.api INFO: <-- Exiting TransformHooks.py
2013-07-01 13:40:34,612 unit:oscied-webui/0: unit.hook.api INFO: <-- Exiting WebuiHooks.py
2013-07-01 13:40:34,686 unit:oscied-storage/3: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:34,656 unit:oscied-webui/0: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:40:34,664 unit:oscied-transform/0: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:40:34,676 unit:oscied-webui/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-webui-0/charm/hooks/storage-relation-joined
2013-07-01 13:40:34,680 unit:oscied-webui/0: hook.scheduler DEBUG: executing hook for oscied-storage/4:modified
2013-07-01 13:40:34,685 unit:oscied-transform/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-transform-0/charm/hooks/storage-relation-joined
2013-07-01 13:40:34,693 unit:oscied-transform/0: hook.scheduler DEBUG: executing hook for oscied-storage/4:modified
2013-07-01 13:40:34,733 unit:oscied-storage/4: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['peer:0', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:40:34,745 unit:oscied-storage/4: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:40:34,745 unit:oscied-webui/0: hook.output DEBUG: Cached relation hook contexts on 'storage:4': ['api:7']
2013-07-01 13:40:34,753 unit:oscied-webui/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:40:34,753 unit:oscied-webui/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-webui-0/charm/hooks/storage-relation-changed
2013-07-01 13:40:34,774 unit:oscied-transform/0: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['transform:5']
2013-07-01 13:40:34,784 unit:oscied-transform/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:40:34,784 unit:oscied-transform/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-transform-0/charm/hooks/storage-relation-changed
2013-07-01 13:40:34,848 unit:oscied-storage/2: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:40:34,851 unit:oscied-publisher/1: unit.hook.api INFO: --> Entering PublisherHooks.py
2013-07-01 13:40:34,886 unit:oscied-publisher/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'proxy_ips': [], 'storage_fstype': 'glusterfs', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-234-214-201.compute-1.amazonaws.com', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:40:34,919 unit:oscied-orchestra/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'root_secret': u'5FrvHcm7oyF4WQFW', 'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': True, 'hosts_file': '/etc/hosts', 'rabbit_connection': u'amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': u'mongodb://admin:Iz85QVjdCJugEosz@localhost:27017/orchestra', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}
2013-07-01 13:40:34,985 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] Execute gluster volume delete medias_volume_1  < 'y\n'
2013-07-01 13:40:35,052 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:35,128 unit:oscied-storage/2: unit.hook.api INFO: [HOOK] Execute StorageHooks hook storage-relation-joined
2013-07-01 13:40:35,218 unit:oscied-publisher/1: unit.hook.api INFO: [HOOK] Execute PublisherHooks hook start
2013-07-01 13:40:35,240 unit:oscied-publisher/0: unit.hook.api INFO: <-- Exiting PublisherHooks.py
2013-07-01 13:40:35,262 unit:oscied-orchestra/0: unit.hook.api INFO: <-- Exiting OrchestraHooks.py
2013-07-01 13:40:35,295 unit:oscied-publisher/0: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:40:35,305 unit:oscied-orchestra/0: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:40:35,397 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x29b7d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/3', 'public_address': 'ec2-54-242-71-153.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-37-115.ec2.internal', 'juju_log': <function callable_command at 0x2f710c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:40:35,325 unit:oscied-publisher/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-publisher-0/charm/hooks/storage-relation-joined
2013-07-01 13:40:35,329 unit:oscied-publisher/0: hook.scheduler DEBUG: executing hook for oscied-storage/4:modified
2013-07-01 13:40:35,421 unit:oscied-storage/1: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x245bd60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:40:35,381 unit:oscied-storage/4: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:35,372 unit:oscied-orchestra/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-orchestra-0/charm/hooks/storage-relation-joined
2013-07-01 13:40:35,378 unit:oscied-orchestra/0: hook.scheduler DEBUG: executing hook for oscied-storage/4:modified
2013-07-01 13:40:35,404 unit:oscied-publisher/0: hook.output DEBUG: Cached relation hook contexts on 'storage:2': ['publisher:6']
2013-07-01 13:40:35,414 unit:oscied-publisher/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:40:35,415 unit:oscied-publisher/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-publisher-0/charm/hooks/storage-relation-changed
2013-07-01 13:40:35,531 unit:oscied-orchestra/0: hook.output DEBUG: Cached relation hook contexts on 'storage:3': ['api:7', 'publisher:6', 'transform:5']
2013-07-01 13:40:35,542 unit:oscied-orchestra/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:40:35,543 unit:oscied-orchestra/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-orchestra-0/charm/hooks/storage-relation-changed
2013-07-01 13:40:35,573 unit:oscied-publisher/1: unit.hook.api INFO: [REMARK] Do not start publisher daemon : No shared storage !
2013-07-01 13:40:35,613 unit:oscied-webui/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:35,686 unit:oscied-storage/2: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1845d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:40:35,746 unit:oscied-storage/3: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:40:35,763 unit:oscied-storage/1: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:40:35,732 unit:oscied-storage/4: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:35,738 unit:oscied-transform/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:35,807 unit:oscied-storage/1: hook.output DEBUG: hook peer-relation-joined exited, exit code 0.
2013-07-01 13:40:35,811 unit:oscied-storage/1: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-1/charm/hooks/peer-relation-joined
2013-07-01 13:40:35,817 unit:oscied-storage/1: hook.scheduler DEBUG: executing hook for oscied-storage/2:joined
2013-07-01 13:40:35,818 unit:oscied-storage/1: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-1/charm/hooks/storage-relation-joined
2013-07-01 13:40:35,920 unit:oscied-publisher/1: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'proxy_ips': [], 'storage_fstype': '', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-227-33-48.compute-1.amazonaws.com', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:40:35,960 unit:oscied-storage/2: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:40:36,006 unit:oscied-storage/2: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:40:35,973 unit:oscied-webui/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:36,103 unit:oscied-storage/3: unit.hook.api INFO: [HOOK] Execute StorageHooks hook storage-relation-joined
2013-07-01 13:40:36,057 unit:oscied-storage/2: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-2/charm/hooks/storage-relation-joined
2013-07-01 13:40:36,063 unit:oscied-storage/2: hook.scheduler DEBUG: executing hook for oscied-orchestra/0:modified
2013-07-01 13:40:36,063 unit:oscied-storage/2: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-2/charm/hooks/storage-relation-joined
2013-07-01 13:40:36,070 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:36,127 unit:oscied-storage/1: hook.output DEBUG: Cached relation hook contexts on 'peer:0': ['storage:1', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:40:36,134 unit:oscied-storage/1: unit.relation.lifecycle DEBUG: Executing hook peer-relation-joined
2013-07-01 13:40:36,097 unit:oscied-transform/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:36,280 unit:oscied-publisher/1: unit.hook.api INFO: <-- Exiting PublisherHooks.py
2013-07-01 13:40:36,318 unit:oscied-storage/2: hook.output DEBUG: Cached relation hook contexts on 'storage:3': ['peer:0', 'storage:1', 'storage:2', 'storage:4']
2013-07-01 13:40:36,328 unit:oscied-storage/2: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:40:36,322 unit:oscied-webui/0: unit.hook.api INFO: --> Entering WebuiHooks.py
2013-07-01 13:40:36,336 unit:oscied-publisher/1: hook.output DEBUG: hook start exited, exit code 0.
2013-07-01 13:40:36,337 unit:oscied-publisher/1: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-publisher-1/charm/hooks/start
2013-07-01 13:40:36,337 unit:oscied-publisher/1: unit.lifecycle DEBUG: starting service relation watch
2013-07-01 13:40:36,338 unit:oscied-publisher/1: unit.lifecycle DEBUG: starting unit relation resolved watch
2013-07-01 13:40:36,346 unit:oscied-publisher/1: unit.lifecycle DEBUG: relation resolved changed
2013-07-01 13:40:36,347 unit:oscied-publisher/1: unit.lifecycle INFO: processing relation resolved changed
2013-07-01 13:40:36,353 unit:oscied-publisher/1: unit.lifecycle DEBUG: services changed old:None new:[<ServiceRelationState name:storage role:client id:relation-0000000002 scope:global>, <ServiceRelationState name:publisher role:client id:relation-0000000006 scope:global>]
2013-07-01 13:40:36,380 unit:oscied-publisher/1: unit.lifecycle DEBUG: processing relations changed
2013-07-01 13:40:36,405 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1bf7d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/4', 'public_address': 'ec2-54-242-176-247.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-73-202.ec2.internal', 'juju_log': <function callable_command at 0x21b10c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:40:36,434 unit:oscied-publisher/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:36,438 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:36,435 unit:oscied-orchestra/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:36,484 unit:oscied-storage/2: unit.relation.watch DEBUG: relation membership change
2013-07-01 13:40:36,535 unit:oscied-storage/3: unit.relation.watch DEBUG: relation membership change
2013-07-01 13:40:36,505 unit:oscied-storage/1: unit.relation.watch DEBUG: relation membership change
2013-07-01 13:40:36,460 unit:oscied-storage/4: unit.relation.watch DEBUG: relation membership change
2013-07-01 13:40:36,451 unit:oscied-storage/0: unit.relation.watch DEBUG: relation membership change
2013-07-01 13:40:36,456 unit:oscied-publisher/1: unit.relation.lifecycle DEBUG: stopped relation:storage lifecycle
2013-07-01 13:40:36,474 unit:oscied-storage/4: hook.scheduler DEBUG: members changed: old=['oscied-publisher/0'], new=['oscied-publisher/0', 'oscied-publisher/1']
2013-07-01 13:40:36,465 unit:oscied-storage/0: hook.scheduler DEBUG: members changed: old=['oscied-publisher/0'], new=['oscied-publisher/0', 'oscied-publisher/1']
2013-07-01 13:40:36,518 unit:oscied-storage/1: hook.scheduler DEBUG: members changed: old=['oscied-publisher/0'], new=['oscied-publisher/0', 'oscied-publisher/1']
2013-07-01 13:40:36,497 unit:oscied-storage/2: hook.scheduler DEBUG: members changed: old=['oscied-publisher/0'], new=['oscied-publisher/0', 'oscied-publisher/1']
2013-07-01 13:40:36,549 unit:oscied-storage/3: hook.scheduler DEBUG: members changed: old=['oscied-publisher/0'], new=['oscied-publisher/0', 'oscied-publisher/1']
2013-07-01 13:40:36,521 unit:oscied-storage/1: hook.scheduler DEBUG: settings changed: (('oscied-publisher/1', 0),)
2013-07-01 13:40:36,467 unit:oscied-storage/0: hook.scheduler DEBUG: executing hook for oscied-publisher/1:joined
2013-07-01 13:40:36,471 unit:oscied-publisher/1: statemachine DEBUG: relationworkflowstate: transition start (None -> up) {}
2013-07-01 13:40:36,552 unit:oscied-storage/3: hook.scheduler DEBUG: settings changed: (('oscied-publisher/1', 0),)
2013-07-01 13:40:36,501 unit:oscied-storage/2: hook.scheduler DEBUG: settings changed: (('oscied-publisher/1', 0),)
2013-07-01 13:40:36,469 unit:oscied-storage/0: hook.scheduler DEBUG: settings changed: (('oscied-publisher/1', 0),)
2013-07-01 13:40:36,480 unit:oscied-storage/4: hook.scheduler DEBUG: settings changed: (('oscied-publisher/1', 0),)
2013-07-01 13:40:36,471 unit:oscied-publisher/1: statemachine DEBUG: relationworkflowstate:  execute action do_start
2013-07-01 13:40:36,472 unit:oscied-publisher/1: hook.scheduler DEBUG: start
2013-07-01 13:40:36,511 unit:oscied-publisher/1: unit.relation.watch DEBUG: relation watcher start
2013-07-01 13:40:36,511 unit:oscied-publisher/1: unit.relation.lifecycle DEBUG: started relation:storage lifecycle
2013-07-01 13:40:36,518 unit:oscied-publisher/1: hook.scheduler DEBUG: members changed: old=[], new=['oscied-storage/0', 'oscied-storage/1', 'oscied-storage/2', 'oscied-storage/3', 'oscied-storage/4']
2013-07-01 13:40:36,519 unit:oscied-publisher/1: hook.scheduler DEBUG: executing hook for oscied-storage/0:joined
2013-07-01 13:40:36,527 unit:oscied-publisher/1: hook.scheduler DEBUG: settings changed: (('oscied-storage/1', 0),)
2013-07-01 13:40:36,529 unit:oscied-publisher/1: hook.scheduler DEBUG: settings changed: (('oscied-storage/2', 0),)
2013-07-01 13:40:36,531 unit:oscied-publisher/1: hook.scheduler DEBUG: settings changed: (('oscied-storage/3', 0),)
2013-07-01 13:40:36,533 unit:oscied-publisher/1: hook.scheduler DEBUG: settings changed: (('oscied-storage/4', 0),)
2013-07-01 13:40:36,535 unit:oscied-publisher/1: hook.scheduler DEBUG: settings changed: (('oscied-storage/0', 1),)
2013-07-01 13:40:36,540 unit:oscied-publisher/1: statemachine DEBUG: relationworkflowstate: transition complete start (state up) {}
2013-07-01 13:40:36,601 unit:oscied-publisher/1: juju.state.hook DEBUG: Ignoring partially constructed relation: publisher:6
2013-07-01 13:40:36,601 unit:oscied-publisher/1: hook.output DEBUG: Cached relation hook contexts on 'storage:2': []
2013-07-01 13:40:36,614 unit:oscied-publisher/1: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:40:36,614 unit:oscied-publisher/1: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-publisher-1/charm/hooks/storage-relation-joined
2013-07-01 13:40:36,627 unit:oscied-orchestra/0: unit.relation.watch DEBUG: relation membership change
2013-07-01 13:40:36,636 unit:oscied-publisher/1: unit.relation.lifecycle DEBUG: stopped relation:publisher lifecycle
2013-07-01 13:40:36,632 unit:oscied-orchestra/0: hook.scheduler DEBUG: members changed: old=['oscied-publisher/0'], new=['oscied-publisher/0', 'oscied-publisher/1']
2013-07-01 13:40:36,633 unit:oscied-orchestra/0: hook.scheduler DEBUG: executing hook for oscied-publisher/1:joined
2013-07-01 13:40:36,643 unit:oscied-publisher/1: statemachine DEBUG: relationworkflowstate: transition start (None -> up) {}
2013-07-01 13:40:36,636 unit:oscied-orchestra/0: hook.scheduler DEBUG: settings changed: (('oscied-publisher/1', 0),)
2013-07-01 13:40:36,644 unit:oscied-publisher/1: statemachine DEBUG: relationworkflowstate:  execute action do_start
2013-07-01 13:40:36,647 unit:oscied-publisher/1: hook.scheduler DEBUG: start
2013-07-01 13:40:36,655 unit:oscied-webui/0: unit.hook.api INFO: [HOOK] Execute WebuiHooks hook storage-relation-changed
2013-07-01 13:40:36,741 unit:oscied-storage/4: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:40:36,831 unit:oscied-storage/3: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x29b7d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:40:36,758 unit:oscied-publisher/1: unit.relation.watch DEBUG: relation watcher start
2013-07-01 13:40:36,758 unit:oscied-publisher/1: unit.relation.lifecycle DEBUG: started relation:publisher lifecycle
2013-07-01 13:40:36,765 unit:oscied-publisher/1: hook.scheduler DEBUG: members changed: old=[], new=['oscied-orchestra/0']
2013-07-01 13:40:36,768 unit:oscied-publisher/1: hook.scheduler DEBUG: executing hook for oscied-orchestra/0:joined
2013-07-01 13:40:36,769 unit:oscied-publisher/1: hook.scheduler DEBUG: settings changed: (('oscied-orchestra/0', 1),)
2013-07-01 13:40:36,775 unit:oscied-publisher/1: statemachine DEBUG: relationworkflowstate: transition complete start (state up) {}
2013-07-01 13:40:36,779 unit:oscied-publisher/1: unit.lifecycle DEBUG: started unit lifecycle
2013-07-01 13:40:36,782 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-transform/0', 'public_address': 'ec2-72-44-43-150.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-25-113.ec2.internal', 'juju_log': <function callable_command at 0x2afb2a8>, 'config': {u'storage_mountpoint': u'', 'verbose': True, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'transform_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 1, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u''}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media transform. Contains ffmpeg & x264.\nCan be scaled to multiple instances.\n", 'name': 'oscied-transform', 'requires': {'storage': {'interface': 'mount'}, 'transform': {'interface': 'subordinate'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Encoder"}}
2013-07-01 13:40:36,857 unit:oscied-storage/1: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:36,811 unit:oscied-publisher/1: statemachine DEBUG: unitworkflowstate: transition complete start (state started) {}
2013-07-01 13:40:36,823 unit:oscied-publisher/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:36,841 unit:oscied-publisher/1: juju.agents.unit DEBUG: Configuration Changed
2013-07-01 13:40:36,849 unit:oscied-storage/0: hook.output DEBUG: Cached relation hook contexts on 'storage:2': ['peer:0', 'storage:1', 'storage:3', 'storage:4']
2013-07-01 13:40:36,851 unit:oscied-orchestra/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:36,866 unit:oscied-storage/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:40:36,900 unit:oscied-storage/2: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:36,864 unit:oscied-publisher/1: statemachine DEBUG: unitworkflowstate: transition configure (started -> started) {}
2013-07-01 13:40:36,864 unit:oscied-publisher/1: statemachine DEBUG: unitworkflowstate:  execute action do_configure
2013-07-01 13:40:36,979 unit:oscied-publisher/1: hook.output DEBUG: Cached relation hook contexts on 'publisher:6': ['storage:2']
2013-07-01 13:40:36,986 unit:oscied-orchestra/0: hook.output DEBUG: Cached relation hook contexts on 'publisher:6': ['api:7', 'storage:3', 'transform:5']
2013-07-01 13:40:36,997 unit:oscied-publisher/1: unit.relation.lifecycle DEBUG: Executing hook publisher-relation-joined
2013-07-01 13:40:36,997 unit:oscied-orchestra/0: unit.relation.lifecycle DEBUG: Executing hook publisher-relation-joined
2013-07-01 13:40:37,072 unit:oscied-storage/4: unit.hook.api INFO: [HOOK] Execute StorageHooks hook storage-relation-joined
2013-07-01 13:40:37,177 unit:oscied-storage/3: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:40:37,110 unit:oscied-publisher/1: hook.output DEBUG: Cached relation hook contexts: ['publisher:6', 'storage:2']
2013-07-01 13:40:37,124 unit:oscied-transform/0: unit.hook.api INFO: --> Entering TransformHooks.py
2013-07-01 13:40:37,224 unit:oscied-storage/3: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:40:37,243 unit:oscied-storage/3: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-3/charm/hooks/storage-relation-joined
2013-07-01 13:40:37,249 unit:oscied-storage/3: hook.scheduler DEBUG: executing hook for oscied-transform/0:modified
2013-07-01 13:40:37,249 unit:oscied-storage/3: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-3/charm/hooks/storage-relation-joined
2013-07-01 13:40:37,235 unit:oscied-storage/1: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:37,180 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:37,224 unit:oscied-storage/2: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:37,263 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:37,460 unit:oscied-transform/0: unit.hook.api INFO: [HOOK] Execute TransformHooks hook storage-relation-changed
2013-07-01 13:40:37,512 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:37,587 unit:oscied-storage/3: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['peer:0', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:40:37,622 unit:oscied-storage/3: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:40:37,579 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:37,548 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'proxy_ips': [], 'storage_fstype': 'glusterfs', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-234-214-201.compute-1.amazonaws.com', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-publisher/0', 'public_address': 'ec2-54-234-214-201.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-2-99.ec2.internal', 'juju_log': <function callable_command at 0x25ad5f0>, 'config': {u'max_upload_size': 4294967296, u'storage_mountpoint': u'', 'verbose': True, u'max_input_time': 600, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'publisher_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 2, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u'', u'max_execution_time': 180}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media publisher. Contains apache & mod streaming.\nCan be scaled to multiple instances.\n", 'provides': {'streaming': {'interface': 'http'}}, 'name': 'oscied-publisher', 'requires': {'publisher': {'interface': 'subordinate'}, 'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Publisher"}}
2013-07-01 13:40:37,605 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'root_secret': u'5FrvHcm7oyF4WQFW', 'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': True, 'hosts_file': '/etc/hosts', 'rabbit_connection': u'amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': u'mongodb://admin:Iz85QVjdCJugEosz@localhost:27017/orchestra', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}, 'name': 'oscied-orchestra/0', 'public_address': 'ec2-54-234-192-63.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-71-53.ec2.internal', 'juju_log': <function callable_command at 0x1e637d0>, 'config': {u'repositories_pass': u'41nVGq07GmSgK9Ud', u'storage_options': u'', 'verbose': True, u'storage_nat_address': u'', u'rabbit_password': u'OZy23iO0D4UpYS2k', u'storage_fstype': u'', u'nodes_secret': u'bdZccPuG9fibjwCS', u'transform_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/transform/source', u'repositories_user': u'oscied', u'root_secret': u'5FrvHcm7oyF4WQFW', u'storage_mountpoint': u'', u'mongo_nodes_password': u'M2qlif8rdtKtBYil', u'publisher_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/publisher/source', u'mongo_admin_password': u'Iz85QVjdCJugEosz', u'storage_address': u'', u'webui_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/webui/source'}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED orchestrator.\n", 'provides': {'publisher': {'interface': 'subordinate'}, 'api': {'interface': 'orchestra'}, 'transform': {'interface': 'subordinate'}}, 'name': 'oscied-orchestra', 'requires': {'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Orchestra"}}
2013-07-01 13:40:37,735 unit:oscied-storage/4: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1bf7d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:40:37,795 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1ffdd60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/2', 'public_address': 'ec2-50-16-110-129.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-202-41-54.ec2.internal', 'juju_log': <function callable_command at 0x25b70c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:40:37,795 unit:oscied-publisher/1: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:37,931 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0xc97d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/1', 'public_address': 'ec2-107-21-196-203.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-47-249.ec2.internal', 'juju_log': <function callable_command at 0x12510c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:40:37,894 unit:oscied-publisher/0: unit.hook.api INFO: --> Entering PublisherHooks.py
2013-07-01 13:40:37,937 unit:oscied-orchestra/0: unit.hook.api INFO: --> Entering OrchestraHooks.py
2013-07-01 13:40:38,078 unit:oscied-storage/2: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:40:38,093 unit:oscied-storage/4: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:40:38,137 unit:oscied-storage/4: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:40:38,156 unit:oscied-publisher/1: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:38,174 unit:oscied-storage/4: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-4/charm/hooks/storage-relation-joined
2013-07-01 13:40:38,180 unit:oscied-storage/4: hook.scheduler DEBUG: executing hook for oscied-publisher/1:joined
2013-07-01 13:40:38,181 unit:oscied-storage/4: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-4/charm/hooks/storage-relation-joined
2013-07-01 13:40:38,265 unit:oscied-storage/1: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:40:38,320 unit:oscied-storage/3: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:38,243 unit:oscied-publisher/0: unit.hook.api INFO: [HOOK] Execute PublisherHooks hook storage-relation-changed
2013-07-01 13:40:38,279 unit:oscied-orchestra/0: unit.hook.api INFO: [HOOK] Execute OrchestraHooks hook storage-relation-changed
2013-07-01 13:40:38,352 unit:oscied-storage/2: unit.hook.api INFO: [HOOK] Execute StorageHooks hook storage-relation-joined
2013-07-01 13:40:38,324 unit:oscied-webui/0: unit.hook.api INFO: [REMARK] Waiting for complete setup !
2013-07-01 13:40:38,481 unit:oscied-storage/4: hook.output DEBUG: Cached relation hook contexts on 'storage:2': ['peer:0', 'storage:1', 'storage:3', 'storage:4']
2013-07-01 13:40:38,493 unit:oscied-storage/4: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:40:38,512 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:38,597 unit:oscied-storage/1: unit.hook.api INFO: [HOOK] Execute StorageHooks hook storage-relation-joined
2013-07-01 13:40:38,694 unit:oscied-storage/3: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:38,657 unit:oscied-webui/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_options': '', 'verbose': None, 'database_template_file': 'templates/database.php.template', 'hosts_file': '/etc/hosts', 'sites_enabled_path': '/etc/apache2/sites-enabled', 'storage_path': '/mnt/storage', 'storage_mountpoint': 'medias_volume_0', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'site_database_file': 'webui-db.sql', 'general_config_file': '/var/www/application/config/config.php', 'database_config_file': '/var/www/application/config/database.php', 'proxy_ips': [], 'htaccess_template_file': 'templates/htaccess.template', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'www_medias_path': '/var/www/medias', 'www_uploads_path': '/var/www/uploads', '_pickle_filename': 'local_config.pkl', 'site_template_file': 'templates/000-default', 'storage_mount_sleep_delay': 5, 'storage_nat_address': '', 'encryption_key': '5UCuWXhlrxOscNFuShIfJtLlI2oB3crZ', 'storage_fstype': 'glusterfs', 'www_root_path': '/var/www', 'general_template_file': 'templates/config.php.template', 'htaccess_config_file': '/var/www/.htaccess'}
2013-07-01 13:40:38,867 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'proxy_ips': [], 'storage_fstype': '', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-227-33-48.compute-1.amazonaws.com', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-publisher/1', 'public_address': 'ec2-54-227-33-48.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-50-5.ec2.internal', 'juju_log': <function callable_command at 0x124d5f0>, 'config': {u'max_upload_size': 4294967296, u'storage_mountpoint': u'', 'verbose': True, u'max_input_time': 600, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'publisher_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 2, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u'', u'max_execution_time': 180}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media publisher. Contains apache & mod streaming.\nCan be scaled to multiple instances.\n", 'provides': {'streaming': {'interface': 'http'}}, 'name': 'oscied-publisher', 'requires': {'publisher': {'interface': 'subordinate'}, 'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Publisher"}}
2013-07-01 13:40:38,904 unit:oscied-storage/2: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1ffdd60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:40:39,051 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:38,994 unit:oscied-webui/0: unit.hook.api INFO: <-- Exiting WebuiHooks.py
2013-07-01 13:40:39,038 unit:oscied-webui/0: hook.output DEBUG: hook storage-relation-changed exited, exit code 0.
2013-07-01 13:40:39,065 unit:oscied-webui/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-webui-0/charm/hooks/storage-relation-changed
2013-07-01 13:40:39,067 unit:oscied-webui/0: hook.scheduler DEBUG: executing hook for oscied-storage/3:modified
2013-07-01 13:40:39,185 unit:oscied-storage/2: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:40:39,165 unit:oscied-webui/0: hook.output DEBUG: Cached relation hook contexts on 'storage:4': ['api:7']
2013-07-01 13:40:39,174 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] Storage address is ip-10-164-73-202.ec2.internal, fstype: , mountpoint: , options: 
2013-07-01 13:40:39,173 unit:oscied-webui/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:40:39,173 unit:oscied-webui/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-webui-0/charm/hooks/storage-relation-changed
2013-07-01 13:40:39,188 unit:oscied-storage/4: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:39,232 unit:oscied-storage/2: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:40:39,217 unit:oscied-publisher/1: unit.hook.api INFO: --> Entering PublisherHooks.py
2013-07-01 13:40:39,278 unit:oscied-storage/1: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0xc97d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:40:39,303 unit:oscied-storage/2: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-2/charm/hooks/storage-relation-joined
2013-07-01 13:40:39,310 unit:oscied-storage/2: hook.scheduler DEBUG: executing hook for oscied-webui/0:modified
2013-07-01 13:40:39,312 unit:oscied-storage/2: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-2/charm/hooks/config-changed
2013-07-01 13:40:39,402 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x2839d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/3', 'public_address': 'ec2-54-242-71-153.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-37-115.ec2.internal', 'juju_log': <function callable_command at 0x2df30c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:40:39,510 unit:oscied-transform/0: unit.hook.api INFO: [REMARK] Waiting for complete setup !
2013-07-01 13:40:39,540 unit:oscied-storage/4: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:39,570 unit:oscied-storage/2: hook.output DEBUG: Cached relation hook contexts on 'storage:4': ['peer:0', 'storage:1', 'storage:2', 'storage:3']
2013-07-01 13:40:39,582 unit:oscied-storage/2: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:40:39,615 unit:oscied-storage/1: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:40:39,577 unit:oscied-publisher/1: unit.hook.api INFO: [HOOK] Execute PublisherHooks hook storage-relation-joined
2013-07-01 13:40:39,661 unit:oscied-storage/1: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:40:39,686 unit:oscied-storage/1: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-1/charm/hooks/storage-relation-joined
2013-07-01 13:40:39,689 unit:oscied-storage/1: hook.scheduler DEBUG: executing hook for oscied-transform/0:modified
2013-07-01 13:40:39,690 unit:oscied-storage/1: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-1/charm/hooks/storage-relation-joined
2013-07-01 13:40:39,766 unit:oscied-storage/3: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:40:39,844 unit:oscied-transform/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:40:39,876 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:39,915 unit:oscied-publisher/1: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'proxy_ips': [], 'storage_fstype': '', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-227-33-48.compute-1.amazonaws.com', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:40:39,984 unit:oscied-storage/1: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['peer:0', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:40:39,992 unit:oscied-storage/1: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:40:39,954 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Storage address is ip-10-164-73-202.ec2.internal, fstype: , mountpoint: , options: 
2013-07-01 13:40:39,992 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] Storage address is ip-10-164-73-202.ec2.internal, fstype: , mountpoint: , options: 
2013-07-01 13:40:40,031 unit:oscied-webui/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:40,118 unit:oscied-storage/3: unit.hook.api INFO: [HOOK] Execute StorageHooks hook storage-relation-joined
2013-07-01 13:40:40,205 unit:oscied-storage/2: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:40,186 unit:oscied-transform/0: unit.hook.api INFO: <-- Exiting TransformHooks.py
2013-07-01 13:40:40,211 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0xf13d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/4', 'public_address': 'ec2-54-242-176-247.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-73-202.ec2.internal', 'juju_log': <function callable_command at 0x14cd0c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:40:40,236 unit:oscied-transform/0: hook.output DEBUG: hook storage-relation-changed exited, exit code 0.
2013-07-01 13:40:40,257 unit:oscied-publisher/1: unit.hook.api INFO: <-- Exiting PublisherHooks.py
2013-07-01 13:40:40,261 unit:oscied-transform/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-transform-0/charm/hooks/storage-relation-changed
2013-07-01 13:40:40,263 unit:oscied-transform/0: hook.scheduler DEBUG: executing hook for oscied-storage/1:joined
2013-07-01 13:40:40,299 unit:oscied-orchestra/0: unit.hook.api INFO: [REMARK] Waiting for complete setup !
2013-07-01 13:40:40,307 unit:oscied-publisher/1: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:40:40,315 unit:oscied-publisher/1: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-publisher-1/charm/hooks/storage-relation-joined
2013-07-01 13:40:40,317 unit:oscied-publisher/1: hook.scheduler DEBUG: executing hook for oscied-storage/1:joined
2013-07-01 13:40:40,318 unit:oscied-publisher/1: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-publisher-1/charm/hooks/publisher-relation-joined
2013-07-01 13:40:40,334 unit:oscied-transform/0: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['transform:5']
2013-07-01 13:40:40,340 unit:oscied-publisher/0: unit.hook.api INFO: [REMARK] Waiting for complete setup !
2013-07-01 13:40:40,341 unit:oscied-transform/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:40:40,342 unit:oscied-transform/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-transform-0/charm/hooks/storage-relation-joined
2013-07-01 13:40:40,388 unit:oscied-webui/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:40,438 unit:oscied-publisher/1: hook.output DEBUG: Cached relation hook contexts on 'storage:2': ['publisher:6']
2013-07-01 13:40:40,446 unit:oscied-publisher/1: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:40:40,540 unit:oscied-storage/2: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:40,541 unit:oscied-storage/4: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:40:40,637 unit:oscied-orchestra/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'root_secret': u'5FrvHcm7oyF4WQFW', 'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': True, 'hosts_file': '/etc/hosts', 'rabbit_connection': u'amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': u'mongodb://admin:Iz85QVjdCJugEosz@localhost:27017/orchestra', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}
2013-07-01 13:40:40,719 unit:oscied-storage/1: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:40,691 unit:oscied-publisher/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'proxy_ips': [], 'storage_fstype': 'glusterfs', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-234-214-201.compute-1.amazonaws.com', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:40:40,729 unit:oscied-webui/0: unit.hook.api INFO: --> Entering WebuiHooks.py
2013-07-01 13:40:40,848 unit:oscied-storage/3: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x2839d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:40:40,830 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:40,873 unit:oscied-storage/4: unit.hook.api INFO: [HOOK] Execute StorageHooks hook storage-relation-joined
2013-07-01 13:40:40,975 unit:oscied-orchestra/0: unit.hook.api INFO: <-- Exiting OrchestraHooks.py
2013-07-01 13:40:41,019 unit:oscied-orchestra/0: hook.output DEBUG: hook storage-relation-changed exited, exit code 0.
2013-07-01 13:40:41,093 unit:oscied-storage/1: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:41,051 unit:oscied-publisher/0: unit.hook.api INFO: <-- Exiting PublisherHooks.py
2013-07-01 13:40:41,066 unit:oscied-webui/0: unit.hook.api INFO: [HOOK] Execute WebuiHooks hook storage-relation-changed
2013-07-01 13:40:41,126 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0xfd5b90>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/2', 'public_address': 'ec2-50-16-110-129.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-202-41-54.ec2.internal', 'juju_log': <function callable_command at 0x15a40c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:40:41,094 unit:oscied-orchestra/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-orchestra-0/charm/hooks/storage-relation-changed
2013-07-01 13:40:41,095 unit:oscied-orchestra/0: hook.scheduler DEBUG: executing hook for oscied-storage/1:joined
2013-07-01 13:40:41,096 unit:oscied-orchestra/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-orchestra-0/charm/hooks/publisher-relation-joined
2013-07-01 13:40:41,113 unit:oscied-publisher/0: hook.output DEBUG: hook storage-relation-changed exited, exit code 0.
2013-07-01 13:40:41,216 unit:oscied-storage/3: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:40:41,138 unit:oscied-publisher/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-publisher-0/charm/hooks/storage-relation-changed
2013-07-01 13:40:41,140 unit:oscied-publisher/0: hook.scheduler DEBUG: executing hook for oscied-storage/1:joined
2013-07-01 13:40:41,263 unit:oscied-storage/3: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:40:41,237 unit:oscied-publisher/0: hook.output DEBUG: Cached relation hook contexts on 'storage:2': ['publisher:6']
2013-07-01 13:40:41,298 unit:oscied-storage/3: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-3/charm/hooks/storage-relation-joined
2013-07-01 13:40:41,321 unit:oscied-storage/3: hook.scheduler DEBUG: executing hook for oscied-publisher/1:joined
2013-07-01 13:40:41,323 unit:oscied-storage/3: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-3/charm/hooks/storage-relation-joined
2013-07-01 13:40:41,246 unit:oscied-publisher/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:40:41,247 unit:oscied-publisher/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-publisher-0/charm/hooks/storage-relation-joined
2013-07-01 13:40:41,289 unit:oscied-transform/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:41,314 unit:oscied-publisher/1: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:41,432 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:41,398 unit:oscied-storage/2: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:40:41,391 unit:oscied-orchestra/0: hook.output DEBUG: Cached relation hook contexts on 'storage:3': ['api:7', 'publisher:6', 'transform:5']
2013-07-01 13:40:41,405 unit:oscied-orchestra/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:40:41,541 unit:oscied-storage/4: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0xf13d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:40:41,675 unit:oscied-storage/2: unit.hook.api INFO: [HOOK] Execute StorageHooks hook config-changed
2013-07-01 13:40:41,673 unit:oscied-transform/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:41,677 unit:oscied-publisher/1: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:41,778 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x16a0d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/1', 'public_address': 'ec2-107-21-196-203.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-47-249.ec2.internal', 'juju_log': <function callable_command at 0x1c5a0c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:40:41,892 unit:oscied-storage/4: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:40:41,952 unit:oscied-storage/2: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0xfd5b90>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:40:41,941 unit:oscied-storage/4: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:40:42,026 unit:oscied-storage/3: hook.output DEBUG: Cached relation hook contexts on 'storage:2': ['peer:0', 'storage:1', 'storage:3', 'storage:4']
2013-07-01 13:40:42,035 unit:oscied-storage/3: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:40:42,008 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:42,016 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:42,061 unit:oscied-storage/4: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-4/charm/hooks/storage-relation-joined
2013-07-01 13:40:42,068 unit:oscied-storage/4: hook.scheduler DEBUG: executing hook for oscied-orchestra/0:modified
2013-07-01 13:40:42,069 unit:oscied-storage/4: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-4/charm/hooks/storage-relation-joined
2013-07-01 13:40:42,123 unit:oscied-storage/1: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:40:42,230 unit:oscied-storage/2: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:40:42,207 unit:oscied-orchestra/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:42,281 unit:oscied-storage/2: hook.output DEBUG: hook config-changed exited, exit code 0.
2013-07-01 13:40:42,393 unit:oscied-storage/3: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:42,315 unit:oscied-publisher/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:42,362 unit:oscied-storage/2: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-2/charm/hooks/config-changed
2013-07-01 13:40:42,362 unit:oscied-storage/2: unit.lifecycle DEBUG: configured unit
2013-07-01 13:40:42,364 unit:oscied-storage/2: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-2/charm/hooks/peer-relation-joined
2013-07-01 13:40:42,347 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-transform/0', 'public_address': 'ec2-72-44-43-150.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-25-113.ec2.internal', 'juju_log': <function callable_command at 0x1fc12a8>, 'config': {u'storage_mountpoint': u'', 'verbose': True, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'transform_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 1, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u''}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media transform. Contains ffmpeg & x264.\nCan be scaled to multiple instances.\n", 'name': 'oscied-transform', 'requires': {'storage': {'interface': 'mount'}, 'transform': {'interface': 'subordinate'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Encoder"}}
2013-07-01 13:40:42,353 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'proxy_ips': [], 'storage_fstype': '', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-227-33-48.compute-1.amazonaws.com', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-publisher/1', 'public_address': 'ec2-54-227-33-48.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-50-5.ec2.internal', 'juju_log': <function callable_command at 0x14d35f0>, 'config': {u'max_upload_size': 4294967296, u'storage_mountpoint': u'', 'verbose': True, u'max_input_time': 600, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'publisher_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 2, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u'', u'max_execution_time': 180}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media publisher. Contains apache & mod streaming.\nCan be scaled to multiple instances.\n", 'provides': {'streaming': {'interface': 'http'}}, 'name': 'oscied-publisher', 'requires': {'publisher': {'interface': 'subordinate'}, 'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Publisher"}}
2013-07-01 13:40:42,393 unit:oscied-storage/2: statemachine DEBUG: unitworkflowstate: transition complete configure (state started) {}
2013-07-01 13:40:42,398 unit:oscied-storage/2: juju.agents.unit INFO: No upgrade flag set.
2013-07-01 13:40:42,459 unit:oscied-storage/1: unit.hook.api INFO: [HOOK] Execute StorageHooks hook storage-relation-joined
2013-07-01 13:40:42,513 unit:oscied-storage/4: hook.output DEBUG: Cached relation hook contexts on 'storage:3': ['peer:0', 'storage:1', 'storage:2', 'storage:4']
2013-07-01 13:40:42,537 unit:oscied-storage/4: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:40:42,580 unit:oscied-orchestra/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:42,763 unit:oscied-storage/3: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:42,686 unit:oscied-publisher/1: unit.hook.api INFO: --> Entering PublisherHooks.py
2013-07-01 13:40:42,685 unit:oscied-transform/0: unit.hook.api INFO: --> Entering TransformHooks.py
2013-07-01 13:40:42,703 unit:oscied-publisher/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:42,726 unit:oscied-webui/0: unit.hook.api INFO: [REMARK] Waiting for complete setup !
2013-07-01 13:40:42,936 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:43,020 unit:oscied-publisher/1: unit.hook.api INFO: [HOOK] Execute PublisherHooks hook subordinate-relation-joined
2013-07-01 13:40:43,019 unit:oscied-transform/0: unit.hook.api INFO: [HOOK] Execute TransformHooks hook storage-relation-joined
2013-07-01 13:40:43,127 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:43,062 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:43,060 unit:oscied-webui/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_options': '', 'verbose': None, 'database_template_file': 'templates/database.php.template', 'hosts_file': '/etc/hosts', 'sites_enabled_path': '/etc/apache2/sites-enabled', 'storage_path': '/mnt/storage', 'storage_mountpoint': 'medias_volume_0', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'site_database_file': 'webui-db.sql', 'general_config_file': '/var/www/application/config/config.php', 'database_config_file': '/var/www/application/config/database.php', 'proxy_ips': [], 'htaccess_template_file': 'templates/htaccess.template', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'www_medias_path': '/var/www/medias', 'www_uploads_path': '/var/www/uploads', '_pickle_filename': 'local_config.pkl', 'site_template_file': 'templates/000-default', 'storage_mount_sleep_delay': 5, 'storage_nat_address': '', 'encryption_key': '5UCuWXhlrxOscNFuShIfJtLlI2oB3crZ', 'storage_fstype': 'glusterfs', 'www_root_path': '/var/www', 'general_template_file': 'templates/config.php.template', 'htaccess_config_file': '/var/www/.htaccess'}
2013-07-01 13:40:43,096 unit:oscied-storage/2: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:43,138 unit:oscied-storage/1: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x16a0d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:40:43,153 unit:oscied-storage/4: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:43,303 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'root_secret': u'5FrvHcm7oyF4WQFW', 'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': True, 'hosts_file': '/etc/hosts', 'rabbit_connection': u'amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': u'mongodb://admin:Iz85QVjdCJugEosz@localhost:27017/orchestra', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}, 'name': 'oscied-orchestra/0', 'public_address': 'ec2-54-234-192-63.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-71-53.ec2.internal', 'juju_log': <function callable_command at 0x124b7d0>, 'config': {u'repositories_pass': u'41nVGq07GmSgK9Ud', u'storage_options': u'', 'verbose': True, u'storage_nat_address': u'', u'rabbit_password': u'OZy23iO0D4UpYS2k', u'storage_fstype': u'', u'nodes_secret': u'bdZccPuG9fibjwCS', u'transform_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/transform/source', u'repositories_user': u'oscied', u'root_secret': u'5FrvHcm7oyF4WQFW', u'storage_mountpoint': u'', u'mongo_nodes_password': u'M2qlif8rdtKtBYil', u'publisher_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/publisher/source', u'mongo_admin_password': u'Iz85QVjdCJugEosz', u'storage_address': u'', u'webui_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/webui/source'}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED orchestrator.\n", 'provides': {'publisher': {'interface': 'subordinate'}, 'api': {'interface': 'orchestra'}, 'transform': {'interface': 'subordinate'}}, 'name': 'oscied-orchestra', 'requires': {'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Orchestra"}}
2013-07-01 13:40:43,352 unit:oscied-publisher/1: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'proxy_ips': [], 'storage_fstype': '', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-227-33-48.compute-1.amazonaws.com', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:40:43,362 unit:oscied-transform/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:40:43,417 unit:oscied-storage/2: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:43,395 unit:oscied-webui/0: unit.hook.api INFO: <-- Exiting WebuiHooks.py
2013-07-01 13:40:43,486 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1fc9d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/3', 'public_address': 'ec2-54-242-71-153.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-37-115.ec2.internal', 'juju_log': <function callable_command at 0x25830c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:40:43,430 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'proxy_ips': [], 'storage_fstype': 'glusterfs', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-234-214-201.compute-1.amazonaws.com', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-publisher/0', 'public_address': 'ec2-54-234-214-201.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-2-99.ec2.internal', 'juju_log': <function callable_command at 0x14155f0>, 'config': {u'max_upload_size': 4294967296, u'storage_mountpoint': u'', 'verbose': True, u'max_input_time': 600, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'publisher_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 2, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u'', u'max_execution_time': 180}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media publisher. Contains apache & mod streaming.\nCan be scaled to multiple instances.\n", 'provides': {'streaming': {'interface': 'http'}}, 'name': 'oscied-publisher', 'requires': {'publisher': {'interface': 'subordinate'}, 'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Publisher"}}
2013-07-01 13:40:43,481 unit:oscied-storage/1: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:40:43,441 unit:oscied-webui/0: hook.output DEBUG: hook storage-relation-changed exited, exit code 0.
2013-07-01 13:40:43,463 unit:oscied-webui/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-webui-0/charm/hooks/storage-relation-changed
2013-07-01 13:40:43,465 unit:oscied-webui/0: hook.scheduler DEBUG: executing hook for oscied-storage/1:modified
2013-07-01 13:40:43,525 unit:oscied-storage/1: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:40:43,568 unit:oscied-storage/1: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-1/charm/hooks/storage-relation-joined
2013-07-01 13:40:43,573 unit:oscied-storage/1: hook.scheduler DEBUG: executing hook for oscied-publisher/1:joined
2013-07-01 13:40:43,574 unit:oscied-storage/1: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-1/charm/hooks/storage-relation-joined
2013-07-01 13:40:43,533 unit:oscied-storage/4: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:43,534 unit:oscied-webui/0: hook.output DEBUG: Cached relation hook contexts on 'storage:4': ['api:7']
2013-07-01 13:40:43,552 unit:oscied-webui/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:40:43,553 unit:oscied-webui/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-webui-0/charm/hooks/storage-relation-changed
2013-07-01 13:40:43,652 unit:oscied-orchestra/0: unit.hook.api INFO: --> Entering OrchestraHooks.py
2013-07-01 13:40:43,692 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:43,685 unit:oscied-publisher/1: unit.hook.api INFO: <-- Exiting PublisherHooks.py
2013-07-01 13:40:43,700 unit:oscied-transform/0: unit.hook.api INFO: <-- Exiting TransformHooks.py
2013-07-01 13:40:43,736 unit:oscied-publisher/1: hook.output DEBUG: hook publisher-relation-joined exited, exit code 0.
2013-07-01 13:40:43,751 unit:oscied-transform/0: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:40:43,841 unit:oscied-storage/3: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:40:43,767 unit:oscied-publisher/1: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-publisher-1/charm/hooks/publisher-relation-joined
2013-07-01 13:40:43,768 unit:oscied-publisher/1: hook.scheduler DEBUG: executing hook for oscied-orchestra/0:modified
2013-07-01 13:40:43,769 unit:oscied-publisher/1: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-publisher-1/charm/hooks/config-changed
2013-07-01 13:40:43,780 unit:oscied-publisher/0: unit.hook.api INFO: --> Entering PublisherHooks.py
2013-07-01 13:40:43,779 unit:oscied-transform/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-transform-0/charm/hooks/storage-relation-joined
2013-07-01 13:40:43,783 unit:oscied-transform/0: hook.scheduler DEBUG: executing hook for oscied-storage/3:modified
2013-07-01 13:40:43,877 unit:oscied-storage/1: hook.output DEBUG: Cached relation hook contexts on 'storage:2': ['peer:0', 'storage:1', 'storage:3', 'storage:4']
2013-07-01 13:40:43,890 unit:oscied-storage/1: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:40:43,854 unit:oscied-transform/0: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['transform:5']
2013-07-01 13:40:43,863 unit:oscied-transform/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:40:43,863 unit:oscied-transform/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-transform-0/charm/hooks/storage-relation-changed
2013-07-01 13:40:43,891 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:43,894 unit:oscied-publisher/1: hook.output DEBUG: Cached relation hook contexts on 'publisher:6': ['storage:2']
2013-07-01 13:40:43,906 unit:oscied-publisher/1: unit.relation.lifecycle DEBUG: Executing hook publisher-relation-changed
2013-07-01 13:40:43,969 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x2122d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/2', 'public_address': 'ec2-50-16-110-129.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-202-41-54.ec2.internal', 'juju_log': <function callable_command at 0x26dc0c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:40:43,994 unit:oscied-orchestra/0: unit.hook.api INFO: [HOOK] Execute OrchestraHooks hook publisher-relation-joined
2013-07-01 13:40:44,195 unit:oscied-storage/3: unit.hook.api INFO: [HOOK] Execute StorageHooks hook storage-relation-joined
2013-07-01 13:40:44,132 unit:oscied-publisher/0: unit.hook.api INFO: [HOOK] Execute PublisherHooks hook storage-relation-joined
2013-07-01 13:40:44,244 unit:oscied-storage/2: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:40:44,249 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1676d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/4', 'public_address': 'ec2-54-242-176-247.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-73-202.ec2.internal', 'juju_log': <function callable_command at 0x1c300c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:40:44,413 unit:oscied-webui/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:44,477 unit:oscied-publisher/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'proxy_ips': [], 'storage_fstype': 'glusterfs', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-234-214-201.compute-1.amazonaws.com', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:40:44,517 unit:oscied-storage/2: unit.hook.api INFO: [HOOK] Execute StorageHooks hook peer-relation-joined
2013-07-01 13:40:44,598 unit:oscied-storage/1: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:44,598 unit:oscied-storage/4: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:40:44,674 unit:oscied-orchestra/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'root_secret': u'5FrvHcm7oyF4WQFW', 'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': True, 'hosts_file': '/etc/hosts', 'rabbit_connection': u'amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': u'mongodb://admin:Iz85QVjdCJugEosz@localhost:27017/orchestra', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}
2013-07-01 13:40:44,768 unit:oscied-publisher/1: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:44,765 unit:oscied-webui/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:44,804 unit:oscied-transform/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:44,827 unit:oscied-publisher/0: unit.hook.api INFO: <-- Exiting PublisherHooks.py
2013-07-01 13:40:44,926 unit:oscied-storage/3: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1fc9d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:40:44,882 unit:oscied-publisher/0: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:40:44,954 unit:oscied-storage/1: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:44,908 unit:oscied-publisher/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-publisher-0/charm/hooks/storage-relation-joined
2013-07-01 13:40:44,913 unit:oscied-publisher/0: hook.scheduler DEBUG: executing hook for oscied-storage/3:modified
2013-07-01 13:40:44,952 unit:oscied-storage/4: unit.hook.api INFO: [HOOK] Execute StorageHooks hook storage-relation-joined
2013-07-01 13:40:45,008 unit:oscied-publisher/0: hook.output DEBUG: Cached relation hook contexts on 'storage:2': ['publisher:6']
2013-07-01 13:40:45,017 unit:oscied-publisher/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:40:45,017 unit:oscied-orchestra/0: unit.hook.api INFO: <-- Exiting OrchestraHooks.py
2013-07-01 13:40:45,070 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] id=2 ids=[0, 4]
2013-07-01 13:40:45,061 unit:oscied-orchestra/0: hook.output DEBUG: hook publisher-relation-joined exited, exit code 0.
2013-07-01 13:40:45,018 unit:oscied-publisher/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-publisher-0/charm/hooks/storage-relation-changed
2013-07-01 13:40:45,108 unit:oscied-webui/0: unit.hook.api INFO: --> Entering WebuiHooks.py
2013-07-01 13:40:45,118 unit:oscied-publisher/1: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:45,143 unit:oscied-orchestra/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-orchestra-0/charm/hooks/publisher-relation-joined
2013-07-01 13:40:45,146 unit:oscied-orchestra/0: hook.scheduler DEBUG: executing hook for oscied-publisher/1:modified
2013-07-01 13:40:45,147 unit:oscied-orchestra/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-orchestra-0/charm/hooks/storage-relation-joined
2013-07-01 13:40:45,158 unit:oscied-transform/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:45,281 unit:oscied-storage/3: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:40:45,292 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:45,329 unit:oscied-storage/3: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:40:45,384 unit:oscied-storage/3: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-3/charm/hooks/storage-relation-joined
2013-07-01 13:40:45,388 unit:oscied-storage/3: hook.scheduler DEBUG: executing hook for oscied-orchestra/0:modified
2013-07-01 13:40:45,389 unit:oscied-storage/3: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-3/charm/hooks/storage-relation-joined
2013-07-01 13:40:45,344 unit:oscied-storage/2: unit.hook.api INFO: [INFO] As slave, stop and delete my own volume medias_volume_2
2013-07-01 13:40:45,415 unit:oscied-orchestra/0: hook.output DEBUG: Cached relation hook contexts on 'publisher:6': ['api:7', 'storage:3', 'transform:5']
2013-07-01 13:40:45,431 unit:oscied-orchestra/0: unit.relation.lifecycle DEBUG: Executing hook publisher-relation-changed
2013-07-01 13:40:45,441 unit:oscied-webui/0: unit.hook.api INFO: [HOOK] Execute WebuiHooks hook storage-relation-changed
2013-07-01 13:40:45,454 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:45,493 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:45,621 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] Execute gluster volume info all 
2013-07-01 13:40:45,631 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x12b8d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/1', 'public_address': 'ec2-107-21-196-203.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-47-249.ec2.internal', 'juju_log': <function callable_command at 0x18720c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:40:45,648 unit:oscied-storage/4: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1676d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:40:45,730 unit:oscied-storage/3: hook.output DEBUG: Cached relation hook contexts on 'storage:3': ['peer:0', 'storage:1', 'storage:2', 'storage:4']
2013-07-01 13:40:45,770 unit:oscied-storage/3: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:40:45,794 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'proxy_ips': [], 'storage_fstype': '', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-227-33-48.compute-1.amazonaws.com', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-publisher/1', 'public_address': 'ec2-54-227-33-48.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-50-5.ec2.internal', 'juju_log': <function callable_command at 0x2a9a5f0>, 'config': {u'max_upload_size': 4294967296, u'storage_mountpoint': u'', 'verbose': True, u'max_input_time': 600, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'publisher_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 2, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u'', u'max_execution_time': 180}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media publisher. Contains apache & mod streaming.\nCan be scaled to multiple instances.\n", 'provides': {'streaming': {'interface': 'http'}}, 'name': 'oscied-publisher', 'requires': {'publisher': {'interface': 'subordinate'}, 'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Publisher"}}
2013-07-01 13:40:45,836 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-transform/0', 'public_address': 'ec2-72-44-43-150.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-25-113.ec2.internal', 'juju_log': <function callable_command at 0x14e12a8>, 'config': {u'storage_mountpoint': u'', 'verbose': True, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'transform_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 1, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u''}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media transform. Contains ffmpeg & x264.\nCan be scaled to multiple instances.\n", 'name': 'oscied-transform', 'requires': {'storage': {'interface': 'mount'}, 'transform': {'interface': 'subordinate'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Encoder"}}
2013-07-01 13:40:45,974 unit:oscied-storage/1: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:40:45,980 unit:oscied-storage/4: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:40:45,994 unit:oscied-publisher/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:46,022 unit:oscied-storage/4: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:40:46,092 unit:oscied-storage/2: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x2122d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:40:46,107 unit:oscied-storage/4: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-4/charm/hooks/storage-relation-joined
2013-07-01 13:40:46,112 unit:oscied-storage/4: hook.scheduler DEBUG: executing hook for oscied-webui/0:modified
2013-07-01 13:40:46,113 unit:oscied-storage/4: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-4/charm/hooks/config-changed
2013-07-01 13:40:46,128 unit:oscied-publisher/1: unit.hook.api INFO: --> Entering PublisherHooks.py
2013-07-01 13:40:46,160 unit:oscied-orchestra/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:46,174 unit:oscied-transform/0: unit.hook.api INFO: --> Entering TransformHooks.py
2013-07-01 13:40:46,197 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Execute gluster volume info medias_volume_0 
2013-07-01 13:40:46,308 unit:oscied-storage/1: unit.hook.api INFO: [HOOK] Execute StorageHooks hook storage-relation-joined
2013-07-01 13:40:46,360 unit:oscied-storage/2: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:40:46,350 unit:oscied-publisher/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:46,437 unit:oscied-storage/3: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:46,405 unit:oscied-storage/2: hook.output DEBUG: hook peer-relation-joined exited, exit code 0.
2013-07-01 13:40:46,432 unit:oscied-storage/4: hook.output DEBUG: Cached relation hook contexts on 'storage:4': ['peer:0', 'storage:1', 'storage:2', 'storage:3']
2013-07-01 13:40:46,441 unit:oscied-storage/4: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:40:46,464 unit:oscied-storage/2: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-2/charm/hooks/peer-relation-joined
2013-07-01 13:40:46,470 unit:oscied-storage/2: hook.scheduler DEBUG: executing hook for oscied-storage/3:joined
2013-07-01 13:40:46,471 unit:oscied-storage/2: hook.executor INFO: Hook does not exist, skipping /var/lib/juju/units/oscied-storage-2/charm/hooks/storage-relation-changed
2013-07-01 13:40:46,471 unit:oscied-storage/2: hook.executor INFO: Hook does not exist, skipping /var/lib/juju/units/oscied-storage-2/charm/hooks/storage-relation-changed
2013-07-01 13:40:46,472 unit:oscied-storage/2: hook.scheduler DEBUG: executing hook for oscied-publisher/1:joined
2013-07-01 13:40:46,473 unit:oscied-storage/2: hook.executor INFO: Hook does not exist, skipping /var/lib/juju/units/oscied-storage-2/charm/hooks/storage-relation-changed
2013-07-01 13:40:46,473 unit:oscied-storage/2: hook.executor INFO: Hook does not exist, skipping /var/lib/juju/units/oscied-storage-2/charm/hooks/storage-relation-changed
2013-07-01 13:40:46,460 unit:oscied-publisher/1: unit.hook.api INFO: [HOOK] Execute PublisherHooks hook config-changed
2013-07-01 13:40:46,517 unit:oscied-transform/0: unit.hook.api INFO: [HOOK] Execute TransformHooks hook storage-relation-changed
2013-07-01 13:40:46,544 unit:oscied-orchestra/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:46,671 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Volume infos stdout: '\nVolume Name: medias_volume_0\nType: Distribute\nStatus: Started\nNumber of Bricks: 1\nTransport-type: tcp\nBricks:\nBrick1: ip-10-154-181-123.ec2.internal:/exp0\nOptions Reconfigured:\nauth.allow: ip-10-154-177-94.ec2.internal,ip-10-164-2-99.ec2.internal,ip-10-164-71-53.ec2.internal,ip-10-164-25-113.ec2.internal,*\n'
2013-07-01 13:40:46,694 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:46,738 unit:oscied-storage/2: hook.output DEBUG: Cached relation hook contexts on 'peer:0': ['storage:1', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:40:46,739 unit:oscied-storage/2: hook.output DEBUG: Cached relation hook contexts on 'storage:2': ['peer:0', 'storage:1', 'storage:3', 'storage:4']
2013-07-01 13:40:46,745 unit:oscied-storage/2: unit.relation.lifecycle DEBUG: Executing hook peer-relation-joined
2013-07-01 13:40:46,745 unit:oscied-storage/2: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-2/charm/hooks/peer-relation-joined
2013-07-01 13:40:46,801 unit:oscied-storage/3: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:46,768 unit:oscied-storage/2: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:40:46,793 unit:oscied-publisher/1: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'proxy_ips': [], 'storage_fstype': '', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-227-33-48.compute-1.amazonaws.com', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:40:46,887 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:46,978 unit:oscied-storage/1: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x12b8d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:40:47,025 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Volume bricks: ['ip-10-154-181-123.ec2.internal:/exp0']
2013-07-01 13:40:47,042 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'proxy_ips': [], 'storage_fstype': 'glusterfs', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-234-214-201.compute-1.amazonaws.com', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-publisher/0', 'public_address': 'ec2-54-234-214-201.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-2-99.ec2.internal', 'juju_log': <function callable_command at 0x20455f0>, 'config': {u'max_upload_size': 4294967296, u'storage_mountpoint': u'', 'verbose': True, u'max_input_time': 600, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'publisher_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 2, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u'', u'max_execution_time': 180}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media publisher. Contains apache & mod streaming.\nCan be scaled to multiple instances.\n", 'provides': {'streaming': {'interface': 'http'}}, 'name': 'oscied-publisher', 'requires': {'publisher': {'interface': 'subordinate'}, 'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Publisher"}}
2013-07-01 13:40:47,146 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:47,108 unit:oscied-storage/4: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:47,100 unit:oscied-webui/0: unit.hook.api INFO: [REMARK] Waiting for complete setup !
2013-07-01 13:40:47,135 unit:oscied-publisher/1: unit.hook.api INFO: <-- Exiting PublisherHooks.py
2013-07-01 13:40:47,185 unit:oscied-publisher/1: hook.output DEBUG: hook config-changed exited, exit code 0.
2013-07-01 13:40:47,221 unit:oscied-publisher/1: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-publisher-1/charm/hooks/config-changed
2013-07-01 13:40:47,221 unit:oscied-publisher/1: unit.lifecycle DEBUG: configured unit
2013-07-01 13:40:47,223 unit:oscied-publisher/1: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-publisher-1/charm/hooks/storage-relation-joined
2013-07-01 13:40:47,232 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'root_secret': u'5FrvHcm7oyF4WQFW', 'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': True, 'hosts_file': '/etc/hosts', 'rabbit_connection': u'amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': u'mongodb://admin:Iz85QVjdCJugEosz@localhost:27017/orchestra', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}, 'name': 'oscied-orchestra/0', 'public_address': 'ec2-54-234-192-63.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-71-53.ec2.internal', 'juju_log': <function callable_command at 0x21127d0>, 'config': {u'repositories_pass': u'41nVGq07GmSgK9Ud', u'storage_options': u'', 'verbose': True, u'storage_nat_address': u'', u'rabbit_password': u'OZy23iO0D4UpYS2k', u'storage_fstype': u'', u'nodes_secret': u'bdZccPuG9fibjwCS', u'transform_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/transform/source', u'repositories_user': u'oscied', u'root_secret': u'5FrvHcm7oyF4WQFW', u'storage_mountpoint': u'', u'mongo_nodes_password': u'M2qlif8rdtKtBYil', u'publisher_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/publisher/source', u'mongo_admin_password': u'Iz85QVjdCJugEosz', u'storage_address': u'', u'webui_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/webui/source'}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED orchestrator.\n", 'provides': {'publisher': {'interface': 'subordinate'}, 'api': {'interface': 'orchestra'}, 'transform': {'interface': 'subordinate'}}, 'name': 'oscied-orchestra', 'requires': {'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Orchestra"}}
2013-07-01 13:40:47,249 unit:oscied-publisher/1: statemachine DEBUG: unitworkflowstate: transition complete configure (state started) {}
2013-07-01 13:40:47,256 unit:oscied-publisher/1: juju.agents.unit INFO: No upgrade flag set.
2013-07-01 13:40:47,313 unit:oscied-storage/1: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:40:47,357 unit:oscied-storage/1: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:40:47,420 unit:oscied-storage/1: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-1/charm/hooks/storage-relation-joined
2013-07-01 13:40:47,423 unit:oscied-storage/1: hook.scheduler DEBUG: executing hook for oscied-orchestra/0:modified
2013-07-01 13:40:47,424 unit:oscied-storage/1: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-1/charm/hooks/storage-relation-joined
2013-07-01 13:40:47,382 unit:oscied-storage/0: unit.hook.api INFO: [REMARK] Waiting for -1 peers to expand replica=1 volume medias_volume_0 !
2013-07-01 13:40:47,383 unit:oscied-publisher/0: unit.hook.api INFO: --> Entering PublisherHooks.py
2013-07-01 13:40:47,437 unit:oscied-storage/2: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:47,500 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1001d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/3', 'public_address': 'ec2-54-242-71-153.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-37-115.ec2.internal', 'juju_log': <function callable_command at 0x15bb0c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:40:47,430 unit:oscied-webui/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_options': '', 'verbose': None, 'database_template_file': 'templates/database.php.template', 'hosts_file': '/etc/hosts', 'sites_enabled_path': '/etc/apache2/sites-enabled', 'storage_path': '/mnt/storage', 'storage_mountpoint': 'medias_volume_0', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'site_database_file': 'webui-db.sql', 'general_config_file': '/var/www/application/config/config.php', 'database_config_file': '/var/www/application/config/database.php', 'proxy_ips': [], 'htaccess_template_file': 'templates/htaccess.template', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'www_medias_path': '/var/www/medias', 'www_uploads_path': '/var/www/uploads', '_pickle_filename': 'local_config.pkl', 'site_template_file': 'templates/000-default', 'storage_mount_sleep_delay': 5, 'storage_nat_address': '', 'encryption_key': '5UCuWXhlrxOscNFuShIfJtLlI2oB3crZ', 'storage_fstype': 'glusterfs', 'www_root_path': '/var/www', 'general_template_file': 'templates/config.php.template', 'htaccess_config_file': '/var/www/.htaccess'}
2013-07-01 13:40:47,463 unit:oscied-storage/4: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:47,588 unit:oscied-orchestra/0: unit.hook.api INFO: --> Entering OrchestraHooks.py
2013-07-01 13:40:47,736 unit:oscied-storage/1: hook.output DEBUG: Cached relation hook contexts on 'storage:3': ['peer:0', 'storage:1', 'storage:2', 'storage:4']
2013-07-01 13:40:47,744 unit:oscied-storage/1: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:40:47,725 unit:oscied-storage/2: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:47,718 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Execute gluster volume info medias_volume_0 
2013-07-01 13:40:47,741 unit:oscied-publisher/0: unit.hook.api INFO: [HOOK] Execute PublisherHooks hook storage-relation-changed
2013-07-01 13:40:47,760 unit:oscied-webui/0: unit.hook.api INFO: <-- Exiting WebuiHooks.py
2013-07-01 13:40:47,843 unit:oscied-storage/3: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:40:47,804 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:47,803 unit:oscied-webui/0: hook.output DEBUG: hook storage-relation-changed exited, exit code 0.
2013-07-01 13:40:47,825 unit:oscied-webui/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-webui-0/charm/hooks/storage-relation-changed
2013-07-01 13:40:47,927 unit:oscied-orchestra/0: unit.hook.api INFO: [HOOK] Execute OrchestraHooks hook storage-relation-joined
2013-07-01 13:40:48,002 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:48,188 unit:oscied-storage/3: unit.hook.api INFO: [HOOK] Execute StorageHooks hook storage-relation-joined
2013-07-01 13:40:48,148 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x268eb90>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/4', 'public_address': 'ec2-54-242-176-247.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-73-202.ec2.internal', 'juju_log': <function callable_command at 0x2c5d0c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:40:48,158 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Volume infos stdout: '\nVolume Name: medias_volume_0\nType: Distribute\nStatus: Started\nNumber of Bricks: 1\nTransport-type: tcp\nBricks:\nBrick1: ip-10-154-181-123.ec2.internal:/exp0\nOptions Reconfigured:\nauth.allow: ip-10-154-177-94.ec2.internal,ip-10-164-2-99.ec2.internal,ip-10-164-71-53.ec2.internal,ip-10-164-25-113.ec2.internal,*\n'
2013-07-01 13:40:48,168 unit:oscied-publisher/1: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:48,211 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] Storage address is ip-10-164-37-115.ec2.internal, fstype: , mountpoint: , options: 
2013-07-01 13:40:48,274 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x17b7d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/2', 'public_address': 'ec2-50-16-110-129.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-202-41-54.ec2.internal', 'juju_log': <function callable_command at 0x1d710c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:40:48,287 unit:oscied-orchestra/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'root_secret': u'5FrvHcm7oyF4WQFW', 'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': True, 'hosts_file': '/etc/hosts', 'rabbit_connection': u'amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': u'mongodb://admin:Iz85QVjdCJugEosz@localhost:27017/orchestra', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}
2013-07-01 13:40:48,420 unit:oscied-storage/1: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:48,482 unit:oscied-storage/4: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:40:48,496 unit:oscied-storage/0: unit.hook.api INFO: [INFO] {'status': 'Started', 'name': 'medias_volume_0', 'bricks': ['ip-10-154-181-123.ec2.internal:/exp0'], 'auth_allow': 'ip-10-154-177-94.ec2.internal,ip-10-164-2-99.ec2.internal,ip-10-164-71-53.ec2.internal,ip-10-164-25-113.ec2.internal,*', 'type': 'Distribute', 'transport': 'tcp'}
2013-07-01 13:40:48,519 unit:oscied-publisher/1: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:48,547 unit:oscied-storage/2: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:40:48,545 unit:oscied-transform/0: unit.hook.api INFO: [REMARK] Waiting for complete setup !
2013-07-01 13:40:48,623 unit:oscied-orchestra/0: unit.hook.api INFO: <-- Exiting OrchestraHooks.py
2013-07-01 13:40:48,667 unit:oscied-orchestra/0: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:40:48,730 unit:oscied-orchestra/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-orchestra-0/charm/hooks/storage-relation-joined
2013-07-01 13:40:48,784 unit:oscied-storage/1: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:48,735 unit:oscied-orchestra/0: hook.scheduler DEBUG: executing hook for oscied-storage/3:modified
2013-07-01 13:40:48,735 unit:oscied-orchestra/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-orchestra-0/charm/hooks/publisher-relation-changed
2013-07-01 13:40:48,827 unit:oscied-storage/2: unit.hook.api INFO: [HOOK] Execute StorageHooks hook peer-relation-joined
2013-07-01 13:40:48,893 unit:oscied-storage/3: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1001d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:40:48,828 unit:oscied-storage/4: unit.hook.api INFO: [HOOK] Execute StorageHooks hook config-changed
2013-07-01 13:40:48,837 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Execute gluster volume rebalance medias_volume_0 status
2013-07-01 13:40:48,858 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:48,886 unit:oscied-transform/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:40:49,037 unit:oscied-orchestra/0: hook.output DEBUG: Cached relation hook contexts on 'storage:3': ['api:7', 'publisher:6', 'transform:5']
2013-07-01 13:40:49,057 unit:oscied-orchestra/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:40:49,122 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:49,165 unit:oscied-storage/4: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x268eb90>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:40:49,243 unit:oscied-storage/3: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:40:49,198 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'proxy_ips': [], 'storage_fstype': '', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-227-33-48.compute-1.amazonaws.com', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-publisher/1', 'public_address': 'ec2-54-227-33-48.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-50-5.ec2.internal', 'juju_log': <function callable_command at 0x12215f0>, 'config': {u'max_upload_size': 4294967296, u'storage_mountpoint': u'', 'verbose': True, u'max_input_time': 600, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'publisher_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 2, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u'', u'max_execution_time': 180}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media publisher. Contains apache & mod streaming.\nCan be scaled to multiple instances.\n", 'provides': {'streaming': {'interface': 'http'}}, 'name': 'oscied-publisher', 'requires': {'publisher': {'interface': 'subordinate'}, 'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Publisher"}}
2013-07-01 13:40:49,290 unit:oscied-storage/3: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:40:49,227 unit:oscied-transform/0: unit.hook.api INFO: <-- Exiting TransformHooks.py
2013-07-01 13:40:49,274 unit:oscied-storage/0: unit.hook.api INFO: [INFO] nothing to rebalance on volume medias_volume_0

2013-07-01 13:40:49,278 unit:oscied-transform/0: hook.output DEBUG: hook storage-relation-changed exited, exit code 0.
2013-07-01 13:40:49,366 unit:oscied-storage/3: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-3/charm/hooks/storage-relation-joined
2013-07-01 13:40:49,369 unit:oscied-storage/3: hook.scheduler DEBUG: executing hook for oscied-webui/0:modified
2013-07-01 13:40:49,369 unit:oscied-storage/3: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-3/charm/hooks/config-changed
2013-07-01 13:40:49,316 unit:oscied-transform/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-transform-0/charm/hooks/storage-relation-changed
2013-07-01 13:40:49,317 unit:oscied-transform/0: hook.scheduler DEBUG: executing hook for oscied-storage/1:modified
2013-07-01 13:40:49,385 unit:oscied-transform/0: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['transform:5']
2013-07-01 13:40:49,392 unit:oscied-transform/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:40:49,392 unit:oscied-transform/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-transform-0/charm/hooks/storage-relation-changed
2013-07-01 13:40:49,460 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0xe7ad60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/1', 'public_address': 'ec2-107-21-196-203.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-47-249.ec2.internal', 'juju_log': <function callable_command at 0x14340c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:40:49,447 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] Storage address is ip-10-164-37-115.ec2.internal, fstype: , mountpoint: , options: 
2013-07-01 13:40:49,495 unit:oscied-storage/4: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:40:49,537 unit:oscied-storage/4: hook.output DEBUG: hook config-changed exited, exit code 0.
2013-07-01 13:40:49,532 unit:oscied-publisher/1: unit.hook.api INFO: --> Entering PublisherHooks.py
2013-07-01 13:40:49,622 unit:oscied-storage/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1b42d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': ['ip-10-154-177-94.ec2.internal', 'ip-10-164-2-99.ec2.internal', 'ip-10-164-71-53.ec2.internal', 'ip-10-164-25-113.ec2.internal'], 'verbose': True}
2013-07-01 13:40:49,637 unit:oscied-storage/4: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-4/charm/hooks/config-changed
2013-07-01 13:40:49,637 unit:oscied-storage/4: unit.lifecycle DEBUG: configured unit
2013-07-01 13:40:49,639 unit:oscied-storage/4: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-4/charm/hooks/peer-relation-joined
2013-07-01 13:40:49,721 unit:oscied-storage/3: hook.output DEBUG: Cached relation hook contexts on 'storage:4': ['peer:0', 'storage:1', 'storage:2', 'storage:3']
2013-07-01 13:40:49,663 unit:oscied-storage/4: statemachine DEBUG: unitworkflowstate: transition complete configure (state started) {}
2013-07-01 13:40:49,735 unit:oscied-storage/3: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:40:49,667 unit:oscied-storage/4: juju.agents.unit INFO: No upgrade flag set.
2013-07-01 13:40:49,793 unit:oscied-storage/1: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:40:49,762 unit:oscied-orchestra/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:49,789 unit:oscied-publisher/0: unit.hook.api INFO: [REMARK] Waiting for complete setup !
2013-07-01 13:40:49,866 unit:oscied-publisher/1: unit.hook.api INFO: [HOOK] Execute PublisherHooks hook storage-relation-joined
2013-07-01 13:40:49,956 unit:oscied-storage/0: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:40:50,001 unit:oscied-storage/0: hook.output DEBUG: hook peer-relation-changed exited, exit code 0.
2013-07-01 13:40:50,073 unit:oscied-storage/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-0/charm/hooks/peer-relation-changed
2013-07-01 13:40:50,075 unit:oscied-storage/0: hook.scheduler DEBUG: executing hook for oscied-storage/3:joined
2013-07-01 13:40:50,076 unit:oscied-storage/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-0/charm/hooks/storage-relation-joined
2013-07-01 13:40:50,135 unit:oscied-storage/1: unit.hook.api INFO: [HOOK] Execute StorageHooks hook storage-relation-joined
2013-07-01 13:40:50,119 unit:oscied-orchestra/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:50,131 unit:oscied-publisher/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'proxy_ips': [], 'storage_fstype': 'glusterfs', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-234-214-201.compute-1.amazonaws.com', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:40:50,199 unit:oscied-publisher/1: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'proxy_ips': [], 'storage_fstype': '', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-227-33-48.compute-1.amazonaws.com', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:40:50,340 unit:oscied-transform/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:50,422 unit:oscied-storage/3: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:50,397 unit:oscied-storage/0: hook.output DEBUG: Cached relation hook contexts on 'peer:0': ['storage:1', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:40:50,408 unit:oscied-storage/0: unit.relation.lifecycle DEBUG: Executing hook peer-relation-joined
2013-07-01 13:40:50,467 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:50,487 unit:oscied-publisher/0: unit.hook.api INFO: <-- Exiting PublisherHooks.py
2013-07-01 13:40:50,522 unit:oscied-storage/4: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:50,541 unit:oscied-publisher/1: unit.hook.api INFO: <-- Exiting PublisherHooks.py
2013-07-01 13:40:50,543 unit:oscied-publisher/0: hook.output DEBUG: hook storage-relation-changed exited, exit code 0.
2013-07-01 13:40:50,565 unit:oscied-publisher/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-publisher-0/charm/hooks/storage-relation-changed
2013-07-01 13:40:50,567 unit:oscied-publisher/0: hook.scheduler DEBUG: executing hook for oscied-storage/1:modified
2013-07-01 13:40:50,592 unit:oscied-publisher/1: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:40:50,613 unit:oscied-publisher/1: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-publisher-1/charm/hooks/storage-relation-joined
2013-07-01 13:40:50,618 unit:oscied-publisher/1: hook.scheduler DEBUG: executing hook for oscied-storage/2:joined
2013-07-01 13:40:50,619 unit:oscied-publisher/1: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-publisher-1/charm/hooks/publisher-relation-changed
2013-07-01 13:40:50,659 unit:oscied-publisher/0: hook.output DEBUG: Cached relation hook contexts on 'storage:2': ['publisher:6']
2013-07-01 13:40:50,673 unit:oscied-publisher/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:40:50,673 unit:oscied-publisher/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-publisher-0/charm/hooks/storage-relation-changed
2013-07-01 13:40:50,700 unit:oscied-transform/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:50,742 unit:oscied-publisher/1: hook.output DEBUG: Cached relation hook contexts on 'storage:2': ['publisher:6']
2013-07-01 13:40:50,757 unit:oscied-publisher/1: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:40:50,811 unit:oscied-storage/1: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0xe7ad60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:40:50,845 unit:oscied-storage/3: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:50,811 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'root_secret': u'5FrvHcm7oyF4WQFW', 'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': True, 'hosts_file': '/etc/hosts', 'rabbit_connection': u'amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': u'mongodb://admin:Iz85QVjdCJugEosz@localhost:27017/orchestra', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}, 'name': 'oscied-orchestra/0', 'public_address': 'ec2-54-234-192-63.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-71-53.ec2.internal', 'juju_log': <function callable_command at 0x257e7d0>, 'config': {u'repositories_pass': u'41nVGq07GmSgK9Ud', u'storage_options': u'', 'verbose': True, u'storage_nat_address': u'', u'rabbit_password': u'OZy23iO0D4UpYS2k', u'storage_fstype': u'', u'nodes_secret': u'bdZccPuG9fibjwCS', u'transform_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/transform/source', u'repositories_user': u'oscied', u'root_secret': u'5FrvHcm7oyF4WQFW', u'storage_mountpoint': u'', u'mongo_nodes_password': u'M2qlif8rdtKtBYil', u'publisher_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/publisher/source', u'mongo_admin_password': u'Iz85QVjdCJugEosz', u'storage_address': u'', u'webui_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/webui/source'}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED orchestrator.\n", 'provides': {'publisher': {'interface': 'subordinate'}, 'api': {'interface': 'orchestra'}, 'transform': {'interface': 'subordinate'}}, 'name': 'oscied-orchestra', 'requires': {'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Orchestra"}}
2013-07-01 13:40:50,874 unit:oscied-storage/4: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:51,038 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:51,144 unit:oscied-storage/1: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:40:51,201 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:51,187 unit:oscied-storage/1: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:40:51,116 unit:oscied-storage/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:51,165 unit:oscied-orchestra/0: unit.hook.api INFO: --> Entering OrchestraHooks.py
2013-07-01 13:40:51,216 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:51,260 unit:oscied-storage/1: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-1/charm/hooks/storage-relation-joined
2013-07-01 13:40:51,266 unit:oscied-storage/1: hook.scheduler DEBUG: executing hook for oscied-webui/0:modified
2013-07-01 13:40:51,266 unit:oscied-storage/1: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-1/charm/hooks/config-changed
2013-07-01 13:40:51,380 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-transform/0', 'public_address': 'ec2-72-44-43-150.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-25-113.ec2.internal', 'juju_log': <function callable_command at 0x2cee2a8>, 'config': {u'storage_mountpoint': u'', 'verbose': True, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'transform_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 1, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u''}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media transform. Contains ffmpeg & x264.\nCan be scaled to multiple instances.\n", 'name': 'oscied-transform', 'requires': {'storage': {'interface': 'mount'}, 'transform': {'interface': 'subordinate'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Encoder"}}
2013-07-01 13:40:51,548 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1509b90>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/3', 'public_address': 'ec2-54-242-71-153.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-37-115.ec2.internal', 'juju_log': <function callable_command at 0x1ad80c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:40:51,564 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x2906d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/4', 'public_address': 'ec2-54-242-176-247.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-73-202.ec2.internal', 'juju_log': <function callable_command at 0x2ec00c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:40:51,522 unit:oscied-orchestra/0: unit.hook.api INFO: [HOOK] Execute OrchestraHooks hook publisher-relation-changed
2013-07-01 13:40:51,608 unit:oscied-storage/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:51,616 unit:oscied-publisher/1: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:51,695 unit:oscied-storage/1: hook.output DEBUG: Cached relation hook contexts on 'storage:4': ['peer:0', 'storage:1', 'storage:2', 'storage:3']
2013-07-01 13:40:51,654 unit:oscied-publisher/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:51,710 unit:oscied-storage/1: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:40:51,698 unit:oscied-transform/1: unit.hook.api INFO: [INFO] Restart network time protocol service
2013-07-01 13:40:51,714 unit:oscied-transform/0: unit.hook.api INFO: --> Entering TransformHooks.py
2013-07-01 13:40:51,881 unit:oscied-storage/3: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:40:51,906 unit:oscied-storage/4: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:40:51,959 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:51,972 unit:oscied-publisher/1: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:52,035 unit:oscied-transform/1: unit.hook.api INFO: [DEBUG] Execute service ntp restart
2013-07-01 13:40:52,027 unit:oscied-publisher/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:52,061 unit:oscied-transform/0: unit.hook.api INFO: [HOOK] Execute TransformHooks hook storage-relation-changed
2013-07-01 13:40:52,220 unit:oscied-storage/3: unit.hook.api INFO: [HOOK] Execute StorageHooks hook config-changed
2013-07-01 13:40:52,206 unit:oscied-orchestra/0: unit.hook.api INFO: [INFO] Publisher address is ip-10-164-50-5.ec2.internal
2013-07-01 13:40:52,267 unit:oscied-storage/1: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:52,260 unit:oscied-storage/4: unit.hook.api INFO: [HOOK] Execute StorageHooks hook peer-relation-joined
2013-07-01 13:40:52,310 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:52,322 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x113fd60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': ['ip-10-154-177-94.ec2.internal', 'ip-10-164-2-99.ec2.internal', 'ip-10-164-71-53.ec2.internal', 'ip-10-164-25-113.ec2.internal'], 'verbose': True}, 'name': 'oscied-storage/0', 'public_address': 'ec2-54-227-38-161.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-154-181-123.ec2.internal', 'juju_log': <function callable_command at 0x16f90c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:40:52,386 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:52,560 unit:oscied-storage/3: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1509b90>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:40:52,618 unit:oscied-storage/1: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:52,568 unit:oscied-orchestra/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'root_secret': u'5FrvHcm7oyF4WQFW', 'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': True, 'hosts_file': '/etc/hosts', 'rabbit_connection': u'amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': u'mongodb://admin:Iz85QVjdCJugEosz@localhost:27017/orchestra', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}
2013-07-01 13:40:52,650 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'proxy_ips': [], 'storage_fstype': '', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-227-33-48.compute-1.amazonaws.com', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-publisher/1', 'public_address': 'ec2-54-227-33-48.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-50-5.ec2.internal', 'juju_log': <function callable_command at 0x2e6c5f0>, 'config': {u'max_upload_size': 4294967296, u'storage_mountpoint': u'', 'verbose': True, u'max_input_time': 600, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'publisher_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 2, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u'', u'max_execution_time': 180}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media publisher. Contains apache & mod streaming.\nCan be scaled to multiple instances.\n", 'provides': {'streaming': {'interface': 'http'}}, 'name': 'oscied-publisher', 'requires': {'publisher': {'interface': 'subordinate'}, 'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Publisher"}}
2013-07-01 13:40:52,684 unit:oscied-storage/0: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:40:52,748 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'proxy_ips': [], 'storage_fstype': 'glusterfs', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-234-214-201.compute-1.amazonaws.com', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-publisher/0', 'public_address': 'ec2-54-234-214-201.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-2-99.ec2.internal', 'juju_log': <function callable_command at 0x15cd5f0>, 'config': {u'max_upload_size': 4294967296, u'storage_mountpoint': u'', 'verbose': True, u'max_input_time': 600, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'publisher_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 2, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u'', u'max_execution_time': 180}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media publisher. Contains apache & mod streaming.\nCan be scaled to multiple instances.\n", 'provides': {'streaming': {'interface': 'http'}}, 'name': 'oscied-publisher', 'requires': {'publisher': {'interface': 'subordinate'}, 'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Publisher"}}
2013-07-01 13:40:52,897 unit:oscied-storage/3: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:40:52,942 unit:oscied-storage/3: hook.output DEBUG: hook config-changed exited, exit code 0.
2013-07-01 13:40:52,959 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:52,949 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] id=4 ids=[0, 2]
2013-07-01 13:40:52,949 unit:oscied-orchestra/0: unit.hook.api INFO: <-- Exiting OrchestraHooks.py
2013-07-01 13:40:53,052 unit:oscied-storage/3: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-3/charm/hooks/config-changed
2013-07-01 13:40:53,052 unit:oscied-storage/3: unit.lifecycle DEBUG: configured unit
2013-07-01 13:40:53,054 unit:oscied-storage/3: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-3/charm/hooks/peer-relation-joined
2013-07-01 13:40:52,989 unit:oscied-publisher/1: unit.hook.api INFO: --> Entering PublisherHooks.py
2013-07-01 13:40:52,996 unit:oscied-orchestra/0: hook.output DEBUG: hook publisher-relation-changed exited, exit code 0.
2013-07-01 13:40:53,080 unit:oscied-storage/3: statemachine DEBUG: unitworkflowstate: transition complete configure (state started) {}
2013-07-01 13:40:53,090 unit:oscied-storage/3: juju.agents.unit INFO: No upgrade flag set.
2013-07-01 13:40:53,042 unit:oscied-storage/0: unit.hook.api INFO: [HOOK] Execute StorageHooks hook storage-relation-joined
2013-07-01 13:40:53,079 unit:oscied-orchestra/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-orchestra-0/charm/hooks/publisher-relation-changed
2013-07-01 13:40:53,081 unit:oscied-orchestra/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-orchestra-0/charm/hooks/storage-relation-changed
2013-07-01 13:40:53,090 unit:oscied-publisher/0: unit.hook.api INFO: --> Entering PublisherHooks.py
2013-07-01 13:40:53,297 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0xf05b90>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/1', 'public_address': 'ec2-107-21-196-203.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-47-249.ec2.internal', 'juju_log': <function callable_command at 0x14d40c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:40:53,286 unit:oscied-storage/4: unit.hook.api INFO: [INFO] As slave, stop and delete my own volume medias_volume_4
2013-07-01 13:40:53,325 unit:oscied-publisher/1: unit.hook.api INFO: [HOOK] Execute PublisherHooks hook subordinate-relation-changed
2013-07-01 13:40:53,388 unit:oscied-storage/0: unit.hook.api INFO: [INFO] Send filesystem (volume medias_volume_0) configuration to remote client
2013-07-01 13:40:53,440 unit:oscied-publisher/0: unit.hook.api INFO: [HOOK] Execute PublisherHooks hook storage-relation-changed
2013-07-01 13:40:53,630 unit:oscied-storage/1: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:40:53,625 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] Execute gluster volume info all 
2013-07-01 13:40:53,747 unit:oscied-transform/0: unit.hook.api INFO: [DEBUG] Storage address is ip-10-164-47-249.ec2.internal, fstype: , mountpoint: , options: 
2013-07-01 13:40:53,940 unit:oscied-storage/3: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:53,970 unit:oscied-storage/1: unit.hook.api INFO: [HOOK] Execute StorageHooks hook config-changed
2013-07-01 13:40:54,007 unit:oscied-orchestra/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:54,074 unit:oscied-storage/4: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x2906d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:40:54,085 unit:oscied-transform/0: unit.hook.api INFO: [REMARK] Waiting for complete setup !
2013-07-01 13:40:54,158 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] id=2 ids=[0, 3, 4]
2013-07-01 13:40:54,320 unit:oscied-storage/3: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:54,300 unit:oscied-storage/1: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0xf05b90>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:40:54,383 unit:oscied-orchestra/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:54,423 unit:oscied-storage/4: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:40:54,419 unit:oscied-transform/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:40:54,455 unit:oscied-transform/1: unit.hook.api INFO: [INFO] Compile and install GPAC/DashCast
2013-07-01 13:40:54,435 unit:oscied-storage/0: unit.hook.api INFO: [INFO] Add ip-10-164-50-5.ec2.internal to allowed clients IPs
2013-07-01 13:40:54,471 unit:oscied-storage/4: hook.output DEBUG: hook peer-relation-joined exited, exit code 0.
2013-07-01 13:40:54,546 unit:oscied-storage/4: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-4/charm/hooks/peer-relation-joined
2013-07-01 13:40:54,551 unit:oscied-storage/4: hook.scheduler DEBUG: executing hook for oscied-storage/3:joined
2013-07-01 13:40:54,552 unit:oscied-storage/4: hook.executor INFO: Hook does not exist, skipping /var/lib/juju/units/oscied-storage-4/charm/hooks/storage-relation-changed
2013-07-01 13:40:54,553 unit:oscied-storage/4: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-4/charm/hooks/storage-relation-joined
2013-07-01 13:40:54,665 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:54,635 unit:oscied-storage/1: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:40:54,663 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] Orchestra address is ip-10-164-71-53.ec2.internal, MongoDB is mongodb://nodes:M2qlif8rdtKtBYil@ip-10-164-71-53.ec2.internal:27017/celery, RabbitMQ is amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery
2013-07-01 13:40:54,678 unit:oscied-storage/1: hook.output DEBUG: hook config-changed exited, exit code 0.
2013-07-01 13:40:54,734 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:54,752 unit:oscied-transform/0: unit.hook.api INFO: <-- Exiting TransformHooks.py
2013-07-01 13:40:54,814 unit:oscied-storage/1: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-1/charm/hooks/config-changed
2013-07-01 13:40:54,815 unit:oscied-storage/1: unit.lifecycle DEBUG: configured unit
2013-07-01 13:40:54,816 unit:oscied-storage/1: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-1/charm/hooks/peer-relation-joined
2013-07-01 13:40:54,786 unit:oscied-storage/0: unit.hook.api INFO: [INFO] Set volume medias_volume_0 allowed clients IP list to ip-10-154-177-94.ec2.internal,ip-10-164-2-99.ec2.internal,ip-10-164-71-53.ec2.internal,ip-10-164-25-113.ec2.internal,ip-10-164-50-5.ec2.internal,*
2013-07-01 13:40:54,802 unit:oscied-transform/0: hook.output DEBUG: hook storage-relation-changed exited, exit code 0.
2013-07-01 13:40:54,850 unit:oscied-storage/1: statemachine DEBUG: unitworkflowstate: transition complete configure (state started) {}
2013-07-01 13:40:54,855 unit:oscied-storage/1: juju.agents.unit INFO: No upgrade flag set.
2013-07-01 13:40:54,823 unit:oscied-transform/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-transform-0/charm/hooks/storage-relation-changed
2013-07-01 13:40:55,022 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0xf0cd60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/3', 'public_address': 'ec2-54-242-71-153.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-37-115.ec2.internal', 'juju_log': <function callable_command at 0x14c60c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:40:54,962 unit:oscied-storage/4: hook.output DEBUG: Cached relation hook contexts on 'peer:0': ['storage:1', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:40:54,981 unit:oscied-storage/4: unit.relation.lifecycle DEBUG: Executing hook peer-relation-joined
2013-07-01 13:40:54,996 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] Execute ['screen', '-ls', 'Publisher']
2013-07-01 13:40:55,085 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'root_secret': u'5FrvHcm7oyF4WQFW', 'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': True, 'hosts_file': '/etc/hosts', 'rabbit_connection': u'amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': u'mongodb://admin:Iz85QVjdCJugEosz@localhost:27017/orchestra', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}, 'name': 'oscied-orchestra/0', 'public_address': 'ec2-54-234-192-63.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-71-53.ec2.internal', 'juju_log': <function callable_command at 0x20e67d0>, 'config': {u'repositories_pass': u'41nVGq07GmSgK9Ud', u'storage_options': u'', 'verbose': True, u'storage_nat_address': u'', u'rabbit_password': u'OZy23iO0D4UpYS2k', u'storage_fstype': u'', u'nodes_secret': u'bdZccPuG9fibjwCS', u'transform_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/transform/source', u'repositories_user': u'oscied', u'root_secret': u'5FrvHcm7oyF4WQFW', u'storage_mountpoint': u'', u'mongo_nodes_password': u'M2qlif8rdtKtBYil', u'publisher_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/publisher/source', u'mongo_admin_password': u'Iz85QVjdCJugEosz', u'storage_address': u'', u'webui_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/webui/source'}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED orchestrator.\n", 'provides': {'publisher': {'interface': 'subordinate'}, 'api': {'interface': 'orchestra'}, 'transform': {'interface': 'subordinate'}}, 'name': 'oscied-orchestra', 'requires': {'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Orchestra"}}
2013-07-01 13:40:55,136 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Execute gluster volume set medias_volume_0 auth.allow "ip-10-154-177-94.ec2.internal,ip-10-164-2-99.ec2.internal,ip-10-164-71-53.ec2.internal,ip-10-164-25-113.ec2.internal,ip-10-164-50-5.ec2.internal,*"
2013-07-01 13:40:55,181 unit:oscied-publisher/0: unit.hook.api INFO: [DEBUG] Storage address is ip-10-164-47-249.ec2.internal, fstype: , mountpoint: , options: 
2013-07-01 13:40:55,369 unit:oscied-storage/3: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:40:55,351 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] Execute service apache2 stop
2013-07-01 13:40:55,431 unit:oscied-orchestra/0: unit.hook.api INFO: --> Entering OrchestraHooks.py
2013-07-01 13:40:55,533 unit:oscied-publisher/0: unit.hook.api INFO: [REMARK] Waiting for complete setup !
2013-07-01 13:40:55,606 unit:oscied-storage/4: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:55,677 unit:oscied-storage/1: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:55,711 unit:oscied-storage/3: unit.hook.api INFO: [HOOK] Execute StorageHooks hook peer-relation-joined
2013-07-01 13:40:55,768 unit:oscied-orchestra/0: unit.hook.api INFO: [HOOK] Execute OrchestraHooks hook storage-relation-changed
2013-07-01 13:40:55,877 unit:oscied-publisher/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'proxy_ips': [], 'storage_fstype': 'glusterfs', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-234-214-201.compute-1.amazonaws.com', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:40:55,970 unit:oscied-storage/4: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:56,077 unit:oscied-storage/1: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:56,232 unit:oscied-publisher/0: unit.hook.api INFO: <-- Exiting PublisherHooks.py
2013-07-01 13:40:56,286 unit:oscied-publisher/0: hook.output DEBUG: hook storage-relation-changed exited, exit code 0.
2013-07-01 13:40:56,313 unit:oscied-publisher/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-publisher-0/charm/hooks/storage-relation-changed
2013-07-01 13:40:56,324 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:56,396 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] id=3 ids=[0, 2]
2013-07-01 13:40:56,420 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:56,450 unit:oscied-transform/2: unit.hook.api INFO: [INFO] Restart network time protocol service
2013-07-01 13:40:56,677 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x2840d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/4', 'public_address': 'ec2-54-242-176-247.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-73-202.ec2.internal', 'juju_log': <function callable_command at 0x2dfa0c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:40:56,752 unit:oscied-storage/3: unit.hook.api INFO: [INFO] As slave, stop and delete my own volume medias_volume_3
2013-07-01 13:40:56,758 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0xa9bd60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/1', 'public_address': 'ec2-107-21-196-203.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-47-249.ec2.internal', 'juju_log': <function callable_command at 0x10550c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:40:56,734 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Execute gluster volume info medias_volume_0 
2013-07-01 13:40:56,806 unit:oscied-transform/2: unit.hook.api INFO: [DEBUG] Execute service ntp restart
2013-07-01 13:40:57,013 unit:oscied-storage/4: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:40:57,098 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] Execute gluster volume info all 
2013-07-01 13:40:57,087 unit:oscied-storage/1: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:40:57,192 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Volume infos stdout: '\nVolume Name: medias_volume_0\nType: Distribute\nStatus: Started\nNumber of Bricks: 1\nTransport-type: tcp\nBricks:\nBrick1: ip-10-154-181-123.ec2.internal:/exp0\nOptions Reconfigured:\nauth.allow: ip-10-154-177-94.ec2.internal,ip-10-164-2-99.ec2.internal,ip-10-164-71-53.ec2.internal,ip-10-164-25-113.ec2.internal,ip-10-164-50-5.ec2.internal,*\n'
2013-07-01 13:40:57,331 unit:oscied-storage/2: unit.hook.api INFO: [INFO] As slave, stop and delete my own volume medias_volume_2
2013-07-01 13:40:57,346 unit:oscied-storage/4: unit.hook.api INFO: [HOOK] Execute StorageHooks hook storage-relation-joined
2013-07-01 13:40:57,417 unit:oscied-storage/1: unit.hook.api INFO: [HOOK] Execute StorageHooks hook peer-relation-joined
2013-07-01 13:40:57,555 unit:oscied-storage/3: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0xf0cd60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:40:57,508 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Storage address is ip-10-164-37-115.ec2.internal, fstype: , mountpoint: , options: 
2013-07-01 13:40:57,648 unit:oscied-transform/1: unit.hook.api INFO: [DEBUG] Execute ./configure
2013-07-01 13:40:57,651 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Execute gluster volume info medias_volume_0 
2013-07-01 13:40:57,809 unit:oscied-publisher/1: unit.hook.api INFO: [INFO] Use subordinate parameters from charm relation
2013-07-01 13:40:57,900 unit:oscied-storage/3: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:40:57,854 unit:oscied-orchestra/0: unit.hook.api INFO: [REMARK] Waiting for complete setup !
2013-07-01 13:40:57,947 unit:oscied-storage/3: hook.output DEBUG: hook peer-relation-joined exited, exit code 0.
2013-07-01 13:40:58,061 unit:oscied-storage/3: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-3/charm/hooks/peer-relation-joined
2013-07-01 13:40:58,065 unit:oscied-storage/3: hook.scheduler DEBUG: executing hook for oscied-storage/4:joined
2013-07-01 13:40:58,066 unit:oscied-storage/3: hook.executor INFO: Hook does not exist, skipping /var/lib/juju/units/oscied-storage-3/charm/hooks/storage-relation-changed
2013-07-01 13:40:58,067 unit:oscied-storage/3: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-3/charm/hooks/storage-relation-joined
2013-07-01 13:40:58,012 unit:oscied-storage/4: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x2840d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:40:58,081 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] id=1 ids=[0, 2]
2013-07-01 13:40:58,142 unit:oscied-publisher/1: unit.hook.api INFO: [INFO] Register the Orchestrator
2013-07-01 13:40:58,193 unit:oscied-orchestra/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'root_secret': u'5FrvHcm7oyF4WQFW', 'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': True, 'hosts_file': '/etc/hosts', 'rabbit_connection': u'amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': u'mongodb://admin:Iz85QVjdCJugEosz@localhost:27017/orchestra', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}
2013-07-01 13:40:58,231 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Volume infos stdout: '\nVolume Name: medias_volume_0\nType: Distribute\nStatus: Started\nNumber of Bricks: 1\nTransport-type: tcp\nBricks:\nBrick1: ip-10-154-181-123.ec2.internal:/exp0\nOptions Reconfigured:\nauth.allow: ip-10-154-177-94.ec2.internal,ip-10-164-2-99.ec2.internal,ip-10-164-71-53.ec2.internal,ip-10-164-25-113.ec2.internal,ip-10-164-50-5.ec2.internal,*\n'
2013-07-01 13:40:58,345 unit:oscied-storage/4: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:40:58,431 unit:oscied-storage/3: hook.output DEBUG: Cached relation hook contexts on 'peer:0': ['storage:1', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:40:58,410 unit:oscied-storage/1: unit.hook.api INFO: [INFO] As slave, stop and delete my own volume medias_volume_1
2013-07-01 13:40:58,388 unit:oscied-storage/4: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:40:58,448 unit:oscied-storage/3: unit.relation.lifecycle DEBUG: Executing hook peer-relation-joined
2013-07-01 13:40:58,458 unit:oscied-storage/4: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-4/charm/hooks/storage-relation-joined
2013-07-01 13:40:58,464 unit:oscied-storage/4: hook.scheduler DEBUG: executing hook for oscied-publisher/0:modified
2013-07-01 13:40:58,465 unit:oscied-storage/4: hook.executor INFO: Hook does not exist, skipping /var/lib/juju/units/oscied-storage-4/charm/hooks/storage-relation-changed
2013-07-01 13:40:58,466 unit:oscied-storage/4: hook.executor INFO: Hook does not exist, skipping /var/lib/juju/units/oscied-storage-4/charm/hooks/storage-relation-changed
2013-07-01 13:40:58,468 unit:oscied-storage/4: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-4/charm/hooks/peer-relation-joined
2013-07-01 13:40:58,476 unit:oscied-publisher/1: unit.hook.api INFO: [REMARK] File celeryconfig.py successfully generated !
2013-07-01 13:40:58,551 unit:oscied-orchestra/0: unit.hook.api INFO: <-- Exiting OrchestraHooks.py
2013-07-01 13:40:58,597 unit:oscied-orchestra/0: hook.output DEBUG: hook storage-relation-changed exited, exit code 0.
2013-07-01 13:40:58,661 unit:oscied-storage/0: unit.hook.api INFO: [INFO] {'status': 'Started', 'name': 'medias_volume_0', 'bricks': ['ip-10-154-181-123.ec2.internal:/exp0'], 'auth_allow': 'ip-10-154-177-94.ec2.internal,ip-10-164-2-99.ec2.internal,ip-10-164-71-53.ec2.internal,ip-10-164-25-113.ec2.internal,ip-10-164-50-5.ec2.internal,*', 'type': 'Distribute', 'transport': 'tcp'}
2013-07-01 13:40:58,666 unit:oscied-orchestra/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-orchestra-0/charm/hooks/storage-relation-changed
2013-07-01 13:40:58,668 unit:oscied-orchestra/0: hook.scheduler DEBUG: executing hook for oscied-storage/1:modified
2013-07-01 13:40:58,742 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] Execute gluster volume info all 
2013-07-01 13:40:58,770 unit:oscied-storage/4: hook.output DEBUG: Cached relation hook contexts on 'storage:2': ['peer:0', 'storage:1', 'storage:3', 'storage:4']
2013-07-01 13:40:58,809 unit:oscied-storage/4: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:40:58,809 unit:oscied-publisher/1: unit.hook.api INFO: [REMARK] Orchestrator successfully registered !
2013-07-01 13:40:58,831 unit:oscied-orchestra/0: hook.output DEBUG: Cached relation hook contexts on 'storage:3': ['api:7', 'publisher:6', 'transform:5']
2013-07-01 13:40:58,843 unit:oscied-orchestra/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:40:58,843 unit:oscied-orchestra/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-orchestra-0/charm/hooks/storage-relation-changed
2013-07-01 13:40:59,020 unit:oscied-storage/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x113fd60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': ['ip-10-154-177-94.ec2.internal', 'ip-10-164-2-99.ec2.internal', 'ip-10-164-71-53.ec2.internal', 'ip-10-164-25-113.ec2.internal', 'ip-10-164-50-5.ec2.internal'], 'verbose': True}
2013-07-01 13:40:59,146 unit:oscied-storage/3: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:59,141 unit:oscied-publisher/1: unit.hook.api INFO: [REMARK] Do not start publisher daemon : No shared storage !
2013-07-01 13:40:59,182 unit:oscied-storage/1: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0xa9bd60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:40:59,239 unit:oscied-transform/2: unit.hook.api INFO: [INFO] Compile and install GPAC/DashCast
2013-07-01 13:40:59,368 unit:oscied-storage/0: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:40:59,413 unit:oscied-storage/0: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:40:59,522 unit:oscied-storage/3: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:59,468 unit:oscied-storage/4: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:59,476 unit:oscied-publisher/1: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'proxy_ips': [], 'storage_fstype': '', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-227-33-48.compute-1.amazonaws.com', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:40:59,515 unit:oscied-storage/1: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:40:59,558 unit:oscied-storage/1: hook.output DEBUG: hook peer-relation-joined exited, exit code 0.
2013-07-01 13:40:59,529 unit:oscied-storage/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-0/charm/hooks/storage-relation-joined
2013-07-01 13:40:59,535 unit:oscied-storage/0: hook.scheduler DEBUG: executing hook for oscied-publisher/1:modified
2013-07-01 13:40:59,536 unit:oscied-storage/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-0/charm/hooks/peer-relation-joined
2013-07-01 13:40:59,640 unit:oscied-storage/1: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-1/charm/hooks/peer-relation-joined
2013-07-01 13:40:59,646 unit:oscied-storage/1: hook.scheduler DEBUG: executing hook for oscied-storage/3:joined
2013-07-01 13:40:59,647 unit:oscied-storage/1: hook.executor INFO: Hook does not exist, skipping /var/lib/juju/units/oscied-storage-1/charm/hooks/storage-relation-changed
2013-07-01 13:40:59,648 unit:oscied-storage/1: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-1/charm/hooks/storage-relation-joined
2013-07-01 13:40:59,756 unit:oscied-orchestra/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:40:59,867 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:40:59,810 unit:oscied-publisher/1: unit.hook.api INFO: <-- Exiting PublisherHooks.py
2013-07-01 13:40:59,824 unit:oscied-storage/4: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:40:59,859 unit:oscied-publisher/1: hook.output DEBUG: hook publisher-relation-changed exited, exit code 0.
2013-07-01 13:40:59,884 unit:oscied-publisher/1: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-publisher-1/charm/hooks/publisher-relation-changed
2013-07-01 13:40:59,885 unit:oscied-publisher/1: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-publisher-1/charm/hooks/storage-relation-joined
2013-07-01 13:40:59,931 unit:oscied-storage/1: hook.output DEBUG: Cached relation hook contexts on 'peer:0': ['storage:1', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:40:59,942 unit:oscied-storage/1: unit.relation.lifecycle DEBUG: Executing hook peer-relation-joined
2013-07-01 13:40:59,927 unit:oscied-storage/0: hook.output DEBUG: Cached relation hook contexts on 'storage:2': ['peer:0', 'storage:1', 'storage:3', 'storage:4']
2013-07-01 13:40:59,935 unit:oscied-storage/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:41:00,141 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] Execute gluster volume info all 
2013-07-01 13:41:00,123 unit:oscied-orchestra/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:41:00,219 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x28aed60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/3', 'public_address': 'ec2-54-242-71-153.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-37-115.ec2.internal', 'juju_log': <function callable_command at 0x2e680c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:41:00,161 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:41:00,485 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:41:00,563 unit:oscied-storage/3: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:41:00,507 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x2771d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/4', 'public_address': 'ec2-54-242-176-247.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-73-202.ec2.internal', 'juju_log': <function callable_command at 0x2d2b0c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:41:00,651 unit:oscied-storage/1: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:41:00,656 unit:oscied-storage/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:41:00,816 unit:oscied-publisher/1: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:41:00,896 unit:oscied-storage/3: unit.hook.api INFO: [HOOK] Execute StorageHooks hook storage-relation-joined
2013-07-01 13:41:00,841 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'root_secret': u'5FrvHcm7oyF4WQFW', 'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': True, 'hosts_file': '/etc/hosts', 'rabbit_connection': u'amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': u'mongodb://admin:Iz85QVjdCJugEosz@localhost:27017/orchestra', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}, 'name': 'oscied-orchestra/0', 'public_address': 'ec2-54-234-192-63.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-71-53.ec2.internal', 'juju_log': <function callable_command at 0x29797d0>, 'config': {u'repositories_pass': u'41nVGq07GmSgK9Ud', u'storage_options': u'', 'verbose': True, u'storage_nat_address': u'', u'rabbit_password': u'OZy23iO0D4UpYS2k', u'storage_fstype': u'', u'nodes_secret': u'bdZccPuG9fibjwCS', u'transform_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/transform/source', u'repositories_user': u'oscied', u'root_secret': u'5FrvHcm7oyF4WQFW', u'storage_mountpoint': u'', u'mongo_nodes_password': u'M2qlif8rdtKtBYil', u'publisher_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/publisher/source', u'mongo_admin_password': u'Iz85QVjdCJugEosz', u'storage_address': u'', u'webui_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/webui/source'}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED orchestrator.\n", 'provides': {'publisher': {'interface': 'subordinate'}, 'api': {'interface': 'orchestra'}, 'transform': {'interface': 'subordinate'}}, 'name': 'oscied-orchestra', 'requires': {'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Orchestra"}}
2013-07-01 13:41:00,864 unit:oscied-storage/4: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:41:01,002 unit:oscied-storage/1: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:41:01,020 unit:oscied-storage/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:41:01,188 unit:oscied-publisher/1: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:41:01,186 unit:oscied-orchestra/0: unit.hook.api INFO: --> Entering OrchestraHooks.py
2013-07-01 13:41:01,218 unit:oscied-storage/4: unit.hook.api INFO: [HOOK] Execute StorageHooks hook peer-relation-joined
2013-07-01 13:41:01,343 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:41:01,372 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:41:01,539 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:41:01,616 unit:oscied-storage/3: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x28aed60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:41:01,553 unit:oscied-orchestra/0: unit.hook.api INFO: [HOOK] Execute OrchestraHooks hook storage-relation-changed
2013-07-01 13:41:01,693 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0xd9cd60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/1', 'public_address': 'ec2-107-21-196-203.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-47-249.ec2.internal', 'juju_log': <function callable_command at 0x13560c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:41:01,748 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x26b5d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': ['ip-10-154-177-94.ec2.internal', 'ip-10-164-2-99.ec2.internal', 'ip-10-164-71-53.ec2.internal', 'ip-10-164-25-113.ec2.internal', 'ip-10-164-50-5.ec2.internal'], 'verbose': True}, 'name': 'oscied-storage/0', 'public_address': 'ec2-54-227-38-161.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-154-181-123.ec2.internal', 'juju_log': <function callable_command at 0x2c6f0c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:41:01,889 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'proxy_ips': [], 'storage_fstype': '', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-227-33-48.compute-1.amazonaws.com', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-publisher/1', 'public_address': 'ec2-54-227-33-48.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-50-5.ec2.internal', 'juju_log': <function callable_command at 0x237f5f0>, 'config': {u'max_upload_size': 4294967296, u'storage_mountpoint': u'', 'verbose': True, u'max_input_time': 600, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'publisher_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 2, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u'', u'max_execution_time': 180}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media publisher. Contains apache & mod streaming.\nCan be scaled to multiple instances.\n", 'provides': {'streaming': {'interface': 'http'}}, 'name': 'oscied-publisher', 'requires': {'publisher': {'interface': 'subordinate'}, 'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Publisher"}}
2013-07-01 13:41:01,969 unit:oscied-storage/3: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:41:01,931 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] id=4 ids=[0, 2, 3]
2013-07-01 13:41:02,021 unit:oscied-storage/3: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:41:02,033 unit:oscied-storage/1: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:41:02,143 unit:oscied-storage/3: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-3/charm/hooks/storage-relation-joined
2013-07-01 13:41:02,148 unit:oscied-storage/3: hook.scheduler DEBUG: executing hook for oscied-publisher/0:modified
2013-07-01 13:41:02,149 unit:oscied-storage/3: hook.executor INFO: Hook does not exist, skipping /var/lib/juju/units/oscied-storage-3/charm/hooks/storage-relation-changed
2013-07-01 13:41:02,150 unit:oscied-storage/3: hook.executor INFO: Hook does not exist, skipping /var/lib/juju/units/oscied-storage-3/charm/hooks/storage-relation-changed
2013-07-01 13:41:02,151 unit:oscied-storage/3: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-3/charm/hooks/peer-relation-joined
2013-07-01 13:41:02,083 unit:oscied-storage/0: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:41:02,232 unit:oscied-publisher/1: unit.hook.api INFO: --> Entering PublisherHooks.py
2013-07-01 13:41:02,287 unit:oscied-storage/4: unit.hook.api INFO: [INFO] As slave, stop and delete my own volume medias_volume_4
2013-07-01 13:41:02,365 unit:oscied-storage/1: unit.hook.api INFO: [HOOK] Execute StorageHooks hook storage-relation-joined
2013-07-01 13:41:02,425 unit:oscied-storage/0: unit.hook.api INFO: [HOOK] Execute StorageHooks hook peer-relation-joined
2013-07-01 13:41:02,537 unit:oscied-storage/3: hook.output DEBUG: Cached relation hook contexts on 'storage:2': ['peer:0', 'storage:1', 'storage:3', 'storage:4']
2013-07-01 13:41:02,549 unit:oscied-storage/3: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:41:02,579 unit:oscied-publisher/1: unit.hook.api INFO: [HOOK] Execute PublisherHooks hook storage-relation-joined
2013-07-01 13:41:02,595 unit:oscied-transform/2: unit.hook.api INFO: [DEBUG] Execute ./configure
2013-07-01 13:41:02,641 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] Execute gluster volume info all 
2013-07-01 13:41:02,923 unit:oscied-publisher/1: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'proxy_ips': [], 'storage_fstype': '', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-227-33-48.compute-1.amazonaws.com', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:41:03,040 unit:oscied-storage/1: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0xd9cd60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:41:03,105 unit:oscied-storage/4: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x2771d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:41:03,135 unit:oscied-transform/1: unit.hook.api INFO: [DEBUG] Execute make -j1
2013-07-01 13:41:03,127 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] id=0 ids=[2, 3, 4]
2013-07-01 13:41:03,189 unit:oscied-storage/3: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:41:03,270 unit:oscied-publisher/1: unit.hook.api INFO: <-- Exiting PublisherHooks.py
2013-07-01 13:41:03,325 unit:oscied-publisher/1: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:41:03,385 unit:oscied-storage/1: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:41:03,348 unit:oscied-publisher/1: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-publisher-1/charm/hooks/storage-relation-joined
2013-07-01 13:41:03,353 unit:oscied-publisher/1: hook.scheduler DEBUG: executing hook for oscied-storage/3:joined
2013-07-01 13:41:03,341 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Storage address is ip-10-164-47-249.ec2.internal, fstype: , mountpoint: , options: 
2013-07-01 13:41:03,431 unit:oscied-storage/1: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:41:03,451 unit:oscied-storage/4: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:41:03,452 unit:oscied-publisher/1: hook.output DEBUG: Cached relation hook contexts on 'storage:2': ['publisher:6']
2013-07-01 13:41:03,460 unit:oscied-publisher/1: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:41:03,460 unit:oscied-publisher/1: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-publisher-1/charm/hooks/storage-relation-joined
2013-07-01 13:41:03,460 unit:oscied-storage/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x26b5d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': ['ip-10-154-177-94.ec2.internal', 'ip-10-164-2-99.ec2.internal', 'ip-10-164-71-53.ec2.internal', 'ip-10-164-25-113.ec2.internal', 'ip-10-164-50-5.ec2.internal'], 'verbose': True}
2013-07-01 13:41:03,512 unit:oscied-storage/1: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-1/charm/hooks/storage-relation-joined
2013-07-01 13:41:03,516 unit:oscied-storage/1: hook.scheduler DEBUG: executing hook for oscied-publisher/0:modified
2013-07-01 13:41:03,516 unit:oscied-storage/1: hook.executor INFO: Hook does not exist, skipping /var/lib/juju/units/oscied-storage-1/charm/hooks/storage-relation-changed
2013-07-01 13:41:03,518 unit:oscied-storage/1: hook.executor INFO: Hook does not exist, skipping /var/lib/juju/units/oscied-storage-1/charm/hooks/storage-relation-changed
2013-07-01 13:41:03,519 unit:oscied-storage/1: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-1/charm/hooks/peer-relation-joined
2013-07-01 13:41:03,495 unit:oscied-storage/4: hook.output DEBUG: hook peer-relation-joined exited, exit code 0.
2013-07-01 13:41:03,588 unit:oscied-storage/3: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:41:03,590 unit:oscied-storage/4: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-4/charm/hooks/peer-relation-joined
2013-07-01 13:41:03,596 unit:oscied-storage/4: hook.scheduler DEBUG: executing hook for oscied-storage/1:joined
2013-07-01 13:41:03,596 unit:oscied-storage/4: hook.executor INFO: Hook does not exist, skipping /var/lib/juju/units/oscied-storage-4/charm/hooks/storage-relation-changed
2013-07-01 13:41:03,598 unit:oscied-storage/4: hook.scheduler DEBUG: executing hook for oscied-publisher/1:modified
2013-07-01 13:41:03,706 unit:oscied-orchestra/0: unit.hook.api INFO: [REMARK] Waiting for complete setup !
2013-07-01 13:41:03,804 unit:oscied-storage/0: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:41:03,853 unit:oscied-storage/1: hook.output DEBUG: Cached relation hook contexts on 'storage:2': ['peer:0', 'storage:1', 'storage:3', 'storage:4']
2013-07-01 13:41:03,860 unit:oscied-storage/1: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:41:03,848 unit:oscied-storage/0: hook.output DEBUG: hook peer-relation-joined exited, exit code 0.
2013-07-01 13:41:03,935 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:41:03,921 unit:oscied-storage/4: hook.output DEBUG: Cached relation hook contexts on 'peer:0': ['storage:1', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:41:03,932 unit:oscied-storage/4: hook.output DEBUG: Cached relation hook contexts on 'storage:2': ['peer:0', 'storage:1', 'storage:3', 'storage:4']
2013-07-01 13:41:03,947 unit:oscied-storage/4: unit.relation.lifecycle DEBUG: Executing hook peer-relation-joined
2013-07-01 13:41:03,947 unit:oscied-storage/4: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-4/charm/hooks/peer-relation-joined
2013-07-01 13:41:03,962 unit:oscied-storage/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-0/charm/hooks/peer-relation-joined
2013-07-01 13:41:03,975 unit:oscied-storage/4: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:41:03,968 unit:oscied-storage/0: hook.scheduler DEBUG: executing hook for oscied-storage/1:joined
2013-07-01 13:41:03,969 unit:oscied-storage/0: hook.executor INFO: Hook does not exist, skipping /var/lib/juju/units/oscied-storage-0/charm/hooks/storage-relation-changed
2013-07-01 13:41:04,062 unit:oscied-orchestra/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'root_secret': u'5FrvHcm7oyF4WQFW', 'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': True, 'hosts_file': '/etc/hosts', 'rabbit_connection': u'amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': u'mongodb://admin:Iz85QVjdCJugEosz@localhost:27017/orchestra', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}
2013-07-01 13:41:04,152 unit:oscied-storage/0: hook.output DEBUG: Cached relation hook contexts on 'peer:0': ['storage:1', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:41:04,183 unit:oscied-storage/0: unit.relation.lifecycle DEBUG: Executing hook peer-relation-joined
2013-07-01 13:41:04,184 unit:oscied-storage/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-0/charm/hooks/peer-relation-joined
2013-07-01 13:41:04,295 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1cb6d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/3', 'public_address': 'ec2-54-242-71-153.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-37-115.ec2.internal', 'juju_log': <function callable_command at 0x22700c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:41:04,416 unit:oscied-orchestra/0: unit.hook.api INFO: <-- Exiting OrchestraHooks.py
2013-07-01 13:41:04,436 unit:oscied-publisher/1: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:41:04,471 unit:oscied-orchestra/0: hook.output DEBUG: hook storage-relation-changed exited, exit code 0.
2013-07-01 13:41:04,387 unit:oscied-storage/2: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x17b7d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:41:04,540 unit:oscied-storage/1: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:41:04,534 unit:oscied-orchestra/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-orchestra-0/charm/hooks/storage-relation-changed
2013-07-01 13:41:04,650 unit:oscied-storage/3: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:41:04,804 unit:oscied-publisher/1: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:41:04,847 unit:oscied-storage/4: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:41:04,905 unit:oscied-storage/1: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:41:05,000 unit:oscied-storage/3: unit.hook.api INFO: [HOOK] Execute StorageHooks hook peer-relation-joined
2013-07-01 13:41:05,087 unit:oscied-storage/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:41:05,157 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:41:05,255 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:41:05,242 unit:oscied-storage/4: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:41:05,452 unit:oscied-storage/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:41:05,511 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'proxy_ips': [], 'storage_fstype': '', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-227-33-48.compute-1.amazonaws.com', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-publisher/1', 'public_address': 'ec2-54-227-33-48.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-50-5.ec2.internal', 'juju_log': <function callable_command at 0x26745f0>, 'config': {u'max_upload_size': 4294967296, u'storage_mountpoint': u'', 'verbose': True, u'max_input_time': 600, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'publisher_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 2, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u'', u'max_execution_time': 180}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media publisher. Contains apache & mod streaming.\nCan be scaled to multiple instances.\n", 'provides': {'streaming': {'interface': 'http'}}, 'name': 'oscied-publisher', 'requires': {'publisher': {'interface': 'subordinate'}, 'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Publisher"}}
2013-07-01 13:41:05,604 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1fe0d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/1', 'public_address': 'ec2-107-21-196-203.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-47-249.ec2.internal', 'juju_log': <function callable_command at 0x259a0c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:41:05,586 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:41:05,698 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] id=3 ids=[0, 2, 4]
2013-07-01 13:41:05,796 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:41:05,851 unit:oscied-publisher/1: unit.hook.api INFO: --> Entering PublisherHooks.py
2013-07-01 13:41:05,946 unit:oscied-storage/1: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:41:05,944 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0xc36d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/4', 'public_address': 'ec2-54-242-176-247.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-73-202.ec2.internal', 'juju_log': <function callable_command at 0x11f00c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:41:06,055 unit:oscied-storage/3: unit.hook.api INFO: [INFO] As slave, stop and delete my own volume medias_volume_3
2013-07-01 13:41:06,148 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1f39d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': ['ip-10-154-177-94.ec2.internal', 'ip-10-164-2-99.ec2.internal', 'ip-10-164-71-53.ec2.internal', 'ip-10-164-25-113.ec2.internal', 'ip-10-164-50-5.ec2.internal'], 'verbose': True}, 'name': 'oscied-storage/0', 'public_address': 'ec2-54-227-38-161.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-154-181-123.ec2.internal', 'juju_log': <function callable_command at 0x24f30c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:41:06,206 unit:oscied-publisher/1: unit.hook.api INFO: [HOOK] Execute PublisherHooks hook storage-relation-joined
2013-07-01 13:41:06,284 unit:oscied-storage/1: unit.hook.api INFO: [HOOK] Execute StorageHooks hook peer-relation-joined
2013-07-01 13:41:06,301 unit:oscied-storage/4: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:41:06,432 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] Execute gluster volume info all 
2013-07-01 13:41:06,495 unit:oscied-storage/0: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:41:06,559 unit:oscied-publisher/1: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'proxy_ips': [], 'storage_fstype': '', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-227-33-48.compute-1.amazonaws.com', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:41:06,659 unit:oscied-storage/4: unit.hook.api INFO: [HOOK] Execute StorageHooks hook peer-relation-joined
2013-07-01 13:41:06,885 unit:oscied-storage/3: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1cb6d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:41:06,855 unit:oscied-storage/0: unit.hook.api INFO: [HOOK] Execute StorageHooks hook peer-relation-joined
2013-07-01 13:41:06,911 unit:oscied-publisher/1: unit.hook.api INFO: <-- Exiting PublisherHooks.py
2013-07-01 13:41:06,960 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] id=1 ids=[0, 2, 3]
2013-07-01 13:41:06,966 unit:oscied-publisher/1: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:41:06,994 unit:oscied-publisher/1: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-publisher-1/charm/hooks/storage-relation-joined
2013-07-01 13:41:06,998 unit:oscied-publisher/1: hook.scheduler DEBUG: executing hook for oscied-storage/4:joined
2013-07-01 13:41:07,087 unit:oscied-publisher/1: hook.output DEBUG: Cached relation hook contexts on 'storage:2': ['publisher:6']
2013-07-01 13:41:07,098 unit:oscied-publisher/1: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:41:07,099 unit:oscied-publisher/1: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-publisher-1/charm/hooks/storage-relation-joined
2013-07-01 13:41:07,231 unit:oscied-storage/3: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:41:07,283 unit:oscied-storage/3: hook.output DEBUG: hook peer-relation-joined exited, exit code 0.
2013-07-01 13:41:07,295 unit:oscied-storage/1: unit.hook.api INFO: [INFO] As slave, stop and delete my own volume medias_volume_1
2013-07-01 13:41:07,384 unit:oscied-storage/3: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-3/charm/hooks/peer-relation-joined
2013-07-01 13:41:07,390 unit:oscied-storage/3: hook.scheduler DEBUG: executing hook for oscied-storage/1:joined
2013-07-01 13:41:07,390 unit:oscied-storage/3: hook.executor INFO: Hook does not exist, skipping /var/lib/juju/units/oscied-storage-3/charm/hooks/storage-relation-changed
2013-07-01 13:41:07,392 unit:oscied-storage/3: hook.scheduler DEBUG: executing hook for oscied-publisher/1:modified
2013-07-01 13:41:07,346 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] id=4 ids=[0, 1, 2, 3]
2013-07-01 13:41:07,393 unit:oscied-storage/2: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:41:07,548 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] id=0 ids=[1, 2, 3, 4]
2013-07-01 13:41:07,628 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] Execute gluster volume info all 
2013-07-01 13:41:07,702 unit:oscied-storage/4: unit.hook.api INFO: [INFO] As slave, stop and delete my own volume medias_volume_4
2013-07-01 13:41:07,763 unit:oscied-storage/3: hook.output DEBUG: Cached relation hook contexts on 'peer:0': ['storage:1', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:41:07,769 unit:oscied-storage/3: hook.output DEBUG: Cached relation hook contexts on 'storage:2': ['peer:0', 'storage:1', 'storage:3', 'storage:4']
2013-07-01 13:41:07,775 unit:oscied-storage/3: unit.relation.lifecycle DEBUG: Executing hook peer-relation-joined
2013-07-01 13:41:07,776 unit:oscied-storage/3: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-3/charm/hooks/peer-relation-joined
2013-07-01 13:41:07,802 unit:oscied-storage/3: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:41:07,850 unit:oscied-storage/2: hook.output DEBUG: hook peer-relation-joined exited, exit code 0.
2013-07-01 13:41:07,886 unit:oscied-storage/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1f39d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': ['ip-10-154-177-94.ec2.internal', 'ip-10-164-2-99.ec2.internal', 'ip-10-164-71-53.ec2.internal', 'ip-10-164-25-113.ec2.internal', 'ip-10-164-50-5.ec2.internal'], 'verbose': True}
2013-07-01 13:41:08,057 unit:oscied-storage/1: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1fe0d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:41:08,047 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] Execute gluster volume info all 
2013-07-01 13:41:08,095 unit:oscied-publisher/1: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:41:08,230 unit:oscied-storage/0: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:41:08,276 unit:oscied-storage/0: hook.output DEBUG: hook peer-relation-joined exited, exit code 0.
2013-07-01 13:41:08,302 unit:oscied-storage/2: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-2/charm/hooks/peer-relation-joined
2013-07-01 13:41:08,307 unit:oscied-storage/2: hook.scheduler DEBUG: executing hook for oscied-storage/0:modified
2013-07-01 13:41:08,308 unit:oscied-storage/2: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-2/charm/hooks/storage-relation-joined
2013-07-01 13:41:08,295 unit:oscied-transform/2: unit.hook.api INFO: [DEBUG] Execute make -j1
2013-07-01 13:41:08,391 unit:oscied-storage/1: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:41:08,366 unit:oscied-storage/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-0/charm/hooks/peer-relation-joined
2013-07-01 13:41:08,378 unit:oscied-storage/0: hook.scheduler DEBUG: executing hook for oscied-storage/4:modified
2013-07-01 13:41:08,434 unit:oscied-storage/1: hook.output DEBUG: hook peer-relation-joined exited, exit code 0.
2013-07-01 13:41:08,456 unit:oscied-publisher/1: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:41:08,503 unit:oscied-storage/1: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-1/charm/hooks/peer-relation-joined
2013-07-01 13:41:08,509 unit:oscied-storage/1: hook.scheduler DEBUG: executing hook for oscied-storage/4:joined
2013-07-01 13:41:08,509 unit:oscied-storage/1: hook.executor INFO: Hook does not exist, skipping /var/lib/juju/units/oscied-storage-1/charm/hooks/storage-relation-changed
2013-07-01 13:41:08,511 unit:oscied-storage/1: hook.scheduler DEBUG: executing hook for oscied-publisher/1:modified
2013-07-01 13:41:08,504 unit:oscied-storage/4: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0xc36d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:41:08,670 unit:oscied-storage/3: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:41:08,612 unit:oscied-storage/0: hook.output DEBUG: Cached relation hook contexts on 'peer:0': ['storage:1', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:41:08,619 unit:oscied-storage/0: unit.relation.lifecycle DEBUG: Executing hook peer-relation-changed
2013-07-01 13:41:08,619 unit:oscied-storage/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-0/charm/hooks/peer-relation-changed
2013-07-01 13:41:08,779 unit:oscied-storage/1: hook.output DEBUG: Cached relation hook contexts on 'peer:0': ['storage:1', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:41:08,780 unit:oscied-storage/1: hook.output DEBUG: Cached relation hook contexts on 'storage:2': ['peer:0', 'storage:1', 'storage:3', 'storage:4']
2013-07-01 13:41:08,787 unit:oscied-storage/1: unit.relation.lifecycle DEBUG: Executing hook peer-relation-joined
2013-07-01 13:41:08,788 unit:oscied-storage/1: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-1/charm/hooks/peer-relation-joined
2013-07-01 13:41:08,811 unit:oscied-storage/1: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:41:08,801 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:41:08,850 unit:oscied-storage/4: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:41:08,898 unit:oscied-storage/4: hook.output DEBUG: hook peer-relation-joined exited, exit code 0.
2013-07-01 13:41:09,033 unit:oscied-storage/3: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:41:08,967 unit:oscied-storage/4: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-4/charm/hooks/peer-relation-joined
2013-07-01 13:41:08,982 unit:oscied-storage/4: hook.scheduler DEBUG: executing hook for oscied-storage/0:modified
2013-07-01 13:41:08,983 unit:oscied-storage/4: hook.executor INFO: Hook does not exist, skipping /var/lib/juju/units/oscied-storage-4/charm/hooks/storage-relation-changed
2013-07-01 13:41:09,142 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'proxy_ips': [], 'storage_fstype': '', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-227-33-48.compute-1.amazonaws.com', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-publisher/1', 'public_address': 'ec2-54-227-33-48.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-50-5.ec2.internal', 'juju_log': <function callable_command at 0x24405f0>, 'config': {u'max_upload_size': 4294967296, u'storage_mountpoint': u'', 'verbose': True, u'max_input_time': 600, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'publisher_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 2, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u'', u'max_execution_time': 180}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media publisher. Contains apache & mod streaming.\nCan be scaled to multiple instances.\n", 'provides': {'streaming': {'interface': 'http'}}, 'name': 'oscied-publisher', 'requires': {'publisher': {'interface': 'subordinate'}, 'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Publisher"}}
2013-07-01 13:41:09,222 unit:oscied-storage/4: hook.output DEBUG: Cached relation hook contexts on 'peer:0': ['storage:1', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:41:09,232 unit:oscied-storage/4: unit.relation.lifecycle DEBUG: Executing hook peer-relation-changed
2013-07-01 13:41:09,233 unit:oscied-storage/4: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-4/charm/hooks/peer-relation-changed
2013-07-01 13:41:09,383 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:41:09,476 unit:oscied-publisher/1: unit.hook.api INFO: --> Entering PublisherHooks.py
2013-07-01 13:41:09,516 unit:oscied-storage/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:41:09,659 unit:oscied-storage/1: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:41:09,733 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x20b0d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/3', 'public_address': 'ec2-54-242-71-153.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-37-115.ec2.internal', 'juju_log': <function callable_command at 0x266a0c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:41:09,812 unit:oscied-publisher/1: unit.hook.api INFO: [HOOK] Execute PublisherHooks hook storage-relation-joined
2013-07-01 13:41:09,884 unit:oscied-storage/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:41:10,026 unit:oscied-storage/1: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:41:10,074 unit:oscied-storage/3: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:41:10,156 unit:oscied-storage/4: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:41:10,155 unit:oscied-publisher/1: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'proxy_ips': [], 'storage_fstype': '', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-227-33-48.compute-1.amazonaws.com', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:41:10,221 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:41:10,366 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:41:10,443 unit:oscied-storage/3: unit.hook.api INFO: [HOOK] Execute StorageHooks hook peer-relation-joined
2013-07-01 13:41:10,508 unit:oscied-publisher/1: unit.hook.api INFO: <-- Exiting PublisherHooks.py
2013-07-01 13:41:10,532 unit:oscied-storage/4: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:41:10,560 unit:oscied-publisher/1: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:41:10,569 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1087d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': ['ip-10-154-177-94.ec2.internal', 'ip-10-164-2-99.ec2.internal', 'ip-10-164-71-53.ec2.internal', 'ip-10-164-25-113.ec2.internal', 'ip-10-164-50-5.ec2.internal'], 'verbose': True}, 'name': 'oscied-storage/0', 'public_address': 'ec2-54-227-38-161.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-154-181-123.ec2.internal', 'juju_log': <function callable_command at 0x16410c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:41:10,584 unit:oscied-publisher/1: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-publisher-1/charm/hooks/storage-relation-joined
2013-07-01 13:41:10,589 unit:oscied-publisher/1: hook.scheduler DEBUG: executing hook for oscied-storage/0:modified
2013-07-01 13:41:10,658 unit:oscied-publisher/1: hook.output DEBUG: Cached relation hook contexts on 'storage:2': ['publisher:6']
2013-07-01 13:41:10,674 unit:oscied-publisher/1: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:41:10,675 unit:oscied-publisher/1: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-publisher-1/charm/hooks/storage-relation-changed
2013-07-01 13:41:10,709 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1328d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/1', 'public_address': 'ec2-107-21-196-203.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-47-249.ec2.internal', 'juju_log': <function callable_command at 0x18e20c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:41:10,894 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:41:10,908 unit:oscied-storage/0: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:41:11,046 unit:oscied-storage/1: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:41:11,143 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] id=3 ids=[0, 1, 2, 4]
2013-07-01 13:41:11,253 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1dd6d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/4', 'public_address': 'ec2-54-242-176-247.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-73-202.ec2.internal', 'juju_log': <function callable_command at 0x23900c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:41:11,250 unit:oscied-storage/0: unit.hook.api INFO: [HOOK] Execute StorageHooks hook peer-relation-changed
2013-07-01 13:41:11,378 unit:oscied-storage/1: unit.hook.api INFO: [HOOK] Execute StorageHooks hook peer-relation-joined
2013-07-01 13:41:11,404 unit:oscied-storage/2: hook.output DEBUG: Cached relation hook contexts on 'peer:0': ['storage:1', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:41:11,492 unit:oscied-storage/3: unit.hook.api INFO: [INFO] As slave, stop and delete my own volume medias_volume_3
2013-07-01 13:41:11,519 unit:oscied-storage/2: unit.relation.lifecycle DEBUG: Executing hook peer-relation-changed
2013-07-01 13:41:11,601 unit:oscied-storage/4: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:41:11,668 unit:oscied-publisher/1: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:41:11,836 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] Execute gluster volume info all 
2013-07-01 13:41:11,947 unit:oscied-storage/4: unit.hook.api INFO: [HOOK] Execute StorageHooks hook peer-relation-changed
2013-07-01 13:41:11,936 unit:oscied-storage/0: unit.hook.api INFO: [INFO] Peer address is ip-10-164-73-202.ec2.internal
2013-07-01 13:41:12,045 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] id=1 ids=[0, 2, 3, 4]
2013-07-01 13:41:12,057 unit:oscied-publisher/1: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:41:12,284 unit:oscied-storage/3: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x20b0d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:41:12,291 unit:oscied-storage/0: unit.hook.api INFO: [INFO] Open required ports
2013-07-01 13:41:12,379 unit:oscied-storage/1: unit.hook.api INFO: [INFO] As slave, stop and delete my own volume medias_volume_1
2013-07-01 13:41:12,417 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:41:12,632 unit:oscied-storage/3: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:41:12,682 unit:oscied-storage/3: hook.output DEBUG: hook peer-relation-joined exited, exit code 0.
2013-07-01 13:41:12,663 unit:oscied-storage/4: unit.hook.api INFO: [INFO] Peer address is ip-10-154-181-123.ec2.internal
2013-07-01 13:41:12,712 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] Execute gluster volume info all 
2013-07-01 13:41:12,770 unit:oscied-storage/3: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-3/charm/hooks/peer-relation-joined
2013-07-01 13:41:12,774 unit:oscied-storage/3: hook.scheduler DEBUG: executing hook for oscied-storage/0:modified
2013-07-01 13:41:12,775 unit:oscied-storage/3: hook.executor INFO: Hook does not exist, skipping /var/lib/juju/units/oscied-storage-3/charm/hooks/storage-relation-changed
2013-07-01 13:41:12,784 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'proxy_ips': [], 'storage_fstype': '', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-227-33-48.compute-1.amazonaws.com', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-publisher/1', 'public_address': 'ec2-54-227-33-48.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-50-5.ec2.internal', 'juju_log': <function callable_command at 0x24d75f0>, 'config': {u'max_upload_size': 4294967296, u'storage_mountpoint': u'', 'verbose': True, u'max_input_time': 600, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'publisher_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 2, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u'', u'max_execution_time': 180}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media publisher. Contains apache & mod streaming.\nCan be scaled to multiple instances.\n", 'provides': {'streaming': {'interface': 'http'}}, 'name': 'oscied-publisher', 'requires': {'publisher': {'interface': 'subordinate'}, 'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Publisher"}}
2013-07-01 13:41:13,019 unit:oscied-storage/3: hook.output DEBUG: Cached relation hook contexts on 'peer:0': ['storage:1', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:41:13,052 unit:oscied-storage/3: unit.relation.lifecycle DEBUG: Executing hook peer-relation-changed
2013-07-01 13:41:13,052 unit:oscied-storage/3: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-3/charm/hooks/peer-relation-changed
2013-07-01 13:41:13,013 unit:oscied-storage/4: unit.hook.api INFO: [INFO] Open required ports
2013-07-01 13:41:13,034 unit:oscied-storage/0: unit.hook.api DEBUG: opened 24010/tcp
2013-07-01 13:41:13,141 unit:oscied-storage/1: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1328d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:41:13,136 unit:oscied-publisher/1: unit.hook.api INFO: --> Entering PublisherHooks.py
2013-07-01 13:41:13,474 unit:oscied-storage/1: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:41:13,480 unit:oscied-publisher/1: unit.hook.api INFO: [HOOK] Execute PublisherHooks hook storage-relation-changed
2013-07-01 13:41:13,517 unit:oscied-storage/1: hook.output DEBUG: hook peer-relation-joined exited, exit code 0.
2013-07-01 13:41:13,585 unit:oscied-storage/1: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-1/charm/hooks/peer-relation-joined
2013-07-01 13:41:13,590 unit:oscied-storage/1: hook.scheduler DEBUG: executing hook for oscied-storage/0:modified
2013-07-01 13:41:13,591 unit:oscied-storage/1: hook.executor INFO: Hook does not exist, skipping /var/lib/juju/units/oscied-storage-1/charm/hooks/storage-relation-changed
2013-07-01 13:41:13,751 unit:oscied-storage/4: unit.hook.api DEBUG: opened 24010/tcp
2013-07-01 13:41:13,798 unit:oscied-storage/1: hook.output DEBUG: Cached relation hook contexts on 'peer:0': ['storage:1', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:41:13,766 unit:oscied-storage/0: unit.hook.api DEBUG: opened 24011/tcp
2013-07-01 13:41:13,807 unit:oscied-storage/1: unit.relation.lifecycle DEBUG: Executing hook peer-relation-changed
2013-07-01 13:41:13,807 unit:oscied-storage/1: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-1/charm/hooks/peer-relation-changed
2013-07-01 13:41:13,939 unit:oscied-storage/3: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:41:14,351 unit:oscied-storage/3: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:41:14,485 unit:oscied-storage/4: unit.hook.api DEBUG: opened 24011/tcp
2013-07-01 13:41:14,496 unit:oscied-storage/0: unit.hook.api DEBUG: opened 24012/tcp
2013-07-01 13:41:14,670 unit:oscied-storage/1: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:41:14,698 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:41:15,040 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1bb9d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/3', 'public_address': 'ec2-54-242-71-153.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-37-115.ec2.internal', 'juju_log': <function callable_command at 0x21730c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:41:15,040 unit:oscied-storage/1: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:41:15,197 unit:oscied-storage/0: unit.hook.api DEBUG: opened 24013/tcp
2013-07-01 13:41:15,236 unit:oscied-storage/4: unit.hook.api DEBUG: opened 24012/tcp
2013-07-01 13:41:15,257 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] Storage address is ip-10-154-181-123.ec2.internal, fstype: glusterfs, mountpoint: medias_volume_0, options: 
2013-07-01 13:41:15,383 unit:oscied-storage/3: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:41:15,378 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:41:15,605 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] Execute ['screen', '-ls', 'Publisher']
2013-07-01 13:41:15,727 unit:oscied-storage/3: unit.hook.api INFO: [HOOK] Execute StorageHooks hook peer-relation-changed
2013-07-01 13:41:15,721 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1296d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/1', 'public_address': 'ec2-107-21-196-203.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-47-249.ec2.internal', 'juju_log': <function callable_command at 0x18500c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:41:15,969 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] Execute service apache2 stop
2013-07-01 13:41:15,986 unit:oscied-storage/4: unit.hook.api DEBUG: opened 24013/tcp
2013-07-01 13:41:16,052 unit:oscied-storage/1: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:41:16,196 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] id=0 ids=[1, 2, 3, 4]
2013-07-01 13:41:16,383 unit:oscied-storage/1: unit.hook.api INFO: [HOOK] Execute StorageHooks hook peer-relation-changed
2013-07-01 13:41:16,418 unit:oscied-storage/3: unit.hook.api INFO: [INFO] Peer address is ip-10-154-181-123.ec2.internal
2013-07-01 13:41:16,401 unit:oscied-publisher/1: unit.hook.api INFO: [INFO] Use storage parameters from charm storage relation
2013-07-01 13:41:16,542 unit:oscied-storage/0: unit.hook.api INFO: [INFO] As leader, probe remote peer ip-10-164-73-202.ec2.internal and create or expand volume medias_volume_0
2013-07-01 13:41:16,772 unit:oscied-storage/3: unit.hook.api INFO: [INFO] Open required ports
2013-07-01 13:41:16,747 unit:oscied-publisher/1: unit.hook.api INFO: [INFO] Unregister shared storage
2013-07-01 13:41:16,898 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Execute gluster peer probe ip-10-164-73-202.ec2.internal
2013-07-01 13:41:17,045 unit:oscied-storage/1: unit.hook.api INFO: [INFO] Peer address is ip-10-154-181-123.ec2.internal
2013-07-01 13:41:17,027 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] id=4 ids=[0, 1, 2, 3]
2013-07-01 13:41:17,094 unit:oscied-storage/2: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:41:17,093 unit:oscied-publisher/1: unit.hook.api INFO: [REMARK] Shared storage already unmounted !
2013-07-01 13:41:17,376 unit:oscied-storage/1: unit.hook.api INFO: [INFO] Open required ports
2013-07-01 13:41:17,377 unit:oscied-storage/4: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1dd6d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:41:17,427 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] Mount shared storage [] ip-10-154-181-123.ec2.internal:medias_volume_0 type glusterfs options '' -> /mnt/storage
2013-07-01 13:41:17,510 unit:oscied-storage/3: unit.hook.api DEBUG: opened 24010/tcp
2013-07-01 13:41:17,726 unit:oscied-storage/4: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:41:17,762 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] Execute ['mount', '-t', 'glusterfs', 'ip-10-154-181-123.ec2.internal:/medias_volume_0', '/mnt/storage']
2013-07-01 13:41:17,778 unit:oscied-storage/4: hook.output DEBUG: hook peer-relation-changed exited, exit code 0.
2013-07-01 13:41:17,846 unit:oscied-storage/4: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-4/charm/hooks/peer-relation-changed
2013-07-01 13:41:17,848 unit:oscied-storage/4: hook.scheduler DEBUG: executing hook for oscied-storage/2:modified
2013-07-01 13:41:18,067 unit:oscied-storage/1: unit.hook.api DEBUG: opened 24010/tcp
2013-07-01 13:41:18,062 unit:oscied-storage/4: hook.output DEBUG: Cached relation hook contexts on 'peer:0': ['storage:1', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:41:18,128 unit:oscied-storage/4: unit.relation.lifecycle DEBUG: Executing hook peer-relation-changed
2013-07-01 13:41:18,129 unit:oscied-storage/4: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-4/charm/hooks/peer-relation-changed
2013-07-01 13:41:18,239 unit:oscied-storage/3: unit.hook.api DEBUG: opened 24011/tcp
2013-07-01 13:41:18,763 unit:oscied-storage/1: unit.hook.api DEBUG: opened 24011/tcp
2013-07-01 13:41:18,993 unit:oscied-storage/3: unit.hook.api DEBUG: opened 24012/tcp
2013-07-01 13:41:19,035 unit:oscied-storage/4: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:41:19,393 unit:oscied-storage/4: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:41:19,479 unit:oscied-storage/1: unit.hook.api DEBUG: opened 24012/tcp
2013-07-01 13:41:19,711 unit:oscied-storage/3: unit.hook.api DEBUG: opened 24013/tcp
2013-07-01 13:41:19,760 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:41:20,048 unit:oscied-storage/2: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:41:20,143 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x24d4d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/4', 'public_address': 'ec2-54-242-176-247.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-73-202.ec2.internal', 'juju_log': <function callable_command at 0x2a8e0c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:41:20,232 unit:oscied-storage/1: unit.hook.api DEBUG: opened 24013/tcp
2013-07-01 13:41:20,502 unit:oscied-storage/4: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:41:20,749 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] id=3 ids=[0, 1, 2, 4]
2013-07-01 13:41:20,861 unit:oscied-storage/4: unit.hook.api INFO: [HOOK] Execute StorageHooks hook peer-relation-changed
2013-07-01 13:41:21,094 unit:oscied-storage/3: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1bb9d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:41:21,257 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] id=1 ids=[0, 2, 3, 4]
2013-07-01 13:41:21,436 unit:oscied-storage/3: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:41:21,489 unit:oscied-storage/3: hook.output DEBUG: hook peer-relation-changed exited, exit code 0.
2013-07-01 13:41:21,563 unit:oscied-storage/3: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-3/charm/hooks/peer-relation-changed
2013-07-01 13:41:21,565 unit:oscied-storage/3: hook.scheduler DEBUG: executing hook for oscied-storage/2:modified
2013-07-01 13:41:21,602 unit:oscied-storage/1: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1296d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:41:21,572 unit:oscied-storage/4: unit.hook.api INFO: [INFO] Peer address is ip-10-202-41-54.ec2.internal
2013-07-01 13:41:21,806 unit:oscied-storage/3: hook.output DEBUG: Cached relation hook contexts on 'peer:0': ['storage:1', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:41:21,815 unit:oscied-storage/3: unit.relation.lifecycle DEBUG: Executing hook peer-relation-changed
2013-07-01 13:41:21,816 unit:oscied-storage/3: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-3/charm/hooks/peer-relation-changed
2013-07-01 13:41:21,927 unit:oscied-storage/4: unit.hook.api INFO: [INFO] Open required ports
2013-07-01 13:41:21,949 unit:oscied-storage/1: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:41:21,997 unit:oscied-storage/1: hook.output DEBUG: hook peer-relation-changed exited, exit code 0.
2013-07-01 13:41:22,081 unit:oscied-storage/1: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-1/charm/hooks/peer-relation-changed
2013-07-01 13:41:22,083 unit:oscied-storage/1: hook.scheduler DEBUG: executing hook for oscied-storage/2:modified
2013-07-01 13:41:22,300 unit:oscied-storage/1: hook.output DEBUG: Cached relation hook contexts on 'peer:0': ['storage:1', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:41:22,306 unit:oscied-storage/1: unit.relation.lifecycle DEBUG: Executing hook peer-relation-changed
2013-07-01 13:41:22,307 unit:oscied-storage/1: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-1/charm/hooks/peer-relation-changed
2013-07-01 13:41:22,707 unit:oscied-storage/3: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:41:22,661 unit:oscied-storage/4: unit.hook.api DEBUG: opened 24010/tcp
2013-07-01 13:41:23,073 unit:oscied-storage/3: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:41:23,170 unit:oscied-storage/1: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:41:23,153 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:41:23,416 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:41:23,386 unit:oscied-storage/4: unit.hook.api DEBUG: opened 24011/tcp
2013-07-01 13:41:23,522 unit:oscied-storage/1: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:41:23,759 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0xfbed60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/3', 'public_address': 'ec2-54-242-71-153.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-37-115.ec2.internal', 'juju_log': <function callable_command at 0x15780c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:41:23,858 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:41:24,098 unit:oscied-storage/3: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:41:24,129 unit:oscied-storage/4: unit.hook.api DEBUG: opened 24012/tcp
2013-07-01 13:41:24,201 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1736d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/1', 'public_address': 'ec2-107-21-196-203.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-47-249.ec2.internal', 'juju_log': <function callable_command at 0x1cf00c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:41:24,445 unit:oscied-storage/3: unit.hook.api INFO: [HOOK] Execute StorageHooks hook peer-relation-changed
2013-07-01 13:41:24,532 unit:oscied-storage/1: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:41:24,864 unit:oscied-storage/1: unit.hook.api INFO: [HOOK] Execute StorageHooks hook peer-relation-changed
2013-07-01 13:41:24,867 unit:oscied-storage/4: unit.hook.api DEBUG: opened 24013/tcp
2013-07-01 13:41:25,130 unit:oscied-storage/3: unit.hook.api INFO: [INFO] Peer address is ip-10-202-41-54.ec2.internal
2013-07-01 13:41:25,472 unit:oscied-storage/3: unit.hook.api INFO: [INFO] Open required ports
2013-07-01 13:41:25,539 unit:oscied-storage/1: unit.hook.api INFO: [INFO] Peer address is ip-10-202-41-54.ec2.internal
2013-07-01 13:41:25,884 unit:oscied-storage/1: unit.hook.api INFO: [INFO] Open required ports
2013-07-01 13:41:25,921 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] id=4 ids=[0, 1, 2, 3]
2013-07-01 13:41:26,120 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x227ad60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/2', 'public_address': 'ec2-50-16-110-129.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-202-41-54.ec2.internal', 'juju_log': <function callable_command at 0x28340c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:41:26,205 unit:oscied-storage/3: unit.hook.api DEBUG: opened 24010/tcp
2013-07-01 13:41:26,266 unit:oscied-storage/4: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x24d4d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:41:26,596 unit:oscied-storage/1: unit.hook.api DEBUG: opened 24010/tcp
2013-07-01 13:41:26,615 unit:oscied-storage/4: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:41:26,659 unit:oscied-storage/4: hook.output DEBUG: hook peer-relation-changed exited, exit code 0.
2013-07-01 13:41:26,743 unit:oscied-storage/4: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-4/charm/hooks/peer-relation-changed
2013-07-01 13:41:26,744 unit:oscied-storage/4: hook.scheduler DEBUG: executing hook for oscied-storage/3:modified
2013-07-01 13:41:26,903 unit:oscied-storage/3: unit.hook.api DEBUG: opened 24011/tcp
2013-07-01 13:41:26,963 unit:oscied-storage/4: hook.output DEBUG: Cached relation hook contexts on 'peer:0': ['storage:1', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:41:27,041 unit:oscied-storage/4: unit.relation.lifecycle DEBUG: Executing hook peer-relation-changed
2013-07-01 13:41:27,042 unit:oscied-storage/4: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-4/charm/hooks/peer-relation-changed
2013-07-01 13:41:27,296 unit:oscied-storage/1: unit.hook.api DEBUG: opened 24011/tcp
2013-07-01 13:41:27,631 unit:oscied-storage/3: unit.hook.api DEBUG: opened 24012/tcp
2013-07-01 13:41:27,915 unit:oscied-storage/4: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:41:27,998 unit:oscied-storage/1: unit.hook.api DEBUG: opened 24012/tcp
2013-07-01 13:41:28,334 unit:oscied-storage/3: unit.hook.api DEBUG: opened 24013/tcp
2013-07-01 13:41:28,291 unit:oscied-storage/4: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:41:28,626 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:41:28,696 unit:oscied-storage/1: unit.hook.api DEBUG: opened 24013/tcp
2013-07-01 13:41:28,979 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1a8cd60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/4', 'public_address': 'ec2-54-242-176-247.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-73-202.ec2.internal', 'juju_log': <function callable_command at 0x20460c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:41:28,953 unit:oscied-storage/2: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:41:29,375 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] id=3 ids=[0, 1, 2, 4]
2013-07-01 13:41:29,320 unit:oscied-storage/4: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:41:29,652 unit:oscied-storage/4: unit.hook.api INFO: [HOOK] Execute StorageHooks hook peer-relation-changed
2013-07-01 13:41:29,722 unit:oscied-storage/3: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0xfbed60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:41:29,697 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] id=1 ids=[0, 2, 3, 4]
2013-07-01 13:41:30,065 unit:oscied-storage/3: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:41:30,041 unit:oscied-storage/1: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1736d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:41:30,114 unit:oscied-storage/3: hook.output DEBUG: hook peer-relation-changed exited, exit code 0.
2013-07-01 13:41:30,205 unit:oscied-storage/3: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-3/charm/hooks/peer-relation-changed
2013-07-01 13:41:30,207 unit:oscied-storage/3: hook.scheduler DEBUG: executing hook for oscied-storage/4:modified
2013-07-01 13:41:30,387 unit:oscied-storage/3: hook.output DEBUG: Cached relation hook contexts on 'peer:0': ['storage:1', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:41:30,407 unit:oscied-storage/3: unit.relation.lifecycle DEBUG: Executing hook peer-relation-changed
2013-07-01 13:41:30,407 unit:oscied-storage/3: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-3/charm/hooks/peer-relation-changed
2013-07-01 13:41:30,392 unit:oscied-storage/1: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:41:30,379 unit:oscied-storage/4: unit.hook.api INFO: [INFO] Peer address is ip-10-164-37-115.ec2.internal
2013-07-01 13:41:30,438 unit:oscied-storage/1: hook.output DEBUG: hook peer-relation-changed exited, exit code 0.
2013-07-01 13:41:30,513 unit:oscied-storage/1: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-1/charm/hooks/peer-relation-changed
2013-07-01 13:41:30,514 unit:oscied-storage/1: hook.scheduler DEBUG: executing hook for oscied-storage/3:modified
2013-07-01 13:41:30,705 unit:oscied-storage/1: hook.output DEBUG: Cached relation hook contexts on 'peer:0': ['storage:1', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:41:30,722 unit:oscied-storage/1: unit.relation.lifecycle DEBUG: Executing hook peer-relation-changed
2013-07-01 13:41:30,723 unit:oscied-storage/1: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-1/charm/hooks/peer-relation-changed
2013-07-01 13:41:30,735 unit:oscied-storage/4: unit.hook.api INFO: [INFO] Open required ports
2013-07-01 13:41:31,291 unit:oscied-storage/3: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:41:31,446 unit:oscied-storage/4: unit.hook.api DEBUG: opened 24010/tcp
2013-07-01 13:41:31,601 unit:oscied-storage/1: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:41:31,658 unit:oscied-storage/3: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:41:31,814 unit:oscied-storage/2: unit.hook.api INFO: [HOOK] Execute StorageHooks hook storage-relation-joined
2013-07-01 13:41:31,974 unit:oscied-storage/1: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:41:31,998 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:41:32,144 unit:oscied-storage/4: unit.hook.api DEBUG: opened 24011/tcp
2013-07-01 13:41:32,326 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:41:32,367 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x2291d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/3', 'public_address': 'ec2-54-242-71-153.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-37-115.ec2.internal', 'juju_log': <function callable_command at 0x284b0c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:41:32,706 unit:oscied-storage/3: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:41:32,675 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1e5ed60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/1', 'public_address': 'ec2-107-21-196-203.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-47-249.ec2.internal', 'juju_log': <function callable_command at 0x24180c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:41:32,873 unit:oscied-storage/4: unit.hook.api DEBUG: opened 24012/tcp
2013-07-01 13:41:33,020 unit:oscied-storage/1: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:41:33,049 unit:oscied-storage/3: unit.hook.api INFO: [HOOK] Execute StorageHooks hook peer-relation-changed
2013-07-01 13:41:33,365 unit:oscied-storage/1: unit.hook.api INFO: [HOOK] Execute StorageHooks hook peer-relation-changed
2013-07-01 13:41:33,598 unit:oscied-storage/4: unit.hook.api DEBUG: opened 24013/tcp
2013-07-01 13:41:33,751 unit:oscied-storage/3: unit.hook.api INFO: [INFO] Peer address is ip-10-164-73-202.ec2.internal
2013-07-01 13:41:34,054 unit:oscied-storage/1: unit.hook.api INFO: [INFO] Peer address is ip-10-164-37-115.ec2.internal
2013-07-01 13:41:34,094 unit:oscied-storage/3: unit.hook.api INFO: [INFO] Open required ports
2013-07-01 13:41:34,400 unit:oscied-storage/1: unit.hook.api INFO: [INFO] Open required ports
2013-07-01 13:41:34,619 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] id=4 ids=[0, 1, 2, 3]
2013-07-01 13:41:34,811 unit:oscied-storage/3: unit.hook.api DEBUG: opened 24010/tcp
2013-07-01 13:41:34,955 unit:oscied-storage/4: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1a8cd60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:41:35,116 unit:oscied-storage/1: unit.hook.api DEBUG: opened 24010/tcp
2013-07-01 13:41:35,292 unit:oscied-storage/4: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:41:35,337 unit:oscied-storage/4: hook.output DEBUG: hook peer-relation-changed exited, exit code 0.
2013-07-01 13:41:35,443 unit:oscied-storage/4: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-4/charm/hooks/peer-relation-changed
2013-07-01 13:41:35,454 unit:oscied-storage/4: hook.scheduler DEBUG: executing hook for oscied-storage/1:modified
2013-07-01 13:41:35,515 unit:oscied-storage/3: unit.hook.api DEBUG: opened 24011/tcp
2013-07-01 13:41:35,694 unit:oscied-storage/4: hook.output DEBUG: Cached relation hook contexts on 'peer:0': ['storage:1', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:41:35,700 unit:oscied-storage/4: unit.relation.lifecycle DEBUG: Executing hook peer-relation-changed
2013-07-01 13:41:35,701 unit:oscied-storage/4: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-4/charm/hooks/peer-relation-changed
2013-07-01 13:41:35,841 unit:oscied-storage/1: unit.hook.api DEBUG: opened 24011/tcp
2013-07-01 13:41:36,218 unit:oscied-storage/3: unit.hook.api DEBUG: opened 24012/tcp
2013-07-01 13:41:36,544 unit:oscied-storage/1: unit.hook.api DEBUG: opened 24012/tcp
2013-07-01 13:41:36,574 unit:oscied-storage/4: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:41:36,942 unit:oscied-storage/3: unit.hook.api DEBUG: opened 24013/tcp
2013-07-01 13:41:36,928 unit:oscied-storage/4: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:41:37,244 unit:oscied-storage/1: unit.hook.api DEBUG: opened 24013/tcp
2013-07-01 13:41:37,282 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:41:37,595 unit:oscied-storage/2: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x227ad60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:41:37,632 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x168fd60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/4', 'public_address': 'ec2-54-242-176-247.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-73-202.ec2.internal', 'juju_log': <function callable_command at 0x1c490c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:41:37,960 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] id=3 ids=[0, 1, 2, 4]
2013-07-01 13:41:37,962 unit:oscied-storage/4: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:41:38,252 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] id=1 ids=[0, 2, 3, 4]
2013-07-01 13:41:38,296 unit:oscied-storage/3: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x2291d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:41:38,294 unit:oscied-storage/4: unit.hook.api INFO: [HOOK] Execute StorageHooks hook peer-relation-changed
2013-07-01 13:41:38,587 unit:oscied-storage/1: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1e5ed60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:41:38,632 unit:oscied-storage/3: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:41:38,676 unit:oscied-storage/3: hook.output DEBUG: hook peer-relation-changed exited, exit code 0.
2013-07-01 13:41:38,749 unit:oscied-storage/3: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-3/charm/hooks/peer-relation-changed
2013-07-01 13:41:38,750 unit:oscied-storage/3: hook.scheduler DEBUG: executing hook for oscied-storage/1:modified
2013-07-01 13:41:38,925 unit:oscied-storage/1: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:41:38,966 unit:oscied-storage/3: hook.output DEBUG: Cached relation hook contexts on 'peer:0': ['storage:1', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:41:38,973 unit:oscied-storage/3: unit.relation.lifecycle DEBUG: Executing hook peer-relation-changed
2013-07-01 13:41:38,974 unit:oscied-storage/3: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-3/charm/hooks/peer-relation-changed
2013-07-01 13:41:38,960 unit:oscied-storage/4: unit.hook.api INFO: [INFO] Peer address is ip-10-164-47-249.ec2.internal
2013-07-01 13:41:38,974 unit:oscied-storage/1: hook.output DEBUG: hook peer-relation-changed exited, exit code 0.
2013-07-01 13:41:39,044 unit:oscied-storage/1: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-1/charm/hooks/peer-relation-changed
2013-07-01 13:41:39,046 unit:oscied-storage/1: hook.scheduler DEBUG: executing hook for oscied-storage/4:modified
2013-07-01 13:41:39,291 unit:oscied-storage/4: unit.hook.api INFO: [INFO] Open required ports
2013-07-01 13:41:39,329 unit:oscied-storage/1: hook.output DEBUG: Cached relation hook contexts on 'peer:0': ['storage:1', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:41:39,338 unit:oscied-storage/1: unit.relation.lifecycle DEBUG: Executing hook peer-relation-changed
2013-07-01 13:41:39,338 unit:oscied-storage/1: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-1/charm/hooks/peer-relation-changed
2013-07-01 13:41:39,839 unit:oscied-storage/3: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:41:39,986 unit:oscied-storage/4: unit.hook.api DEBUG: opened 24010/tcp
2013-07-01 13:41:40,211 unit:oscied-storage/3: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:41:40,244 unit:oscied-storage/1: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:41:40,497 unit:oscied-storage/2: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:41:40,569 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:41:40,596 unit:oscied-storage/1: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:41:40,722 unit:oscied-storage/4: unit.hook.api DEBUG: opened 24011/tcp
2013-07-01 13:41:40,946 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1ab6d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/3', 'public_address': 'ec2-54-242-71-153.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-37-115.ec2.internal', 'juju_log': <function callable_command at 0x20700c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:41:40,934 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:41:40,964 unit:oscied-storage/2: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:41:41,291 unit:oscied-storage/3: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:41:41,288 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x16d8d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/1', 'public_address': 'ec2-107-21-196-203.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-47-249.ec2.internal', 'juju_log': <function callable_command at 0x1c920c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:41:41,440 unit:oscied-storage/2: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-2/charm/hooks/storage-relation-joined
2013-07-01 13:41:41,446 unit:oscied-storage/2: hook.scheduler DEBUG: executing hook for oscied-publisher/1:modified
2013-07-01 13:41:41,447 unit:oscied-storage/2: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-2/charm/hooks/peer-relation-changed
2013-07-01 13:41:41,461 unit:oscied-storage/4: unit.hook.api DEBUG: opened 24012/tcp
2013-07-01 13:41:41,638 unit:oscied-storage/3: unit.hook.api INFO: [HOOK] Execute StorageHooks hook peer-relation-changed
2013-07-01 13:41:41,628 unit:oscied-storage/1: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:41:41,962 unit:oscied-storage/1: unit.hook.api INFO: [HOOK] Execute StorageHooks hook peer-relation-changed
2013-07-01 13:41:42,195 unit:oscied-storage/4: unit.hook.api DEBUG: opened 24013/tcp
2013-07-01 13:41:42,332 unit:oscied-storage/3: unit.hook.api INFO: [INFO] Peer address is ip-10-164-47-249.ec2.internal
2013-07-01 13:41:42,629 unit:oscied-storage/1: unit.hook.api INFO: [INFO] Peer address is ip-10-164-73-202.ec2.internal
2013-07-01 13:41:42,674 unit:oscied-storage/3: unit.hook.api INFO: [INFO] Open required ports
2013-07-01 13:41:42,962 unit:oscied-storage/1: unit.hook.api INFO: [INFO] Open required ports
2013-07-01 13:41:43,241 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] id=4 ids=[0, 1, 2, 3]
2013-07-01 13:41:43,389 unit:oscied-storage/3: unit.hook.api DEBUG: opened 24010/tcp
2013-07-01 13:41:43,590 unit:oscied-storage/4: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x168fd60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:41:43,657 unit:oscied-storage/1: unit.hook.api DEBUG: opened 24010/tcp
2013-07-01 13:41:43,939 unit:oscied-storage/4: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:41:43,984 unit:oscied-storage/4: hook.output DEBUG: hook peer-relation-changed exited, exit code 0.
2013-07-01 13:41:44,122 unit:oscied-storage/3: unit.hook.api DEBUG: opened 24011/tcp
2013-07-01 13:41:44,087 unit:oscied-storage/4: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-4/charm/hooks/peer-relation-changed
2013-07-01 13:41:44,357 unit:oscied-storage/1: unit.hook.api DEBUG: opened 24011/tcp
2013-07-01 13:41:44,842 unit:oscied-storage/3: unit.hook.api DEBUG: opened 24012/tcp
2013-07-01 13:41:45,085 unit:oscied-storage/1: unit.hook.api DEBUG: opened 24012/tcp
2013-07-01 13:41:45,569 unit:oscied-storage/3: unit.hook.api DEBUG: opened 24013/tcp
2013-07-01 13:41:45,687 unit:oscied-storage/2: hook.output DEBUG: Cached relation hook contexts on 'storage:2': ['peer:0', 'storage:1', 'storage:3', 'storage:4']
2013-07-01 13:41:45,805 unit:oscied-storage/2: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:41:45,860 unit:oscied-storage/1: unit.hook.api DEBUG: opened 24013/tcp
2013-07-01 13:41:46,603 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] id=3 ids=[0, 1, 2, 4]
2013-07-01 13:41:46,939 unit:oscied-storage/3: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1ab6d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:41:46,920 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] id=1 ids=[0, 2, 3, 4]
2013-07-01 13:41:47,273 unit:oscied-storage/3: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:41:47,276 unit:oscied-storage/1: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x16d8d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:41:47,318 unit:oscied-storage/3: hook.output DEBUG: hook peer-relation-changed exited, exit code 0.
2013-07-01 13:41:47,394 unit:oscied-storage/3: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-3/charm/hooks/peer-relation-changed
2013-07-01 13:41:47,625 unit:oscied-storage/1: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:41:47,674 unit:oscied-storage/1: hook.output DEBUG: hook peer-relation-changed exited, exit code 0.
2013-07-01 13:41:47,776 unit:oscied-storage/1: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-1/charm/hooks/peer-relation-changed
2013-07-01 13:41:50,229 unit:oscied-storage/2: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:41:53,305 unit:oscied-storage/2: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:41:56,093 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:41:58,845 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x2589d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/2', 'public_address': 'ec2-50-16-110-129.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-202-41-54.ec2.internal', 'juju_log': <function callable_command at 0x2b430c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:41:59,130 unit:oscied-storage/2: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:41:59,398 unit:oscied-storage/2: unit.hook.api INFO: [HOOK] Execute StorageHooks hook peer-relation-changed
2013-07-01 13:41:59,946 unit:oscied-storage/2: unit.hook.api INFO: [INFO] Peer address is ip-10-154-181-123.ec2.internal
2013-07-01 13:42:00,241 unit:oscied-storage/2: unit.hook.api INFO: [INFO] Open required ports
2013-07-01 13:42:00,869 unit:oscied-storage/2: unit.hook.api DEBUG: opened 24010/tcp
2013-07-01 13:42:02,975 unit:oscied-storage/2: unit.hook.api DEBUG: opened 24011/tcp
2013-07-01 13:42:03,882 unit:oscied-storage/2: unit.hook.api DEBUG: opened 24012/tcp
2013-07-01 13:42:05,837 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] id=2 ids=[0, 3, 4]
2013-07-01 13:42:08,890 unit:oscied-storage/2: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x2589d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:42:09,266 unit:oscied-storage/2: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:42:09,330 unit:oscied-storage/2: hook.output DEBUG: hook peer-relation-changed exited, exit code 0.
2013-07-01 13:42:09,468 unit:oscied-storage/2: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-2/charm/hooks/peer-relation-changed
2013-07-01 13:42:09,470 unit:oscied-storage/2: hook.scheduler DEBUG: executing hook for oscied-storage/1:joined
2013-07-01 13:42:09,471 unit:oscied-storage/2: hook.executor INFO: Hook does not exist, skipping /var/lib/juju/units/oscied-storage-2/charm/hooks/storage-relation-changed
2013-07-01 13:42:09,687 unit:oscied-storage/2: hook.output DEBUG: Cached relation hook contexts on 'peer:0': ['storage:1', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:42:09,697 unit:oscied-storage/2: unit.relation.lifecycle DEBUG: Executing hook peer-relation-joined
2013-07-01 13:42:09,698 unit:oscied-storage/2: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-2/charm/hooks/peer-relation-joined
2013-07-01 13:42:10,562 unit:oscied-storage/2: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:42:10,887 unit:oscied-storage/2: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:42:11,208 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:42:11,515 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x2199d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/2', 'public_address': 'ec2-50-16-110-129.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-202-41-54.ec2.internal', 'juju_log': <function callable_command at 0x27530c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:42:11,832 unit:oscied-storage/2: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:42:12,153 unit:oscied-storage/2: unit.hook.api INFO: [HOOK] Execute StorageHooks hook peer-relation-joined
2013-07-01 13:42:12,763 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] id=2 ids=[0, 1, 3, 4]
2013-07-01 13:42:13,081 unit:oscied-storage/2: unit.hook.api INFO: [INFO] As slave, stop and delete my own volume medias_volume_2
2013-07-01 13:42:13,386 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] Execute gluster volume info all 
2013-07-01 13:42:13,789 unit:oscied-storage/2: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x2199d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:42:14,098 unit:oscied-storage/2: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:42:14,170 unit:oscied-storage/2: hook.output DEBUG: hook peer-relation-joined exited, exit code 0.
2013-07-01 13:42:14,254 unit:oscied-storage/2: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-2/charm/hooks/peer-relation-joined
2013-07-01 13:42:14,259 unit:oscied-storage/2: hook.scheduler DEBUG: executing hook for oscied-storage/4:modified
2013-07-01 13:42:14,465 unit:oscied-storage/2: hook.output DEBUG: Cached relation hook contexts on 'peer:0': ['storage:1', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:42:14,479 unit:oscied-storage/2: unit.relation.lifecycle DEBUG: Executing hook peer-relation-changed
2013-07-01 13:42:14,480 unit:oscied-storage/2: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-2/charm/hooks/peer-relation-changed
2013-07-01 13:42:15,290 unit:oscied-storage/2: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:42:15,627 unit:oscied-storage/2: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:42:16,606 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Execute gluster volume info medias_volume_0 
2013-07-01 13:42:17,061 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Volume infos stdout: '\nVolume Name: medias_volume_0\nType: Distribute\nStatus: Started\nNumber of Bricks: 1\nTransport-type: tcp\nBricks:\nBrick1: ip-10-154-181-123.ec2.internal:/exp0\nOptions Reconfigured:\nauth.allow: ip-10-154-177-94.ec2.internal,ip-10-164-2-99.ec2.internal,ip-10-164-71-53.ec2.internal,ip-10-164-25-113.ec2.internal,ip-10-164-50-5.ec2.internal,*\n'
2013-07-01 13:42:17,273 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:42:17,398 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Volume bricks: ['ip-10-154-181-123.ec2.internal:/exp0']
2013-07-01 13:42:17,738 unit:oscied-storage/0: unit.hook.api INFO: [REMARK] Waiting for -3 peers to expand replica=1 volume medias_volume_0 !
2013-07-01 13:42:18,080 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Execute gluster volume info medias_volume_0 
2013-07-01 13:42:18,524 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Volume infos stdout: '\nVolume Name: medias_volume_0\nType: Distribute\nStatus: Started\nNumber of Bricks: 1\nTransport-type: tcp\nBricks:\nBrick1: ip-10-154-181-123.ec2.internal:/exp0\nOptions Reconfigured:\nauth.allow: ip-10-154-177-94.ec2.internal,ip-10-164-2-99.ec2.internal,ip-10-164-71-53.ec2.internal,ip-10-164-25-113.ec2.internal,ip-10-164-50-5.ec2.internal,*\n'
2013-07-01 13:42:18,871 unit:oscied-storage/0: unit.hook.api INFO: [INFO] {'status': 'Started', 'name': 'medias_volume_0', 'bricks': ['ip-10-154-181-123.ec2.internal:/exp0'], 'auth_allow': 'ip-10-154-177-94.ec2.internal,ip-10-164-2-99.ec2.internal,ip-10-164-71-53.ec2.internal,ip-10-164-25-113.ec2.internal,ip-10-164-50-5.ec2.internal,*', 'type': 'Distribute', 'transport': 'tcp'}
2013-07-01 13:42:19,221 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Execute gluster volume rebalance medias_volume_0 status
2013-07-01 13:42:19,661 unit:oscied-storage/0: unit.hook.api INFO: [INFO] nothing to rebalance on volume medias_volume_0

2013-07-01 13:42:20,018 unit:oscied-storage/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1087d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': ['ip-10-154-177-94.ec2.internal', 'ip-10-164-2-99.ec2.internal', 'ip-10-164-71-53.ec2.internal', 'ip-10-164-25-113.ec2.internal', 'ip-10-164-50-5.ec2.internal'], 'verbose': True}
2013-07-01 13:42:20,297 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x16f5d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/2', 'public_address': 'ec2-50-16-110-129.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-202-41-54.ec2.internal', 'juju_log': <function callable_command at 0x1caf0c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:42:20,372 unit:oscied-storage/0: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:42:20,417 unit:oscied-storage/0: hook.output DEBUG: hook peer-relation-changed exited, exit code 0.
2013-07-01 13:42:20,536 unit:oscied-storage/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-0/charm/hooks/peer-relation-changed
2013-07-01 13:42:20,537 unit:oscied-storage/0: hook.scheduler DEBUG: executing hook for oscied-storage/3:modified
2013-07-01 13:42:20,777 unit:oscied-storage/0: hook.output DEBUG: Cached relation hook contexts on 'peer:0': ['storage:1', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:42:20,786 unit:oscied-storage/0: unit.relation.lifecycle DEBUG: Executing hook peer-relation-changed
2013-07-01 13:42:20,787 unit:oscied-storage/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-0/charm/hooks/peer-relation-changed
2013-07-01 13:42:21,681 unit:oscied-storage/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:42:22,157 unit:oscied-storage/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:42:22,506 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:42:22,843 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1470d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': ['ip-10-154-177-94.ec2.internal', 'ip-10-164-2-99.ec2.internal', 'ip-10-164-71-53.ec2.internal', 'ip-10-164-25-113.ec2.internal', 'ip-10-164-50-5.ec2.internal'], 'verbose': True}, 'name': 'oscied-storage/0', 'public_address': 'ec2-54-227-38-161.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-154-181-123.ec2.internal', 'juju_log': <function callable_command at 0x1a2a0c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:42:23,176 unit:oscied-storage/0: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:42:23,507 unit:oscied-storage/0: unit.hook.api INFO: [HOOK] Execute StorageHooks hook peer-relation-changed
2013-07-01 13:42:24,194 unit:oscied-storage/0: unit.hook.api INFO: [INFO] Peer address is ip-10-164-37-115.ec2.internal
2013-07-01 13:42:24,476 unit:oscied-storage/2: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:42:24,548 unit:oscied-storage/0: unit.hook.api INFO: [INFO] Open required ports
2013-07-01 13:42:25,294 unit:oscied-storage/0: unit.hook.api DEBUG: opened 24010/tcp
2013-07-01 13:42:25,348 unit:oscied-publisher/1: unit.hook.api INFO: [REMARK] Shared storage successfully registered !
2013-07-01 13:42:25,707 unit:oscied-publisher/1: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'proxy_ips': [], 'storage_fstype': 'glusterfs', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-227-33-48.compute-1.amazonaws.com', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:42:26,011 unit:oscied-storage/0: unit.hook.api DEBUG: opened 24011/tcp
2013-07-01 13:42:26,072 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] Execute service apache2 start
2013-07-01 13:42:26,529 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] Execute ['screen', '-ls', 'Publisher']
2013-07-01 13:42:26,759 unit:oscied-storage/0: unit.hook.api DEBUG: opened 24012/tcp
2013-07-01 13:42:27,419 unit:oscied-storage/2: unit.hook.api INFO: [HOOK] Execute StorageHooks hook peer-relation-changed
2013-07-01 13:42:27,456 unit:oscied-storage/0: unit.hook.api DEBUG: opened 24013/tcp
2013-07-01 13:42:28,467 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] id=0 ids=[1, 2, 3, 4]
2013-07-01 13:42:28,801 unit:oscied-storage/0: unit.hook.api INFO: [INFO] As leader, probe remote peer ip-10-164-37-115.ec2.internal and create or expand volume medias_volume_0
2013-07-01 13:42:29,139 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Execute gluster peer probe ip-10-164-37-115.ec2.internal
2013-07-01 13:42:31,949 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] Execute ['screen', '-ls', 'Publisher']
2013-07-01 13:42:32,344 unit:oscied-publisher/1: unit.hook.api INFO: [REMARK] Publisher successfully started !
2013-07-01 13:42:32,698 unit:oscied-publisher/1: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'proxy_ips': [], 'storage_fstype': 'glusterfs', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-227-33-48.compute-1.amazonaws.com', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:42:33,066 unit:oscied-publisher/1: unit.hook.api INFO: <-- Exiting PublisherHooks.py
2013-07-01 13:42:33,127 unit:oscied-publisher/1: hook.output DEBUG: hook storage-relation-changed exited, exit code 0.
2013-07-01 13:42:33,152 unit:oscied-publisher/1: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-publisher-1/charm/hooks/storage-relation-changed
2013-07-01 13:42:33,154 unit:oscied-publisher/1: hook.scheduler DEBUG: executing hook for oscied-storage/1:modified
2013-07-01 13:42:33,232 unit:oscied-publisher/1: hook.output DEBUG: Cached relation hook contexts on 'storage:2': ['publisher:6']
2013-07-01 13:42:33,244 unit:oscied-publisher/1: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:42:33,244 unit:oscied-publisher/1: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-publisher-1/charm/hooks/storage-relation-changed
2013-07-01 13:42:33,271 unit:oscied-storage/2: unit.hook.api INFO: [INFO] Peer address is ip-10-164-73-202.ec2.internal
2013-07-01 13:42:34,258 unit:oscied-publisher/1: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:42:34,658 unit:oscied-publisher/1: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:42:35,004 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:42:35,365 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'proxy_ips': [], 'storage_fstype': 'glusterfs', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-227-33-48.compute-1.amazonaws.com', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-publisher/1', 'public_address': 'ec2-54-227-33-48.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-50-5.ec2.internal', 'juju_log': <function callable_command at 0x262d5f0>, 'config': {u'max_upload_size': 4294967296, u'storage_mountpoint': u'', 'verbose': True, u'max_input_time': 600, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'publisher_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 2, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u'', u'max_execution_time': 180}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media publisher. Contains apache & mod streaming.\nCan be scaled to multiple instances.\n", 'provides': {'streaming': {'interface': 'http'}}, 'name': 'oscied-publisher', 'requires': {'publisher': {'interface': 'subordinate'}, 'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Publisher"}}
2013-07-01 13:42:35,722 unit:oscied-publisher/1: unit.hook.api INFO: --> Entering PublisherHooks.py
2013-07-01 13:42:36,075 unit:oscied-publisher/1: unit.hook.api INFO: [HOOK] Execute PublisherHooks hook storage-relation-changed
2013-07-01 13:42:36,107 unit:oscied-storage/2: unit.hook.api INFO: [INFO] Open required ports
2013-07-01 13:42:37,858 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] Storage address is ip-10-164-47-249.ec2.internal, fstype: , mountpoint: , options: 
2013-07-01 13:42:38,211 unit:oscied-publisher/1: unit.hook.api INFO: [REMARK] Waiting for complete setup !
2013-07-01 13:42:38,568 unit:oscied-publisher/1: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'proxy_ips': [], 'storage_fstype': 'glusterfs', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-227-33-48.compute-1.amazonaws.com', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:42:38,927 unit:oscied-publisher/1: unit.hook.api INFO: <-- Exiting PublisherHooks.py
2013-07-01 13:42:38,981 unit:oscied-publisher/1: hook.output DEBUG: hook storage-relation-changed exited, exit code 0.
2013-07-01 13:42:39,006 unit:oscied-publisher/1: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-publisher-1/charm/hooks/storage-relation-changed
2013-07-01 13:42:39,008 unit:oscied-publisher/1: hook.scheduler DEBUG: executing hook for oscied-storage/2:modified
2013-07-01 13:42:39,115 unit:oscied-publisher/1: hook.output DEBUG: Cached relation hook contexts on 'storage:2': ['publisher:6']
2013-07-01 13:42:39,125 unit:oscied-publisher/1: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:42:39,125 unit:oscied-publisher/1: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-publisher-1/charm/hooks/storage-relation-changed
2013-07-01 13:42:40,112 unit:oscied-publisher/1: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:42:40,487 unit:oscied-publisher/1: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:42:40,840 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:42:41,208 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'proxy_ips': [], 'storage_fstype': 'glusterfs', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-227-33-48.compute-1.amazonaws.com', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-publisher/1', 'public_address': 'ec2-54-227-33-48.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-50-5.ec2.internal', 'juju_log': <function callable_command at 0x14795f0>, 'config': {u'max_upload_size': 4294967296, u'storage_mountpoint': u'', 'verbose': True, u'max_input_time': 600, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'publisher_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 2, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u'', u'max_execution_time': 180}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media publisher. Contains apache & mod streaming.\nCan be scaled to multiple instances.\n", 'provides': {'streaming': {'interface': 'http'}}, 'name': 'oscied-publisher', 'requires': {'publisher': {'interface': 'subordinate'}, 'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Publisher"}}
2013-07-01 13:42:41,569 unit:oscied-publisher/1: unit.hook.api INFO: --> Entering PublisherHooks.py
2013-07-01 13:42:41,925 unit:oscied-publisher/1: unit.hook.api INFO: [HOOK] Execute PublisherHooks hook storage-relation-changed
2013-07-01 13:42:42,093 unit:oscied-storage/2: unit.hook.api DEBUG: opened 24010/tcp
2013-07-01 13:42:43,709 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] Storage address is ip-10-202-41-54.ec2.internal, fstype: , mountpoint: , options: 
2013-07-01 13:42:44,053 unit:oscied-publisher/1: unit.hook.api INFO: [REMARK] Waiting for complete setup !
2013-07-01 13:42:44,405 unit:oscied-publisher/1: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'proxy_ips': [], 'storage_fstype': 'glusterfs', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-227-33-48.compute-1.amazonaws.com', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:42:44,759 unit:oscied-publisher/1: unit.hook.api INFO: <-- Exiting PublisherHooks.py
2013-07-01 13:42:44,817 unit:oscied-publisher/1: hook.output DEBUG: hook storage-relation-changed exited, exit code 0.
2013-07-01 13:42:44,869 unit:oscied-publisher/1: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-publisher-1/charm/hooks/storage-relation-changed
2013-07-01 13:42:44,871 unit:oscied-publisher/1: hook.scheduler DEBUG: executing hook for oscied-storage/3:modified
2013-07-01 13:42:44,968 unit:oscied-publisher/1: hook.output DEBUG: Cached relation hook contexts on 'storage:2': ['publisher:6']
2013-07-01 13:42:44,979 unit:oscied-publisher/1: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:42:44,980 unit:oscied-publisher/1: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-publisher-1/charm/hooks/storage-relation-changed
2013-07-01 13:42:45,968 unit:oscied-publisher/1: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:42:46,352 unit:oscied-publisher/1: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:42:46,723 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:42:47,082 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'proxy_ips': [], 'storage_fstype': 'glusterfs', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-227-33-48.compute-1.amazonaws.com', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-publisher/1', 'public_address': 'ec2-54-227-33-48.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-50-5.ec2.internal', 'juju_log': <function callable_command at 0x1cd15f0>, 'config': {u'max_upload_size': 4294967296, u'storage_mountpoint': u'', 'verbose': True, u'max_input_time': 600, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'publisher_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 2, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u'', u'max_execution_time': 180}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media publisher. Contains apache & mod streaming.\nCan be scaled to multiple instances.\n", 'provides': {'streaming': {'interface': 'http'}}, 'name': 'oscied-publisher', 'requires': {'publisher': {'interface': 'subordinate'}, 'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Publisher"}}
2013-07-01 13:42:47,445 unit:oscied-publisher/1: unit.hook.api INFO: --> Entering PublisherHooks.py
2013-07-01 13:42:47,802 unit:oscied-publisher/1: unit.hook.api INFO: [HOOK] Execute PublisherHooks hook storage-relation-changed
2013-07-01 13:42:47,951 unit:oscied-storage/2: unit.hook.api DEBUG: opened 24011/tcp
2013-07-01 13:42:49,595 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] Storage address is ip-10-164-37-115.ec2.internal, fstype: , mountpoint: , options: 
2013-07-01 13:42:49,936 unit:oscied-publisher/1: unit.hook.api INFO: [REMARK] Waiting for complete setup !
2013-07-01 13:42:50,280 unit:oscied-publisher/1: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'proxy_ips': [], 'storage_fstype': 'glusterfs', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-227-33-48.compute-1.amazonaws.com', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:42:50,636 unit:oscied-publisher/1: unit.hook.api INFO: <-- Exiting PublisherHooks.py
2013-07-01 13:42:50,687 unit:oscied-publisher/1: hook.output DEBUG: hook storage-relation-changed exited, exit code 0.
2013-07-01 13:42:50,714 unit:oscied-publisher/1: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-publisher-1/charm/hooks/storage-relation-changed
2013-07-01 13:42:50,715 unit:oscied-publisher/1: hook.scheduler DEBUG: executing hook for oscied-storage/4:modified
2013-07-01 13:42:50,893 unit:oscied-publisher/1: hook.output DEBUG: Cached relation hook contexts on 'storage:2': ['publisher:6']
2013-07-01 13:42:50,904 unit:oscied-publisher/1: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:42:50,905 unit:oscied-publisher/1: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-publisher-1/charm/hooks/storage-relation-changed
2013-07-01 13:42:51,875 unit:oscied-publisher/1: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:42:52,242 unit:oscied-publisher/1: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:42:52,600 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:42:52,948 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'proxy_ips': [], 'storage_fstype': 'glusterfs', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-227-33-48.compute-1.amazonaws.com', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-publisher/1', 'public_address': 'ec2-54-227-33-48.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-50-5.ec2.internal', 'juju_log': <function callable_command at 0x2dd65f0>, 'config': {u'max_upload_size': 4294967296, u'storage_mountpoint': u'', 'verbose': True, u'max_input_time': 600, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'publisher_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 2, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u'', u'max_execution_time': 180}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media publisher. Contains apache & mod streaming.\nCan be scaled to multiple instances.\n", 'provides': {'streaming': {'interface': 'http'}}, 'name': 'oscied-publisher', 'requires': {'publisher': {'interface': 'subordinate'}, 'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Publisher"}}
2013-07-01 13:42:53,405 unit:oscied-publisher/1: unit.hook.api INFO: --> Entering PublisherHooks.py
2013-07-01 13:42:53,858 unit:oscied-publisher/1: unit.hook.api INFO: [HOOK] Execute PublisherHooks hook storage-relation-changed
2013-07-01 13:42:53,928 unit:oscied-storage/2: unit.hook.api DEBUG: opened 24012/tcp
2013-07-01 13:42:55,757 unit:oscied-publisher/1: unit.hook.api INFO: [DEBUG] Storage address is ip-10-164-73-202.ec2.internal, fstype: , mountpoint: , options: 
2013-07-01 13:42:56,116 unit:oscied-publisher/1: unit.hook.api INFO: [REMARK] Waiting for complete setup !
2013-07-01 13:42:56,480 unit:oscied-publisher/1: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'publish_path': '/var/www', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'proxy_ips': [], 'storage_fstype': 'glusterfs', 'apache_config_file': '/etc/apache2/apache2.conf', 'storage_options': '', '_pickle_filename': 'local_config.pkl', 'publish_uri': 'http://ec2-54-227-33-48.compute-1.amazonaws.com', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:42:56,832 unit:oscied-publisher/1: unit.hook.api INFO: <-- Exiting PublisherHooks.py
2013-07-01 13:42:56,887 unit:oscied-publisher/1: hook.output DEBUG: hook storage-relation-changed exited, exit code 0.
2013-07-01 13:42:56,940 unit:oscied-publisher/1: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-publisher-1/charm/hooks/storage-relation-changed
2013-07-01 13:43:00,451 unit:oscied-storage/2: unit.hook.api DEBUG: opened 24013/tcp
2013-07-01 13:43:12,192 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] id=2 ids=[0, 1, 3, 4]
2013-07-01 13:43:15,571 unit:oscied-storage/2: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x16f5d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:43:18,497 unit:oscied-storage/2: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:43:19,074 unit:oscied-storage/2: hook.output DEBUG: hook peer-relation-changed exited, exit code 0.
2013-07-01 13:43:19,420 unit:oscied-storage/2: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-2/charm/hooks/peer-relation-changed
2013-07-01 13:43:19,506 unit:oscied-storage/2: hook.scheduler DEBUG: executing hook for oscied-storage/3:modified
2013-07-01 13:43:20,796 unit:oscied-storage/2: hook.output DEBUG: Cached relation hook contexts on 'peer:0': ['storage:1', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:43:20,834 unit:oscied-storage/2: unit.relation.lifecycle DEBUG: Executing hook peer-relation-changed
2013-07-01 13:43:20,835 unit:oscied-storage/2: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-2/charm/hooks/peer-relation-changed
2013-07-01 13:43:24,210 unit:oscied-storage/2: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:43:24,501 unit:oscied-storage/2: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:43:24,775 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:43:25,048 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0xa6dd60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/2', 'public_address': 'ec2-50-16-110-129.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-202-41-54.ec2.internal', 'juju_log': <function callable_command at 0x10270c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:43:25,329 unit:oscied-storage/2: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:43:25,607 unit:oscied-storage/2: unit.hook.api INFO: [HOOK] Execute StorageHooks hook peer-relation-changed
2013-07-01 13:43:26,160 unit:oscied-storage/2: unit.hook.api INFO: [INFO] Peer address is ip-10-164-37-115.ec2.internal
2013-07-01 13:43:26,441 unit:oscied-storage/2: unit.hook.api INFO: [INFO] Open required ports
2013-07-01 13:43:27,015 unit:oscied-storage/2: unit.hook.api DEBUG: opened 24010/tcp
2013-07-01 13:43:27,594 unit:oscied-storage/2: unit.hook.api DEBUG: opened 24011/tcp
2013-07-01 13:43:31,625 unit:oscied-storage/2: unit.hook.api DEBUG: opened 24012/tcp
2013-07-01 13:43:35,213 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Execute gluster volume info medias_volume_0 
2013-07-01 13:43:35,639 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Volume infos stdout: '\nVolume Name: medias_volume_0\nType: Distribute\nStatus: Started\nNumber of Bricks: 1\nTransport-type: tcp\nBricks:\nBrick1: ip-10-154-181-123.ec2.internal:/exp0\nOptions Reconfigured:\nauth.allow: ip-10-154-177-94.ec2.internal,ip-10-164-2-99.ec2.internal,ip-10-164-71-53.ec2.internal,ip-10-164-25-113.ec2.internal,ip-10-164-50-5.ec2.internal,*\n'
2013-07-01 13:43:35,971 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Volume bricks: ['ip-10-154-181-123.ec2.internal:/exp0']
2013-07-01 13:43:36,300 unit:oscied-storage/0: unit.hook.api INFO: [REMARK] Waiting for -3 peers to expand replica=1 volume medias_volume_0 !
2013-07-01 13:43:36,632 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Execute gluster volume info medias_volume_0 
2013-07-01 13:43:37,058 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Volume infos stdout: '\nVolume Name: medias_volume_0\nType: Distribute\nStatus: Started\nNumber of Bricks: 1\nTransport-type: tcp\nBricks:\nBrick1: ip-10-154-181-123.ec2.internal:/exp0\nOptions Reconfigured:\nauth.allow: ip-10-154-177-94.ec2.internal,ip-10-164-2-99.ec2.internal,ip-10-164-71-53.ec2.internal,ip-10-164-25-113.ec2.internal,ip-10-164-50-5.ec2.internal,*\n'
2013-07-01 13:43:37,390 unit:oscied-storage/0: unit.hook.api INFO: [INFO] {'status': 'Started', 'name': 'medias_volume_0', 'bricks': ['ip-10-154-181-123.ec2.internal:/exp0'], 'auth_allow': 'ip-10-154-177-94.ec2.internal,ip-10-164-2-99.ec2.internal,ip-10-164-71-53.ec2.internal,ip-10-164-25-113.ec2.internal,ip-10-164-50-5.ec2.internal,*', 'type': 'Distribute', 'transport': 'tcp'}
2013-07-01 13:43:37,663 unit:oscied-storage/2: unit.hook.api DEBUG: opened 24013/tcp
2013-07-01 13:43:37,721 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Execute gluster volume rebalance medias_volume_0 status
2013-07-01 13:43:38,145 unit:oscied-storage/0: unit.hook.api INFO: [INFO] nothing to rebalance on volume medias_volume_0

2013-07-01 13:43:38,476 unit:oscied-storage/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1470d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': ['ip-10-154-177-94.ec2.internal', 'ip-10-164-2-99.ec2.internal', 'ip-10-164-71-53.ec2.internal', 'ip-10-164-25-113.ec2.internal', 'ip-10-164-50-5.ec2.internal'], 'verbose': True}
2013-07-01 13:43:38,604 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] id=2 ids=[0, 1, 3, 4]
2013-07-01 13:43:38,808 unit:oscied-storage/0: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:43:38,851 unit:oscied-storage/0: hook.output DEBUG: hook peer-relation-changed exited, exit code 0.
2013-07-01 13:43:38,920 unit:oscied-storage/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-0/charm/hooks/peer-relation-changed
2013-07-01 13:43:38,922 unit:oscied-storage/0: hook.scheduler DEBUG: executing hook for oscied-storage/1:modified
2013-07-01 13:43:38,878 unit:oscied-storage/2: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0xa6dd60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:43:39,109 unit:oscied-storage/0: hook.output DEBUG: Cached relation hook contexts on 'peer:0': ['storage:1', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:43:39,118 unit:oscied-storage/0: unit.relation.lifecycle DEBUG: Executing hook peer-relation-changed
2013-07-01 13:43:39,119 unit:oscied-storage/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-0/charm/hooks/peer-relation-changed
2013-07-01 13:43:39,148 unit:oscied-storage/2: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:43:39,193 unit:oscied-storage/2: hook.output DEBUG: hook peer-relation-changed exited, exit code 0.
2013-07-01 13:43:39,261 unit:oscied-storage/2: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-2/charm/hooks/peer-relation-changed
2013-07-01 13:43:39,263 unit:oscied-storage/2: hook.scheduler DEBUG: executing hook for oscied-storage/1:modified
2013-07-01 13:43:39,462 unit:oscied-storage/2: hook.output DEBUG: Cached relation hook contexts on 'peer:0': ['storage:1', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:43:39,476 unit:oscied-storage/2: unit.relation.lifecycle DEBUG: Executing hook peer-relation-changed
2013-07-01 13:43:39,476 unit:oscied-storage/2: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-2/charm/hooks/peer-relation-changed
2013-07-01 13:43:39,966 unit:oscied-storage/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:43:40,171 unit:oscied-storage/2: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:43:40,350 unit:oscied-storage/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:43:40,455 unit:oscied-storage/2: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:43:40,696 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:43:40,805 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:43:41,036 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x22cdd60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': ['ip-10-154-177-94.ec2.internal', 'ip-10-164-2-99.ec2.internal', 'ip-10-164-71-53.ec2.internal', 'ip-10-164-25-113.ec2.internal', 'ip-10-164-50-5.ec2.internal'], 'verbose': True}, 'name': 'oscied-storage/0', 'public_address': 'ec2-54-227-38-161.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-154-181-123.ec2.internal', 'juju_log': <function callable_command at 0x28870c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:43:41,112 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0xfb9d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/2', 'public_address': 'ec2-50-16-110-129.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-202-41-54.ec2.internal', 'juju_log': <function callable_command at 0x15730c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:43:41,368 unit:oscied-storage/0: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:43:41,386 unit:oscied-storage/2: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:43:41,700 unit:oscied-storage/0: unit.hook.api INFO: [HOOK] Execute StorageHooks hook peer-relation-changed
2013-07-01 13:43:41,676 unit:oscied-storage/2: unit.hook.api INFO: [HOOK] Execute StorageHooks hook peer-relation-changed
2013-07-01 13:43:42,215 unit:oscied-storage/2: unit.hook.api INFO: [INFO] Peer address is ip-10-164-47-249.ec2.internal
2013-07-01 13:43:42,363 unit:oscied-storage/0: unit.hook.api INFO: [INFO] Peer address is ip-10-164-47-249.ec2.internal
2013-07-01 13:43:42,494 unit:oscied-storage/2: unit.hook.api INFO: [INFO] Open required ports
2013-07-01 13:43:42,694 unit:oscied-storage/0: unit.hook.api INFO: [INFO] Open required ports
2013-07-01 13:43:43,052 unit:oscied-storage/2: unit.hook.api DEBUG: opened 24010/tcp
2013-07-01 13:43:43,383 unit:oscied-storage/0: unit.hook.api DEBUG: opened 24010/tcp
2013-07-01 13:43:43,620 unit:oscied-storage/2: unit.hook.api DEBUG: opened 24011/tcp
2013-07-01 13:43:44,077 unit:oscied-storage/0: unit.hook.api DEBUG: opened 24011/tcp
2013-07-01 13:43:44,185 unit:oscied-storage/2: unit.hook.api DEBUG: opened 24012/tcp
2013-07-01 13:43:44,769 unit:oscied-storage/0: unit.hook.api DEBUG: opened 24012/tcp
2013-07-01 13:43:44,754 unit:oscied-storage/2: unit.hook.api DEBUG: opened 24013/tcp
2013-07-01 13:43:45,464 unit:oscied-storage/0: unit.hook.api DEBUG: opened 24013/tcp
2013-07-01 13:43:46,456 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] id=0 ids=[1, 2, 3, 4]
2013-07-01 13:43:46,787 unit:oscied-storage/0: unit.hook.api INFO: [INFO] As leader, probe remote peer ip-10-164-47-249.ec2.internal and create or expand volume medias_volume_0
2013-07-01 13:43:47,116 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Execute gluster peer probe ip-10-164-47-249.ec2.internal
2013-07-01 13:43:50,904 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Execute gluster volume info medias_volume_0 
2013-07-01 13:43:51,345 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Volume infos stdout: '\nVolume Name: medias_volume_0\nType: Distribute\nStatus: Started\nNumber of Bricks: 1\nTransport-type: tcp\nBricks:\nBrick1: ip-10-154-181-123.ec2.internal:/exp0\nOptions Reconfigured:\nauth.allow: ip-10-154-177-94.ec2.internal,ip-10-164-2-99.ec2.internal,ip-10-164-71-53.ec2.internal,ip-10-164-25-113.ec2.internal,ip-10-164-50-5.ec2.internal,*\n'
2013-07-01 13:43:51,690 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Volume bricks: ['ip-10-154-181-123.ec2.internal:/exp0']
2013-07-01 13:43:52,029 unit:oscied-storage/0: unit.hook.api INFO: [REMARK] Waiting for -3 peers to expand replica=1 volume medias_volume_0 !
2013-07-01 13:43:52,369 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Execute gluster volume info medias_volume_0 
2013-07-01 13:43:52,803 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Volume infos stdout: '\nVolume Name: medias_volume_0\nType: Distribute\nStatus: Started\nNumber of Bricks: 1\nTransport-type: tcp\nBricks:\nBrick1: ip-10-154-181-123.ec2.internal:/exp0\nOptions Reconfigured:\nauth.allow: ip-10-154-177-94.ec2.internal,ip-10-164-2-99.ec2.internal,ip-10-164-71-53.ec2.internal,ip-10-164-25-113.ec2.internal,ip-10-164-50-5.ec2.internal,*\n'
2013-07-01 13:43:53,137 unit:oscied-storage/0: unit.hook.api INFO: [INFO] {'status': 'Started', 'name': 'medias_volume_0', 'bricks': ['ip-10-154-181-123.ec2.internal:/exp0'], 'auth_allow': 'ip-10-154-177-94.ec2.internal,ip-10-164-2-99.ec2.internal,ip-10-164-71-53.ec2.internal,ip-10-164-25-113.ec2.internal,ip-10-164-50-5.ec2.internal,*', 'type': 'Distribute', 'transport': 'tcp'}
2013-07-01 13:43:53,216 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] id=2 ids=[0, 1, 3, 4]
2013-07-01 13:43:53,474 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Execute gluster volume rebalance medias_volume_0 status
2013-07-01 13:43:53,910 unit:oscied-storage/0: unit.hook.api INFO: [INFO] nothing to rebalance on volume medias_volume_0

2013-07-01 13:43:54,245 unit:oscied-storage/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x22cdd60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': ['ip-10-154-177-94.ec2.internal', 'ip-10-164-2-99.ec2.internal', 'ip-10-164-71-53.ec2.internal', 'ip-10-164-25-113.ec2.internal', 'ip-10-164-50-5.ec2.internal'], 'verbose': True}
2013-07-01 13:43:54,584 unit:oscied-storage/0: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:43:54,630 unit:oscied-storage/0: hook.output DEBUG: hook peer-relation-changed exited, exit code 0.
2013-07-01 13:43:54,696 unit:oscied-storage/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-0/charm/hooks/peer-relation-changed
2013-07-01 13:43:56,037 unit:oscied-storage/2: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0xfb9d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:43:59,099 unit:oscied-storage/2: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:43:59,572 unit:oscied-storage/2: hook.output DEBUG: hook peer-relation-changed exited, exit code 0.
2013-07-01 13:43:59,994 unit:oscied-storage/2: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-2/charm/hooks/peer-relation-changed
2013-07-01 13:44:20,124 unit:oscied-transform/1: unit.hook.api INFO: [DEBUG] Execute make install
2013-07-01 13:44:21,027 unit:oscied-transform/1: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:44:21,364 unit:oscied-transform/1: unit.hook.api INFO: <-- Exiting TransformHooks.py
2013-07-01 13:44:21,418 unit:oscied-transform/1: hook.output DEBUG: hook install exited, exit code 0.
2013-07-01 13:44:21,419 unit:oscied-transform/1: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-transform-1/charm/hooks/install
2013-07-01 13:44:21,435 unit:oscied-transform/1: statemachine DEBUG: unitworkflowstate: transition complete install (state installed) {}
2013-07-01 13:44:21,443 unit:oscied-transform/1: statemachine DEBUG: unitworkflowstate: transition start (installed -> started) {}
2013-07-01 13:44:21,443 unit:oscied-transform/1: statemachine DEBUG: unitworkflowstate:  execute action do_start
2013-07-01 13:44:21,443 unit:oscied-transform/1: unit.lifecycle DEBUG: pre-start acquire, running:False
2013-07-01 13:44:21,444 unit:oscied-transform/1: unit.lifecycle DEBUG: start running, unit lifecycle
2013-07-01 13:44:21,482 unit:oscied-transform/1: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:1
2013-07-01 13:44:21,484 unit:oscied-transform/1: juju.state.hook DEBUG: Ignoring partially constructed relation: transform:5
2013-07-01 13:44:21,485 unit:oscied-transform/1: hook.output DEBUG: Cached relation hook contexts: []
2013-07-01 13:44:21,503 unit:oscied-transform/1: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-transform-1/charm/hooks/config-changed
2013-07-01 13:44:22,439 unit:oscied-transform/1: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:44:22,795 unit:oscied-transform/1: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:44:23,135 unit:oscied-transform/1: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:44:23,473 unit:oscied-transform/1: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-transform/1', 'public_address': 'ec2-50-16-38-137.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-152-161-89.ec2.internal', 'juju_log': <function callable_command at 0x1c9a2a8>, 'config': {u'storage_mountpoint': u'', 'verbose': True, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'transform_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 1, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u''}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media transform. Contains ffmpeg & x264.\nCan be scaled to multiple instances.\n", 'name': 'oscied-transform', 'requires': {'storage': {'interface': 'mount'}, 'transform': {'interface': 'subordinate'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Encoder"}}
2013-07-01 13:44:23,803 unit:oscied-transform/1: unit.hook.api INFO: --> Entering TransformHooks.py
2013-07-01 13:44:24,134 unit:oscied-transform/1: unit.hook.api INFO: [HOOK] Execute TransformHooks hook config-changed
2013-07-01 13:44:24,469 unit:oscied-transform/1: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:44:24,802 unit:oscied-transform/1: unit.hook.api INFO: <-- Exiting TransformHooks.py
2013-07-01 13:44:24,852 unit:oscied-transform/1: hook.output DEBUG: hook config-changed exited, exit code 0.
2013-07-01 13:44:24,853 unit:oscied-transform/1: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-transform-1/charm/hooks/config-changed
2013-07-01 13:44:24,888 unit:oscied-transform/1: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:1
2013-07-01 13:44:24,905 unit:oscied-transform/1: juju.state.hook DEBUG: Ignoring partially constructed relation: transform:5
2013-07-01 13:44:24,905 unit:oscied-transform/1: hook.output DEBUG: Cached relation hook contexts: []
2013-07-01 13:44:24,913 unit:oscied-transform/1: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-transform-1/charm/hooks/start
2013-07-01 13:44:25,846 unit:oscied-transform/1: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:44:26,253 unit:oscied-transform/1: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:44:26,599 unit:oscied-transform/1: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:44:26,947 unit:oscied-transform/1: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-transform/1', 'public_address': 'ec2-50-16-38-137.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-152-161-89.ec2.internal', 'juju_log': <function callable_command at 0x1f192a8>, 'config': {u'storage_mountpoint': u'', 'verbose': True, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'transform_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 1, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u''}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media transform. Contains ffmpeg & x264.\nCan be scaled to multiple instances.\n", 'name': 'oscied-transform', 'requires': {'storage': {'interface': 'mount'}, 'transform': {'interface': 'subordinate'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Encoder"}}
2013-07-01 13:44:27,280 unit:oscied-transform/1: unit.hook.api INFO: --> Entering TransformHooks.py
2013-07-01 13:44:27,619 unit:oscied-transform/1: unit.hook.api INFO: [HOOK] Execute TransformHooks hook start
2013-07-01 13:44:27,956 unit:oscied-transform/1: unit.hook.api INFO: [REMARK] Do not start transform daemon : No shared storage !
2013-07-01 13:44:28,288 unit:oscied-transform/1: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:44:28,619 unit:oscied-transform/1: unit.hook.api INFO: <-- Exiting TransformHooks.py
2013-07-01 13:44:28,669 unit:oscied-transform/1: hook.output DEBUG: hook start exited, exit code 0.
2013-07-01 13:44:28,670 unit:oscied-transform/1: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-transform-1/charm/hooks/start
2013-07-01 13:44:28,670 unit:oscied-transform/1: unit.lifecycle DEBUG: starting service relation watch
2013-07-01 13:44:28,671 unit:oscied-transform/1: unit.lifecycle DEBUG: starting unit relation resolved watch
2013-07-01 13:44:28,686 unit:oscied-transform/1: unit.lifecycle DEBUG: relation resolved changed
2013-07-01 13:44:28,686 unit:oscied-transform/1: unit.lifecycle INFO: processing relation resolved changed
2013-07-01 13:44:28,693 unit:oscied-transform/1: unit.lifecycle DEBUG: services changed old:None new:[<ServiceRelationState name:storage role:client id:relation-0000000001 scope:global>, <ServiceRelationState name:transform role:client id:relation-0000000005 scope:global>]
2013-07-01 13:44:28,694 unit:oscied-transform/1: unit.lifecycle DEBUG: processing relations changed
2013-07-01 13:44:28,636 unit:oscied-storage/2: unit.relation.watch DEBUG: relation membership change
2013-07-01 13:44:28,697 unit:oscied-storage/0: unit.relation.watch DEBUG: relation membership change
2013-07-01 13:44:28,734 unit:oscied-transform/1: unit.relation.lifecycle DEBUG: stopped relation:storage lifecycle
2013-07-01 13:44:28,652 unit:oscied-storage/1: unit.relation.watch DEBUG: relation membership change
2013-07-01 13:44:28,709 unit:oscied-storage/4: unit.relation.watch DEBUG: relation membership change
2013-07-01 13:44:28,670 unit:oscied-storage/3: unit.relation.watch DEBUG: relation membership change
2013-07-01 13:44:28,646 unit:oscied-storage/2: hook.scheduler DEBUG: members changed: old=['oscied-transform/0'], new=['oscied-transform/0', 'oscied-transform/1']
2013-07-01 13:44:28,707 unit:oscied-storage/0: hook.scheduler DEBUG: members changed: old=['oscied-transform/0'], new=['oscied-transform/0', 'oscied-transform/1']
2013-07-01 13:44:28,720 unit:oscied-storage/4: hook.scheduler DEBUG: members changed: old=['oscied-transform/0'], new=['oscied-transform/0', 'oscied-transform/1']
2013-07-01 13:44:28,662 unit:oscied-storage/1: hook.scheduler DEBUG: members changed: old=['oscied-transform/0'], new=['oscied-transform/0', 'oscied-transform/1']
2013-07-01 13:44:28,647 unit:oscied-storage/2: hook.scheduler DEBUG: executing hook for oscied-transform/1:joined
2013-07-01 13:44:28,681 unit:oscied-storage/3: hook.scheduler DEBUG: members changed: old=['oscied-transform/0'], new=['oscied-transform/0', 'oscied-transform/1']
2013-07-01 13:44:28,664 unit:oscied-storage/1: hook.scheduler DEBUG: executing hook for oscied-transform/1:joined
2013-07-01 13:44:28,708 unit:oscied-storage/0: hook.scheduler DEBUG: executing hook for oscied-transform/1:joined
2013-07-01 13:44:28,721 unit:oscied-storage/4: hook.scheduler DEBUG: executing hook for oscied-transform/1:joined
2013-07-01 13:44:28,745 unit:oscied-transform/1: statemachine DEBUG: relationworkflowstate: transition start (None -> up) {}
2013-07-01 13:44:28,746 unit:oscied-transform/1: statemachine DEBUG: relationworkflowstate:  execute action do_start
2013-07-01 13:44:28,746 unit:oscied-transform/1: hook.scheduler DEBUG: start
2013-07-01 13:44:28,665 unit:oscied-storage/1: hook.scheduler DEBUG: settings changed: (('oscied-transform/1', 0),)
2013-07-01 13:44:28,683 unit:oscied-storage/3: hook.scheduler DEBUG: executing hook for oscied-transform/1:joined
2013-07-01 13:44:28,722 unit:oscied-storage/4: hook.scheduler DEBUG: settings changed: (('oscied-transform/1', 0),)
2013-07-01 13:44:28,684 unit:oscied-storage/3: hook.scheduler DEBUG: settings changed: (('oscied-transform/1', 0),)
2013-07-01 13:44:28,712 unit:oscied-storage/0: hook.scheduler DEBUG: settings changed: (('oscied-transform/1', 0),)
2013-07-01 13:44:28,766 unit:oscied-transform/1: unit.relation.watch DEBUG: relation watcher start
2013-07-01 13:44:28,767 unit:oscied-transform/1: unit.relation.lifecycle DEBUG: started relation:storage lifecycle
2013-07-01 13:44:28,772 unit:oscied-transform/1: hook.scheduler DEBUG: members changed: old=[], new=['oscied-storage/0', 'oscied-storage/1', 'oscied-storage/2', 'oscied-storage/3', 'oscied-storage/4']
2013-07-01 13:44:28,773 unit:oscied-transform/1: hook.scheduler DEBUG: executing hook for oscied-storage/0:joined
2013-07-01 13:44:28,782 unit:oscied-transform/1: hook.scheduler DEBUG: settings changed: (('oscied-storage/1', 0),)
2013-07-01 13:44:28,784 unit:oscied-transform/1: hook.scheduler DEBUG: settings changed: (('oscied-storage/2', 0),)
2013-07-01 13:44:28,786 unit:oscied-transform/1: hook.scheduler DEBUG: settings changed: (('oscied-storage/3', 0),)
2013-07-01 13:44:28,788 unit:oscied-transform/1: hook.scheduler DEBUG: settings changed: (('oscied-storage/4', 0),)
2013-07-01 13:44:28,790 unit:oscied-transform/1: hook.scheduler DEBUG: settings changed: (('oscied-storage/0', 1),)
2013-07-01 13:44:28,795 unit:oscied-transform/1: statemachine DEBUG: relationworkflowstate: transition complete start (state up) {}
2013-07-01 13:44:28,710 unit:oscied-storage/2: hook.scheduler DEBUG: settings changed: (('oscied-transform/1', 0),)
2013-07-01 13:44:28,832 unit:oscied-transform/1: juju.state.hook DEBUG: Ignoring partially constructed relation: transform:5
2013-07-01 13:44:28,832 unit:oscied-transform/1: hook.output DEBUG: Cached relation hook contexts on 'storage:1': []
2013-07-01 13:44:28,844 unit:oscied-transform/1: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:44:28,844 unit:oscied-transform/1: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-transform-1/charm/hooks/storage-relation-joined
2013-07-01 13:44:28,822 unit:oscied-orchestra/0: unit.relation.watch DEBUG: relation membership change
2013-07-01 13:44:28,863 unit:oscied-transform/1: unit.relation.lifecycle DEBUG: stopped relation:transform lifecycle
2013-07-01 13:44:28,830 unit:oscied-orchestra/0: hook.scheduler DEBUG: members changed: old=['oscied-transform/0'], new=['oscied-transform/0', 'oscied-transform/1']
2013-07-01 13:44:28,831 unit:oscied-orchestra/0: hook.scheduler DEBUG: executing hook for oscied-transform/1:joined
2013-07-01 13:44:28,833 unit:oscied-orchestra/0: hook.scheduler DEBUG: settings changed: (('oscied-transform/1', 0),)
2013-07-01 13:44:28,874 unit:oscied-transform/1: statemachine DEBUG: relationworkflowstate: transition start (None -> up) {}
2013-07-01 13:44:28,874 unit:oscied-transform/1: statemachine DEBUG: relationworkflowstate:  execute action do_start
2013-07-01 13:44:28,874 unit:oscied-transform/1: hook.scheduler DEBUG: start
2013-07-01 13:44:28,900 unit:oscied-transform/1: unit.relation.watch DEBUG: relation watcher start
2013-07-01 13:44:28,900 unit:oscied-transform/1: unit.relation.lifecycle DEBUG: started relation:transform lifecycle
2013-07-01 13:44:28,907 unit:oscied-transform/1: hook.scheduler DEBUG: members changed: old=[], new=['oscied-orchestra/0']
2013-07-01 13:44:28,908 unit:oscied-transform/1: hook.scheduler DEBUG: executing hook for oscied-orchestra/0:joined
2013-07-01 13:44:28,913 unit:oscied-transform/1: hook.scheduler DEBUG: settings changed: (('oscied-orchestra/0', 1),)
2013-07-01 13:44:28,918 unit:oscied-transform/1: statemachine DEBUG: relationworkflowstate: transition complete start (state up) {}
2013-07-01 13:44:28,920 unit:oscied-transform/1: unit.lifecycle DEBUG: started unit lifecycle
2013-07-01 13:44:28,950 unit:oscied-transform/1: statemachine DEBUG: unitworkflowstate: transition complete start (state started) {}
2013-07-01 13:44:28,933 unit:oscied-storage/0: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['peer:0', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:44:28,946 unit:oscied-storage/4: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['peer:0', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:44:28,941 unit:oscied-storage/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:44:28,953 unit:oscied-storage/4: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:44:28,954 unit:oscied-storage/4: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-4/charm/hooks/storage-relation-joined
2013-07-01 13:44:28,941 unit:oscied-storage/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-0/charm/hooks/storage-relation-joined
2013-07-01 13:44:28,990 unit:oscied-storage/3: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['peer:0', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:44:28,997 unit:oscied-storage/3: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:44:28,998 unit:oscied-storage/3: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-3/charm/hooks/storage-relation-joined
2013-07-01 13:44:29,070 unit:oscied-transform/1: juju.agents.unit DEBUG: Configuration Changed
2013-07-01 13:44:29,093 unit:oscied-transform/1: statemachine DEBUG: unitworkflowstate: transition configure (started -> started) {}
2013-07-01 13:44:29,096 unit:oscied-transform/1: statemachine DEBUG: unitworkflowstate:  execute action do_configure
2013-07-01 13:44:29,065 unit:oscied-orchestra/0: hook.output DEBUG: Cached relation hook contexts on 'transform:5': ['api:7', 'publisher:6', 'storage:3']
2013-07-01 13:44:29,074 unit:oscied-orchestra/0: unit.relation.lifecycle DEBUG: Executing hook transform-relation-joined
2013-07-01 13:44:29,074 unit:oscied-orchestra/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-orchestra-0/charm/hooks/transform-relation-joined
2013-07-01 13:44:29,113 unit:oscied-storage/1: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['peer:0', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:44:29,121 unit:oscied-storage/1: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:44:29,121 unit:oscied-storage/1: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-1/charm/hooks/storage-relation-joined
2013-07-01 13:44:29,243 unit:oscied-transform/1: hook.output DEBUG: Cached relation hook contexts on 'transform:5': ['storage:1']
2013-07-01 13:44:29,262 unit:oscied-transform/1: unit.relation.lifecycle DEBUG: Executing hook transform-relation-joined
2013-07-01 13:44:29,366 unit:oscied-transform/1: hook.output DEBUG: Cached relation hook contexts: ['storage:1', 'transform:5']
2013-07-01 13:44:29,794 unit:oscied-storage/4: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:44:29,788 unit:oscied-storage/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:44:29,898 unit:oscied-storage/3: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:44:29,977 unit:oscied-transform/1: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:44:29,954 unit:oscied-orchestra/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:44:29,982 unit:oscied-storage/2: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['peer:0', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:44:29,988 unit:oscied-storage/2: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:44:29,988 unit:oscied-storage/2: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-2/charm/hooks/storage-relation-joined
2013-07-01 13:44:30,014 unit:oscied-storage/1: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:44:30,141 unit:oscied-storage/4: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:44:30,138 unit:oscied-storage/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:44:30,287 unit:oscied-storage/3: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:44:30,314 unit:oscied-orchestra/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:44:30,358 unit:oscied-transform/1: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:44:30,397 unit:oscied-storage/1: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:44:30,473 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:44:30,479 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:44:30,629 unit:oscied-transform/2: unit.hook.api INFO: [DEBUG] Execute make install
2013-07-01 13:44:30,656 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:44:30,699 unit:oscied-transform/1: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:44:30,653 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:44:30,807 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0xb14d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/4', 'public_address': 'ec2-54-242-176-247.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-73-202.ec2.internal', 'juju_log': <function callable_command at 0x10ce0c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:44:30,763 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:44:30,829 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1e77d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': ['ip-10-154-177-94.ec2.internal', 'ip-10-164-2-99.ec2.internal', 'ip-10-164-71-53.ec2.internal', 'ip-10-164-25-113.ec2.internal', 'ip-10-164-50-5.ec2.internal'], 'verbose': True}, 'name': 'oscied-storage/0', 'public_address': 'ec2-54-227-38-161.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-154-181-123.ec2.internal', 'juju_log': <function callable_command at 0x24310c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:44:31,000 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'root_secret': u'5FrvHcm7oyF4WQFW', 'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': True, 'hosts_file': '/etc/hosts', 'rabbit_connection': u'amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': u'mongodb://admin:Iz85QVjdCJugEosz@localhost:27017/orchestra', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}, 'name': 'oscied-orchestra/0', 'public_address': 'ec2-54-234-192-63.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-71-53.ec2.internal', 'juju_log': <function callable_command at 0x2e7d7d0>, 'config': {u'repositories_pass': u'41nVGq07GmSgK9Ud', u'storage_options': u'', 'verbose': True, u'storage_nat_address': u'', u'rabbit_password': u'OZy23iO0D4UpYS2k', u'storage_fstype': u'', u'nodes_secret': u'bdZccPuG9fibjwCS', u'transform_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/transform/source', u'repositories_user': u'oscied', u'root_secret': u'5FrvHcm7oyF4WQFW', u'storage_mountpoint': u'', u'mongo_nodes_password': u'M2qlif8rdtKtBYil', u'publisher_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/publisher/source', u'mongo_admin_password': u'Iz85QVjdCJugEosz', u'storage_address': u'', u'webui_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/webui/source'}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED orchestrator.\n", 'provides': {'publisher': {'interface': 'subordinate'}, 'api': {'interface': 'orchestra'}, 'transform': {'interface': 'subordinate'}}, 'name': 'oscied-orchestra', 'requires': {'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Orchestra"}}
2013-07-01 13:44:31,037 unit:oscied-transform/1: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-transform/1', 'public_address': 'ec2-50-16-38-137.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-152-161-89.ec2.internal', 'juju_log': <function callable_command at 0x23312a8>, 'config': {u'storage_mountpoint': u'', 'verbose': True, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'transform_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 1, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u''}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media transform. Contains ffmpeg & x264.\nCan be scaled to multiple instances.\n", 'name': 'oscied-transform', 'requires': {'storage': {'interface': 'mount'}, 'transform': {'interface': 'subordinate'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Encoder"}}
2013-07-01 13:44:31,035 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1746d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/3', 'public_address': 'ec2-54-242-71-153.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-37-115.ec2.internal', 'juju_log': <function callable_command at 0x1d000c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:44:31,143 unit:oscied-storage/4: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:44:31,115 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1b55d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/1', 'public_address': 'ec2-107-21-196-203.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-47-249.ec2.internal', 'juju_log': <function callable_command at 0x210f0c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:44:31,174 unit:oscied-storage/0: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:44:31,381 unit:oscied-transform/1: unit.hook.api INFO: --> Entering TransformHooks.py
2013-07-01 13:44:31,344 unit:oscied-orchestra/0: unit.hook.api INFO: --> Entering OrchestraHooks.py
2013-07-01 13:44:31,390 unit:oscied-storage/3: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:44:31,471 unit:oscied-storage/4: unit.hook.api INFO: [HOOK] Execute StorageHooks hook storage-relation-joined
2013-07-01 13:44:31,447 unit:oscied-storage/1: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:44:31,512 unit:oscied-storage/0: unit.hook.api INFO: [HOOK] Execute StorageHooks hook storage-relation-joined
2013-07-01 13:44:31,521 unit:oscied-transform/2: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:44:31,713 unit:oscied-transform/1: unit.hook.api INFO: [HOOK] Execute TransformHooks hook storage-relation-joined
2013-07-01 13:44:31,677 unit:oscied-orchestra/0: unit.hook.api INFO: [HOOK] Execute OrchestraHooks hook transform-relation-joined
2013-07-01 13:44:31,746 unit:oscied-storage/3: unit.hook.api INFO: [HOOK] Execute StorageHooks hook storage-relation-joined
2013-07-01 13:44:31,781 unit:oscied-storage/1: unit.hook.api INFO: [HOOK] Execute StorageHooks hook storage-relation-joined
2013-07-01 13:44:31,844 unit:oscied-storage/0: unit.hook.api INFO: [INFO] Send filesystem (volume medias_volume_0) configuration to remote client
2013-07-01 13:44:31,870 unit:oscied-transform/2: unit.hook.api INFO: <-- Exiting TransformHooks.py
2013-07-01 13:44:31,927 unit:oscied-transform/2: hook.output DEBUG: hook install exited, exit code 0.
2013-07-01 13:44:31,928 unit:oscied-transform/2: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-transform-2/charm/hooks/install
2013-07-01 13:44:31,935 unit:oscied-transform/2: statemachine DEBUG: unitworkflowstate: transition complete install (state installed) {}
2013-07-01 13:44:31,942 unit:oscied-transform/2: statemachine DEBUG: unitworkflowstate: transition start (installed -> started) {}
2013-07-01 13:44:31,942 unit:oscied-transform/2: statemachine DEBUG: unitworkflowstate:  execute action do_start
2013-07-01 13:44:31,943 unit:oscied-transform/2: unit.lifecycle DEBUG: pre-start acquire, running:False
2013-07-01 13:44:31,943 unit:oscied-transform/2: unit.lifecycle DEBUG: start running, unit lifecycle
2013-07-01 13:44:31,985 unit:oscied-transform/2: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:1
2013-07-01 13:44:32,044 unit:oscied-transform/1: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:44:31,989 unit:oscied-transform/2: juju.state.hook DEBUG: Ignoring partially constructed relation: transform:5
2013-07-01 13:44:31,990 unit:oscied-transform/2: hook.output DEBUG: Cached relation hook contexts: []
2013-07-01 13:44:32,005 unit:oscied-transform/2: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-transform-2/charm/hooks/config-changed
2013-07-01 13:44:32,128 unit:oscied-storage/4: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0xb14d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:44:32,376 unit:oscied-transform/1: unit.hook.api INFO: <-- Exiting TransformHooks.py
2013-07-01 13:44:32,359 unit:oscied-orchestra/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'root_secret': u'5FrvHcm7oyF4WQFW', 'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': True, 'hosts_file': '/etc/hosts', 'rabbit_connection': u'amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': u'mongodb://admin:Iz85QVjdCJugEosz@localhost:27017/orchestra', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}
2013-07-01 13:44:32,426 unit:oscied-transform/1: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:44:32,431 unit:oscied-transform/1: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-transform-1/charm/hooks/storage-relation-joined
2013-07-01 13:44:32,433 unit:oscied-transform/1: hook.scheduler DEBUG: executing hook for oscied-storage/1:joined
2013-07-01 13:44:32,434 unit:oscied-transform/1: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-transform-1/charm/hooks/transform-relation-joined
2013-07-01 13:44:32,459 unit:oscied-storage/4: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:44:32,436 unit:oscied-storage/3: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1746d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:44:32,500 unit:oscied-storage/4: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:44:32,445 unit:oscied-storage/1: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1b55d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:44:32,556 unit:oscied-transform/1: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['transform:5']
2013-07-01 13:44:32,567 unit:oscied-transform/1: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:44:32,575 unit:oscied-storage/4: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-4/charm/hooks/storage-relation-joined
2013-07-01 13:44:32,580 unit:oscied-storage/4: hook.scheduler DEBUG: executing hook for oscied-transform/1:modified
2013-07-01 13:44:32,693 unit:oscied-orchestra/0: unit.hook.api INFO: <-- Exiting OrchestraHooks.py
2013-07-01 13:44:32,736 unit:oscied-orchestra/0: hook.output DEBUG: hook transform-relation-joined exited, exit code 0.
2013-07-01 13:44:32,800 unit:oscied-orchestra/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-orchestra-0/charm/hooks/transform-relation-joined
2013-07-01 13:44:32,781 unit:oscied-storage/3: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:44:32,823 unit:oscied-storage/4: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['peer:0', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:44:32,806 unit:oscied-orchestra/0: hook.scheduler DEBUG: executing hook for oscied-transform/1:modified
2013-07-01 13:44:32,837 unit:oscied-storage/4: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:44:32,838 unit:oscied-storage/4: hook.executor INFO: Hook does not exist, skipping /var/lib/juju/units/oscied-storage-4/charm/hooks/storage-relation-changed
2013-07-01 13:44:32,782 unit:oscied-storage/1: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:44:32,838 unit:oscied-storage/0: unit.hook.api INFO: [INFO] Add ip-10-152-161-89.ec2.internal to allowed clients IPs
2013-07-01 13:44:32,828 unit:oscied-storage/3: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:44:32,825 unit:oscied-storage/1: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:44:32,922 unit:oscied-storage/3: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-3/charm/hooks/storage-relation-joined
2013-07-01 13:44:32,925 unit:oscied-storage/3: hook.scheduler DEBUG: executing hook for oscied-transform/1:modified
2013-07-01 13:44:32,953 unit:oscied-orchestra/0: hook.output DEBUG: Cached relation hook contexts on 'transform:5': ['api:7', 'publisher:6', 'storage:3']
2013-07-01 13:44:32,967 unit:oscied-orchestra/0: unit.relation.lifecycle DEBUG: Executing hook transform-relation-changed
2013-07-01 13:44:32,967 unit:oscied-orchestra/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-orchestra-0/charm/hooks/transform-relation-changed
2013-07-01 13:44:32,940 unit:oscied-storage/1: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-1/charm/hooks/storage-relation-joined
2013-07-01 13:44:32,965 unit:oscied-transform/2: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:44:32,944 unit:oscied-storage/1: hook.scheduler DEBUG: executing hook for oscied-transform/1:modified
2013-07-01 13:44:33,125 unit:oscied-storage/1: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['peer:0', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:44:33,172 unit:oscied-storage/0: unit.hook.api INFO: [INFO] Set volume medias_volume_0 allowed clients IP list to ip-10-154-177-94.ec2.internal,ip-10-164-2-99.ec2.internal,ip-10-164-71-53.ec2.internal,ip-10-164-25-113.ec2.internal,ip-10-164-50-5.ec2.internal,ip-10-152-161-89.ec2.internal,*
2013-07-01 13:44:33,133 unit:oscied-storage/1: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:44:33,134 unit:oscied-storage/1: hook.executor INFO: Hook does not exist, skipping /var/lib/juju/units/oscied-storage-1/charm/hooks/storage-relation-changed
2013-07-01 13:44:33,154 unit:oscied-storage/3: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['peer:0', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:44:33,163 unit:oscied-storage/3: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:44:33,163 unit:oscied-storage/3: hook.executor INFO: Hook does not exist, skipping /var/lib/juju/units/oscied-storage-3/charm/hooks/storage-relation-changed
2013-07-01 13:44:33,329 unit:oscied-transform/2: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:44:33,430 unit:oscied-transform/1: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:44:33,503 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Execute gluster volume set medias_volume_0 auth.allow "ip-10-154-177-94.ec2.internal,ip-10-164-2-99.ec2.internal,ip-10-164-71-53.ec2.internal,ip-10-164-25-113.ec2.internal,ip-10-164-50-5.ec2.internal,ip-10-152-161-89.ec2.internal,*"
2013-07-01 13:44:33,678 unit:oscied-transform/2: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:44:33,792 unit:oscied-transform/1: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:44:33,851 unit:oscied-orchestra/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:44:34,027 unit:oscied-transform/2: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-transform/2', 'public_address': 'ec2-54-235-228-173.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-154-190-123.ec2.internal', 'juju_log': <function callable_command at 0x1c742a8>, 'config': {u'storage_mountpoint': u'', 'verbose': True, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'transform_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 1, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u''}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media transform. Contains ffmpeg & x264.\nCan be scaled to multiple instances.\n", 'name': 'oscied-transform', 'requires': {'storage': {'interface': 'mount'}, 'transform': {'interface': 'subordinate'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Encoder"}}
2013-07-01 13:44:34,141 unit:oscied-transform/1: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:44:34,215 unit:oscied-orchestra/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:44:34,371 unit:oscied-transform/2: unit.hook.api INFO: --> Entering TransformHooks.py
2013-07-01 13:44:34,489 unit:oscied-transform/1: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-transform/1', 'public_address': 'ec2-50-16-38-137.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-152-161-89.ec2.internal', 'juju_log': <function callable_command at 0x1c412a8>, 'config': {u'storage_mountpoint': u'', 'verbose': True, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'transform_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 1, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u''}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media transform. Contains ffmpeg & x264.\nCan be scaled to multiple instances.\n", 'name': 'oscied-transform', 'requires': {'storage': {'interface': 'mount'}, 'transform': {'interface': 'subordinate'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Encoder"}}
2013-07-01 13:44:34,559 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:44:34,717 unit:oscied-transform/2: unit.hook.api INFO: [HOOK] Execute TransformHooks hook config-changed
2013-07-01 13:44:34,823 unit:oscied-transform/1: unit.hook.api INFO: --> Entering TransformHooks.py
2013-07-01 13:44:34,903 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'root_secret': u'5FrvHcm7oyF4WQFW', 'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': True, 'hosts_file': '/etc/hosts', 'rabbit_connection': u'amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': u'mongodb://admin:Iz85QVjdCJugEosz@localhost:27017/orchestra', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}, 'name': 'oscied-orchestra/0', 'public_address': 'ec2-54-234-192-63.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-71-53.ec2.internal', 'juju_log': <function callable_command at 0x211b7d0>, 'config': {u'repositories_pass': u'41nVGq07GmSgK9Ud', u'storage_options': u'', 'verbose': True, u'storage_nat_address': u'', u'rabbit_password': u'OZy23iO0D4UpYS2k', u'storage_fstype': u'', u'nodes_secret': u'bdZccPuG9fibjwCS', u'transform_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/transform/source', u'repositories_user': u'oscied', u'root_secret': u'5FrvHcm7oyF4WQFW', u'storage_mountpoint': u'', u'mongo_nodes_password': u'M2qlif8rdtKtBYil', u'publisher_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/publisher/source', u'mongo_admin_password': u'Iz85QVjdCJugEosz', u'storage_address': u'', u'webui_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/webui/source'}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED orchestrator.\n", 'provides': {'publisher': {'interface': 'subordinate'}, 'api': {'interface': 'orchestra'}, 'transform': {'interface': 'subordinate'}}, 'name': 'oscied-orchestra', 'requires': {'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Orchestra"}}
2013-07-01 13:44:35,060 unit:oscied-transform/2: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:44:35,159 unit:oscied-transform/1: unit.hook.api INFO: [HOOK] Execute TransformHooks hook subordinate-relation-joined
2013-07-01 13:44:35,243 unit:oscied-orchestra/0: unit.hook.api INFO: --> Entering OrchestraHooks.py
2013-07-01 13:44:35,403 unit:oscied-transform/2: unit.hook.api INFO: <-- Exiting TransformHooks.py
2013-07-01 13:44:35,494 unit:oscied-transform/1: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:44:35,456 unit:oscied-transform/2: hook.output DEBUG: hook config-changed exited, exit code 0.
2013-07-01 13:44:35,457 unit:oscied-transform/2: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-transform-2/charm/hooks/config-changed
2013-07-01 13:44:35,495 unit:oscied-transform/2: juju.state.hook DEBUG: Ignoring partially constructed relation: storage:1
2013-07-01 13:44:35,498 unit:oscied-transform/2: juju.state.hook DEBUG: Ignoring partially constructed relation: transform:5
2013-07-01 13:44:35,499 unit:oscied-transform/2: hook.output DEBUG: Cached relation hook contexts: []
2013-07-01 13:44:35,517 unit:oscied-transform/2: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-transform-2/charm/hooks/start
2013-07-01 13:44:35,591 unit:oscied-orchestra/0: unit.hook.api INFO: [HOOK] Execute OrchestraHooks hook transform-relation-changed
2013-07-01 13:44:35,826 unit:oscied-transform/1: unit.hook.api INFO: <-- Exiting TransformHooks.py
2013-07-01 13:44:35,876 unit:oscied-transform/1: hook.output DEBUG: hook transform-relation-joined exited, exit code 0.
2013-07-01 13:44:35,895 unit:oscied-transform/1: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-transform-1/charm/hooks/transform-relation-joined
2013-07-01 13:44:35,896 unit:oscied-transform/1: hook.scheduler DEBUG: executing hook for oscied-orchestra/0:modified
2013-07-01 13:44:35,897 unit:oscied-transform/1: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-transform-1/charm/hooks/config-changed
2013-07-01 13:44:36,019 unit:oscied-transform/1: hook.output DEBUG: Cached relation hook contexts on 'transform:5': ['storage:1']
2013-07-01 13:44:36,027 unit:oscied-transform/1: unit.relation.lifecycle DEBUG: Executing hook transform-relation-changed
2013-07-01 13:44:36,276 unit:oscied-orchestra/0: unit.hook.api INFO: [INFO] Transform address is ip-10-152-161-89.ec2.internal
2013-07-01 13:44:36,477 unit:oscied-transform/2: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:44:36,617 unit:oscied-orchestra/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'root_secret': u'5FrvHcm7oyF4WQFW', 'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': True, 'hosts_file': '/etc/hosts', 'rabbit_connection': u'amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': u'mongodb://admin:Iz85QVjdCJugEosz@localhost:27017/orchestra', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}
2013-07-01 13:44:36,892 unit:oscied-transform/1: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:44:36,878 unit:oscied-transform/2: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:44:36,951 unit:oscied-orchestra/0: unit.hook.api INFO: <-- Exiting OrchestraHooks.py
2013-07-01 13:44:36,994 unit:oscied-orchestra/0: hook.output DEBUG: hook transform-relation-changed exited, exit code 0.
2013-07-01 13:44:37,143 unit:oscied-orchestra/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-orchestra-0/charm/hooks/transform-relation-changed
2013-07-01 13:44:37,248 unit:oscied-transform/1: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:44:37,240 unit:oscied-transform/2: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:44:37,589 unit:oscied-transform/1: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:44:37,589 unit:oscied-transform/2: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-transform/2', 'public_address': 'ec2-54-235-228-173.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-154-190-123.ec2.internal', 'juju_log': <function callable_command at 0x276a2a8>, 'config': {u'storage_mountpoint': u'', 'verbose': True, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'transform_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 1, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u''}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media transform. Contains ffmpeg & x264.\nCan be scaled to multiple instances.\n", 'name': 'oscied-transform', 'requires': {'storage': {'interface': 'mount'}, 'transform': {'interface': 'subordinate'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Encoder"}}
2013-07-01 13:44:37,646 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Execute gluster volume info medias_volume_0 
2013-07-01 13:44:37,935 unit:oscied-transform/1: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-transform/1', 'public_address': 'ec2-50-16-38-137.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-152-161-89.ec2.internal', 'juju_log': <function callable_command at 0x16e52a8>, 'config': {u'storage_mountpoint': u'', 'verbose': True, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'transform_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 1, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u''}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media transform. Contains ffmpeg & x264.\nCan be scaled to multiple instances.\n", 'name': 'oscied-transform', 'requires': {'storage': {'interface': 'mount'}, 'transform': {'interface': 'subordinate'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Encoder"}}
2013-07-01 13:44:37,935 unit:oscied-transform/2: unit.hook.api INFO: --> Entering TransformHooks.py
2013-07-01 13:44:38,078 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Volume infos stdout: '\nVolume Name: medias_volume_0\nType: Distribute\nStatus: Started\nNumber of Bricks: 1\nTransport-type: tcp\nBricks:\nBrick1: ip-10-154-181-123.ec2.internal:/exp0\nOptions Reconfigured:\nauth.allow: ip-10-154-177-94.ec2.internal,ip-10-164-2-99.ec2.internal,ip-10-164-71-53.ec2.internal,ip-10-164-25-113.ec2.internal,ip-10-164-50-5.ec2.internal,ip-10-152-161-89.ec2.internal,*\n'
2013-07-01 13:44:38,271 unit:oscied-transform/1: unit.hook.api INFO: --> Entering TransformHooks.py
2013-07-01 13:44:38,280 unit:oscied-transform/2: unit.hook.api INFO: [HOOK] Execute TransformHooks hook start
2013-07-01 13:44:38,411 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Execute gluster volume info medias_volume_0 
2013-07-01 13:44:38,604 unit:oscied-transform/1: unit.hook.api INFO: [HOOK] Execute TransformHooks hook config-changed
2013-07-01 13:44:38,624 unit:oscied-transform/2: unit.hook.api INFO: [REMARK] Do not start transform daemon : No shared storage !
2013-07-01 13:44:38,665 unit:oscied-storage/2: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:44:38,843 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Volume infos stdout: '\nVolume Name: medias_volume_0\nType: Distribute\nStatus: Started\nNumber of Bricks: 1\nTransport-type: tcp\nBricks:\nBrick1: ip-10-154-181-123.ec2.internal:/exp0\nOptions Reconfigured:\nauth.allow: ip-10-154-177-94.ec2.internal,ip-10-164-2-99.ec2.internal,ip-10-164-71-53.ec2.internal,ip-10-164-25-113.ec2.internal,ip-10-164-50-5.ec2.internal,ip-10-152-161-89.ec2.internal,*\n'
2013-07-01 13:44:38,936 unit:oscied-transform/1: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:44:38,968 unit:oscied-transform/2: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:44:39,186 unit:oscied-storage/0: unit.hook.api INFO: [INFO] {'status': 'Started', 'name': 'medias_volume_0', 'bricks': ['ip-10-154-181-123.ec2.internal:/exp0'], 'auth_allow': 'ip-10-154-177-94.ec2.internal,ip-10-164-2-99.ec2.internal,ip-10-164-71-53.ec2.internal,ip-10-164-25-113.ec2.internal,ip-10-164-50-5.ec2.internal,ip-10-152-161-89.ec2.internal,*', 'type': 'Distribute', 'transport': 'tcp'}
2013-07-01 13:44:39,269 unit:oscied-transform/1: unit.hook.api INFO: <-- Exiting TransformHooks.py
2013-07-01 13:44:39,319 unit:oscied-transform/1: hook.output DEBUG: hook config-changed exited, exit code 0.
2013-07-01 13:44:39,351 unit:oscied-transform/1: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-transform-1/charm/hooks/config-changed
2013-07-01 13:44:39,352 unit:oscied-transform/1: unit.lifecycle DEBUG: configured unit
2013-07-01 13:44:39,353 unit:oscied-transform/1: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-transform-1/charm/hooks/storage-relation-joined
2013-07-01 13:44:39,312 unit:oscied-transform/2: unit.hook.api INFO: <-- Exiting TransformHooks.py
2013-07-01 13:44:39,378 unit:oscied-transform/1: statemachine DEBUG: unitworkflowstate: transition complete configure (state started) {}
2013-07-01 13:44:39,384 unit:oscied-transform/1: juju.agents.unit INFO: No upgrade flag set.
2013-07-01 13:44:39,364 unit:oscied-transform/2: hook.output DEBUG: hook start exited, exit code 0.
2013-07-01 13:44:39,365 unit:oscied-transform/2: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-transform-2/charm/hooks/start
2013-07-01 13:44:39,366 unit:oscied-transform/2: unit.lifecycle DEBUG: starting service relation watch
2013-07-01 13:44:39,366 unit:oscied-transform/2: unit.lifecycle DEBUG: starting unit relation resolved watch
2013-07-01 13:44:39,374 unit:oscied-transform/2: unit.lifecycle DEBUG: relation resolved changed
2013-07-01 13:44:39,374 unit:oscied-transform/2: unit.lifecycle INFO: processing relation resolved changed
2013-07-01 13:44:39,381 unit:oscied-transform/2: unit.lifecycle DEBUG: services changed old:None new:[<ServiceRelationState name:storage role:client id:relation-0000000001 scope:global>, <ServiceRelationState name:transform role:client id:relation-0000000005 scope:global>]
2013-07-01 13:44:39,382 unit:oscied-transform/2: unit.lifecycle DEBUG: processing relations changed
2013-07-01 13:44:39,453 unit:oscied-storage/4: unit.relation.watch DEBUG: relation membership change
2013-07-01 13:44:39,441 unit:oscied-storage/0: unit.relation.watch DEBUG: relation membership change
2013-07-01 13:44:39,398 unit:oscied-storage/1: unit.relation.watch DEBUG: relation membership change
2013-07-01 13:44:39,422 unit:oscied-transform/2: unit.relation.lifecycle DEBUG: stopped relation:storage lifecycle
2013-07-01 13:44:39,417 unit:oscied-storage/3: unit.relation.watch DEBUG: relation membership change
2013-07-01 13:44:39,468 unit:oscied-storage/4: hook.scheduler DEBUG: members changed: old=['oscied-transform/0', 'oscied-transform/1'], new=['oscied-transform/0', 'oscied-transform/1', 'oscied-transform/2']
2013-07-01 13:44:39,413 unit:oscied-storage/1: hook.scheduler DEBUG: members changed: old=['oscied-transform/0', 'oscied-transform/1'], new=['oscied-transform/0', 'oscied-transform/1', 'oscied-transform/2']
2013-07-01 13:44:39,469 unit:oscied-storage/4: hook.scheduler DEBUG: executing hook for oscied-transform/2:joined
2013-07-01 13:44:39,437 unit:oscied-transform/2: statemachine DEBUG: relationworkflowstate: transition start (None -> up) {}
2013-07-01 13:44:39,437 unit:oscied-transform/2: statemachine DEBUG: relationworkflowstate:  execute action do_start
2013-07-01 13:44:39,456 unit:oscied-storage/0: hook.scheduler DEBUG: members changed: old=['oscied-transform/0', 'oscied-transform/1'], new=['oscied-transform/0', 'oscied-transform/1', 'oscied-transform/2']
2013-07-01 13:44:39,414 unit:oscied-storage/1: hook.scheduler DEBUG: executing hook for oscied-transform/2:joined
2013-07-01 13:44:39,425 unit:oscied-storage/3: hook.scheduler DEBUG: members changed: old=['oscied-transform/0', 'oscied-transform/1'], new=['oscied-transform/0', 'oscied-transform/1', 'oscied-transform/2']
2013-07-01 13:44:39,438 unit:oscied-transform/2: hook.scheduler DEBUG: start
2013-07-01 13:44:39,471 unit:oscied-storage/4: hook.scheduler DEBUG: settings changed: (('oscied-transform/2', 0),)
2013-07-01 13:44:39,416 unit:oscied-storage/1: hook.scheduler DEBUG: settings changed: (('oscied-transform/2', 0),)
2013-07-01 13:44:39,427 unit:oscied-storage/3: hook.scheduler DEBUG: executing hook for oscied-transform/2:joined
2013-07-01 13:44:39,428 unit:oscied-storage/3: hook.scheduler DEBUG: settings changed: (('oscied-transform/2', 0),)
2013-07-01 13:44:39,462 unit:oscied-storage/0: hook.scheduler DEBUG: settings changed: (('oscied-transform/2', 0),)
2013-07-01 13:44:39,461 unit:oscied-transform/2: unit.relation.watch DEBUG: relation watcher start
2013-07-01 13:44:39,462 unit:oscied-transform/2: unit.relation.lifecycle DEBUG: started relation:storage lifecycle
2013-07-01 13:44:39,526 unit:oscied-storage/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1e77d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': ['ip-10-154-177-94.ec2.internal', 'ip-10-164-2-99.ec2.internal', 'ip-10-164-71-53.ec2.internal', 'ip-10-164-25-113.ec2.internal', 'ip-10-164-50-5.ec2.internal', 'ip-10-152-161-89.ec2.internal'], 'verbose': True}
2013-07-01 13:44:39,452 unit:oscied-storage/2: unit.relation.watch DEBUG: relation membership change
2013-07-01 13:44:39,467 unit:oscied-transform/2: hook.scheduler DEBUG: members changed: old=[], new=['oscied-storage/0', 'oscied-storage/1', 'oscied-storage/2', 'oscied-storage/3', 'oscied-storage/4']
2013-07-01 13:44:39,468 unit:oscied-transform/2: hook.scheduler DEBUG: executing hook for oscied-storage/0:joined
2013-07-01 13:44:39,477 unit:oscied-transform/2: hook.scheduler DEBUG: settings changed: (('oscied-storage/1', 0),)
2013-07-01 13:44:39,479 unit:oscied-transform/2: hook.scheduler DEBUG: settings changed: (('oscied-storage/2', 0),)
2013-07-01 13:44:39,481 unit:oscied-transform/2: hook.scheduler DEBUG: settings changed: (('oscied-storage/3', 0),)
2013-07-01 13:44:39,484 unit:oscied-transform/2: hook.scheduler DEBUG: settings changed: (('oscied-storage/4', 0),)
2013-07-01 13:44:39,486 unit:oscied-transform/2: hook.scheduler DEBUG: settings changed: (('oscied-storage/0', 1),)
2013-07-01 13:44:39,537 unit:oscied-transform/2: statemachine DEBUG: relationworkflowstate: transition complete start (state up) {}
2013-07-01 13:44:39,577 unit:oscied-transform/2: juju.state.hook DEBUG: Ignoring partially constructed relation: transform:5
2013-07-01 13:44:39,577 unit:oscied-transform/2: hook.output DEBUG: Cached relation hook contexts on 'storage:1': []
2013-07-01 13:44:39,585 unit:oscied-transform/2: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:44:39,586 unit:oscied-transform/2: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-transform-2/charm/hooks/storage-relation-joined
2013-07-01 13:44:39,618 unit:oscied-orchestra/0: unit.relation.watch DEBUG: relation membership change
2013-07-01 13:44:39,609 unit:oscied-transform/2: unit.relation.lifecycle DEBUG: stopped relation:transform lifecycle
2013-07-01 13:44:39,624 unit:oscied-orchestra/0: hook.scheduler DEBUG: members changed: old=['oscied-transform/0', 'oscied-transform/1'], new=['oscied-transform/0', 'oscied-transform/1', 'oscied-transform/2']
2013-07-01 13:44:39,626 unit:oscied-orchestra/0: hook.scheduler DEBUG: executing hook for oscied-transform/2:joined
2013-07-01 13:44:39,628 unit:oscied-orchestra/0: hook.scheduler DEBUG: settings changed: (('oscied-transform/2', 0),)
2013-07-01 13:44:39,627 unit:oscied-transform/2: statemachine DEBUG: relationworkflowstate: transition start (None -> up) {}
2013-07-01 13:44:39,627 unit:oscied-transform/2: statemachine DEBUG: relationworkflowstate:  execute action do_start
2013-07-01 13:44:39,627 unit:oscied-transform/2: hook.scheduler DEBUG: start
2013-07-01 13:44:39,644 unit:oscied-transform/2: unit.relation.watch DEBUG: relation watcher start
2013-07-01 13:44:39,644 unit:oscied-transform/2: unit.relation.lifecycle DEBUG: started relation:transform lifecycle
2013-07-01 13:44:39,655 unit:oscied-transform/2: hook.scheduler DEBUG: members changed: old=[], new=['oscied-orchestra/0']
2013-07-01 13:44:39,656 unit:oscied-transform/2: hook.scheduler DEBUG: executing hook for oscied-orchestra/0:joined
2013-07-01 13:44:39,658 unit:oscied-transform/2: hook.scheduler DEBUG: settings changed: (('oscied-orchestra/0', 1),)
2013-07-01 13:44:39,664 unit:oscied-transform/2: statemachine DEBUG: relationworkflowstate: transition complete start (state up) {}
2013-07-01 13:44:39,666 unit:oscied-transform/2: unit.lifecycle DEBUG: started unit lifecycle
2013-07-01 13:44:39,701 unit:oscied-transform/2: statemachine DEBUG: unitworkflowstate: transition complete start (state started) {}
2013-07-01 13:44:39,760 unit:oscied-storage/4: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['peer:0', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:44:39,769 unit:oscied-storage/4: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:44:39,770 unit:oscied-storage/4: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-4/charm/hooks/storage-relation-joined
2013-07-01 13:44:39,714 unit:oscied-storage/1: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['peer:0', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:44:39,736 unit:oscied-storage/1: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:44:39,736 unit:oscied-storage/1: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-1/charm/hooks/storage-relation-joined
2013-07-01 13:44:39,778 unit:oscied-transform/2: juju.agents.unit DEBUG: Configuration Changed
2013-07-01 13:44:39,812 unit:oscied-orchestra/0: hook.output DEBUG: Cached relation hook contexts on 'transform:5': ['api:7', 'publisher:6', 'storage:3']
2013-07-01 13:44:39,797 unit:oscied-transform/2: statemachine DEBUG: unitworkflowstate: transition configure (started -> started) {}
2013-07-01 13:44:39,797 unit:oscied-transform/2: statemachine DEBUG: unitworkflowstate:  execute action do_configure
2013-07-01 13:44:39,786 unit:oscied-storage/3: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['peer:0', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:44:39,821 unit:oscied-orchestra/0: unit.relation.lifecycle DEBUG: Executing hook transform-relation-joined
2013-07-01 13:44:39,821 unit:oscied-orchestra/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-orchestra-0/charm/hooks/transform-relation-joined
2013-07-01 13:44:39,809 unit:oscied-storage/3: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:44:39,810 unit:oscied-storage/3: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-3/charm/hooks/storage-relation-joined
2013-07-01 13:44:39,858 unit:oscied-storage/0: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:44:39,813 unit:oscied-storage/2: hook.scheduler DEBUG: members changed: old=['oscied-transform/0', 'oscied-transform/1'], new=['oscied-transform/0', 'oscied-transform/1', 'oscied-transform/2']
2013-07-01 13:44:39,818 unit:oscied-storage/2: hook.scheduler DEBUG: settings changed: (('oscied-transform/2', 0),)
2013-07-01 13:44:39,902 unit:oscied-storage/0: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:44:39,885 unit:oscied-transform/2: hook.output DEBUG: Cached relation hook contexts on 'transform:5': ['storage:1']
2013-07-01 13:44:39,893 unit:oscied-transform/2: unit.relation.lifecycle DEBUG: Executing hook transform-relation-joined
2013-07-01 13:44:39,971 unit:oscied-storage/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-0/charm/hooks/storage-relation-joined
2013-07-01 13:44:39,978 unit:oscied-storage/0: hook.scheduler DEBUG: executing hook for oscied-transform/2:joined
2013-07-01 13:44:39,997 unit:oscied-transform/2: hook.output DEBUG: Cached relation hook contexts: ['storage:1', 'transform:5']
2013-07-01 13:44:40,161 unit:oscied-storage/0: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['peer:0', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:44:40,169 unit:oscied-storage/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:44:40,169 unit:oscied-storage/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-0/charm/hooks/storage-relation-joined
2013-07-01 13:44:40,305 unit:oscied-transform/1: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:44:40,625 unit:oscied-storage/4: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:44:40,672 unit:oscied-transform/1: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:44:40,638 unit:oscied-storage/1: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:44:40,706 unit:oscied-orchestra/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:44:40,726 unit:oscied-storage/3: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:44:40,745 unit:oscied-transform/2: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:44:40,982 unit:oscied-storage/4: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:44:41,007 unit:oscied-transform/1: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:44:41,035 unit:oscied-storage/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:44:40,994 unit:oscied-storage/1: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:44:41,059 unit:oscied-orchestra/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:44:41,105 unit:oscied-storage/3: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:44:41,125 unit:oscied-transform/2: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:44:41,344 unit:oscied-transform/1: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-transform/1', 'public_address': 'ec2-50-16-38-137.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-152-161-89.ec2.internal', 'juju_log': <function callable_command at 0x28032a8>, 'config': {u'storage_mountpoint': u'', 'verbose': True, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'transform_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 1, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u''}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media transform. Contains ffmpeg & x264.\nCan be scaled to multiple instances.\n", 'name': 'oscied-transform', 'requires': {'storage': {'interface': 'mount'}, 'transform': {'interface': 'subordinate'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Encoder"}}
2013-07-01 13:44:41,323 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:44:41,390 unit:oscied-storage/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:44:41,352 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:44:41,401 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:44:41,446 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:44:41,477 unit:oscied-transform/2: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:44:41,675 unit:oscied-transform/1: unit.hook.api INFO: --> Entering TransformHooks.py
2013-07-01 13:44:41,661 unit:oscied-storage/4: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1389d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/4', 'public_address': 'ec2-54-242-176-247.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-73-202.ec2.internal', 'juju_log': <function callable_command at 0x19430c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:44:41,724 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:44:41,691 unit:oscied-storage/1: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1215d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/1', 'public_address': 'ec2-107-21-196-203.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-47-249.ec2.internal', 'juju_log': <function callable_command at 0x17cf0c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:44:41,749 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'root_secret': u'5FrvHcm7oyF4WQFW', 'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': True, 'hosts_file': '/etc/hosts', 'rabbit_connection': u'amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': u'mongodb://admin:Iz85QVjdCJugEosz@localhost:27017/orchestra', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}, 'name': 'oscied-orchestra/0', 'public_address': 'ec2-54-234-192-63.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-71-53.ec2.internal', 'juju_log': <function callable_command at 0x136c7d0>, 'config': {u'repositories_pass': u'41nVGq07GmSgK9Ud', u'storage_options': u'', 'verbose': True, u'storage_nat_address': u'', u'rabbit_password': u'OZy23iO0D4UpYS2k', u'storage_fstype': u'', u'nodes_secret': u'bdZccPuG9fibjwCS', u'transform_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/transform/source', u'repositories_user': u'oscied', u'root_secret': u'5FrvHcm7oyF4WQFW', u'storage_mountpoint': u'', u'mongo_nodes_password': u'M2qlif8rdtKtBYil', u'publisher_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/publisher/source', u'mongo_admin_password': u'Iz85QVjdCJugEosz', u'storage_address': u'', u'webui_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/webui/source'}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED orchestrator.\n", 'provides': {'publisher': {'interface': 'subordinate'}, 'api': {'interface': 'orchestra'}, 'transform': {'interface': 'subordinate'}}, 'name': 'oscied-orchestra', 'requires': {'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Orchestra"}}
2013-07-01 13:44:41,787 unit:oscied-storage/3: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1449d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/3', 'public_address': 'ec2-54-242-71-153.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-37-115.ec2.internal', 'juju_log': <function callable_command at 0x1a030c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:44:41,780 unit:oscied-storage/2: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:44:41,847 unit:oscied-transform/2: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-transform/2', 'public_address': 'ec2-54-235-228-173.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-154-190-123.ec2.internal', 'juju_log': <function callable_command at 0x2ce82a8>, 'config': {u'storage_mountpoint': u'', 'verbose': True, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'transform_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 1, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u''}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media transform. Contains ffmpeg & x264.\nCan be scaled to multiple instances.\n", 'name': 'oscied-transform', 'requires': {'storage': {'interface': 'mount'}, 'transform': {'interface': 'subordinate'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Encoder"}}
2013-07-01 13:44:41,991 unit:oscied-storage/4: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:44:42,005 unit:oscied-transform/1: unit.hook.api INFO: [HOOK] Execute TransformHooks hook storage-relation-joined
2013-07-01 13:44:42,062 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x27cdd60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': ['ip-10-154-177-94.ec2.internal', 'ip-10-164-2-99.ec2.internal', 'ip-10-164-71-53.ec2.internal', 'ip-10-164-25-113.ec2.internal', 'ip-10-164-50-5.ec2.internal', 'ip-10-152-161-89.ec2.internal'], 'verbose': True}, 'name': 'oscied-storage/0', 'public_address': 'ec2-54-227-38-161.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-154-181-123.ec2.internal', 'juju_log': <function callable_command at 0x2d870c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:44:42,023 unit:oscied-storage/1: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:44:42,080 unit:oscied-orchestra/0: unit.hook.api INFO: --> Entering OrchestraHooks.py
2013-07-01 13:44:42,125 unit:oscied-storage/3: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:44:42,202 unit:oscied-transform/2: unit.hook.api INFO: --> Entering TransformHooks.py
2013-07-01 13:44:42,319 unit:oscied-storage/4: unit.hook.api INFO: [HOOK] Execute StorageHooks hook storage-relation-joined
2013-07-01 13:44:42,347 unit:oscied-transform/1: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:44:42,395 unit:oscied-storage/0: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:44:42,358 unit:oscied-storage/1: unit.hook.api INFO: [HOOK] Execute StorageHooks hook storage-relation-joined
2013-07-01 13:44:42,415 unit:oscied-orchestra/0: unit.hook.api INFO: [HOOK] Execute OrchestraHooks hook transform-relation-joined
2013-07-01 13:44:42,469 unit:oscied-storage/3: unit.hook.api INFO: [HOOK] Execute StorageHooks hook storage-relation-joined
2013-07-01 13:44:42,546 unit:oscied-transform/2: unit.hook.api INFO: [HOOK] Execute TransformHooks hook storage-relation-joined
2013-07-01 13:44:42,678 unit:oscied-transform/1: unit.hook.api INFO: <-- Exiting TransformHooks.py
2013-07-01 13:44:42,727 unit:oscied-transform/1: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:44:42,748 unit:oscied-transform/1: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-transform-1/charm/hooks/storage-relation-joined
2013-07-01 13:44:42,753 unit:oscied-transform/1: hook.scheduler DEBUG: executing hook for oscied-storage/2:joined
2013-07-01 13:44:42,754 unit:oscied-transform/1: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-transform-1/charm/hooks/transform-relation-changed
2013-07-01 13:44:42,726 unit:oscied-storage/0: unit.hook.api INFO: [HOOK] Execute StorageHooks hook storage-relation-joined
2013-07-01 13:44:42,875 unit:oscied-transform/1: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['transform:5']
2013-07-01 13:44:42,883 unit:oscied-transform/1: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:44:42,892 unit:oscied-transform/2: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:44:42,971 unit:oscied-storage/4: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1389d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:44:43,055 unit:oscied-storage/0: unit.hook.api INFO: [INFO] Send filesystem (volume medias_volume_0) configuration to remote client
2013-07-01 13:44:43,042 unit:oscied-storage/1: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1215d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:44:43,089 unit:oscied-orchestra/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'root_secret': u'5FrvHcm7oyF4WQFW', 'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': True, 'hosts_file': '/etc/hosts', 'rabbit_connection': u'amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': u'mongodb://admin:Iz85QVjdCJugEosz@localhost:27017/orchestra', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}
2013-07-01 13:44:43,154 unit:oscied-storage/3: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1449d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:44:43,235 unit:oscied-transform/2: unit.hook.api INFO: <-- Exiting TransformHooks.py
2013-07-01 13:44:43,296 unit:oscied-storage/4: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:44:43,287 unit:oscied-transform/2: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:44:43,294 unit:oscied-transform/2: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-transform-2/charm/hooks/storage-relation-joined
2013-07-01 13:44:43,296 unit:oscied-transform/2: hook.scheduler DEBUG: executing hook for oscied-storage/1:joined
2013-07-01 13:44:43,297 unit:oscied-transform/2: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-transform-2/charm/hooks/transform-relation-joined
2013-07-01 13:44:43,338 unit:oscied-storage/4: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:44:43,415 unit:oscied-storage/4: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-4/charm/hooks/storage-relation-joined
2013-07-01 13:44:43,420 unit:oscied-storage/4: hook.scheduler DEBUG: executing hook for oscied-transform/2:modified
2013-07-01 13:44:43,425 unit:oscied-orchestra/0: unit.hook.api INFO: <-- Exiting OrchestraHooks.py
2013-07-01 13:44:43,387 unit:oscied-storage/1: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:44:43,424 unit:oscied-transform/2: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['transform:5']
2013-07-01 13:44:43,437 unit:oscied-transform/2: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:44:43,432 unit:oscied-storage/1: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:44:43,476 unit:oscied-orchestra/0: hook.output DEBUG: hook transform-relation-joined exited, exit code 0.
2013-07-01 13:44:43,493 unit:oscied-storage/3: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:44:43,536 unit:oscied-orchestra/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-orchestra-0/charm/hooks/transform-relation-joined
2013-07-01 13:44:43,542 unit:oscied-orchestra/0: hook.scheduler DEBUG: executing hook for oscied-transform/2:modified
2013-07-01 13:44:43,536 unit:oscied-storage/3: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:44:43,537 unit:oscied-storage/1: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-1/charm/hooks/storage-relation-joined
2013-07-01 13:44:43,540 unit:oscied-storage/1: hook.scheduler DEBUG: executing hook for oscied-transform/2:modified
2013-07-01 13:44:43,627 unit:oscied-storage/4: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['peer:0', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:44:43,637 unit:oscied-storage/4: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:44:43,637 unit:oscied-storage/4: hook.executor INFO: Hook does not exist, skipping /var/lib/juju/units/oscied-storage-4/charm/hooks/storage-relation-changed
2013-07-01 13:44:43,625 unit:oscied-storage/3: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-3/charm/hooks/storage-relation-joined
2013-07-01 13:44:43,628 unit:oscied-storage/3: hook.scheduler DEBUG: executing hook for oscied-transform/2:modified
2013-07-01 13:44:43,736 unit:oscied-transform/1: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:44:43,705 unit:oscied-orchestra/0: hook.output DEBUG: Cached relation hook contexts on 'transform:5': ['api:7', 'publisher:6', 'storage:3']
2013-07-01 13:44:43,720 unit:oscied-orchestra/0: unit.relation.lifecycle DEBUG: Executing hook transform-relation-changed
2013-07-01 13:44:43,721 unit:oscied-orchestra/0: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-orchestra-0/charm/hooks/transform-relation-changed
2013-07-01 13:44:43,839 unit:oscied-storage/1: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['peer:0', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:44:43,847 unit:oscied-storage/1: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:44:43,855 unit:oscied-storage/3: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['peer:0', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:44:43,847 unit:oscied-storage/1: hook.executor INFO: Hook does not exist, skipping /var/lib/juju/units/oscied-storage-1/charm/hooks/storage-relation-changed
2013-07-01 13:44:43,874 unit:oscied-storage/3: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:44:43,874 unit:oscied-storage/3: hook.executor INFO: Hook does not exist, skipping /var/lib/juju/units/oscied-storage-3/charm/hooks/storage-relation-changed
2013-07-01 13:44:44,088 unit:oscied-transform/1: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:44:44,046 unit:oscied-storage/0: unit.hook.api INFO: [INFO] Add ip-10-154-190-123.ec2.internal to allowed clients IPs
2013-07-01 13:44:44,333 unit:oscied-transform/2: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:44:44,422 unit:oscied-transform/1: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:44:44,390 unit:oscied-storage/0: unit.hook.api INFO: [INFO] Set volume medias_volume_0 allowed clients IP list to ip-10-154-177-94.ec2.internal,ip-10-164-2-99.ec2.internal,ip-10-164-71-53.ec2.internal,ip-10-164-25-113.ec2.internal,ip-10-164-50-5.ec2.internal,ip-10-152-161-89.ec2.internal,ip-10-154-190-123.ec2.internal,*
2013-07-01 13:44:44,602 unit:oscied-orchestra/0: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:44:44,698 unit:oscied-transform/2: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:44:44,758 unit:oscied-transform/1: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-transform/1', 'public_address': 'ec2-50-16-38-137.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-152-161-89.ec2.internal', 'juju_log': <function callable_command at 0x1c4c2a8>, 'config': {u'storage_mountpoint': u'', 'verbose': True, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'transform_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 1, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u''}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media transform. Contains ffmpeg & x264.\nCan be scaled to multiple instances.\n", 'name': 'oscied-transform', 'requires': {'storage': {'interface': 'mount'}, 'transform': {'interface': 'subordinate'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Encoder"}}
2013-07-01 13:44:44,725 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Execute gluster volume set medias_volume_0 auth.allow "ip-10-154-177-94.ec2.internal,ip-10-164-2-99.ec2.internal,ip-10-164-71-53.ec2.internal,ip-10-164-25-113.ec2.internal,ip-10-164-50-5.ec2.internal,ip-10-152-161-89.ec2.internal,ip-10-154-190-123.ec2.internal,*"
2013-07-01 13:44:44,700 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:44:44,958 unit:oscied-orchestra/0: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:44:45,091 unit:oscied-transform/1: unit.hook.api INFO: --> Entering TransformHooks.py
2013-07-01 13:44:45,055 unit:oscied-transform/2: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:44:45,297 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:44:45,423 unit:oscied-transform/1: unit.hook.api INFO: [HOOK] Execute TransformHooks hook subordinate-relation-changed
2013-07-01 13:44:45,408 unit:oscied-transform/2: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-transform/2', 'public_address': 'ec2-54-235-228-173.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-154-190-123.ec2.internal', 'juju_log': <function callable_command at 0x31b72a8>, 'config': {u'storage_mountpoint': u'', 'verbose': True, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'transform_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 1, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u''}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media transform. Contains ffmpeg & x264.\nCan be scaled to multiple instances.\n", 'name': 'oscied-transform', 'requires': {'storage': {'interface': 'mount'}, 'transform': {'interface': 'subordinate'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Encoder"}}
2013-07-01 13:44:45,648 unit:oscied-orchestra/0: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'root_secret': u'5FrvHcm7oyF4WQFW', 'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': True, 'hosts_file': '/etc/hosts', 'rabbit_connection': u'amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': u'mongodb://admin:Iz85QVjdCJugEosz@localhost:27017/orchestra', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}, 'name': 'oscied-orchestra/0', 'public_address': 'ec2-54-234-192-63.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-164-71-53.ec2.internal', 'juju_log': <function callable_command at 0x2e247d0>, 'config': {u'repositories_pass': u'41nVGq07GmSgK9Ud', u'storage_options': u'', 'verbose': True, u'storage_nat_address': u'', u'rabbit_password': u'OZy23iO0D4UpYS2k', u'storage_fstype': u'', u'nodes_secret': u'bdZccPuG9fibjwCS', u'transform_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/transform/source', u'repositories_user': u'oscied', u'root_secret': u'5FrvHcm7oyF4WQFW', u'storage_mountpoint': u'', u'mongo_nodes_password': u'M2qlif8rdtKtBYil', u'publisher_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/publisher/source', u'mongo_admin_password': u'Iz85QVjdCJugEosz', u'storage_address': u'', u'webui_repository': u'https://claire-et-david.dyndns.org/prog/OSCIED/components/webui/source'}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED orchestrator.\n", 'provides': {'publisher': {'interface': 'subordinate'}, 'api': {'interface': 'orchestra'}, 'transform': {'interface': 'subordinate'}}, 'name': 'oscied-orchestra', 'requires': {'storage': {'interface': 'mount'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Orchestra"}}
2013-07-01 13:44:45,753 unit:oscied-transform/2: unit.hook.api INFO: --> Entering TransformHooks.py
2013-07-01 13:44:45,984 unit:oscied-orchestra/0: unit.hook.api INFO: --> Entering OrchestraHooks.py
2013-07-01 13:44:46,106 unit:oscied-transform/2: unit.hook.api INFO: [HOOK] Execute TransformHooks hook subordinate-relation-joined
2013-07-01 13:44:46,329 unit:oscied-orchestra/0: unit.hook.api INFO: [HOOK] Execute OrchestraHooks hook transform-relation-changed
2013-07-01 13:44:46,452 unit:oscied-transform/2: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:44:46,752 unit:oscied-transform/1: unit.hook.api INFO: [DEBUG] Orchestra address is ip-10-164-71-53.ec2.internal, MongoDB is mongodb://nodes:M2qlif8rdtKtBYil@ip-10-164-71-53.ec2.internal:27017/celery, RabbitMQ is amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery
2013-07-01 13:44:46,804 unit:oscied-transform/2: unit.hook.api INFO: <-- Exiting TransformHooks.py
2013-07-01 13:44:46,856 unit:oscied-transform/2: hook.output DEBUG: hook transform-relation-joined exited, exit code 0.
2013-07-01 13:44:46,876 unit:oscied-transform/2: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-transform-2/charm/hooks/transform-relation-joined
2013-07-01 13:44:46,877 unit:oscied-transform/2: hook.scheduler DEBUG: executing hook for oscied-orchestra/0:modified
2013-07-01 13:44:46,878 unit:oscied-transform/2: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-transform-2/charm/hooks/config-changed
2013-07-01 13:44:46,886 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1d72d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/2', 'public_address': 'ec2-50-16-110-129.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-202-41-54.ec2.internal', 'juju_log': <function callable_command at 0x232c0c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:44:47,008 unit:oscied-orchestra/0: unit.hook.api INFO: [INFO] Transform address is ip-10-154-190-123.ec2.internal
2013-07-01 13:44:47,004 unit:oscied-transform/2: hook.output DEBUG: Cached relation hook contexts on 'transform:5': ['storage:1']
2013-07-01 13:44:47,014 unit:oscied-transform/2: unit.relation.lifecycle DEBUG: Executing hook transform-relation-changed
2013-07-01 13:44:47,087 unit:oscied-transform/1: unit.hook.api INFO: [DEBUG] Execute ['screen', '-ls', 'Transform']
2013-07-01 13:44:47,159 unit:oscied-storage/2: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:44:47,344 unit:oscied-orchestra/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'root_secret': u'5FrvHcm7oyF4WQFW', 'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': True, 'hosts_file': '/etc/hosts', 'rabbit_connection': u'amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'mongo_config_file': '/etc/mongodb.conf', 'storage_options': '', 'nodes_secret': '', 'api_url': 'http://ip-10-164-71-53.ec2.internal:5000', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'mongo_connection': u'mongodb://admin:Iz85QVjdCJugEosz@localhost:27017/orchestra', 'storage_mount_sleep_delay': 5, 'storage_path': '/mnt/storage'}
2013-07-01 13:44:47,441 unit:oscied-transform/1: unit.hook.api INFO: [INFO] Use subordinate parameters from charm relation
2013-07-01 13:44:47,426 unit:oscied-storage/2: unit.hook.api INFO: [HOOK] Execute StorageHooks hook storage-relation-joined
2013-07-01 13:44:47,689 unit:oscied-orchestra/0: unit.hook.api INFO: <-- Exiting OrchestraHooks.py
2013-07-01 13:44:47,732 unit:oscied-orchestra/0: hook.output DEBUG: hook transform-relation-changed exited, exit code 0.
2013-07-01 13:44:47,774 unit:oscied-transform/1: unit.hook.api INFO: [INFO] Register the Orchestrator
2013-07-01 13:44:47,792 unit:oscied-orchestra/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-orchestra-0/charm/hooks/transform-relation-changed
2013-07-01 13:44:47,903 unit:oscied-transform/2: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:44:48,001 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Execute gluster volume info medias_volume_0 
2013-07-01 13:44:48,109 unit:oscied-transform/1: unit.hook.api INFO: [REMARK] File celeryconfig.py successfully generated !
2013-07-01 13:44:48,064 unit:oscied-storage/2: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1d72d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:44:48,267 unit:oscied-transform/2: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:44:48,326 unit:oscied-storage/2: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:44:48,443 unit:oscied-transform/1: unit.hook.api INFO: [REMARK] Orchestrator successfully registered !
2013-07-01 13:44:48,429 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Volume infos stdout: '\nVolume Name: medias_volume_0\nType: Distribute\nStatus: Started\nNumber of Bricks: 1\nTransport-type: tcp\nBricks:\nBrick1: ip-10-154-181-123.ec2.internal:/exp0\nOptions Reconfigured:\nauth.allow: ip-10-154-177-94.ec2.internal,ip-10-164-2-99.ec2.internal,ip-10-164-71-53.ec2.internal,ip-10-164-25-113.ec2.internal,ip-10-164-50-5.ec2.internal,ip-10-152-161-89.ec2.internal,ip-10-154-190-123.ec2.internal,*\n'
2013-07-01 13:44:48,371 unit:oscied-storage/2: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:44:48,446 unit:oscied-storage/2: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-2/charm/hooks/storage-relation-joined
2013-07-01 13:44:48,452 unit:oscied-storage/2: hook.scheduler DEBUG: executing hook for oscied-transform/2:joined
2013-07-01 13:44:48,617 unit:oscied-transform/2: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:44:48,629 unit:oscied-storage/2: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['peer:0', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:44:48,636 unit:oscied-storage/2: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:44:48,637 unit:oscied-storage/2: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-storage-2/charm/hooks/storage-relation-joined
2013-07-01 13:44:48,775 unit:oscied-transform/1: unit.hook.api INFO: [REMARK] Do not start transform daemon : No shared storage !
2013-07-01 13:44:48,763 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Execute gluster volume info medias_volume_0 
2013-07-01 13:44:48,967 unit:oscied-transform/2: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-transform/2', 'public_address': 'ec2-54-235-228-173.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-154-190-123.ec2.internal', 'juju_log': <function callable_command at 0x16742a8>, 'config': {u'storage_mountpoint': u'', 'verbose': True, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'transform_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 1, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u''}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media transform. Contains ffmpeg & x264.\nCan be scaled to multiple instances.\n", 'name': 'oscied-transform', 'requires': {'storage': {'interface': 'mount'}, 'transform': {'interface': 'subordinate'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Encoder"}}
2013-07-01 13:44:49,109 unit:oscied-transform/1: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:44:49,197 unit:oscied-storage/0: unit.hook.api INFO: [DEBUG] Volume infos stdout: '\nVolume Name: medias_volume_0\nType: Distribute\nStatus: Started\nNumber of Bricks: 1\nTransport-type: tcp\nBricks:\nBrick1: ip-10-154-181-123.ec2.internal:/exp0\nOptions Reconfigured:\nauth.allow: ip-10-154-177-94.ec2.internal,ip-10-164-2-99.ec2.internal,ip-10-164-71-53.ec2.internal,ip-10-164-25-113.ec2.internal,ip-10-164-50-5.ec2.internal,ip-10-152-161-89.ec2.internal,ip-10-154-190-123.ec2.internal,*\n'
2013-07-01 13:44:49,311 unit:oscied-transform/2: unit.hook.api INFO: --> Entering TransformHooks.py
2013-07-01 13:44:49,317 unit:oscied-storage/2: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:44:49,443 unit:oscied-transform/1: unit.hook.api INFO: <-- Exiting TransformHooks.py
2013-07-01 13:44:49,493 unit:oscied-transform/1: hook.output DEBUG: hook transform-relation-changed exited, exit code 0.
2013-07-01 13:44:49,518 unit:oscied-transform/1: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-transform-1/charm/hooks/transform-relation-changed
2013-07-01 13:44:49,519 unit:oscied-transform/1: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-transform-1/charm/hooks/storage-relation-joined
2013-07-01 13:44:49,548 unit:oscied-storage/0: unit.hook.api INFO: [INFO] {'status': 'Started', 'name': 'medias_volume_0', 'bricks': ['ip-10-154-181-123.ec2.internal:/exp0'], 'auth_allow': 'ip-10-154-177-94.ec2.internal,ip-10-164-2-99.ec2.internal,ip-10-164-71-53.ec2.internal,ip-10-164-25-113.ec2.internal,ip-10-164-50-5.ec2.internal,ip-10-152-161-89.ec2.internal,ip-10-154-190-123.ec2.internal,*', 'type': 'Distribute', 'transport': 'tcp'}
2013-07-01 13:44:49,655 unit:oscied-transform/2: unit.hook.api INFO: [HOOK] Execute TransformHooks hook config-changed
2013-07-01 13:44:49,645 unit:oscied-storage/2: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:44:49,885 unit:oscied-storage/0: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': True, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x27cdd60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': ['ip-10-154-177-94.ec2.internal', 'ip-10-164-2-99.ec2.internal', 'ip-10-164-71-53.ec2.internal', 'ip-10-164-25-113.ec2.internal', 'ip-10-164-50-5.ec2.internal', 'ip-10-152-161-89.ec2.internal', 'ip-10-154-190-123.ec2.internal'], 'verbose': True}
2013-07-01 13:44:49,929 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:44:50,006 unit:oscied-transform/2: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:44:50,217 unit:oscied-storage/0: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:44:50,261 unit:oscied-storage/0: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:44:50,203 unit:oscied-storage/2: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1b10d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}, 'name': 'oscied-storage/2', 'public_address': 'ec2-50-16-110-129.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-202-41-54.ec2.internal', 'juju_log': <function callable_command at 0x20ca0c8>, 'config': {u'allowed_ips': u'*', 'verbose': True, u'replica_count': 1}, 'juju_ok': True, 'metadata': {'peers': {'peer': {'interface': 'glusterfs-peers'}}, 'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED shared storage based on glusterfs.\n", 'provides': {'storage': {'interface': 'mount'}}, 'name': 'oscied-storage', 'ensemble': 'oscied', 'summary': "EBU's OSCIED Storage"}}
2013-07-01 13:44:50,331 unit:oscied-storage/0: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-0/charm/hooks/storage-relation-joined
2013-07-01 13:44:50,339 unit:oscied-storage/0: hook.scheduler DEBUG: executing hook for oscied-transform/1:modified
2013-07-01 13:44:50,363 unit:oscied-transform/2: unit.hook.api INFO: <-- Exiting TransformHooks.py
2013-07-01 13:44:50,445 unit:oscied-transform/1: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:44:50,416 unit:oscied-transform/2: hook.output DEBUG: hook config-changed exited, exit code 0.
2013-07-01 13:44:50,451 unit:oscied-transform/2: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-transform-2/charm/hooks/config-changed
2013-07-01 13:44:50,452 unit:oscied-transform/2: unit.lifecycle DEBUG: configured unit
2013-07-01 13:44:50,453 unit:oscied-transform/2: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-transform-2/charm/hooks/storage-relation-joined
2013-07-01 13:44:50,476 unit:oscied-transform/2: statemachine DEBUG: unitworkflowstate: transition complete configure (state started) {}
2013-07-01 13:44:50,480 unit:oscied-transform/2: juju.agents.unit INFO: No upgrade flag set.
2013-07-01 13:44:50,550 unit:oscied-storage/0: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['peer:0', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:44:50,556 unit:oscied-storage/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:44:50,496 unit:oscied-storage/2: unit.hook.api INFO: --> Entering StorageHooks.py
2013-07-01 13:44:50,557 unit:oscied-storage/0: hook.executor INFO: Hook does not exist, skipping /var/lib/juju/units/oscied-storage-0/charm/hooks/storage-relation-changed
2013-07-01 13:44:50,558 unit:oscied-storage/0: hook.scheduler DEBUG: executing hook for oscied-transform/2:modified
2013-07-01 13:44:50,749 unit:oscied-storage/0: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['peer:0', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:44:50,756 unit:oscied-storage/0: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:44:50,757 unit:oscied-storage/0: hook.executor INFO: Hook does not exist, skipping /var/lib/juju/units/oscied-storage-0/charm/hooks/storage-relation-changed
2013-07-01 13:44:50,805 unit:oscied-transform/1: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:44:50,806 unit:oscied-storage/2: unit.hook.api INFO: [HOOK] Execute StorageHooks hook storage-relation-joined
2013-07-01 13:44:51,141 unit:oscied-transform/1: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:44:51,353 unit:oscied-storage/2: unit.hook.api INFO: [INFO] Save (updated) local configuration {'volume_flag': False, 'volume_infos_regex': <_sre.SRE_Pattern object at 0x1b10d60>, '_pickle_filename': 'local_config.pkl', 'allowed_ips': [], 'verbose': True}
2013-07-01 13:44:51,419 unit:oscied-transform/2: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:44:51,480 unit:oscied-transform/1: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-transform/1', 'public_address': 'ec2-50-16-38-137.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-152-161-89.ec2.internal', 'juju_log': <function callable_command at 0x29dd2a8>, 'config': {u'storage_mountpoint': u'', 'verbose': True, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'transform_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 1, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u''}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media transform. Contains ffmpeg & x264.\nCan be scaled to multiple instances.\n", 'name': 'oscied-transform', 'requires': {'storage': {'interface': 'mount'}, 'transform': {'interface': 'subordinate'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Encoder"}}
2013-07-01 13:44:51,631 unit:oscied-storage/2: unit.hook.api INFO: <-- Exiting StorageHooks.py
2013-07-01 13:44:51,685 unit:oscied-storage/2: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:44:51,815 unit:oscied-transform/1: unit.hook.api INFO: --> Entering TransformHooks.py
2013-07-01 13:44:51,786 unit:oscied-transform/2: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:44:51,769 unit:oscied-storage/2: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-storage-2/charm/hooks/storage-relation-joined
2013-07-01 13:44:51,775 unit:oscied-storage/2: hook.scheduler DEBUG: executing hook for oscied-transform/1:modified
2013-07-01 13:44:51,972 unit:oscied-storage/2: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['peer:0', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:44:51,980 unit:oscied-storage/2: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:44:51,980 unit:oscied-storage/2: hook.executor INFO: Hook does not exist, skipping /var/lib/juju/units/oscied-storage-2/charm/hooks/storage-relation-changed
2013-07-01 13:44:51,981 unit:oscied-storage/2: hook.scheduler DEBUG: executing hook for oscied-transform/2:modified
2013-07-01 13:44:52,147 unit:oscied-transform/1: unit.hook.api INFO: [HOOK] Execute TransformHooks hook storage-relation-joined
2013-07-01 13:44:52,141 unit:oscied-transform/2: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:44:52,188 unit:oscied-storage/2: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['peer:0', 'storage:2', 'storage:3', 'storage:4']
2013-07-01 13:44:52,198 unit:oscied-storage/2: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:44:52,198 unit:oscied-storage/2: hook.executor INFO: Hook does not exist, skipping /var/lib/juju/units/oscied-storage-2/charm/hooks/storage-relation-changed
2013-07-01 13:44:52,489 unit:oscied-transform/1: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:44:52,492 unit:oscied-transform/2: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-transform/2', 'public_address': 'ec2-54-235-228-173.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-154-190-123.ec2.internal', 'juju_log': <function callable_command at 0x23192a8>, 'config': {u'storage_mountpoint': u'', 'verbose': True, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'transform_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 1, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u''}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media transform. Contains ffmpeg & x264.\nCan be scaled to multiple instances.\n", 'name': 'oscied-transform', 'requires': {'storage': {'interface': 'mount'}, 'transform': {'interface': 'subordinate'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Encoder"}}
2013-07-01 13:44:52,827 unit:oscied-transform/1: unit.hook.api INFO: <-- Exiting TransformHooks.py
2013-07-01 13:44:52,878 unit:oscied-transform/1: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:44:52,837 unit:oscied-transform/2: unit.hook.api INFO: --> Entering TransformHooks.py
2013-07-01 13:44:52,904 unit:oscied-transform/1: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-transform-1/charm/hooks/storage-relation-joined
2013-07-01 13:44:52,908 unit:oscied-transform/1: hook.scheduler DEBUG: executing hook for oscied-storage/3:joined
2013-07-01 13:44:52,973 unit:oscied-transform/1: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['transform:5']
2013-07-01 13:44:52,981 unit:oscied-transform/1: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:44:52,981 unit:oscied-transform/1: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-transform-1/charm/hooks/storage-relation-joined
2013-07-01 13:44:53,182 unit:oscied-transform/2: unit.hook.api INFO: [HOOK] Execute TransformHooks hook storage-relation-joined
2013-07-01 13:44:53,534 unit:oscied-transform/2: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:44:53,919 unit:oscied-transform/1: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:44:53,879 unit:oscied-transform/2: unit.hook.api INFO: <-- Exiting TransformHooks.py
2013-07-01 13:44:53,935 unit:oscied-transform/2: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:44:53,955 unit:oscied-transform/2: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-transform-2/charm/hooks/storage-relation-joined
2013-07-01 13:44:53,960 unit:oscied-transform/2: hook.scheduler DEBUG: executing hook for oscied-storage/2:joined
2013-07-01 13:44:53,961 unit:oscied-transform/2: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-transform-2/charm/hooks/transform-relation-changed
2013-07-01 13:44:54,089 unit:oscied-transform/2: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['transform:5']
2013-07-01 13:44:54,103 unit:oscied-transform/2: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:44:54,271 unit:oscied-transform/1: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:44:54,606 unit:oscied-transform/1: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:44:54,943 unit:oscied-transform/1: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-transform/1', 'public_address': 'ec2-50-16-38-137.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-152-161-89.ec2.internal', 'juju_log': <function callable_command at 0x1ae22a8>, 'config': {u'storage_mountpoint': u'', 'verbose': True, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'transform_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 1, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u''}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media transform. Contains ffmpeg & x264.\nCan be scaled to multiple instances.\n", 'name': 'oscied-transform', 'requires': {'storage': {'interface': 'mount'}, 'transform': {'interface': 'subordinate'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Encoder"}}
2013-07-01 13:44:54,995 unit:oscied-transform/2: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:44:55,275 unit:oscied-transform/1: unit.hook.api INFO: --> Entering TransformHooks.py
2013-07-01 13:44:55,383 unit:oscied-transform/2: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:44:55,607 unit:oscied-transform/1: unit.hook.api INFO: [HOOK] Execute TransformHooks hook storage-relation-joined
2013-07-01 13:44:55,740 unit:oscied-transform/2: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:44:55,938 unit:oscied-transform/1: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:44:56,090 unit:oscied-transform/2: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-transform/2', 'public_address': 'ec2-54-235-228-173.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-154-190-123.ec2.internal', 'juju_log': <function callable_command at 0x1a362a8>, 'config': {u'storage_mountpoint': u'', 'verbose': True, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'transform_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 1, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u''}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media transform. Contains ffmpeg & x264.\nCan be scaled to multiple instances.\n", 'name': 'oscied-transform', 'requires': {'storage': {'interface': 'mount'}, 'transform': {'interface': 'subordinate'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Encoder"}}
2013-07-01 13:44:56,273 unit:oscied-transform/1: unit.hook.api INFO: <-- Exiting TransformHooks.py
2013-07-01 13:44:56,324 unit:oscied-transform/1: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:44:56,349 unit:oscied-transform/1: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-transform-1/charm/hooks/storage-relation-joined
2013-07-01 13:44:56,354 unit:oscied-transform/1: hook.scheduler DEBUG: executing hook for oscied-storage/4:joined
2013-07-01 13:44:56,424 unit:oscied-transform/1: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['transform:5']
2013-07-01 13:44:56,435 unit:oscied-transform/1: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:44:56,435 unit:oscied-transform/1: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-transform-1/charm/hooks/storage-relation-joined
2013-07-01 13:44:56,435 unit:oscied-transform/2: unit.hook.api INFO: --> Entering TransformHooks.py
2013-07-01 13:44:56,789 unit:oscied-transform/2: unit.hook.api INFO: [HOOK] Execute TransformHooks hook subordinate-relation-changed
2013-07-01 13:44:57,365 unit:oscied-transform/1: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:44:57,721 unit:oscied-transform/1: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:44:58,056 unit:oscied-transform/1: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:44:58,177 unit:oscied-transform/2: unit.hook.api INFO: [DEBUG] Orchestra address is ip-10-164-71-53.ec2.internal, MongoDB is mongodb://nodes:M2qlif8rdtKtBYil@ip-10-164-71-53.ec2.internal:27017/celery, RabbitMQ is amqp://nodes:OZy23iO0D4UpYS2k@ip-10-164-71-53.ec2.internal:5672/celery
2013-07-01 13:44:58,395 unit:oscied-transform/1: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-transform/1', 'public_address': 'ec2-50-16-38-137.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-152-161-89.ec2.internal', 'juju_log': <function callable_command at 0x19022a8>, 'config': {u'storage_mountpoint': u'', 'verbose': True, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'transform_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 1, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u''}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media transform. Contains ffmpeg & x264.\nCan be scaled to multiple instances.\n", 'name': 'oscied-transform', 'requires': {'storage': {'interface': 'mount'}, 'transform': {'interface': 'subordinate'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Encoder"}}
2013-07-01 13:44:58,521 unit:oscied-transform/2: unit.hook.api INFO: [DEBUG] Execute ['screen', '-ls', 'Transform']
2013-07-01 13:44:58,726 unit:oscied-transform/1: unit.hook.api INFO: --> Entering TransformHooks.py
2013-07-01 13:44:58,880 unit:oscied-transform/2: unit.hook.api INFO: [INFO] Use subordinate parameters from charm relation
2013-07-01 13:44:59,058 unit:oscied-transform/1: unit.hook.api INFO: [HOOK] Execute TransformHooks hook storage-relation-joined
2013-07-01 13:44:59,226 unit:oscied-transform/2: unit.hook.api INFO: [INFO] Register the Orchestrator
2013-07-01 13:44:59,389 unit:oscied-transform/1: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:44:59,580 unit:oscied-transform/2: unit.hook.api INFO: [REMARK] File celeryconfig.py successfully generated !
2013-07-01 13:44:59,722 unit:oscied-transform/1: unit.hook.api INFO: <-- Exiting TransformHooks.py
2013-07-01 13:44:59,774 unit:oscied-transform/1: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:44:59,794 unit:oscied-transform/1: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-transform-1/charm/hooks/storage-relation-joined
2013-07-01 13:44:59,799 unit:oscied-transform/1: hook.scheduler DEBUG: executing hook for oscied-storage/0:modified
2013-07-01 13:44:59,871 unit:oscied-transform/1: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['transform:5']
2013-07-01 13:44:59,878 unit:oscied-transform/1: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:44:59,878 unit:oscied-transform/1: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-transform-1/charm/hooks/storage-relation-changed
2013-07-01 13:44:59,925 unit:oscied-transform/2: unit.hook.api INFO: [REMARK] Orchestrator successfully registered !
2013-07-01 13:45:00,270 unit:oscied-transform/2: unit.hook.api INFO: [REMARK] Do not start transform daemon : No shared storage !
2013-07-01 13:45:00,623 unit:oscied-transform/2: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:45:00,837 unit:oscied-transform/1: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:45:00,992 unit:oscied-transform/2: unit.hook.api INFO: <-- Exiting TransformHooks.py
2013-07-01 13:45:01,051 unit:oscied-transform/2: hook.output DEBUG: hook transform-relation-changed exited, exit code 0.
2013-07-01 13:45:01,082 unit:oscied-transform/2: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-transform-2/charm/hooks/transform-relation-changed
2013-07-01 13:45:01,084 unit:oscied-transform/2: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-transform-2/charm/hooks/storage-relation-joined
2013-07-01 13:45:01,205 unit:oscied-transform/1: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:45:01,561 unit:oscied-transform/1: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:45:01,918 unit:oscied-transform/1: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-transform/1', 'public_address': 'ec2-50-16-38-137.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-152-161-89.ec2.internal', 'juju_log': <function callable_command at 0x305a2a8>, 'config': {u'storage_mountpoint': u'', 'verbose': True, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'transform_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 1, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u''}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media transform. Contains ffmpeg & x264.\nCan be scaled to multiple instances.\n", 'name': 'oscied-transform', 'requires': {'storage': {'interface': 'mount'}, 'transform': {'interface': 'subordinate'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Encoder"}}
2013-07-01 13:45:02,068 unit:oscied-transform/2: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:45:02,270 unit:oscied-transform/1: unit.hook.api INFO: --> Entering TransformHooks.py
2013-07-01 13:45:02,492 unit:oscied-transform/2: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:45:02,624 unit:oscied-transform/1: unit.hook.api INFO: [HOOK] Execute TransformHooks hook storage-relation-changed
2013-07-01 13:45:02,842 unit:oscied-transform/2: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:45:03,203 unit:oscied-transform/2: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-transform/2', 'public_address': 'ec2-54-235-228-173.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-154-190-123.ec2.internal', 'juju_log': <function callable_command at 0x229e2a8>, 'config': {u'storage_mountpoint': u'', 'verbose': True, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'transform_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 1, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u''}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media transform. Contains ffmpeg & x264.\nCan be scaled to multiple instances.\n", 'name': 'oscied-transform', 'requires': {'storage': {'interface': 'mount'}, 'transform': {'interface': 'subordinate'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Encoder"}}
2013-07-01 13:45:03,550 unit:oscied-transform/2: unit.hook.api INFO: --> Entering TransformHooks.py
2013-07-01 13:45:03,893 unit:oscied-transform/2: unit.hook.api INFO: [HOOK] Execute TransformHooks hook storage-relation-joined
2013-07-01 13:45:04,237 unit:oscied-transform/2: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:45:04,362 unit:oscied-transform/1: unit.hook.api INFO: [DEBUG] Storage address is ip-10-154-181-123.ec2.internal, fstype: glusterfs, mountpoint: medias_volume_0, options: 
2013-07-01 13:45:04,592 unit:oscied-transform/2: unit.hook.api INFO: <-- Exiting TransformHooks.py
2013-07-01 13:45:04,644 unit:oscied-transform/2: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:45:04,702 unit:oscied-transform/1: unit.hook.api INFO: [DEBUG] Execute ['screen', '-ls', 'Transform']
2013-07-01 13:45:04,673 unit:oscied-transform/2: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-transform-2/charm/hooks/storage-relation-joined
2013-07-01 13:45:04,677 unit:oscied-transform/2: hook.scheduler DEBUG: executing hook for oscied-storage/3:joined
2013-07-01 13:45:04,750 unit:oscied-transform/2: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['transform:5']
2013-07-01 13:45:04,758 unit:oscied-transform/2: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:45:04,759 unit:oscied-transform/2: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-transform-2/charm/hooks/storage-relation-joined
2013-07-01 13:45:05,057 unit:oscied-transform/1: unit.hook.api INFO: [INFO] Use storage parameters from charm storage relation
2013-07-01 13:45:05,399 unit:oscied-transform/1: unit.hook.api INFO: [INFO] Unregister shared storage
2013-07-01 13:45:05,738 unit:oscied-transform/1: unit.hook.api INFO: [REMARK] Shared storage already unmounted !
2013-07-01 13:45:05,724 unit:oscied-transform/2: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:45:06,080 unit:oscied-transform/1: unit.hook.api INFO: [DEBUG] Mount shared storage [] ip-10-154-181-123.ec2.internal:medias_volume_0 type glusterfs options '' -> /mnt/storage
2013-07-01 13:45:06,092 unit:oscied-transform/2: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:45:06,446 unit:oscied-transform/1: unit.hook.api INFO: [DEBUG] Execute ['mount', '-t', 'glusterfs', 'ip-10-154-181-123.ec2.internal:/medias_volume_0', '/mnt/storage']
2013-07-01 13:45:06,439 unit:oscied-transform/2: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:45:06,790 unit:oscied-transform/2: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-transform/2', 'public_address': 'ec2-54-235-228-173.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-154-190-123.ec2.internal', 'juju_log': <function callable_command at 0x21e12a8>, 'config': {u'storage_mountpoint': u'', 'verbose': True, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'transform_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 1, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u''}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media transform. Contains ffmpeg & x264.\nCan be scaled to multiple instances.\n", 'name': 'oscied-transform', 'requires': {'storage': {'interface': 'mount'}, 'transform': {'interface': 'subordinate'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Encoder"}}
2013-07-01 13:45:07,136 unit:oscied-transform/2: unit.hook.api INFO: --> Entering TransformHooks.py
2013-07-01 13:45:07,490 unit:oscied-transform/2: unit.hook.api INFO: [HOOK] Execute TransformHooks hook storage-relation-joined
2013-07-01 13:45:07,837 unit:oscied-transform/2: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:45:08,183 unit:oscied-transform/2: unit.hook.api INFO: <-- Exiting TransformHooks.py
2013-07-01 13:45:08,236 unit:oscied-transform/2: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:45:08,281 unit:oscied-transform/2: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-transform-2/charm/hooks/storage-relation-joined
2013-07-01 13:45:08,286 unit:oscied-transform/2: hook.scheduler DEBUG: executing hook for oscied-storage/4:joined
2013-07-01 13:45:08,358 unit:oscied-transform/2: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['transform:5']
2013-07-01 13:45:08,366 unit:oscied-transform/2: unit.relation.lifecycle DEBUG: Executing hook storage-relation-joined
2013-07-01 13:45:08,367 unit:oscied-transform/2: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-transform-2/charm/hooks/storage-relation-joined
2013-07-01 13:45:09,345 unit:oscied-transform/2: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:45:09,717 unit:oscied-transform/2: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:45:10,068 unit:oscied-transform/2: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:45:10,425 unit:oscied-transform/2: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-transform/2', 'public_address': 'ec2-54-235-228-173.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-154-190-123.ec2.internal', 'juju_log': <function callable_command at 0x15c92a8>, 'config': {u'storage_mountpoint': u'', 'verbose': True, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'transform_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 1, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u''}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media transform. Contains ffmpeg & x264.\nCan be scaled to multiple instances.\n", 'name': 'oscied-transform', 'requires': {'storage': {'interface': 'mount'}, 'transform': {'interface': 'subordinate'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Encoder"}}
2013-07-01 13:45:10,775 unit:oscied-transform/2: unit.hook.api INFO: --> Entering TransformHooks.py
2013-07-01 13:45:11,126 unit:oscied-transform/2: unit.hook.api INFO: [HOOK] Execute TransformHooks hook storage-relation-joined
2013-07-01 13:45:11,482 unit:oscied-transform/2: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:45:11,829 unit:oscied-transform/2: unit.hook.api INFO: <-- Exiting TransformHooks.py
2013-07-01 13:45:11,882 unit:oscied-transform/2: hook.output DEBUG: hook storage-relation-joined exited, exit code 0.
2013-07-01 13:45:11,905 unit:oscied-transform/2: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-transform-2/charm/hooks/storage-relation-joined
2013-07-01 13:45:11,909 unit:oscied-transform/2: hook.scheduler DEBUG: executing hook for oscied-storage/0:modified
2013-07-01 13:45:11,997 unit:oscied-transform/2: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['transform:5']
2013-07-01 13:45:12,009 unit:oscied-transform/2: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:45:12,010 unit:oscied-transform/2: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-transform-2/charm/hooks/storage-relation-changed
2013-07-01 13:45:12,987 unit:oscied-transform/2: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:45:13,352 unit:oscied-transform/2: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:45:13,704 unit:oscied-transform/2: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:45:14,059 unit:oscied-transform/2: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': '', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_fstype': '', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': '', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-transform/2', 'public_address': 'ec2-54-235-228-173.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-154-190-123.ec2.internal', 'juju_log': <function callable_command at 0x283d2a8>, 'config': {u'storage_mountpoint': u'', 'verbose': True, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'transform_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 1, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u''}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media transform. Contains ffmpeg & x264.\nCan be scaled to multiple instances.\n", 'name': 'oscied-transform', 'requires': {'storage': {'interface': 'mount'}, 'transform': {'interface': 'subordinate'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Encoder"}}
2013-07-01 13:45:14,405 unit:oscied-transform/2: unit.hook.api INFO: --> Entering TransformHooks.py
2013-07-01 13:45:14,759 unit:oscied-transform/2: unit.hook.api INFO: [HOOK] Execute TransformHooks hook storage-relation-changed
2013-07-01 13:45:14,972 unit:oscied-transform/1: unit.hook.api INFO: [REMARK] Shared storage successfully registered !
2013-07-01 13:45:15,305 unit:oscied-transform/1: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:45:15,638 unit:oscied-transform/1: unit.hook.api INFO: [DEBUG] Execute ['screen', '-ls', 'Transform']
2013-07-01 13:45:16,495 unit:oscied-transform/2: unit.hook.api INFO: [DEBUG] Storage address is ip-10-154-181-123.ec2.internal, fstype: glusterfs, mountpoint: medias_volume_0, options: 
2013-07-01 13:45:16,842 unit:oscied-transform/2: unit.hook.api INFO: [DEBUG] Execute ['screen', '-ls', 'Transform']
2013-07-01 13:45:17,200 unit:oscied-transform/2: unit.hook.api INFO: [INFO] Use storage parameters from charm storage relation
2013-07-01 13:45:17,549 unit:oscied-transform/2: unit.hook.api INFO: [INFO] Unregister shared storage
2013-07-01 13:45:17,898 unit:oscied-transform/2: unit.hook.api INFO: [REMARK] Shared storage already unmounted !
2013-07-01 13:45:18,243 unit:oscied-transform/2: unit.hook.api INFO: [DEBUG] Mount shared storage [] ip-10-154-181-123.ec2.internal:medias_volume_0 type glusterfs options '' -> /mnt/storage
2013-07-01 13:45:18,627 unit:oscied-transform/2: unit.hook.api INFO: [DEBUG] Execute ['mount', '-t', 'glusterfs', 'ip-10-154-181-123.ec2.internal:/medias_volume_0', '/mnt/storage']
2013-07-01 13:45:21,002 unit:oscied-transform/1: unit.hook.api INFO: [DEBUG] Execute ['screen', '-ls', 'Transform']
2013-07-01 13:45:21,344 unit:oscied-transform/1: unit.hook.api INFO: [REMARK] Transform successfully started !
2013-07-01 13:45:21,676 unit:oscied-transform/1: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:45:22,009 unit:oscied-transform/1: unit.hook.api INFO: <-- Exiting TransformHooks.py
2013-07-01 13:45:22,059 unit:oscied-transform/1: hook.output DEBUG: hook storage-relation-changed exited, exit code 0.
2013-07-01 13:45:22,078 unit:oscied-transform/1: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-transform-1/charm/hooks/storage-relation-changed
2013-07-01 13:45:22,080 unit:oscied-transform/1: hook.scheduler DEBUG: executing hook for oscied-storage/1:modified
2013-07-01 13:45:22,147 unit:oscied-transform/1: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['transform:5']
2013-07-01 13:45:22,154 unit:oscied-transform/1: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:45:22,155 unit:oscied-transform/1: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-transform-1/charm/hooks/storage-relation-changed
2013-07-01 13:45:23,090 unit:oscied-transform/1: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:45:23,439 unit:oscied-transform/1: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:45:23,773 unit:oscied-transform/1: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:45:24,109 unit:oscied-transform/1: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-transform/1', 'public_address': 'ec2-50-16-38-137.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-152-161-89.ec2.internal', 'juju_log': <function callable_command at 0x260a2a8>, 'config': {u'storage_mountpoint': u'', 'verbose': True, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'transform_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 1, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u''}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media transform. Contains ffmpeg & x264.\nCan be scaled to multiple instances.\n", 'name': 'oscied-transform', 'requires': {'storage': {'interface': 'mount'}, 'transform': {'interface': 'subordinate'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Encoder"}}
2013-07-01 13:45:24,442 unit:oscied-transform/1: unit.hook.api INFO: --> Entering TransformHooks.py
2013-07-01 13:45:24,772 unit:oscied-transform/1: unit.hook.api INFO: [HOOK] Execute TransformHooks hook storage-relation-changed
2013-07-01 13:45:26,430 unit:oscied-transform/1: unit.hook.api INFO: [DEBUG] Storage address is ip-10-164-47-249.ec2.internal, fstype: , mountpoint: , options: 
2013-07-01 13:45:26,769 unit:oscied-transform/1: unit.hook.api INFO: [REMARK] Waiting for complete setup !
2013-07-01 13:45:27,102 unit:oscied-transform/1: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:45:27,174 unit:oscied-transform/2: unit.hook.api INFO: [REMARK] Shared storage successfully registered !
2013-07-01 13:45:27,435 unit:oscied-transform/1: unit.hook.api INFO: <-- Exiting TransformHooks.py
2013-07-01 13:45:27,485 unit:oscied-transform/1: hook.output DEBUG: hook storage-relation-changed exited, exit code 0.
2013-07-01 13:45:27,506 unit:oscied-transform/1: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-transform-1/charm/hooks/storage-relation-changed
2013-07-01 13:45:27,508 unit:oscied-transform/1: hook.scheduler DEBUG: executing hook for oscied-storage/2:modified
2013-07-01 13:45:27,516 unit:oscied-transform/2: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:45:27,584 unit:oscied-transform/1: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['transform:5']
2013-07-01 13:45:27,598 unit:oscied-transform/1: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:45:27,598 unit:oscied-transform/1: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-transform-1/charm/hooks/storage-relation-changed
2013-07-01 13:45:27,863 unit:oscied-transform/2: unit.hook.api INFO: [DEBUG] Execute ['screen', '-ls', 'Transform']
2013-07-01 13:45:28,531 unit:oscied-transform/1: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:45:28,880 unit:oscied-transform/1: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:45:29,217 unit:oscied-transform/1: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:45:29,555 unit:oscied-transform/1: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-transform/1', 'public_address': 'ec2-50-16-38-137.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-152-161-89.ec2.internal', 'juju_log': <function callable_command at 0x15da2a8>, 'config': {u'storage_mountpoint': u'', 'verbose': True, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'transform_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 1, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u''}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media transform. Contains ffmpeg & x264.\nCan be scaled to multiple instances.\n", 'name': 'oscied-transform', 'requires': {'storage': {'interface': 'mount'}, 'transform': {'interface': 'subordinate'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Encoder"}}
2013-07-01 13:45:29,886 unit:oscied-transform/1: unit.hook.api INFO: --> Entering TransformHooks.py
2013-07-01 13:45:30,219 unit:oscied-transform/1: unit.hook.api INFO: [HOOK] Execute TransformHooks hook storage-relation-changed
2013-07-01 13:45:31,901 unit:oscied-transform/1: unit.hook.api INFO: [DEBUG] Storage address is ip-10-202-41-54.ec2.internal, fstype: , mountpoint: , options: 
2013-07-01 13:45:32,236 unit:oscied-transform/1: unit.hook.api INFO: [REMARK] Waiting for complete setup !
2013-07-01 13:45:32,572 unit:oscied-transform/1: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:45:32,907 unit:oscied-transform/1: unit.hook.api INFO: <-- Exiting TransformHooks.py
2013-07-01 13:45:32,957 unit:oscied-transform/1: hook.output DEBUG: hook storage-relation-changed exited, exit code 0.
2013-07-01 13:45:32,978 unit:oscied-transform/1: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-transform-1/charm/hooks/storage-relation-changed
2013-07-01 13:45:32,980 unit:oscied-transform/1: hook.scheduler DEBUG: executing hook for oscied-storage/3:modified
2013-07-01 13:45:33,048 unit:oscied-transform/1: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['transform:5']
2013-07-01 13:45:33,058 unit:oscied-transform/1: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:45:33,059 unit:oscied-transform/1: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-transform-1/charm/hooks/storage-relation-changed
2013-07-01 13:45:33,239 unit:oscied-transform/2: unit.hook.api INFO: [DEBUG] Execute ['screen', '-ls', 'Transform']
2013-07-01 13:45:33,609 unit:oscied-transform/2: unit.hook.api INFO: [REMARK] Transform successfully started !
2013-07-01 13:45:33,956 unit:oscied-transform/2: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:45:34,021 unit:oscied-transform/1: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:45:34,303 unit:oscied-transform/2: unit.hook.api INFO: <-- Exiting TransformHooks.py
2013-07-01 13:45:34,381 unit:oscied-transform/1: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:45:34,355 unit:oscied-transform/2: hook.output DEBUG: hook storage-relation-changed exited, exit code 0.
2013-07-01 13:45:34,383 unit:oscied-transform/2: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-transform-2/charm/hooks/storage-relation-changed
2013-07-01 13:45:34,385 unit:oscied-transform/2: hook.scheduler DEBUG: executing hook for oscied-storage/1:modified
2013-07-01 13:45:34,469 unit:oscied-transform/2: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['transform:5']
2013-07-01 13:45:34,479 unit:oscied-transform/2: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:45:34,479 unit:oscied-transform/2: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-transform-2/charm/hooks/storage-relation-changed
2013-07-01 13:45:34,720 unit:oscied-transform/1: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:45:35,056 unit:oscied-transform/1: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-transform/1', 'public_address': 'ec2-50-16-38-137.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-152-161-89.ec2.internal', 'juju_log': <function callable_command at 0x13bf2a8>, 'config': {u'storage_mountpoint': u'', 'verbose': True, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'transform_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 1, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u''}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media transform. Contains ffmpeg & x264.\nCan be scaled to multiple instances.\n", 'name': 'oscied-transform', 'requires': {'storage': {'interface': 'mount'}, 'transform': {'interface': 'subordinate'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Encoder"}}
2013-07-01 13:45:35,388 unit:oscied-transform/1: unit.hook.api INFO: --> Entering TransformHooks.py
2013-07-01 13:45:35,463 unit:oscied-transform/2: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:45:35,719 unit:oscied-transform/1: unit.hook.api INFO: [HOOK] Execute TransformHooks hook storage-relation-changed
2013-07-01 13:45:35,828 unit:oscied-transform/2: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:45:36,177 unit:oscied-transform/2: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:45:36,532 unit:oscied-transform/2: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-transform/2', 'public_address': 'ec2-54-235-228-173.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-154-190-123.ec2.internal', 'juju_log': <function callable_command at 0x293d2a8>, 'config': {u'storage_mountpoint': u'', 'verbose': True, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'transform_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 1, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u''}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media transform. Contains ffmpeg & x264.\nCan be scaled to multiple instances.\n", 'name': 'oscied-transform', 'requires': {'storage': {'interface': 'mount'}, 'transform': {'interface': 'subordinate'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Encoder"}}
2013-07-01 13:45:36,883 unit:oscied-transform/2: unit.hook.api INFO: --> Entering TransformHooks.py
2013-07-01 13:45:37,232 unit:oscied-transform/2: unit.hook.api INFO: [HOOK] Execute TransformHooks hook storage-relation-changed
2013-07-01 13:45:37,372 unit:oscied-transform/1: unit.hook.api INFO: [DEBUG] Storage address is ip-10-164-37-115.ec2.internal, fstype: , mountpoint: , options: 
2013-07-01 13:45:37,710 unit:oscied-transform/1: unit.hook.api INFO: [REMARK] Waiting for complete setup !
2013-07-01 13:45:38,042 unit:oscied-transform/1: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:45:38,375 unit:oscied-transform/1: unit.hook.api INFO: <-- Exiting TransformHooks.py
2013-07-01 13:45:38,425 unit:oscied-transform/1: hook.output DEBUG: hook storage-relation-changed exited, exit code 0.
2013-07-01 13:45:38,449 unit:oscied-transform/1: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-transform-1/charm/hooks/storage-relation-changed
2013-07-01 13:45:38,451 unit:oscied-transform/1: hook.scheduler DEBUG: executing hook for oscied-storage/4:modified
2013-07-01 13:45:38,512 unit:oscied-transform/1: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['transform:5']
2013-07-01 13:45:38,529 unit:oscied-transform/1: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:45:38,529 unit:oscied-transform/1: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-transform-1/charm/hooks/storage-relation-changed
2013-07-01 13:45:38,991 unit:oscied-transform/2: unit.hook.api INFO: [DEBUG] Storage address is ip-10-164-47-249.ec2.internal, fstype: , mountpoint: , options: 
2013-07-01 13:45:39,345 unit:oscied-transform/2: unit.hook.api INFO: [REMARK] Waiting for complete setup !
2013-07-01 13:45:39,457 unit:oscied-transform/1: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:45:39,699 unit:oscied-transform/2: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:45:39,815 unit:oscied-transform/1: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:45:40,047 unit:oscied-transform/2: unit.hook.api INFO: <-- Exiting TransformHooks.py
2013-07-01 13:45:40,104 unit:oscied-transform/2: hook.output DEBUG: hook storage-relation-changed exited, exit code 0.
2013-07-01 13:45:40,151 unit:oscied-transform/1: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:45:40,135 unit:oscied-transform/2: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-transform-2/charm/hooks/storage-relation-changed
2013-07-01 13:45:40,137 unit:oscied-transform/2: hook.scheduler DEBUG: executing hook for oscied-storage/2:modified
2013-07-01 13:45:40,216 unit:oscied-transform/2: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['transform:5']
2013-07-01 13:45:40,225 unit:oscied-transform/2: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:45:40,225 unit:oscied-transform/2: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-transform-2/charm/hooks/storage-relation-changed
2013-07-01 13:45:40,491 unit:oscied-transform/1: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-transform/1', 'public_address': 'ec2-50-16-38-137.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-152-161-89.ec2.internal', 'juju_log': <function callable_command at 0x15802a8>, 'config': {u'storage_mountpoint': u'', 'verbose': True, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'transform_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 1, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u''}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media transform. Contains ffmpeg & x264.\nCan be scaled to multiple instances.\n", 'name': 'oscied-transform', 'requires': {'storage': {'interface': 'mount'}, 'transform': {'interface': 'subordinate'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Encoder"}}
2013-07-01 13:45:40,825 unit:oscied-transform/1: unit.hook.api INFO: --> Entering TransformHooks.py
2013-07-01 13:45:41,164 unit:oscied-transform/1: unit.hook.api INFO: [HOOK] Execute TransformHooks hook storage-relation-changed
2013-07-01 13:45:41,224 unit:oscied-transform/2: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:45:41,614 unit:oscied-transform/2: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:45:41,971 unit:oscied-transform/2: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:45:42,324 unit:oscied-transform/2: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-transform/2', 'public_address': 'ec2-54-235-228-173.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-154-190-123.ec2.internal', 'juju_log': <function callable_command at 0x156d2a8>, 'config': {u'storage_mountpoint': u'', 'verbose': True, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'transform_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 1, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u''}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media transform. Contains ffmpeg & x264.\nCan be scaled to multiple instances.\n", 'name': 'oscied-transform', 'requires': {'storage': {'interface': 'mount'}, 'transform': {'interface': 'subordinate'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Encoder"}}
2013-07-01 13:45:42,683 unit:oscied-transform/2: unit.hook.api INFO: --> Entering TransformHooks.py
2013-07-01 13:45:42,822 unit:oscied-transform/1: unit.hook.api INFO: [DEBUG] Storage address is ip-10-164-73-202.ec2.internal, fstype: , mountpoint: , options: 
2013-07-01 13:45:43,042 unit:oscied-transform/2: unit.hook.api INFO: [HOOK] Execute TransformHooks hook storage-relation-changed
2013-07-01 13:45:43,152 unit:oscied-transform/1: unit.hook.api INFO: [REMARK] Waiting for complete setup !
2013-07-01 13:45:43,482 unit:oscied-transform/1: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:45:43,813 unit:oscied-transform/1: unit.hook.api INFO: <-- Exiting TransformHooks.py
2013-07-01 13:45:43,863 unit:oscied-transform/1: hook.output DEBUG: hook storage-relation-changed exited, exit code 0.
2013-07-01 13:45:43,893 unit:oscied-transform/1: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-transform-1/charm/hooks/storage-relation-changed
2013-07-01 13:45:44,834 unit:oscied-transform/2: unit.hook.api INFO: [DEBUG] Storage address is ip-10-202-41-54.ec2.internal, fstype: , mountpoint: , options: 
2013-07-01 13:45:45,186 unit:oscied-transform/2: unit.hook.api INFO: [REMARK] Waiting for complete setup !
2013-07-01 13:45:45,538 unit:oscied-transform/2: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:45:45,884 unit:oscied-transform/2: unit.hook.api INFO: <-- Exiting TransformHooks.py
2013-07-01 13:45:45,936 unit:oscied-transform/2: hook.output DEBUG: hook storage-relation-changed exited, exit code 0.
2013-07-01 13:45:45,986 unit:oscied-transform/2: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-transform-2/charm/hooks/storage-relation-changed
2013-07-01 13:45:45,988 unit:oscied-transform/2: hook.scheduler DEBUG: executing hook for oscied-storage/3:modified
2013-07-01 13:45:46,065 unit:oscied-transform/2: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['transform:5']
2013-07-01 13:45:46,072 unit:oscied-transform/2: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:45:46,073 unit:oscied-transform/2: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-transform-2/charm/hooks/storage-relation-changed
2013-07-01 13:45:47,048 unit:oscied-transform/2: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:45:47,444 unit:oscied-transform/2: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:45:47,814 unit:oscied-transform/2: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:45:48,181 unit:oscied-transform/2: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-transform/2', 'public_address': 'ec2-54-235-228-173.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-154-190-123.ec2.internal', 'juju_log': <function callable_command at 0x2a5a2a8>, 'config': {u'storage_mountpoint': u'', 'verbose': True, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'transform_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 1, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u''}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media transform. Contains ffmpeg & x264.\nCan be scaled to multiple instances.\n", 'name': 'oscied-transform', 'requires': {'storage': {'interface': 'mount'}, 'transform': {'interface': 'subordinate'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Encoder"}}
2013-07-01 13:45:48,541 unit:oscied-transform/2: unit.hook.api INFO: --> Entering TransformHooks.py
2013-07-01 13:45:48,894 unit:oscied-transform/2: unit.hook.api INFO: [HOOK] Execute TransformHooks hook storage-relation-changed
2013-07-01 13:45:50,663 unit:oscied-transform/2: unit.hook.api INFO: [DEBUG] Storage address is ip-10-164-37-115.ec2.internal, fstype: , mountpoint: , options: 
2013-07-01 13:45:51,026 unit:oscied-transform/2: unit.hook.api INFO: [REMARK] Waiting for complete setup !
2013-07-01 13:45:51,383 unit:oscied-transform/2: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:45:51,741 unit:oscied-transform/2: unit.hook.api INFO: <-- Exiting TransformHooks.py
2013-07-01 13:45:51,795 unit:oscied-transform/2: hook.output DEBUG: hook storage-relation-changed exited, exit code 0.
2013-07-01 13:45:51,821 unit:oscied-transform/2: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-transform-2/charm/hooks/storage-relation-changed
2013-07-01 13:45:51,822 unit:oscied-transform/2: hook.scheduler DEBUG: executing hook for oscied-storage/4:modified
2013-07-01 13:45:51,905 unit:oscied-transform/2: hook.output DEBUG: Cached relation hook contexts on 'storage:1': ['transform:5']
2013-07-01 13:45:51,914 unit:oscied-transform/2: unit.relation.lifecycle DEBUG: Executing hook storage-relation-changed
2013-07-01 13:45:51,914 unit:oscied-transform/2: hook.executor DEBUG: Running hook: /var/lib/juju/units/oscied-transform-2/charm/hooks/storage-relation-changed
2013-07-01 13:45:52,903 unit:oscied-transform/2: unit.hook.api DEBUG: Get unit setting: 'private-address'
2013-07-01 13:45:53,280 unit:oscied-transform/2: unit.hook.api DEBUG: Get unit setting: 'public-address'
2013-07-01 13:45:53,634 unit:oscied-transform/2: unit.hook.api INFO: [DEBUG] Load metadatas from file metadata.yaml
2013-07-01 13:45:53,986 unit:oscied-transform/2: unit.hook.api INFO: [DEBUG] My __dict__ is {'local_config': {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}, 'name': 'oscied-transform/2', 'public_address': 'ec2-54-235-228-173.compute-1.amazonaws.com', 'env_uuid': 'b82cc8f3dcb641eeb5ed57d212e2c0d9', 'private_address': 'ip-10-154-190-123.ec2.internal', 'juju_log': <function callable_command at 0x13a12a8>, 'config': {u'storage_mountpoint': u'', 'verbose': True, u'rabbit_connection': u'', u'storage_nat_address': u'', u'rabbit_queues': u'transform_private', u'storage_fstype': u'', u'storage_options': u'', u'concurrency': 1, u'storage_address': u'', u'mongo_connection': u'', u'api_nat_socket': u''}, 'juju_ok': True, 'metadata': {'maintainer': 'OSCIED Main Developper <david.fischer.ch@gmail.com>', 'description': "Installs the EBU's OSCIED media transform. Contains ffmpeg & x264.\nCan be scaled to multiple instances.\n", 'name': 'oscied-transform', 'requires': {'storage': {'interface': 'mount'}, 'transform': {'interface': 'subordinate'}}, 'ensemble': 'oscied', 'summary': "EBU's OSCIED Encoder"}}
2013-07-01 13:45:54,330 unit:oscied-transform/2: unit.hook.api INFO: --> Entering TransformHooks.py
2013-07-01 13:45:54,692 unit:oscied-transform/2: unit.hook.api INFO: [HOOK] Execute TransformHooks hook storage-relation-changed
2013-07-01 13:45:56,456 unit:oscied-transform/2: unit.hook.api INFO: [DEBUG] Storage address is ip-10-164-73-202.ec2.internal, fstype: , mountpoint: , options: 
2013-07-01 13:45:56,798 unit:oscied-transform/2: unit.hook.api INFO: [REMARK] Waiting for complete setup !
2013-07-01 13:45:57,140 unit:oscied-transform/2: unit.hook.api INFO: [INFO] Save (updated) local configuration {'storage_mount_max_retry': 5, 'storage_mountpoint': 'medias_volume_0', 'verbose': None, 'hosts_file': '/etc/hosts', 'celery_template_file': 'templates/celeryconfig.py.template', 'storage_nat_address': '', 'storage_fstype': 'glusterfs', '_pickle_filename': 'local_config.pkl', 'storage_options': '', 'storage_address': 'ip-10-154-181-123.ec2.internal', 'celery_config_file': 'celeryconfig.py', 'storage_mount_sleep_delay': 5, 'api_nat_socket': '', 'storage_path': '/mnt/storage'}
2013-07-01 13:45:57,487 unit:oscied-transform/2: unit.hook.api INFO: <-- Exiting TransformHooks.py
2013-07-01 13:45:57,540 unit:oscied-transform/2: hook.output DEBUG: hook storage-relation-changed exited, exit code 0.
2013-07-01 13:45:57,574 unit:oscied-transform/2: hook.executor DEBUG: Hook complete: /var/lib/juju/units/oscied-transform-2/charm/hooks/storage-relation-changed


